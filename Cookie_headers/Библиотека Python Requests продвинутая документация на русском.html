<!doctype html > <!--[if IE 8]><html class="ie8" lang="en"> <![endif]--> <!--[if IE 9]><html class="ie9" lang="en"> <![endif]--> <!--[if gt IE 8]><!--><html lang="ru-RU"> <!--<![endif]--><head><meta charset="UTF-8" /><link media="all" href="https://pythonru.com/wp-content/cache/autoptimize/css/autoptimize_21b910094dbf24103143d6bae98c016a.css" rel="stylesheet" /><link media="screen" href="https://pythonru.com/wp-content/cache/autoptimize/css/autoptimize_7a36256b6b9498e7c3211bdef2fe8a78.css" rel="stylesheet" /><title>Библиотека Python Requests: продвинутая документация на русском</title><meta name="theme-color" content="#3776ab"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name='robots' content='max-image-preview:large' /><meta property="og:image" content="https://pythonru.com/wp-content/uploads/2020/03/prodvinutoe-rukovodstvo-po-biblioteke-python-requests.jpg" /><link rel="icon" type="image/png" href="https://pythonru.com/wp-content/uploads/2019/04/favicon.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://pythonru.com/wp-content/uploads/2018/11/bm-76x76.png"/><link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://pythonru.com/wp-content/uploads/2018/11/bm-120x120.png"/><link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://pythonru.com/wp-content/uploads/2018/11/bm-152x152.png"/><link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://pythonru.com/wp-content/uploads/2018/11/bm-114x114.png"/><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://pythonru.com/wp-content/uploads/2018/11/bm-144x144.png"/><meta name="description" content="В этом материале описаны продвинутые функции библиотеки Requests. Объекты Session Объект Session позволяет сохранять определенные параметры между" /><meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" /><link rel="canonical" href="https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests" /><meta property="og:locale" content="ru_RU" /><meta property="og:type" content="article" /><meta property="og:title" content="Библиотека Python Requests: продвинутая документация на русском" /><meta property="og:description" content="В этом материале описаны продвинутые функции библиотеки Requests. Объекты Session Объект Session позволяет сохранять определенные параметры между" /><meta property="og:url" content="https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests" /><meta property="og:site_name" content="PythonRu" /><meta property="article:published_time" content="2020-03-07T11:27:44+00:00" /><meta property="article:modified_time" content="2020-10-21T11:02:21+00:00" /><meta property="og:image" content="https://pythonru.com/wp-content/uploads/2020/03/prodvinutoe-rukovodstvo-po-biblioteke-python-requests.jpg" /><meta property="og:image:width" content="1200" /><meta property="og:image:height" content="800" /><meta name="twitter:card" content="summary" /> <script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://pythonru.com/#organization","name":"\u0411\u043b\u043e\u0433 \u043e Python","url":"https://pythonru.com/","sameAs":[],"logo":{"@type":"ImageObject","@id":"https://pythonru.com/#logo","inLanguage":"ru-RU","url":"https://pythonru.com/wp-content/uploads/2018/11/pythonru-icon.png","width":1024,"height":1024,"caption":"\u0411\u043b\u043e\u0433 \u043e Python"},"image":{"@id":"https://pythonru.com/#logo"}},{"@type":"WebSite","@id":"https://pythonru.com/#website","url":"https://pythonru.com/","name":"PythonRu","description":"\u0418\u0437\u0443\u0447\u0430\u0439\u0442\u0435 Python \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c: \u0443\u0447\u0435\u0431\u043d\u044b\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0430 Python \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0441 \u0440\u0430\u0437\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u0437\u043d\u0430\u043d\u0438\u0439, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043a\u043d\u0438\u0433 \u0438 \u043a\u0443\u0440\u0441\u043e\u0432 Python, \u043d\u043e\u0432\u043e\u0441\u0442\u0438, \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u0434\u0430, \u0441\u0442\u0430\u0442\u044c\u0438 \u0438 \u0443\u0440\u043e\u043a\u0438","publisher":{"@id":"https://pythonru.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://pythonru.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"ru-RU"},{"@type":"ImageObject","@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#primaryimage","inLanguage":"ru-RU","url":"https://pythonru.com/wp-content/uploads/2020/03/prodvinutoe-rukovodstvo-po-biblioteke-python-requests.jpg","width":1200,"height":800,"caption":"\u041f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 Python Requests"},{"@type":"WebPage","@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#webpage","url":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests","name":"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 Python Requests: \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c","isPartOf":{"@id":"https://pythonru.com/#website"},"primaryImageOfPage":{"@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#primaryimage"},"datePublished":"2020-03-07T11:27:44+00:00","dateModified":"2020-10-21T11:02:21+00:00","description":"\u0412 \u044d\u0442\u043e\u043c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 Requests. \u041e\u0431\u044a\u0435\u043a\u0442\u044b Session \u041e\u0431\u044a\u0435\u043a\u0442 Session \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043c\u0435\u0436\u0434\u0443","breadcrumb":{"@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#breadcrumb"},"inLanguage":"ru-RU","potentialAction":[{"@type":"ReadAction","target":["https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests"]}]},{"@type":"BreadcrumbList","@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://pythonru.com/","url":"https://pythonru.com/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests","url":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests","name":"\u041f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 Python Requests"}}]},{"@type":"Article","@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#article","isPartOf":{"@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#webpage"},"author":{"@id":"https://pythonru.com/#/schema/person/babedcf0b2d6f06775d738f1318009d1"},"headline":"\u041f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 Python Requests","datePublished":"2020-03-07T11:27:44+00:00","dateModified":"2020-10-21T11:02:21+00:00","mainEntityOfPage":{"@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#webpage"},"publisher":{"@id":"https://pythonru.com/#organization"},"image":{"@id":"https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests#primaryimage"},"articleSection":"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438","inLanguage":"ru-RU"},{"@type":"Person","@id":"https://pythonru.com/#/schema/person/babedcf0b2d6f06775d738f1318009d1","name":"\u041c\u0430\u043a\u0441\u0438\u043c","description":"\u042f \u0441\u043e\u0437\u0434\u0430\u043b \u044d\u0442\u043e\u0442 \u0431\u043b\u043e\u0433 \u0432 2018 \u0433\u043e\u0434\u0443, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0443\u0447\u0435\u0431\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438 \u0443\u0440\u043e\u043a\u0438 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c. \u041d\u0430 \u0441\u0430\u0439\u0442\u0435 \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0430\u0442\u0435\u0439 \u043f\u043e \u043e\u0441\u043d\u043e\u0432\u0430\u043c python \u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u043c, \u0443\u0440\u043e\u043a\u043e\u0432 \u0434\u043b\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0445 \u0438 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c."}]}</script> <link href='https://fonts.gstatic.com' crossorigin rel='preconnect' /><link rel="alternate" type="application/rss+xml" title="PythonRu &raquo; Лента" href="https://pythonru.com/feed" /> <script type='text/javascript' src='https://pythonru.com/wp-includes/js/jquery/jquery.min.js' id='jquery-core-js'></script> <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]--><link rel="amphtml" href="https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests?ysclid=l7j6z5xbvk148420769&#038;amp"> <noscript><div><img src="https://mc.yandex.ru/watch/52113229" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <script type="application/ld+json">{
                            "@context": "http://schema.org",
                            "@type": "BreadcrumbList",
                            "itemListElement": [{
                            "@type": "ListItem",
                            "position": 1,
                                "item": {
                                "@type": "WebSite",
                                "@id": "https://pythonru.com/",
                                "name": "Главная"                                               
                            }
                        },{
                            "@type": "ListItem",
                            "position": 2,
                                "item": {
                                "@type": "WebPage",
                                "@id": "https://pythonru.com/biblioteki",
                                "name": "Библиотеки"
                            }
                        },{
                            "@type": "ListItem",
                            "position": 3,
                                "item": {
                                "@type": "WebPage",
                                "@id": "https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests",
                                "name": "Продвинутое руководство по библиотеке Python Requests"                                
                            }
                        }    ]
                        }</script><link rel="icon" href="https://pythonru.com/wp-content/uploads/2018/11/cropped-pythonru-icon-32x32.png" sizes="32x32" /><link rel="icon" href="https://pythonru.com/wp-content/uploads/2018/11/cropped-pythonru-icon-192x192.png" sizes="192x192" /><link rel="apple-touch-icon" href="https://pythonru.com/wp-content/uploads/2018/11/cropped-pythonru-icon-180x180.png" /><meta name="msapplication-TileImage" content="https://pythonru.com/wp-content/uploads/2018/11/cropped-pythonru-icon-270x270.png" />  <script src="https://yandex.ru/ads/system/context.js" async></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5957015855944335"
     crossorigin="anonymous"></script> </head><body class="post-template-default single single-post postid-2199 single-format-standard prodvinutoe-rukovodstvo-po-biblioteke-python-requests global-block-template-17 td-gadgets single_template_5 td-full-layout" itemscope="itemscope" itemtype="https://schema.org/WebPage"><div class="td-menu-background"></div><div id="td-mobile-nav"><div class="td-mobile-container"><div class="td-menu-socials-wrap"><div class="td-menu-socials"></div><div class="td-mobile-close"> <a href="#"><i class="td-icon-close-mobile"></i></a></div></div><div class="td-mobile-content"><div class="menu-td-demo-header-menu-container"><ul id="menu-td-demo-header-menu" class="td-mobile-main-menu"><li id="menu-item-507" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-first menu-item-507"><a href="https://pythonru.com/osnovy">Основы</a></li><li id="menu-item-508" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-508"><a href="https://pythonru.com/uroki">Уроки</a></li><li id="menu-item-4408" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4408"><a href="https://pythonru.com/kursy-programmirovaniya-na-python">Курсы</a></li><li id="menu-item-509" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-509"><a href="https://pythonru.com/primery">Примеры</a></li><li id="menu-item-511" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-511"><a href="https://pythonru.com/biblioteki">Библиотеки</a></li><li id="menu-item-512" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-512"><a href="https://pythonru.com/baza-znanij">База знаний</a></li></ul></div></div></div></div><div class="td-search-background"></div><div class="td-search-wrap-mob"><div class="td-drop-down-search" aria-labelledby="td-header-search-button"><form method="get" class="td-search-form" action="https://pythonru.com/"><div class="td-search-close"> <a href="#"><i class="td-icon-close-mobile"></i></a></div><div role="search" class="td-search-input"> <span>Поиск</span> <input id="td-header-search-mob" type="text" value="" name="s" autocomplete="off" /></div></form><div id="td-aj-search-mob"></div></div></div><div id="td-outer-wrap" class="td-theme-wrap"><div class="td-header-wrap td-header-style-5 "><div class="td-header-top-menu-full td-container-wrap td_stretch_content"><div class="td-container td-header-row td-header-top-menu"></div></div><div class="td-header-menu-wrap-full td-container-wrap td_stretch_content"><div class="td-header-menu-wrap "><div class="td-container td-header-row td-header-main-menu black-menu"><div id="td-header-menu" role="navigation"><div id="td-top-mobile-toggle"><a href="#"><i class="td-icon-font td-icon-mobile"></i></a></div><div class="td-main-menu-logo td-logo-in-menu"> <a class="td-mobile-logo td-sticky-header" href="https://pythonru.com/"> <img class="td-retina-data" data-retina="https://pythonru.com/wp-content/uploads/2018/11/pythonru-280x96.png"  width="272" height="90" src="https://pythonru.com/wp-content/uploads/2018/11/pythonru-140x48.png" alt="PythonRu" title="На главную"/> </a> <a class="td-header-logo td-sticky-header" href="https://pythonru.com/"> <img class="td-retina-data" data-retina="https://pythonru.com/wp-content/uploads/2018/11/pythonru-544x180.png"width="272" height="90"  src="https://pythonru.com/wp-content/uploads/2018/11/pythonru-272x90.png" alt="PythonRu" title="На главную"/> <span class="td-visual-hidden">PythonRu</span> </a></div><div class="menu-td-demo-header-menu-container"><ul id="menu-td-demo-header-menu-1" class="sf-menu"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-first td-menu-item td-normal-menu menu-item-507"><a href="https://pythonru.com/osnovy">Основы</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category td-menu-item td-normal-menu menu-item-508"><a href="https://pythonru.com/uroki">Уроки</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page td-menu-item td-normal-menu menu-item-4408"><a href="https://pythonru.com/kursy-programmirovaniya-na-python">Курсы</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category td-menu-item td-normal-menu menu-item-509"><a href="https://pythonru.com/primery">Примеры</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent td-menu-item td-normal-menu menu-item-511"><a href="https://pythonru.com/biblioteki">Библиотеки</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category td-menu-item td-normal-menu menu-item-512"><a href="https://pythonru.com/baza-znanij">База знаний</a></li></ul></div></div><div class="td-header-menu-social"></div><div class="header-search-wrap"><div class="td-search-btns-wrap"> <a id="td-header-search-button" href="#" role="button" class="dropdown-toggle " data-toggle="dropdown"><i class="td-icon-search"></i></a> <a id="td-header-search-button-mob" href="#" role="button" class="dropdown-toggle " data-toggle="dropdown"><i class="td-icon-search"></i></a></div><div class="td-drop-down-search" aria-labelledby="td-header-search-button"><form method="get" class="td-search-form" action="https://pythonru.com/"><div role="search" class="td-head-form-search-wrap"> <input id="td-header-search" type="text" value="" name="s" autocomplete="off" /><input class="wpb_button wpb_btn-inverse btn" type="submit" id="td-header-search-top" value="Поиск" /></div></form><div id="td-aj-search"></div></div></div></div></div></div></div><div class="td-main-content-wrap td-container-wrap"><div class="td-container td-post-template-5 "><div class="td-crumb-container"><div class="entry-crumbs"><span><a title="" class="entry-crumb" href="https://pythonru.com/">Главная</a></span> <i class="td-icon-right td-bread-sep"></i> <span><a title="Просмотреть все посты в Библиотеки" class="entry-crumb" href="https://pythonru.com/biblioteki">Библиотеки</a></span> <i class="td-icon-right td-bread-sep td-bred-no-url-last"></i> <span class="td-bred-no-url-last">Продвинутое руководство по библиотеке Python Requests</span></div></div><div class="td-pb-row"><div class="td-pb-span8 td-main-content" role="main"><div class="td-ss-main-content"><article id="post-2199" class="post-2199 post type-post status-publish format-standard has-post-thumbnail hentry category-biblioteki" itemscope itemtype="https://schema.org/Article"><div class="td-post-header"><header class="td-post-title"><h1 class="entry-title">Продвинутое руководство по библиотеке Python Requests</h1><div class="td-module-meta-info"></div></header></div><div class="td-post-content" itemprop="articleBody"><div class="td-w-reb td-w-reb-id-content_top  td_uid_4_6310cd3d7c429_rand td_block_template_17"><div id="yandex_rtb_R-A-1311574-1"></div></div><index><div class="stackedit__html"><p>В этом материале описаны продвинутые функции <a href="https://pythonru.com/biblioteki/kratkoe-rukovodstvo-po-biblioteke-python-requests" target="_self" rel="noopener noreferrer" data-wpel-link="internal">библиотеки Requests</a>.</p><h2 id="объекты-session"><span class="ez-toc-section" id="%D0%9E%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-Session"></span>Объекты Session<span class="ez-toc-section-end"></span></h2><p>Объект <code>Session</code> позволяет сохранять определенные параметры между запросами. Он же сохраняет куки всех запросов, сделанных из экземпляра <code>Session</code>.</p><p>Объект <code>Session</code> включает все методы основного API Requests.</p><p>Попробуем передать куки между запросами:</p><pre class=" language-py"><code class="prism language-py">s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>

s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/cookies/set/sessioncookie/123456789'</span><span class="token punctuation">)</span>
r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://httpbin.org/cookies"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token comment"># '{"cookies": {"sessioncookie": "123456789"}}'</span>
</code></pre><p><code>Session</code> могут также использоваться для предоставления данных по умолчанию для методов запроса. Для этого их нужно передать в параметры объекта:</p><pre class=" language-py"><code class="prism language-py">s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'pass'</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'x-test'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># отправка с 'x-test' и 'x-test2'</span>
s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/headers'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'x-test2'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="td-w-reb td-w-reb-id-content_inline  td_uid_1_6310cd3d7b490_rand td_block_template_17"><div id="yandex_rtb_R-A-1311574-17"></div></div><p>Любые словари, переданные методу запроса? будут объединены с заданными значениями уровня сессии. Параметры уровня методов перезаписывают параметры сессии.</p><blockquote><p>Удалите значение из параметра словаря:<br /> Иногда нужно будет не включать ключи уровня сессии в параметры словаря. Для этого необходимо установить значения ключа <code>None</code> в параметре уровня методов. Они будут пропускаться автоматически.</p></blockquote><p>Все значения, содержащиеся в сессии, прямо доступны. Подробнее об этом в <a href="https://requests.readthedocs.io/en/v1.1.0/api/#sessionapi" data-wpel-link="external" target="_blank" rel="noopener">документации API Session</a>.</p><h2 id="объекты-запросов-и-ответов"><span class="ez-toc-section" id="%D0%9E%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2-%D0%B8-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%BE%D0%B2"></span>Объекты запросов и ответов<span class="ez-toc-section-end"></span></h2><p>Каждый раз при вызове запроса происходят две вещи. Во-первых, создается объект <code>Request</code>, который будет направлен на сервер, чтобы сделать запрос или вернуть определенный ресурс. Во-вторых, когда библиотека получает ответ от сервера, генерируется объект <code>Response</code>. Он содержит всю информацию, которую вернул сервер и оригинальный объект <code>Request</code>. Вот простой запрос для получения крайне важной информации с серверов Википедии:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://ru.wikipedia.org/wiki/Монти_Пайтон'</span><span class="token punctuation">)</span>
</code></pre><p>Если нужно получить доступ к заголовкам, которые вернул сервер, делается следующее:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>headers
<span class="token punctuation">{</span><span class="token string">'Date'</span><span class="token punctuation">:</span> <span class="token string">'Fri, 06 Mar 2020 10:40:21 GMT'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/html; charset=UTF-8'</span><span class="token punctuation">,</span> 
<span class="token string">'Server'</span><span class="token punctuation">:</span> <span class="token string">'mw1258.eqiad.wmnet'</span><span class="token punctuation">,</span> <span class="token string">'X-Powered-By'</span><span class="token punctuation">:</span> <span class="token string">'PHP/7.2.26-1+0~20191218.33+debian9~1.gbpb5a340+wmf1'</span><span class="token punctuation">,</span> 
<span class="token string">'X-Content-Type-Options'</span><span class="token punctuation">:</span> <span class="token string">'nosniff'</span><span class="token punctuation">,</span> <span class="token string">'P3P'</span><span class="token punctuation">:</span> <span class="token string">'CP="See [https://ru.wikipedia.org/wiki/Special:CentralAutoLogin/P3P](https://ru.wikipedia.org/wiki/Special:CentralAutoLogin/P3P) for more info."'</span><span class="token punctuation">,</span> 
<span class="token string">'Content-language'</span><span class="token punctuation">:</span> <span class="token string">'ru'</span><span class="token punctuation">,</span> <span class="token string">'Vary'</span><span class="token punctuation">:</span> <span class="token string">'Accept-Encoding,Cookie,Authorization'</span><span class="token punctuation">,</span> 
<span class="token string">'Last-Modified'</span><span class="token punctuation">:</span> <span class="token string">'Fri, 21 Feb 2020 10:40:21 GMT'</span><span class="token punctuation">,</span> <span class="token string">'Backend-Timing'</span><span class="token punctuation">:</span> <span class="token string">'D=181758 t=1583491220993575'</span><span class="token punctuation">,</span> 
<span class="token string">'X-ATS-Timestamp'</span><span class="token punctuation">:</span> <span class="token string">'1583491221'</span><span class="token punctuation">,</span> <span class="token string">'Content-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip'</span><span class="token punctuation">,</span> 
<span class="token string">'X-Varnish'</span><span class="token punctuation">:</span> <span class="token string">'1017342992 492505475'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">:</span> <span class="token string">'82909'</span><span class="token punctuation">,</span> <span class="token string">'X-Cache'</span><span class="token punctuation">:</span> <span class="token string">'cp3050 miss, cp3056 hit/43'</span><span class="token punctuation">,</span> 
<span class="token string">'X-Cache-Status'</span><span class="token punctuation">:</span> <span class="token string">'hit-front'</span><span class="token punctuation">,</span> <span class="token string">'Server-Timing'</span><span class="token punctuation">:</span> <span class="token string">'cache;desc="hit-front"'</span><span class="token punctuation">,</span>
<span class="token string">'Strict-Transport-Security'</span><span class="token punctuation">:</span> <span class="token string">'max-age=106384710; includeSubDomains; preload'</span><span class="token punctuation">,</span> 
<span class="token string">'X-Client-IP'</span><span class="token punctuation">:</span> <span class="token string">'111.111.111.1'</span><span class="token punctuation">,</span> <span class="token string">'Cache-Control'</span><span class="token punctuation">:</span> <span class="token string">'private, s-maxage=0, max-age=0, must-revalidate'</span><span class="token punctuation">,</span> 
<span class="token string">'Accept-Ranges'</span><span class="token punctuation">:</span> <span class="token string">'bytes'</span><span class="token punctuation">,</span> <span class="token string">'Content-Length'</span><span class="token punctuation">:</span> <span class="token string">'41759'</span><span class="token punctuation">,</span> <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">}</span>
</code></pre><p>А если нужны те, что были направлены серверу, тогда сперва нужно получить доступ к запросу, а потом — к его заголовкам:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>request<span class="token punctuation">.</span>headers
<span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'python-requests/2.21.0'</span><span class="token punctuation">,</span> <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span> <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'*/*'</span><span class="token punctuation">,</span> <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">}</span>
</code></pre><h2 id="подготовка-запросов"><span class="ez-toc-section" id="%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2"></span>Подготовка запросов<span class="ez-toc-section-end"></span></h2><div class="td-w-reb td-w-reb-id-content_inline1  td_uid_2_6310cd3d7bd03_rand td_block_template_17"><div id="yandex_rtb_R-A-1311574-2"></div><div id="eng"></div></div><p>При получении объекта <code>Response</code> от вызова API или <code>Session</code>, используется атрибут <code>PreparedRequest</code> функции <code>request</code>. В некоторых случаях над телом и заголовками (и чем угодно еще) можно будет провести дополнительную работу перед отправкой запроса. Простейший способ следующий:</p><pre class=" language-py"><code class="prism language-py">s <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>

req <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
prepped <span class="token operator">=</span> req<span class="token punctuation">.</span>prepare<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># делаем что-то с prepped.body</span>
prepped<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'No, I want exactly this as the body.'</span>

<span class="token comment"># делаем что-то с prepped.headers</span>
<span class="token keyword">del</span> prepped<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span>

resp <span class="token operator">=</span> s<span class="token punctuation">.</span>send<span class="token punctuation">(</span>prepped<span class="token punctuation">,</span>
    stream<span class="token operator">=</span>stream<span class="token punctuation">,</span>
    verify<span class="token operator">=</span>verify<span class="token punctuation">,</span>
    proxies<span class="token operator">=</span>proxies<span class="token punctuation">,</span>
    cert<span class="token operator">=</span>cert<span class="token punctuation">,</span>
    timeout<span class="token operator">=</span>timeout
<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>
</code></pre><p>Поскольку с объектом <code>Request</code> не происходит ничего особенного, его можно сразу подготовить и изменить объект <code>PreparedRequest</code>. Затем он отправляется с остальными параметрами, которые вы бы отправили в <code>requests.*</code> или <code>Session.*</code>.</p><p>Однако этот код лишен кое-каких преимуществ использования объекта <code>Session</code>. Если точнее, состояние уровня <code>Session</code>, например куки, не будет применено к запросу. Чтобы получить <code>PreparedRequest</code> с примененным состоянием, замените вызов к <code>Request.prepare()</code> вызовом к <code>Session.prepare_request()</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">from</span> requests <span class="token keyword">import</span> Request<span class="token punctuation">,</span> Session

s <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
req <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span>  url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

prepped <span class="token operator">=</span> s<span class="token punctuation">.</span>prepare_request<span class="token punctuation">(</span>req<span class="token punctuation">)</span>

<span class="token comment"># делаем что-то с prepped.body</span>
prepped<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'Seriously, send exactly these bytes.'</span>

<span class="token comment"># делаем что-то с prepped.headers</span>
prepped<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Keep-Dead'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'parrot'</span>

resp <span class="token operator">=</span> s<span class="token punctuation">.</span>send<span class="token punctuation">(</span>prepped<span class="token punctuation">,</span>
    stream<span class="token operator">=</span>stream<span class="token punctuation">,</span>
    verify<span class="token operator">=</span>verify<span class="token punctuation">,</span>
    proxies<span class="token operator">=</span>proxies<span class="token punctuation">,</span>
    cert<span class="token operator">=</span>cert<span class="token punctuation">,</span>
    timeout<span class="token operator">=</span>timeout
<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>
</code></pre><p>При использовании потока “prepared request” помните, что он не учитывает окружение. Это может привести к проблемам в том случае, если переменные окружения используются для изменения поведения запросов. Например: самозаверенные SSL-сертификаты, определенные в <code>REQUESTS_CA_BUNDLE</code>, учитываться не будут. Результат — <code>SSL: CERTIFICATE_VERIFY_FAILED</code>. Обойти это поведение можно, явно объединив настройки окружения с сессией:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">from</span> requests <span class="token keyword">import</span> Request<span class="token punctuation">,</span> Session

s <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
req <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>

prepped <span class="token operator">=</span> s<span class="token punctuation">.</span>prepare_request<span class="token punctuation">(</span>req<span class="token punctuation">)</span>

<span class="token comment"># Объединяем настройки среды в сессию</span>
settings <span class="token operator">=</span> s<span class="token punctuation">.</span>merge_environment_settings<span class="token punctuation">(</span>prepped<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
resp <span class="token operator">=</span> s<span class="token punctuation">.</span>send<span class="token punctuation">(</span>prepped<span class="token punctuation">,</span> <span class="token operator">**</span>settings<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>
</code></pre><h2 id="проверка-сертификата-ssl"><span class="ez-toc-section" id="%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0-SSL"></span>Проверка сертификата SSL<span class="ez-toc-section-end"></span></h2><p>Библиотека Requests может верифицировать SSL-сертификаты для HTTPS-запросов так же, как и браузер. Для проверки сертификата хоста, нужно просто добавить аргумент <code>verify</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://kennethreitz.com'</span><span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><pre><code>requests.exceptions.SSLError: hostname 'kennethreitz.com' 	
doesn't match either of '*.herokuapp.com', 'herokuapp.com'
</code></pre><div class="td-w-reb td-w-reb-id-content_inline2  td_uid_3_6310cd3d7bf81_rand td_block_template_17"><div id="yandex_rtb_R-A-1311574-3"></div><div id="gb"></div></div><p>Если такового нет или он недействителен, вернется <a href="https://pythonru.com/osnovy/znachenija-iskljuchenij-i-oshibok-v-python" data-wpel-link="internal" target="_self" rel="noopener">ошибка SSLError</a>. Но у Github, например, есть:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><pre><code>&lt;Response [200]&gt;
</code></pre><p><code>verify</code> можно передать и файлу <code>CA_BUNDLE</code> для частных сертификатов. Или же настроить переменную среды <code>REQUESTS_CA_BUNDLE</code>.</p><p>Библиотека может игнорировать проверку SSL-сертификатов, если значение <code>verify</code> — <code>False</code>.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://kennethreitz.com'</span><span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre><pre><code>&lt;Response [200]&gt;
</code></pre><p>По умолчанию значение <code>verify</code> — <code>True</code>. Параметр подходит только для сертификатов хостов.</p><p>Можно также определить файл локального сертификата в виде пути или пары ключ-значение:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://kennethreitz.com'</span><span class="token punctuation">,</span> cert<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'/path/server.crt'</span><span class="token punctuation">,</span> <span class="token string">'/path/key'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><pre><code>&lt;Response [200]&gt;
</code></pre><p>Если указан неправильный путь или недействительный сертификат, произойдет следующее:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://kennethreitz.com'</span><span class="token punctuation">,</span> cert<span class="token operator">=</span><span class="token string">'/wrong_path/server.pem'</span><span class="token punctuation">)</span>
</code></pre><pre><code>SSLError: [Errno 336265225] _ssl.c:347: error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib
</code></pre><h2 id="работа-с-содержанием-ответа"><span class="ez-toc-section" id="%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0"></span>Работа с содержанием ответа<span class="ez-toc-section-end"></span></h2><p>По умолчанию при запросе тело ответа загружается сразу же. Переписать это поведение и отсрочить загрузку тела ответа до того момента, пока не будет получен доступ к атрибуту <code>Response.content</code>, можно с помощью параметра <code>stream</code>:</p><pre class=" language-py"><code class="prism language-py">tarball_url <span class="token operator">=</span> <span class="token string">'https://github.com/kennethreitz/requests/tarball/master'</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>tarball_url<span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><p>Сейчас загружаются только заголовки ответа, а соединение остается открытым. Это позволяет сделать получение контента по условию:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-length'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> TOO_LONG<span class="token punctuation">:</span>
  content <span class="token operator">=</span> r<span class="token punctuation">.</span>content
  <span class="token comment"># ...</span>
</code></pre><p>Можно и дальше контролировать процесс работы с помощью методов <code>Response.iter_content</code> и <code>Response.iter_lines</code> или чтения их из лежащей в основе библиотеки urllib3 <code>urllib3.HTTPResponse</code> в <code>Response.raw</code>.</p><h2 id="постоянное-соединение"><span class="ez-toc-section" id="%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D0%BE%D0%B5-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5"></span>Постоянное соединение<span class="ez-toc-section-end"></span></h2><p>Благодаря urllib3 постоянное соединение поддерживается на 100% автоматически прямо в сессии. Любые запросы в сессии будут автоматически использовать соответствующее соединение.</p><p>Стоит отметить, что соединения сбрасываются и возвращаются в пул для повторного использовать только после чтения данных тела. Важно задать значение <code>stream</code> равным <code>False</code> или читать свойство <code>property</code> объекта <code>Response</code>.</p><h2 id="потоковые-загрузки"><span class="ez-toc-section" id="%D0%9F%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8"></span>Потоковые загрузки<span class="ez-toc-section-end"></span></h2><p>Requests поддерживает потоковые загрузки, которые позволяют отправлять крупные потоки или файлы без их чтения прямо в память. Для этого нужно предоставить <a href="https://pythonru.com/osnovy/fajly-v-python-vvod-vyvod" target="_self" rel="noopener noreferrer" data-wpel-link="internal">файловый объект</a> в <code>data</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'massive-body'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    request<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://some.url/streamed'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>f<span class="token punctuation">)</span>
</code></pre><h2 id="запросы-для-данных-разбитых-на-части-chunk-encoded"><span class="ez-toc-section" id="%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B-%D0%B4%D0%BB%D1%8F-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D1%82%D1%8B%D1%85-%D0%BD%D0%B0-%D1%87%D0%B0%D1%81%D1%82%D0%B8-chunk-encoded"></span>Запросы для данных, разбитых на части (chunk-encoded)<span class="ez-toc-section-end"></span></h2><p>Requests также поддерживает механизм передачи с разбиением на части для входящих и исходящих запросов. Для отправления такого нужно предоставить генератор (или любой итератор без определенной длины) в <code>data</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token string">'hi'</span>
    <span class="token keyword">yield</span> <span class="token string">'there'</span>

request<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://some.url/chunked'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>gen<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><h2 id="post-для-нескольких-файлов-типа-multipart"><span class="ez-toc-section" id="POST-%D0%B4%D0%BB%D1%8F-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D1%82%D0%B8%D0%BF%D0%B0-multipart"></span>POST для нескольких файлов типа multipart<span class="ez-toc-section-end"></span></h2><p>Можно отправить несколько файлов одним запросом. Например, предположим, необходимо загрузить файлы изображений в HTML-форму <code>images</code> для нескольких файлов :</p><noindex><div class="clear"></div><div id="yandex_rtb_R-A-1311574-4"></div><div class="clear"></div><br></noindex><pre class=" language-html"><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>images<span class="token punctuation">"</span></span> <span class="token attr-name">multiple</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><p>Чтобы сделать это, просто представьте файлы в виде списка кортежей такого формата <code>(form_field_name, file_info)</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">'https://httpbin.org/post'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> multiple_files <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'foo.png'</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'foo.png'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'bar.png'</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'bar.png'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> files<span class="token operator">=</span>multiple_files<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>text
<span class="token punctuation">{</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token string">'files'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'images'</span><span class="token punctuation">:</span> <span class="token string">'data:image/png;base64,iVBORw ....'</span><span class="token punctuation">}</span>
 <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data; boundary=3131623adb2043caaeb5538cc7aa0b3a'</span><span class="token punctuation">,</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><blockquote><p><strong>Предупреждение:</strong><br /> Рекомендуется открывать файлы в бинарном режиме. Это важно, потому что <code>Requests</code> может попробовать предоставить заголовок <code>Content-Length</code>. В таком случае значением будет количеством байт в файле. А ошибки возникнут, если открыть файл в текстовом режиме.</p></blockquote><h2 id="хуки-перехват-управления"><span class="ez-toc-section" id="%D0%A5%D1%83%D0%BA%D0%B8-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%B2%D0%B0%D1%82-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F"></span>Хуки (перехват управления)<span class="ez-toc-section-end"></span></h2><p>В Requests есть система хуков, которую можно использовать для управления частями процесса запроса или обработки событий.</p><p>Доступные хуки:</p><ul><li><code>response</code>: ответ, сгенерированный из объекта <code>Request</code>.</li></ul><p>Можно назначать функцию перехвата для каждого запроса, передавая словарь <code>{hook_name: callback_function}</code> в параметр запроса <code>hooks</code>:</p><pre class=" language-py"><code class="prism language-py">hooks<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>response<span class="token operator">=</span>print_url<span class="token punctuation">)</span>
</code></pre><p><code>callback_function</code> получит кусок данных в качестве первого аргумента.</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">print_url</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
</code></pre><p>Если при выполнении обратного вызова произойдет ошибка, отобразится предупреждение.</p><p>Если функция вернет значение, предполагается, что оно должно заменить данные, которые были переданы. Когда функция не возвращает ничего, нет никакого эффекта.</p><p>Выведем некоторые аргументы метода запроса:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org'</span><span class="token punctuation">,</span> hooks<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>response<span class="token operator">=</span>print_url<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><pre><code>http://httpbin.org
&lt;Response [200]&gt;
</code></pre><h2 id="собственная-аутентификация"><span class="ez-toc-section" id="%D0%A1%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F-%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F"></span>Собственная аутентификация<span class="ez-toc-section-end"></span></h2><p>Requests позволяет указать собственный механизм аутентификации.</p><p>Любой вызываемый объект, передаваемый в качестве аргумента <code>auth</code> методу запроса, может изменить запрос до его отправки.</p><p>Реализации аутентификации — это подклассы <code>requests.auth.AuthBase</code>, и их легко определить. Requests предоставляет две общие схемы реализации аутентификации в <code>requests.auth:HTTPBasicAuth</code> и <code>HTTPDigestAuth</code>.</p><p>Представим, что есть веб-сервис, который отвечает только в том случае, если значение заголовка <code>X-Pizza</code> — значение пароля. Такое маловероятно, но мало ли.</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">from</span> requests<span class="token punctuation">.</span>auth <span class="token keyword">import</span> AuthBase

<span class="token keyword">class</span> <span class="token class-name">PizzaAuth</span><span class="token punctuation">(</span>AuthBase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Прикрепляет аутентификацию HTTP Pizza к данному объекту запроса."""</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># любые данные, связанные с аутентификацией</span>
        self<span class="token punctuation">.</span>username <span class="token operator">=</span> username

    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># изменить и вернуть запрос</span>
        r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'X-Pizza'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>username
        <span class="token keyword">return</span> r
</code></pre><p>Теперь можно сделать запрос с помощью <code>PizzaAuth</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://pizzabin.org/admin'</span><span class="token punctuation">,</span> auth<span class="token operator">=</span>PizzaAuth<span class="token punctuation">(</span><span class="token string">'kenneth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><pre><code>&lt;Response [200]&gt;
</code></pre><h2 id="потоковые-запросы"><span class="ez-toc-section" id="%D0%9F%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B"></span>Потоковые запросы<span class="ez-toc-section-end"></span></h2><p>С помощью <code>requests.Response.iter_lines()</code> можно запросто перебирать потоковые API, такие как <a href="https://dev.twitter.com/docs/streaming-api" data-wpel-link="external" target="_blank" rel="noopener">Twitter Streaming API</a>.</p><p>Используем его для отслеживания <a href="https://pythonru.com/osnovy/python-dict" target="_self" rel="noopener noreferrer" data-wpel-link="internal">ключа словаря</a> <code>requests</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> json

r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'https://stream.twitter.com/1/statuses/filter.json'</span><span class="token punctuation">,</span>
    data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'track'</span><span class="token punctuation">:</span> <span class="token string">'requests'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> auth<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> line <span class="token keyword">in</span> r<span class="token punctuation">.</span>iter_lines<span class="token punctuation">(</span>decode_unicode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> line<span class="token punctuation">:</span> 
        <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><h2 id="прокси"><span class="ez-toc-section" id="%D0%9F%D1%80%D0%BE%D0%BA%D1%81%D0%B8"></span>Прокси<span class="ez-toc-section-end"></span></h2><p>Если есть необходимость использовать прокси, можно настроить индивидуальные запросы с помощью аргумента <code>proxies</code> для любого метода запроса:</p><noindex><div class="clear"></div><div id="yandex_rtb_R-A-1311574-7"></div><div class="clear"></div><br></noindex><pre class=" language-py"><code class="prism language-py"><span class="token keyword">import</span> requests

proxies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"http"</span><span class="token punctuation">:</span> <span class="token string">"10.10.1.10:3128"</span><span class="token punctuation">,</span>
  <span class="token string">"https"</span><span class="token punctuation">:</span> <span class="token string">"10.10.1.10:1080"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://example.org"</span><span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span>
</code></pre><p>Также их можно настроить с помощью переменных среды <code>HTTP_PROXY</code> и <code>HTTPS_PROXY</code>.</p><pre class=" language-bash"><code class="prism language-bash">$ <span class="token function">export</span> HTTP_PROXY<span class="token operator">=</span><span class="token string">"10.10.1.10:3128"</span>
$ <span class="token function">export</span> HTTPS_PROXY<span class="token operator">=</span><span class="token string">"10.10.1.10:1080"</span>
$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> requests
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests.get<span class="token punctuation">(</span><span class="token string">"http://example.org"</span><span class="token punctuation">)</span>
</code></pre><p>Для использования HTTP Basic Auth (аутентификации) со своим прокси, используется синтаксис <code>http://user:password@host/</code>:</p><pre class=" language-py"><code class="prism language-py">proxies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"http"</span><span class="token punctuation">:</span> <span class="token string">"http://user:pass@10.10.1.10:3128/"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="socks"><span class="ez-toc-section" id="SOCKS"></span>SOCKS<span class="ez-toc-section-end"></span></h2><blockquote><p>Новое в версии 2.10.0</p></blockquote><p>В дополнение к базовым прокси HTTP Requests также поддерживает прокси с помощью протокола SOCKS. Это опциональная функция, требующая дополнительных библиотек. Их можно <a href="https://pythonru.com/baza-znanij/ustanovka-pip-dlja-python-i-bazovye-komandy" target="_self" rel="noopener noreferrer" data-wpel-link="internal">получить с помощью <code>pip</code></a>:</p><pre class=" language-bash"><code class="prism language-bash">$ pip <span class="token function">install</span> requests<span class="token punctuation">[</span>socks<span class="token punctuation">]</span>
</code></pre><p>После установки использовать прокси SOCKS так же просто, как и HTTP:</p><pre class=" language-py"><code class="prism language-py">proxies <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'http'</span><span class="token punctuation">:</span> <span class="token string">'socks5://user:pass@host:port'</span><span class="token punctuation">,</span>
    <span class="token string">'https'</span><span class="token punctuation">:</span> <span class="token string">'socks5://user:pass@host:port'</span>
<span class="token punctuation">}</span>
</code></pre><p>При использовании <code>socks5</code> разрешение DNS работает на стороне клиента, а не на стороне прокси-сервера. Это работает в соответствии с curl, который использует схему, чтобы определять, на чьей стороне разрешать DNS. Если необходимо заниматься преобразованием на стороне прокси-сервера, тогда используется <code>socks5h</code>.</p><h2 id="соответствие-стандартам"><span class="ez-toc-section" id="%D0%A1%D0%BE%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B8%D0%B5-%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%B0%D0%BC"></span>Соответствие стандартам<span class="ez-toc-section-end"></span></h2><p>Requests соответствует всем актуальным спецификациям и RFC (технические стандарты, применяемые в сети) там, где подобное соответствие не создает трудностей для пользователей. Такое внимание к спецификациям может привести к необычному поведению, которое покажется необычным для тех, кто не знаком с ними.</p><h2 id="кодировки"><span class="ez-toc-section" id="%D0%9A%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8"></span>Кодировки<span class="ez-toc-section-end"></span></h2><p>Когда вы получаете ответ, Requests предполагает, какую кодировку использовать для декодирования во время вызова метода <code>Response.text</code>. Библиотека сначала проверит кодировку в заголовке HTTP, и если там ничего не указано, воспользуется <code>charade</code>, чтобы попробовать угадать.</p><p>Она не будет вести себя подобным образом только в одном случае — если кодировка не указано явно, а значение <code>Content-Type</code> — <code>text</code>. В таком случае, согласно RFC 2616, кодировка по умолчанию — <code>ISO-8859-1</code>. Библиотека следует этому правилу. Если вам требуется другая кодировка, вы можете вручную настроить свойство <code>Response. encoding</code> или использовать сырой <code>Response.content</code>.</p><h2 id="методы-http"><span class="ez-toc-section" id="%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-HTTP"></span>Методы HTTP<span class="ez-toc-section-end"></span></h2><p>Requests предоставляет доступ ко всем методам HTTP: <code>GET, OPTIONS, HEAD, POST, PUT, PATCH, DELETE</code>. Далее будут детальные примеры того, как их использовать с GitHub API.</p><p>Начнем с самого популярного метода — <code>GET</code>. <code>GET</code> — это идемпотентный метод, который возвращает ресурс по заданному URL. Он используется для получения данных из определенного места. Пример — попытка получить информацию об определенном коммите из GitHub. Пусть будет коммит <code>a050faf</code>. Это будет выглядеть вот так:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> requests
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://api.github.com/repos/kennethreitz/requests/git/commits/a050faf084662f3a352dd1a941f2c7c9f886d4ad'</span><span class="token punctuation">)</span>
</code></pre><p>Нужно подтвердить, что GitHub ответил правильно. Если да — необходимо определить тип контента. Это делается следующим образом:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>status_code <span class="token operator">==</span> requests<span class="token punctuation">.</span>codes<span class="token punctuation">.</span>ok<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><pre><code>application/json; charset=utf-8
</code></pre><p>Итак, GitHub <a href="https://pythonru.com/osnovy/modul-json-python-dlja-raboty-s-formatom-json" target="_self" rel="noopener noreferrer" data-wpel-link="internal">возвращает <code>JSON</code></a>. Можно использовать метод <code>r.json</code> для парсинга его в объекты Python.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> commit_data <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>commit_data<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'committer'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token string">'tree'</span><span class="token punctuation">,</span> <span class="token string">'sha'</span><span class="token punctuation">,</span> <span class="token string">'parents'</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>commit_data<span class="token punctuation">[</span><span class="token string">'committer'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token string">'date'</span><span class="token punctuation">:</span> <span class="token string">'2012-05-10T11:10:50-07:00'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">:</span> <span class="token string">'me@kennethreitz.com'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Kenneth Reitz'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>commit_data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
makin' history
</code></pre><p>Пока что все просто. Но посмотрим, что еще есть в API GitHub. Можно просто почитать документацию, но еще интереснее, если просто поэкспериментировать с Requests. Используем метод <code>OPTIONS</code>, чтобы увидеть какие еще методы HTTP поддерживаются для этого ресурса.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> verbs <span class="token operator">=</span> requests<span class="token punctuation">.</span>options<span class="token punctuation">(</span>r<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> verbs<span class="token punctuation">.</span>status_code
</code></pre><pre><code>500
</code></pre><p>Оказывается, что у GitHub, как и у многих API, не реализован метод <code>OPTIONS</code>. Так что придется все-таки использовать документацию. Но если бы метод <code>OPTION</code> был реализован, он вернул бы примерно следующее.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> verbs <span class="token operator">=</span> requests<span class="token punctuation">.</span>options<span class="token punctuation">(</span><span class="token string">'http://a-good-website.com/api/cats'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>verbs<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'allow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><pre><code>GET,HEAD,POST,OPTIONS
</code></pre><p>В документации указано, что единственные разрешенные методы для коммитов — <code>POST</code>. Они создают новые коммиты. Но поскольку используется репозиторий Requests, лучше не делать туда бесполезные <code>POST</code>. Вместо этого можно поиграть с функцией Issues.</p><p>Эта документация была добавлена в ответ на “Issue #482”. Возьмем ее в качестве примера.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://api.github.com/repos/kennethreitz/requests/issues/482'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">200</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> issue <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>issue<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Feature <span class="token builtin">any</span> http verb <span class="token keyword">in</span> docs
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>issue<span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">3</span>
</code></pre><p>Есть три комментария. Рассмотрим последний из них.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>r<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'/comments'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">200</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> comments <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>comments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token string">'created_at'</span><span class="token punctuation">,</span> <span class="token string">'updated_at'</span><span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>comments<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Probably <span class="token keyword">in</span> the <span class="token string">"advanced"</span> section
</code></pre><p>Можем сообщить автору, что он не прав. Но сперва узнаем, кто это.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>comments<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
kennethreitz
</code></pre><p>Теперь скажем этому <code>kennethreitz</code>, что ему лучше отправляться в раздел для начинающих. Согласно документации API GitHub это делается с помощью метода POST.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> body <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"body"</span><span class="token punctuation">:</span> <span class="token string">"Sounds great! I'll get right on it!"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">"https://api.github.com/repos/kennethreitz/requests/issues/482/comments"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">404</span>
</code></pre><p>Похоже, нужно авторизоваться. В Requests можно выполнить любой вид аутентификации, включая базовую.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> requests<span class="token punctuation">.</span>auth <span class="token keyword">import</span> HTTPBasicAuth
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> auth <span class="token operator">=</span> HTTPBasicAuth<span class="token punctuation">(</span><span class="token string">'fake@example.com'</span><span class="token punctuation">,</span> <span class="token string">'not_a_real_password'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">,</span> auth<span class="token operator">=</span>auth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">201</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> content <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Sounds great! I'll get right on it<span class="token punctuation">.</span>
</code></pre><p>Теперь попробуем отредактировать сообщение. Для этого нужен метод <code>PATCH</code>.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">5804413</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> body <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"body"</span><span class="token punctuation">:</span> <span class="token string">"Sounds great! I'll get right on it once I feed my cat."</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">"https://api.github.com/repos/kennethreitz/requests/issues/comments/5804413"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>patch<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">,</span> auth<span class="token operator">=</span>auth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">200</span>
</code></pre><p>С баловством покончено. Используем <code>DELETE</code> для удаления сообщения.</p><noindex><div class="clear"></div><div id="yandex_rtb_R-A-1311574-8"></div><div class="clear"></div><br></noindex><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> auth<span class="token operator">=</span>auth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">204</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span>
<span class="token string">'204 No Content'</span>
</code></pre><p>Напоследок можно посмотреть, как много запросов было использовано. Для этого нужно сделать запрос <code>HEAD</code> к заголовкам и не скачивать целую страницу.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> auth<span class="token operator">=</span>auth<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
</code></pre><pre><code>...
'x-ratelimit-remaining': '4995'
'x-ratelimit-limit': '5000'
...
</code></pre><p>Осталось <a href="https://pythonru.com/baza-znanij/s-chego-nachat-programmirovanie-na-python" target="_self" rel="noopener noreferrer" data-wpel-link="internal">написать программу на Python</a>, которая бы использовала остальные 4995 запросов.</p><h2 id="заголовки-link"><span class="ez-toc-section" id="%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8-Link"></span>Заголовки Link<span class="ez-toc-section-end"></span></h2><p>Многие API используют заголовки <code>Link</code>. Они делают API более описательными и простыми в использования. GitHub используют пагинацию в своем API, например:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">'https://api.github.com/users/kennethreitz/repos?page=1&amp;per_page=10'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span>
</code></pre><pre><code>&lt;https://api.github.com/users/kennethreitz/repos?page=2&amp;per_page=10&gt;; rel="next", &lt;https://api.github.com/users/kennethreitz/repos?page=6&amp;per_page=10&gt;; rel="last"
</code></pre><p>Requests автоматически парсит эти ссылки и позволяет с легкостью их использовать.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>links<span class="token punctuation">[</span><span class="token string">"next"</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span><span class="token string">'url'</span><span class="token punctuation">:</span> <span class="token string">'https://api.github.com/users/kennethreitz/repos?page=2&amp;per_page=10'</span><span class="token punctuation">,</span> <span class="token string">'rel'</span><span class="token punctuation">:</span> <span class="token string">'next'</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>links<span class="token punctuation">[</span><span class="token string">"last"</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span><span class="token string">'url'</span><span class="token punctuation">:</span> <span class="token string">'https://api.github.com/users/kennethreitz/repos?page=7&amp;per_page=10'</span><span class="token punctuation">,</span> <span class="token string">'rel'</span><span class="token punctuation">:</span> <span class="token string">'last'</span><span class="token punctuation">}</span>
</code></pre><h2 id="пользовательские-http-методы"><span class="ez-toc-section" id="%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5-HTTP-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B"></span>Пользовательские HTTP-методы<span class="ez-toc-section-end"></span></h2><p>Иногда вы будете работать с сервером, который по какой-то причине требует использовать методы HTTP за исключение базовых. Например, метод MKCOL, который используют сервера WEBDAV. Однако с ними также можно работать в Requests. В данном случае используется встроенный метод <code>.request</code>. Например:</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'MKCOL'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">200</span> <span class="token comment"># если вызов был правильный</span>
</code></pre><p>Таким образом можно использовать любой метод, разрешенный сервером.</p><h2 id="transport-adapters"><span class="ez-toc-section" id="Transport-Adapters"></span>Transport Adapters<span class="ez-toc-section-end"></span></h2><p>Начиная с версии v1.0.0, Requests использует внутренний модульный дизайн. Одна из причин — внедрение Transport Adapters. Они предоставляют средство для определения методов взаимодействия с HTTP. В частности, позволяют применять настройку для каждого сервиса по отдельности.</p><p>Requests поставляются с одним таким Transport Adapter — <code>HTTPAdapter</code>. Он предоставляет возможность взаимодействия с HTTP и HTTPS посредством библиотеки <code>urllib3</code> из Requests по умолчанию. При инициализации <code>Session</code> один из них «крепится» к объекту <code>Session</code> HTTP, а второй — к HTTPS.</p><p>Requests дают возможность пользователям создавать и использовать собственные Transport Adapters с конкретной функциональностью. После создания Transport Adapter может быть прикреплен к объему Session вместе с указанием сервисов, к которым он должен применяться.</p><pre class=" language-py"><code class="prism language-py"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>mount<span class="token punctuation">(</span><span class="token string">'https://github.com/'</span><span class="token punctuation">,</span> MyAdapter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><p>Вызов <code>mount</code> регистрирует экземпляр Transport Adapter в префиксе. После этого HTTP-запросы, сделанные с помощью этого <code>Session</code> и URL которых начинается с этого префикса, будут использовать указанный Transport Adapter.</p><p>Многие подробности использования Transport Adapter лежат за рамками этого материала, но вы сможете разобраться лучше на следующем примере.</p><h3 id="пример-конкретная-версия-ssl"><span class="ez-toc-section" id="%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D0%B0%D1%8F-%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F-SSL"></span>Пример: конкретная версия SSL<span class="ez-toc-section-end"></span></h3><p>Разработчики Requests заранее определили, какая версия SSL будет использоваться по умолчанию в <code>urllib3</code>. Обычно это работает так, как нужно, но иногда требуется подключиться к конечной точке, которая использует версию, не совместимую с той, что указана по умолчанию.</p><p>В этом случае можно задействовать Transport Adapter, используя большую часть существующей реализации <code>HTTPAdapter</code> и добавив параметр <code>ssl_version</code>, который передается через <code>urllib3</code>. Настроим Transport Adapter, чтобы библиотека использовала <code>SSLv3</code>:</p><pre class=" language-py"><code class="prism language-py"><span class="token keyword">from</span> urllib3<span class="token punctuation">.</span>poolmanager <span class="token keyword">import</span> PoolManager

<span class="token keyword">from</span> requests<span class="token punctuation">.</span>adapters <span class="token keyword">import</span> HTTPAdapter

<span class="token keyword">class</span> <span class="token class-name">Ssl3HttpAdapter</span><span class="token punctuation">(</span>HTTPAdapter<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">""""Transport adapter" который позволяет использовать SSLv3."""</span>

    <span class="token keyword">def</span> <span class="token function">init_poolmanager</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> connections<span class="token punctuation">,</span> maxsize<span class="token punctuation">,</span> block<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>poolmanager <span class="token operator">=</span> PoolManager<span class="token punctuation">(</span>
            num_pools<span class="token operator">=</span>connections<span class="token punctuation">,</span> maxsize<span class="token operator">=</span>maxsize<span class="token punctuation">,</span>
            block<span class="token operator">=</span>block<span class="token punctuation">,</span> ssl_version<span class="token operator">=</span>ssl<span class="token punctuation">.</span>PROTOCOL_SSLv3<span class="token punctuation">)</span>
</code></pre><h2 id="блокирующий-или-не-блокирующий"><span class="ez-toc-section" id="%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%B8%D0%BB%D0%B8-%D0%BD%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D0%B9"></span>Блокирующий или не-блокирующий<span class="ez-toc-section-end"></span></h2><p>С Transport Adapter по умолчанию Requests не предоставляет никакого не-блокирующего IO (ввода-вывода). Свойство <code>Response.content</code> будет блокировать до тех пор, пока весь ответ не загрузится. Если требуется большая детализация, потоковые возможности библиотеки позволяют получать маленькие порции ответа в определенное время. Но и эти вызовы будут блокироваться.</p><p>Если не хочется использовать блокировку IO, есть масса проектов, совмещающих Requests с одним из асинхронных фреймворков Python. Например, requests-threads, grequests, requests-futures и requests-async.</p><h2 id="порядок-заголовков"><span class="ez-toc-section" id="%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA-%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%B2"></span>Порядок заголовков<span class="ez-toc-section-end"></span></h2><p>В необычных обстоятельствах может понадобится предоставить заголовки в определенном порядке. Если передать <code>OrderedDict</code> в <code>headers</code>, это и будет обозначенный порядок. Но порядок заголовков по умолчанию в Requests будет иметь более высокий приоритет, поэтому если их перезаписать в <code>headers</code>, они могут отображаться беспорядочно в сравнении с теми, что указаны в аргументе.</p><p>Чтобы решить эту проблему, необходимо настроить заголовки по умолчанию для объекта <code>Session</code>, предоставив ему <code>OrderedDict</code>. Этот порядок и станет приоритетным.</p><h2 id="таймауты"><span class="ez-toc-section" id="%D0%A2%D0%B0%D0%B9%D0%BC%D0%B0%D1%83%D1%82%D1%8B"></span>Таймауты<span class="ez-toc-section-end"></span></h2><p>У большинства запросов к внешнем серверам есть прикрепленный таймаут в том случае, если сервер не отвечает вовремя. По умолчанию запросы не прерываются, только если время не указано явно. Без таймаута код может висеть по несколько минут.</p><p><code>connect</code> — это количество секунд, которые Requests будет выжидать для настройки соединения с вызовом удаленной машины (соответствующей <code>connect()</code>) в сокете. Хорошей практикой считается настраивать это время чуть больше значения кратного 3, что является стандартным окном ретрансляции пакета TCP.</p><p>Когда клиент подключился к серверу и отправил HTTP-запрос, таймаут <code>read</code> — это количество секунд, которые клиент будет ждать ответа от сервера. (Если точнее, это то количество секунд, которое клиент прождет между отправкой байтов с сервера. В 99,9% случаев оно меньше того времени с момента, когда сервер отправляет первый байт).</p><p>Если определить одно значение для таймаута, вот так:</p><pre class=" language-py"><code class="prism language-py">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre><p>Оно будет применено к таймауту <code>connect</code> и <code>read</code>. Если нужны отдельные значения, стоит определить их в кортеже:</p><pre class=" language-py"><code class="prism language-py">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3.05</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><p>Если сервер очень медленный, можно указать Requests, чтобы он ждал вечно, передав значение <code>None</code>.</p><pre class=" language-py"><code class="prism language-py">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre></div></p></index><div class="td-w-reb td-w-reb-id-content_bottom  td_uid_5_6310cd3d7c80e_rand td_block_template_17"><div class="recomendation-feed-bottom"><h3>Обучение с трудоустройством</h3><div class="td-block-row"><div class="td-block-span6"><a href="https://pythonru.com/go/profession-python-1020" onmouseup="yaCounter52113229.reachGoal('rec-bottom-1')" target="_blank" class="rec-banner" style="background-color:#60B3FF;"><div class="mark">⟶</div><div class="flex-row"><div class="image"><img src="https://pythonru.com/wp-content/uploads/2021/06/sb-rec-pd.png" alt="Python-разработчик"></div><div class="banner-content"><div class="tag">| Программирование</div><div class="title">Python-разработчик</div><div class="price">145 440&nbsp;₽</div><div class="min-price">4 692&nbsp;₽/мес.</div></div></div></a></div><div class="td-block-span6"><a href="https://pythonru.com/go/profession-data-scientist-1020" onmouseup="yaCounter52113229.reachGoal('rec-bottom-2')" target="_blank" class="rec-banner" style="background-color:#FBF2E7;"><div class="mark">⟶</div><div class="flex-row"><div class="image"><img src="https://pythonru.com/wp-content/uploads/2021/06/sb-rec-ds.png" alt="Data Scientist"></div><div class="banner-content"><div class="tag">| Data Science</div><div class="title">Data Scientist</div><div class="price">172 800&nbsp;₽</div><div class="min-price">5 574&nbsp;₽/мес.</div></div></div></a></div></div><div class="td-block-row"><div class="td-block-span6"><a href="https://pythonru.com/go/profession-fullstack-0121" onmouseup="yaCounter52113229.reachGoal('rec-bottom-3')" target="_blank" class="rec-banner" style="background-color:#67F9B8;"><div class="mark">⟶</div><div class="flex-row"><div class="image"><img src="https://pythonru.com/wp-content/uploads/2021/06/sb-rec-fsp.png" alt="Fullstack-разработчик на Python"></div><div class="banner-content"><div class="tag">| Программирование</div><div class="title">Fullstack-разработчик на Python</div><div class="price">145 440&nbsp;₽</div><div class="min-price">4 692&nbsp;₽/мес.</div></div></div></a></div><div class="td-block-span6"><a href="https://pythonru.com/go/data-analyst-0221" onmouseup="yaCounter52113229.reachGoal('rec-bottom-4')" target="_blank" class="rec-banner" style="background-color:#C3DBFF;"><div class="mark">⟶</div><div class="flex-row"><div class="image"><img src="https://pythonru.com/wp-content/uploads/2021/06/sb-rec-da.png" alt="Data Scientist: анализ данных"></div><div class="banner-content"><div class="tag">| Data Science</div><div class="title">Data Scientist: анализ данных</div><div class="price">95 040&nbsp;₽</div><div class="min-price">3 960&nbsp;₽/мес.</div></div></div></a></div></div></div></div></div><footer><div class="td-post-source-tags"></div><div class="td-post-sharing-bottom"><div id="td_social_sharing_article_bottom" class="td-post-sharing td-ps-bg td-ps-padding td-ps-big td-ps-nogap td-post-sharing-style13 "><div class="td-post-sharing-visible"><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fpythonru.com%2Fbiblioteki%2Fprodvinutoe-rukovodstvo-po-biblioteke-python-requests"><div class="td-social-but-icon"><i class="td-icon-facebook"></i></div><div class="td-social-but-text">Facebook</div> </a><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-telegram" href="https://telegram.me/share/url?url=https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests&text=Продвинутое руководство по библиотеке Python Requests"><div class="td-social-but-icon"><i class="td-icon-telegram"></i></div><div class="td-social-but-text">Telegram</div> </a><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-twitter" href="https://twitter.com/intent/tweet?text=%D0%9F%D1%80%D0%BE%D0%B4%D0%B2%D0%B8%D0%BD%D1%83%D1%82%D0%BE%D0%B5+%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE+%D0%BF%D0%BE+%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5+Python+Requests&url=https%3A%2F%2Fpythonru.com%2Fbiblioteki%2Fprodvinutoe-rukovodstvo-po-biblioteke-python-requests&via=PythonRu"><div class="td-social-but-icon"><i class="td-icon-twitter"></i></div><div class="td-social-but-text">Twitter</div> </a><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-vk" href="https://vk.com/share.php?url=https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests"><div class="td-social-but-icon"><i class="td-icon-vk"></i></div><div class="td-social-but-text">VK</div> </a><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-whatsapp" href="whatsapp://send?text=Продвинутое руководство по библиотеке Python Requests %0A%0A https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests"><div class="td-social-but-icon"><i class="td-icon-whatsapp"></i></div><div class="td-social-but-text">WhatsApp</div> </a><a class="td-social-sharing-button td-social-sharing-button-js td-social-network td-social-viber" href="viber://forward?text=Продвинутое руководство по библиотеке Python Requests https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests"><div class="td-social-but-icon"><i class="td-icon-viber"></i></div><div class="td-social-but-text">Viber</div> </a></div><div class="td-social-sharing-hidden"><ul class="td-pulldown-filter-list"></ul><a class="td-social-sharing-button td-social-handler td-social-expand-tabs" href="#" data-block-uid="td_social_sharing_article_bottom"><div class="td-social-but-icon"><i class="td-icon-plus td-social-expand-tabs-icon"></i></div> </a></div></div></div><div class="author-box-wrap"><div class="desc"><div class="td-author-name author"><span class="fn">Максим</div><div class="td-author-description">Я создал этот блог в 2018 году, чтобы распространять полезные учебные материалы, документации и уроки на русском. На сайте опубликовано множество статей по основам python и библиотекам, уроков для начинающих и примеров написания программ.</div><div class="td-author-social"><span class="td-social-icon-wrap">Мои контакты:</span> <span class="td-social-icon-wrap"> <a target="_blank" rel="nofollow" href="mailto:admin@pythonru.com" title="Почта"> <span class="td-social-name">Почта</span> </a> </span></div><div class="clearfix"></div></div></div> <span class="td-page-meta" itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Максим"><div itemprop="affiliation" itemscope itemtype="https://schema.org/Organization"> <span itemprop="name">Python Q</span> <a href="https://yandex.ru/q/loves/python" itemprop="url">https://yandex.ru/q/loves/python</a> <span itemprop="address ">Online</span></div><span itemprop="affiliation">Python Q</span><span itemprop="description">CEO Pythonru</span><span itemprop="email">admin@pythonru.com</span><span itemprop="image">https://secure.gravatar.com/avatar/b16f253879f7349f64830c64d1da4415?s=96&d=mm&r=g</span><span itemprop="jobTitle">CEO Pythonru</span><span itemprop="knowsAbout">Python</span><span itemprop="name">Александр</span><span itemprop="potentialAction">Редактор</span><a href="https://t.me/cashncarry" itemprop="sameAs">https://t.me/cashncarry</a><a href="https://pythonru.com/" itemprop="url">https://pythonru.com/</a><a href="https://yandex.ru/q/profile/cashnc/" itemprop="sameAs">https://yandex.ru/q/profile/cashnc/</a><span itemprop="worksFor">PythonRu.com</span></span><meta itemprop="datePublished" content="2020-03-07T13:27:44+00:00"><meta itemprop="dateModified" content="2020-10-21T14:02:21+03:00"><meta itemscope itemprop="mainEntityOfPage" itemType="https://schema.org/WebPage" itemid="https://pythonru.com/biblioteki/prodvinutoe-rukovodstvo-po-biblioteke-python-requests"/><span class="td-page-meta" itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><span class="td-page-meta" itemprop="logo" itemscope itemtype="https://schema.org/ImageObject"><img src="https://pythonru.com/wp-content/uploads/2018/11/pythonru-272x90.png" itemprop="contentUrl" /><meta itemprop="url" content="https://pythonru.com/wp-content/uploads/2018/11/pythonru-272x90.png"></span><meta itemprop="name" content="PythonRu"><span itemprop="email">admin@pythonru.com</span><span itemprop="founder">Alex Zabrodin</span><span itemprop="foundingDate">2018-10-26</span><span itemprop="address ">Online</span><span itemprop="knowsAbout">Python, Programming, HTML, CSS, JavaScript</span></span><meta itemprop="headline " content="Продвинутое руководство по библиотеке Python Requests"><span class="td-page-meta" itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://pythonru.com/wp-content/uploads/2020/03/prodvinutoe-rukovodstvo-po-biblioteke-python-requests.jpg"><img src="https://pythonru.com/wp-content/uploads/2020/03/prodvinutoe-rukovodstvo-po-biblioteke-python-requests.jpg" itemprop="contentUrl" /><meta itemprop="width" content="1200"><meta itemprop="height" content="800"></span></footer></article><div class="td_block_wrap td_block_related_posts td_uid_6_6310cd3d7e0a7_rand td_with_ajax_pagination td-pb-border-top td_block_template_17"  data-td-block-uid="td_uid_6_6310cd3d7e0a7" ><script>var block_td_uid_6_6310cd3d7e0a7 = new tdBlock();
block_td_uid_6_6310cd3d7e0a7.id = "td_uid_6_6310cd3d7e0a7";
block_td_uid_6_6310cd3d7e0a7.atts = '{"limit":6,"ajax_pagination":"next_prev","live_filter":"cur_post_same_categories","td_ajax_filter_type":"td_custom_related","class":"td_uid_6_6310cd3d7e0a7_rand","td_column_number":3,"live_filter_cur_post_id":2199,"live_filter_cur_post_author":"1","block_template_id":"","header_color":"","ajax_pagination_infinite_stop":"","offset":"","td_ajax_preloading":"","td_filter_default_txt":"","td_ajax_filter_ids":"","el_class":"","color_preset":"","border_top":"","css":"","tdc_css":"","tdc_css_class":"td_uid_6_6310cd3d7e0a7_rand","tdc_css_class_style":"td_uid_6_6310cd3d7e0a7_rand_style"}';
block_td_uid_6_6310cd3d7e0a7.td_column_number = "3";
block_td_uid_6_6310cd3d7e0a7.block_type = "td_block_related_posts";
block_td_uid_6_6310cd3d7e0a7.post_count = "6";
block_td_uid_6_6310cd3d7e0a7.found_posts = "75";
block_td_uid_6_6310cd3d7e0a7.header_color = "";
block_td_uid_6_6310cd3d7e0a7.ajax_pagination_infinite_stop = "";
block_td_uid_6_6310cd3d7e0a7.max_num_pages = "13";
tdBlocksArray.push(block_td_uid_6_6310cd3d7e0a7);</script><h4 class="td-related-title td-block-title">Статьи по теме</h4><div id=td_uid_6_6310cd3d7e0a7 class="td_block_inner"><div class="td-related-row"><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/tsvetnoj-vyvod-teksta-v-python-colorama" rel="bookmark" class="td-image-wrap" title="Цветной вывод текста в Python: Colorama"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/08/maxresdefault-7-218x150.jpg" alt="Цветной вывод текста в Python" title="Цветной вывод текста в Python: Colorama"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/tsvetnoj-vyvod-teksta-v-python-colorama" rel="bookmark" title="Цветной вывод текста в Python: Colorama">Цветной вывод текста в Python: Colorama</a></h3></div></div></div><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/pyspark-dlja-nachinajushhih" rel="bookmark" class="td-image-wrap" title="Руководство по PySpark для начинающих"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/06/rukovodstvo-po-pyspark-dlya-nachinayushih-218x150.png" alt="Руководство по PySpark для начинающих" title="Руководство по PySpark для начинающих"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/pyspark-dlja-nachinajushhih" rel="bookmark" title="Руководство по PySpark для начинающих">Руководство по PySpark для начинающих</a></h3></div></div></div><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/gensim" rel="bookmark" class="td-image-wrap" title="Полное руководство по библиотеки Gensim для начинающих"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/05/polnoe-rukovodstvo-po-biblioteki-gensim-dlya-nachinayushih-218x150.png" alt="Полное руководство по библиотеки Gensim для начинающих" title="Полное руководство по библиотеки Gensim для начинающих"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/gensim" rel="bookmark" title="Полное руководство по библиотеки Gensim для начинающих">Полное руководство по библиотеки Gensim для начинающих</a></h3></div></div></div></div><div class="td-related-row"><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/crud-sqlalchemy-orm" rel="bookmark" class="td-image-wrap" title="CRUD-операции в SQLAlchemy ORM"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/05/crud-operacii-v-sqlalchemy-orm-218x150.png" alt="CRUD-операции в SQLAlchemy ORM" title="CRUD-операции в SQLAlchemy ORM"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/crud-sqlalchemy-orm" rel="bookmark" title="CRUD-операции в SQLAlchemy ORM">CRUD-операции в SQLAlchemy ORM</a></h3></div></div></div><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/shemy-v-sqlalchemy-orm" rel="bookmark" class="td-image-wrap" title="Создание схемы в SQLAlchemy ORM"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/05/sozdanie-shemy-v-sqlalchemy-orm-218x150.png" alt="Создание схемы в SQLAlchemy ORM" title="Создание схемы в SQLAlchemy ORM"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/shemy-v-sqlalchemy-orm" rel="bookmark" title="Создание схемы в SQLAlchemy ORM">Создание схемы в SQLAlchemy ORM</a></h3></div></div></div><div class="td-related-span4"><div class="td_module_related_posts td-animation-stack td_mod_related_posts"><div class="td-module-image"><div class="td-module-thumb"><a href="https://pythonru.com/biblioteki/crud-sqlalchemy-core" rel="bookmark" class="td-image-wrap" title="CRUD-операции с помощью SQLAlchemy Core"><img width="218" height="150" class="entry-thumb" src="https://pythonru.com/wp-content/uploads/2021/04/crud-operacii-s-pomoshyu-sqlalchemy-core-218x150.png" alt="CRUD-операции с помощью SQLAlchemy Core" title="CRUD-операции с помощью SQLAlchemy Core"/></a></div></div><div class="item-details"><h3 class="entry-title td-module-title"><a href="https://pythonru.com/biblioteki/crud-sqlalchemy-core" rel="bookmark" title="CRUD-операции с помощью SQLAlchemy Core">CRUD-операции с помощью SQLAlchemy Core</a></h3></div></div></div></div></div><div class="td-next-prev-wrap"><a href="#" class="td-ajax-prev-page ajax-page-disabled" id="prev-page-td_uid_6_6310cd3d7e0a7" data-td_block_id="td_uid_6_6310cd3d7e0a7"><i class="td-icon-font td-icon-menu-left"></i></a><a href="#"  class="td-ajax-next-page" id="next-page-td_uid_6_6310cd3d7e0a7" data-td_block_id="td_uid_6_6310cd3d7e0a7"><i class="td-icon-font td-icon-menu-right"></i></a></div></div></div></div><div class="td-pb-span4 td-main-sidebar" role="complementary"><div class="td-ss-main-sidebar"><aside class="td_block_template_17 widget ez-toc"><div class="ez-toc-widget-container ez-toc-v2_0_32 ez-toc-widget counter-hierarchy"><h4 class="td-block-title"><span> <span class="ez-toc-title-container"> <span class="ez-toc-title">Содержание</span> <span class="ez-toc-title-toggle"> </span> </span> </span></h4><nav><ul class='ez-toc-list ez-toc-list-level-1'><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#%D0%9E%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-Session" title="Объекты Session">Объекты Session</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-2" href="#%D0%9E%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2-%D0%B8-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%BE%D0%B2" title="Объекты запросов и ответов">Объекты запросов и ответов</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-3" href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2" title="Подготовка запросов">Подготовка запросов</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-4" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0-SSL" title="Проверка сертификата SSL">Проверка сертификата SSL</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-5" href="#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0" title="Работа с содержанием ответа">Работа с содержанием ответа</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-6" href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D0%BE%D0%B5-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5" title="Постоянное соединение">Постоянное соединение</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-7" href="#%D0%9F%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Потоковые загрузки">Потоковые загрузки</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-8" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B-%D0%B4%D0%BB%D1%8F-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D1%82%D1%8B%D1%85-%D0%BD%D0%B0-%D1%87%D0%B0%D1%81%D1%82%D0%B8-chunk-encoded" title="Запросы для данных, разбитых на части (chunk-encoded)">Запросы для данных, разбитых на части (chunk-encoded)</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-9" href="#POST-%D0%B4%D0%BB%D1%8F-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D1%82%D0%B8%D0%BF%D0%B0-multipart" title="POST для нескольких файлов типа multipart">POST для нескольких файлов типа multipart</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-10" href="#%D0%A5%D1%83%D0%BA%D0%B8-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%B2%D0%B0%D1%82-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" title="Хуки (перехват управления)">Хуки (перехват управления)</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-11" href="#%D0%A1%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F-%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F" title="Собственная аутентификация">Собственная аутентификация</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-12" href="#%D0%9F%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B" title="Потоковые запросы">Потоковые запросы</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-13" href="#%D0%9F%D1%80%D0%BE%D0%BA%D1%81%D0%B8" title="Прокси">Прокси</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-14" href="#SOCKS" title="SOCKS">SOCKS</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-15" href="#%D0%A1%D0%BE%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B8%D0%B5-%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%B0%D0%BC" title="Соответствие стандартам">Соответствие стандартам</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-16" href="#%D0%9A%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8" title="Кодировки">Кодировки</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-17" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-HTTP" title="Методы HTTP">Методы HTTP</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-18" href="#%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8-Link" title="Заголовки Link">Заголовки Link</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-19" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5-HTTP-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B" title="Пользовательские HTTP-методы">Пользовательские HTTP-методы</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-20" href="#Transport-Adapters" title="Transport Adapters">Transport Adapters</a><ul class='ez-toc-list-level-3'><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-21" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D0%B0%D1%8F-%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F-SSL" title="Пример: конкретная версия SSL">Пример: конкретная версия SSL</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-22" href="#%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%B8%D0%BB%D0%B8-%D0%BD%D0%B5-%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D0%B9" title="Блокирующий или не-блокирующий">Блокирующий или не-блокирующий</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-23" href="#%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA-%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%B2" title="Порядок заголовков">Порядок заголовков</a></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-24" href="#%D0%A2%D0%B0%D0%B9%D0%BC%D0%B0%D1%83%D1%82%D1%8B" title="Таймауты">Таймауты</a></li></ul></nav></div></aside><aside class="td_block_template_17 widget widget_block"><div id="yandex_rtb_R-A-1311574-5"></div><div id="mytest"></div></aside><div class="td-w-reb td-w-reb-id-sidebar  td_uid_7_6310cd3d83966_rand td_block_template_17"><div id="yandex_rtb_R-A-1311574-5"></div><div id="mytest"></div></div><aside class="td_block_template_17 widget widget_recent_entries"><h4 class="td-block-title"><span>Новое в блоге</span></h4><ul><li> <a href="https://pythonru.com/primery/nahozhdenie-delitelej-chisla-s-pomoshhju-python" data-wpel-link="internal" target="_self" rel="noopener">Нахождение делителей числа с помощью Python</a></li><li> <a href="https://pythonru.com/osnovy/ljambda-funkcii-i-anonimnye-funkcii-v-python" data-wpel-link="internal" target="_self" rel="noopener">Лямбда-функции и анонимные функции в Python</a></li><li> <a href="https://pythonru.com/osnovy/kogda-stoit-ispolzovat-yield-vmesto-return-v-python" data-wpel-link="internal" target="_self" rel="noopener">Когда стоит использовать yield вместо return в Python</a></li><li> <a href="https://pythonru.com/osnovy/kak-izvlech-kubicheskij-koren-v-python" data-wpel-link="internal" target="_self" rel="noopener">Как извлечь кубический корень в Python</a></li></ul></aside></div></div></div></div></div><div class="td-sub-footer-container td-container-wrap "><div class="td-container"><div class="td-pb-row"><div class="td-pb-span td-sub-footer-menu"><div class="menu-td-demo-footer-menu-container"><ul id="menu-td-demo-footer-menu" class="td-subfooter-menu"><li id="menu-item-4787" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-first td-menu-item td-normal-menu menu-item-4787"><a href="https://pythonru.com/o-proekte">О проекте</a></li><li id="menu-item-520" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy td-menu-item td-normal-menu menu-item-520"><a href="https://pythonru.com/politika-konfidencialnosti">Политика конфиденциальности</a></li><li id="menu-item-519" class="menu-item menu-item-type-post_type menu-item-object-page td-menu-item td-normal-menu menu-item-519"><a href="https://pythonru.com/pravoobladateljam">Правообладателям</a></li><li id="menu-item-4786" class="menu-item menu-item-type-post_type menu-item-object-page td-menu-item td-normal-menu menu-item-4786"><a href="https://pythonru.com/kontakty">Контакты</a></li><li id="menu-item-4790" class="menu-item menu-item-type-custom menu-item-object-custom td-menu-item td-normal-menu menu-item-4790"><a href="https://pythonru.com/go/reg-ru">Хостинг⇲</a></li></ul></div></div><div class="td-pb-span td-sub-footer-copy"> &copy; PythonRu 2018-2021 — Образовательный блог о Python</div></div></div></div></div>  <script async src="https://yourbestru.site/3157/c57bca69b0eed44493928e9f61abc7b90bd73220.js"></script> <script defer src="https://pythonru.com/wp-content/cache/autoptimize/js/autoptimize_689f9a58cbcf3573d4ded933e891d801.js"></script></body></html>