(function(e){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0};try{this.isIntersecting=!!e.intersectionRect}catch(e){}var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,o=i.width*i.height;this.intersectionRatio=n?o/n:this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(e,t){var n=null;return function(){n||(n=setTimeout((function(){e(),n=null}),t))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function o(){return e.performance&&performance.now&&performance.now()}function r(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function a(e,t){var n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),r=Math.min(e.right,t.right),s=r-o,a=i-n;return s>=0&&a>=0&&{top:n,bottom:i,left:o,right:r,width:s,height:a}}function d(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e,t){for(var n=t;n;){if(n==e)return!0;n=u(n)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var c=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(e,"resize",this._checkForIntersections,!0),r(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var r=i.element,s=d(r),a=this._rootContainsTarget(r),l=i.entry,u=e&&a&&this._computeTargetAndRootIntersection(r,t),c=i.entry=new n({time:o(),target:r,boundingClientRect:s,rootBounds:t,intersectionRect:u});l?e&&a?this._hasCrossedThreshold(l,c)&&this._queuedEntries.push(c):l&&l.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,i){if("none"!=e.getComputedStyle(n).display){for(var o=d(n),r=u(n),s=!1;!s;){var l=null,c=1==r.nodeType?e.getComputedStyle(r):{};if("none"==c.display)return;if(r==this.root||r==t?(s=!0,l=i):r!=t.body&&r!=t.documentElement&&"visible"!=c.overflow&&(l=d(r)),l&&!(o=a(l,o)))break;r=u(r)}return o}},i.prototype._getRootRect=function(){var e;if(this.root)e=d(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==n||r==i||r<n!=r<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||l(t,this.root)},i.prototype._rootContainsTarget=function(e){return l(this.root||t,e)},i.prototype._registerInstance=function(){c.indexOf(this)<0&&c.push(this)},i.prototype._unregisterInstance=function(){var e=c.indexOf(this);-1!=e&&c.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=n}}(window,document)}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});var adsManager=null;function getOrigin(){return void 0!==document.location.ancestorOrigins&&document.location.ancestorOrigins.length>0?document.location.ancestorOrigins[document.location.ancestorOrigins.length-1]:window.parent!=window.top&&goo_l.indexOf("://")>0?new URL(goo_l).hostname:document.domain}function isOverflowHidden(e){return"hidden"===getCustomComputedStyle(e,"overflow")}function getCustomComputedStyle(e,t){var n=window.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle;return t?n[t]:n}function isOnDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function isVisibleDueToOverflow(e,t){for(var n=getPositioning(e.getBoundingClientRect());e=e.parentNode;)if(9!==e.nodeType&&isOverflowHidden(e)){var i=getPositioning(e.getBoundingClientRect()),o=n.startX>=i.startX&&n.endX<=i.endX,r=n.startY>=i.startY&&n.endY<=i.endY;if(!o||!r)return!1}return!0}function getPositioning(e){var t=e.x,n=e.width,i=e.y,o=e.height;return{startX:parseInt(t),endX:parseInt(t)+parseInt(n),startY:parseInt(i),endY:parseInt(i)+parseInt(o)}}function isVisible(e){if(!isOnDocument(e))return!1;var t=getCustomComputedStyle(e,"opacity")<.3,n="none"===getCustomComputedStyle(e,"display"),i="hidden"===getCustomComputedStyle(e,"visibility");return!(t||n||i)&&isVisibleDueToOverflow(e)}function getParents(e){for(var t=[];e&&e!==document;e=e.parentNode)t.push(e);return t}var postEvents=!0,player=null,skipTimeSec=0,esEv=!1,isPV=!1,adParams=null,playerVisible=!0,heurInvisible=!1,rInvisible=!1,goo_l="";function generateID(e){var t=Date.now();return e.source_id+t+e.domain_id}function genRandomNumber(){return Math.floor(890001*Math.random())+1e4}function sendDataHared(e,t){}function Player(e){function t(t){var a=new google.ima.AdsRenderingSettings;a.bitrate=e.bitrate,a.restoreCustomPlaybackStateOnAdBreakComplete=!0,a.uiElements=[google.ima.UiElements.COUNTDOWN,google.ima.UiElements.AD_ATTRIBUTION],(s=t.getAdsManager(u,a)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i),s.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,o),s.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,r),s.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,n),s.addEventListener(google.ima.AdEvent.Type.LOADED,n),s.addEventListener(google.ima.AdEvent.Type.STARTED,n),s.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,n),s.addEventListener(google.ima.AdEvent.Type.MIDPOINT,n),s.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,n),s.addEventListener(google.ima.AdEvent.Type.COMPLETE,n),s.addEventListener(google.ima.AdEvent.Type.DURATION_CHANGE,n),s.addEventListener(google.ima.AdEvent.Type.PAUSED,n),s.addEventListener(google.ima.AdEvent.Type.RESUMED,n),s.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,n),s.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,n),s.addEventListener(google.ima.AdEvent.Type.SKIPPED,n),s.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,n),s.addEventListener(google.ima.AdEvent.Type.IMPRESSION,n),s.addEventListener(google.ima.AdEvent.Type.CLICK,n),e.onAdsManagerLoaded()}function n(t){var n=t.getAd();if(n&&n.isLinear())switch(t.type){case google.ima.AdEvent.Type.LOADED:if(void 0!==adParams.afib&&1==adParams.afib){if(void 0!==adParams.afib_v&&1==adParams.afib_v)return sendDataHared(adParams.domain_id,4),void e.onStop();if(!playerVisible||heurInvisible||rInvisible)return sendDataHared(adParams.domain_id,3),void e.onStop()}c=n;break;case google.ima.AdEvent.Type.STARTED:e.onStart(),p=n.getDuration(),e.onDurationChange(),l=setInterval((function(){null!==c&&(p=c.getDuration())!=p&&e.onDurationChange()}),300);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:e.onFirstQuartile();break;case google.ima.AdEvent.Type.MIDPOINT:e.onMidpoint();break;case google.ima.AdEvent.Type.THIRD_QUARTILE:e.onThirdQuartile();break;case google.ima.AdEvent.Type.COMPLETE:clearInterval(l),e.onComplete();break;case google.ima.AdEvent.Type.DURATION_CHANGE:e.onDurationChange();break;case google.ima.AdEvent.Type.PAUSED:e.onPaused();break;case google.ima.AdEvent.Type.RESUMED:e.onResumed();break;case google.ima.AdEvent.Type.VOLUME_CHANGED:e.onVolumeChanged();break;case google.ima.AdEvent.Type.VOLUME_MUTED:e.onVolumeMuted();break;case google.ima.AdEvent.Type.SKIPPED:e.onSkipped();break;case google.ima.AdEvent.Type.USER_CLOSE:e.onUserClose();break;case google.ima.AdEvent.Type.IMPRESSION:e.onImpression();break;case google.ima.AdEvent.Type.CLICK:e.onClickthrough()}}function i(t){try{s.destroy()}catch(e){}e.onAdError(t.getError().getMessage())}function o(){try{u.pause()}catch(e){}}function r(){try{u.play()}catch(e){}}var s,a,d,l,u,c,p=-2;this.initAd=function(){u=e.videoSlot,d=new google.ima.AdDisplayContainer(e.slot,u),(a=new google.ima.AdsLoader(d)).getSettings().setAutoPlayAdBreaks(!1),a.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),a.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t,!1),a.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i,!1),(s=new google.ima.AdsRequest).adsResponse=e.xml,s.linearAdSlotWidth=e.linearWidth,s.linearAdSlotHeight=e.linearHeight,s.nonLinearAdSlotWidth=e.linearWidth,s.nonLinearAdSlotHeight=e.linearHeight,a.requestAds(s)},this.startAd=function(){u.load(),d.initialize(),s.setVolume(0);try{s.init(e.linearWidth,e.linearHeight,e.linearViewMode),s.start()}catch(t){try{s.destroy()}catch(e){}e.onAdError("Failed to start AdsManager")}},this.pauseAd=function(){s.pause()},this.skipThisAd=function(t){e.onSkipped(),t&&(s.stop(),u.play())},this.getPlayerSlot=function(){return e.slot},this.resumeAd=function(){s.resume()};var h=!1;this.getAdRemainingTime=function(){return null!=skipBtn&&p-s.getRemainingTime()>=skipTimeSec&&!h&&(h=!0,skipBtn.style.display="block"),s.getRemainingTime()},this.getAdDuration=function(){return p},this.destroy=function(){s.destroy()},this.setAdVolume=function(e){s.setVolume(e)},this.getAdVolume=function(){return s.getVolume()},this.resizeAd=function(e,t,n){try{null!=adsManager&&adsManager.resize(e,t,n)}catch(e){}},this.getAdSkippableState=function(){return!0}}function isMobile(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function VPAIDWrapper(){var e={request:"request",start:"start",AdImpression:"vast_impression",AdVideoComplete:"complete",AdClickThru:"click",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile"};function t(e){adParams=h;var i=new XMLHttpRequest;i.timeout=1e4,i.onreadystatechange=function(){if(4===i.readyState)if(null!==i.responseText){var e=i.responseText;e.startsWith("R:")||e.startsWith("Z:")?(e.indexOf("{kn_request_id}")>0&&(e=e.replace("{kn_request_id}",generateID(h))),e.indexOf("{kn_rand_num}")>0&&(e=e.replace("{kn_rand_num}",genRandomNumber())),e.indexOf("{kn_url}")>0&&(e=e.replace("{kn_url}",encodeURIComponent(getOrigin()))),e.startsWith("R:")?t(e.replace("R:","")):(isPV=!0,postEvents=!1,t(e.replace("Z:","")))):(!function(e){try{var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("CompanionAds");0<t.length&&(y=(new XMLSerializer).serializeToString(t[0]))}catch(e){}(player=new Player({slot:u,videoSlot:c,xml:e,bitrate:v,linearWidth:g,linearHeight:m,linearViewMode:f,onAdsManagerLoaded:function(){a("AdLoaded")},onStart:function(){s("Started"),l("start"),a("AdVideoStart"),a("AdStarted")},onFirstQuartile:function(){l("viewref"),a("AdVideoFirstQuartile")},onMidpoint:function(){a("AdVideoMidpoint")},onThirdQuartile:function(){a("AdVideoThirdQuartile")},onComplete:function(){l("viewrefcompl"),a("AdVideoComplete"),n()},onDurationChange:function(){a("AdDurationChange")},onPaused:function(){a("AdPaused")},onResumed:function(){a("AdPlaying")},onVolumeChanged:function(){a("AdVolumeChange")},onVolumeMuted:function(){a("AdVolumeChange")},onSkipped:function(){a("AdSkipped")},onUserClose:function(){a("AdUserClose")},onImpression:function(){!function(){var e=document.createElement("script");if("object"==typeof e){var t={project_id:"980175",source_id:h.source_id,external_id:h.domain_id},n=[];for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));n.push("cc="+Math.floor(1e13*Math.random()+1)),e.type="text/javascript",e.async=!0,e.src="https://kinostream.media/test/m.js?"+n.join("&"),document.getElementsByTagName("head")[0].appendChild(e)}}(),l("viewrefimp"),a("AdImpression"),(!playerVisible||heurInvisible||rInvisible)&&(void 0!==adParams.afib&&1==adParams.afib||sendDataHared(adParams.domain_id,5))},onClickthrough:function(){l("vast_click"),a("AdClickThru")},onAdError:function(e){s(e),a("AdError")},onStop:function(){n()}})).initAd(),s("initAd")}(e),a("requests"),l("requests"))}else a("AdError")},i.ontimeout=function(){a("AdError")},0===e&&(e=h.url+"="+getOrigin()),i.open("GET",e,!0),i.withCredentials=!0,i.send()}function n(){s("Stopping ad");try{player.destroy()}catch(e){}a("AdStopped")}function i(){return s("getAdVolume"),player.getAdVolume()}function o(){return player.getAdSkippableState()}function r(){return s("duration = "+player.getAdDuration()),player.getAdDuration()}function s(e){b&&console.log(e)}function a(t){if(postEvents||"request"!==t&&"AdImpression"!==t&&"AdVideoComplete"!==t&&"AdClickThru"!==t&&"AdStarted"!==t&&"AdVideoStarted"!==t&&"AdVideoFirstQuartile"!==t&&"AdVideoMidpoint"!==t&&"AdVideoThirdQuartile"!==t&&"AdDurationChange"!==t){if(window.parent.postMessage(t,"*"),s("raising event "+t),A){var n=i(),o=r();A.sendEvent(t,{volume:n,ad_duration:o})}if(E.push(t),n=p[t])for(var a in n)(o=n[a])&&(s("found callback for "+t),"AdStopped"===t&&o===_?function(e){setTimeout((function(){s("calling "+t+" callback (after delay) "+e),e()}),1e3)}(o):("AdStopped"===t&&s("calling "+t+" callback (no delay) "+o),o()))}else void 0!==e[t]&&l(e[t])}function d(e){"impression"==e.data&&a("AdImpression"),"complete"==e.data&&a("AdVideoComplete"),"click"==e.data&&a("AdClickThru"),"firstquartile"==e.data&&a("AdVideoFirstQuartile"),"midpoint"==e.data&&a("AdVideoMidpoint"),"thirdquartile"==e.data&&a("AdVideoThirdQuartile"),"allAdsCompleted"==e.data&&a("AdError"),"skip"==e.data&&a("AdSkipped")}function l(e){if("vast_impression"==e||"viewrefimp"==e||"vast_click"==e||"viewrefcompl"==e||"requests"==e||"start"==e){s("Viewability: "+(k=Math.round(w/T))),k=k>=0?k:0;var t=new XMLHttpRequest,n="https://"+h.base_url+"/event.php?r="+h.r+"&sid="+h.sid+"&type="+h.type+"&event="+e+"&source_id="+h.source_id+"&domain_id="+h.domain_id+"&link_id="+h.link_id+"&ch="+h.ch+"&vbl="+k+"&origin="+getOrigin()+"&playerWidth="+g+"&playerHeight="+m;!playerVisible||heurInvisible||rInvisible?n+="&inv=1":esEv&&(n+="&inv=2"),isPV&&(n+="&pv=1"),t.open("GET",n),t.withCredentials=!0,t.send(null)}}window.addEventListener?window.addEventListener("message",d):window.attachEvent("onmessage",d);var u=null,c=null,p={},h={},g=-1,m=-1,v=-1,f=null,A=null,y=null,E=[],b=!1,_=null,T=0,w=0,k=0,I=function(e,t){T+=1;var n=Math.round(100*e[0].intersectionRatio);w+=n},S={rootBounds:null,threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],root:null};this.getAdLinear=function(){return s("Only Linear Ads supported"),!0},this.getAdCompanions=function(){return y},this.getAdIcons=function(){return s("AdIcons not currently supported"),!1},this.getAdDuration=r,this.getAdRemainingTime=function(){return s("remaining time = "+player.getAdRemainingTime()),player.getAdRemainingTime()},this.getAdHeight=function(){return m},this.getAdWidth=function(){return g},this.getAdSkippableState=o,this.getAdExpanded=function(){return s("getAdExpanded"),!1},this.getAdVolume=i,this.setAdVolume=function(e){s("setAdVolume "+e),player.setAdVolume(e)},this.unsubscribe=function(e,t){s("unsubscribe "+t),p[t][e]=null},this.subscribe=function(e,t,n){s("Subscribe for "+t+" - "+e),n=n?e.bind(n):e;var i=p[t];i||("AdStopped"===t&&(_=n),i=p[t]={}),i[e]=n},this.expandAd=function(){s("expandAd (not supported)")},this.collapseAd=function(){s("collapseAd (not supported)")},this.skipAd=function(){s("skipAd"),o()&&player.skipAd()},this.resumeAd=function(){s("resumeAd"),player.resumeAd()},this.pauseAd=function(){s("pauseAd"),player.pauseAd()},this.resizeAd=function(e,t,n){s("resizeAd "+e+"x"+t+" "+n);try{player.resizeAd(e,t,n)}catch(e){}if(g=e,m=t,f=n,A){var o=i(),d=r();A.sendEvent("resizeAd",{volume:o,ad_duration:d,width:e,height:t,viewMode:n})}a("AdSizeChange")},this.initAd=function(e,n,i,o,r,a){g=e,m=n,v=o,f=i,u=a.slot,c=a.videoSlot,void 0!==(h=JSON.parse(r.AdParameters)).skip_time_sec&&h.skip_time_sec>0&&(skipTimeSec=h.skip_time_sec),void 0!==h.peb&&1==h.peb&&(postEvents=!1),h.url=h.url.replace(/^http:\/\//i,"https://"),b=r=h.debug,gmo_url="https://imasdk.googleapis.com/js/sdkloader/ima3.js",playerVisible=isVisible(u);var d,l,p,A,y=getParents(u);if(heurInvisible=0===e||0===n||0===screen.width||0===screen.height,isMobile()){var E=window.innerWidth,_=window.innerHeight,T=Math.ceil(e/E*100),w=Math.ceil(n/_*100);rInvisible=T<=20||w<=20}else rInvisible=e<300||n<200;for(var k in y){isVisible(y[k])||(playerVisible=!1)}void 0!==h.afib_v&&1==h.afib_v&&(esEv=!0),void 0!==h.pv&&"1"==h.pv&&(isPV=!0),s("initAd "+e+"x"+n+" "+i+" "+o),null===c&&(c=document.createElement("video"),s("Warning: No video element passed to ad, creating element."),u.appendChild(c)),d=document.getElementsByTagName("head")[0],l=gmo_url,p=t,(A=document.createElement("script")).setAttribute("type","text/javascript"),A.setAttribute("src",l),A.onload=function(){p&&p(0)},d.appendChild(A)},this.startAd=function(){if(s("Starting ad"),player.startAd(),player.setAdVolume(0),new IntersectionObserver(I,S).observe(document.documentElement),document.documentElement.style.position="absolute!important",document.documentElement.style.zIndex="9999!important",0!==skipTimeSec){let e="cursor:pointer; color:white;border-radius: 4px;text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);width:100px; height:30px; font-size:15px; background: rgb(91, 92, 94); position: absolute; zIndex: 9999!important; right:0;",t=!1;if(null!=document.querySelector(".ad-element")){t=!0;setInterval((function(){player.getAdRemainingTime()}),700)}(skipBtn=document.createElement("button")).onclick=function(){player.skipThisAd(t),skipBtn.style.display="none"},skipBtn.innerHTML="SKIP",skipBtn.setAttribute("style",e),skipBtn.style.display="none",u.appendChild(skipBtn)}},this.stopAd=n,this.handshakeVersion=function(){return"2.0"},this.getPlayer=function(){return c},this.getSlot=function(){return u},this.getPreviousEvents=function(){return E}}var skipBtn=null;window.getVPAIDAd=function(){return new VPAIDWrapper};