!function(){return function e(t,i,s){function r(d,a){if(!i[d]){if(!t[d]){var o="function"==typeof require&&require;if(!a&&o)return o(d,!0);if(n)return n(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[d]={exports:{}};t[d][0].call(l.exports,function(e){return r(t[d][1][e]||e)},l,l.exports,e,t,i,s)}return i[d].exports}for(var n="function"==typeof require&&require,d=0;d<s.length;d++)r(s[d]);return r}}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OMVP_VERSION=void 0;i.OMVP_VERSION=1850},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getInfo=function(){let e,t,i,r=0,n=0;e=function(s){let d,a;n++;try{a=s.location.href}catch(e){i="Error "+e.message}if(s.parent===s)a&&(t=a,r=n);else{try{d=s.document.referrer}catch(e){}a&&(r=n,t=a),d&&(r=n+1,t=d),e(s.parent)}};try{e(window)}catch(e){i="Error "+e.message}return{referer:t,ref:s.url.getDomain(t),refN:r,success:r===n,count:n,error:i}};var s=e("./url")},{"./url":3}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.url=void 0;let s={getDomain(e){let t=document.createElement("a");return t.href=e,t.hostname}};i.url=s},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getVPAIDAd=function(){return new n};var s=e("../../common/js/utils/ref"),r=e("./lib/Event");e("../../../config/player-version");class n{constructor(){this._callStack=[],this._listeners={},this._getters={adIcons:!0,adLinear:!0}}initAd(e,t,i,s,n,d){try{n=JSON.parse(n.AdParameters)}catch(e){return this._trigger(r.Event.AdError)}if(this._width=e,this._height=t,this._viewMode=i,this._desiredBitrate=s,this._creativeData=n,this._environmentVars=d,!d.slot)return this._trigger(r.Event.AdError);let a=d.slot;this._slot=a,this._slotWnd=a.ownerDocument.defaultView;let o=d.videoSlot?d.videoSlot:null;this._videoSlot=o;try{this._setupFrame(window.frameElement)}catch(e){}this._onMessage=this._onMessage.bind(this),this._createFrame(n.frame),this._videoSlot instanceof Element&&(this._videoSlot.style.display="none")}_createFrame(e){let t=this._slotWnd,i=t.document,s=this._slot,r=this._iframe=i.createElement("iframe"),n=r.style,d="mv"+Math.round(1e8*Math.random());r.src=e,n.borderWidth=0,n.padding=0,n.margin=0,s===document.body&&(n.position="absolute",n.top=0,n.left=0,n.width="100%",n.height="100%"),this._setupFrame(r),this._setSize(this._width,this._height),t.addEventListener("message",this._onMessage),s.appendChild(r),t[d]=r,this._slotIframeName=d,this._sentToFrameFromSlot=new t.Function("data","window."+d+".contentWindow.postMessage(data, '*')"),this._sendPrevData()}_sendPrevData(){let e,t=0;for(;(e=this._callStack.pop())&&(this._doSending(e),1e3!=t++););}_setupFrame(e){e.setAttribute("mozallowfullscreen",""),e.setAttribute("webkitallowfullscreen",""),e.setAttribute("allowfullscreen",""),e.setAttribute("allow","autoplay")}disableDestruction(){this._destroyFrame=function(){}}_destroyFrame(){let e=this._slot,t=this._iframe;t.style.visibility="hidden",t.style.width="1px",t.style.height="1px",t.style.zIndex=-1e5,setTimeout(()=>{e.removeChild(t)},500),delete this._iframe,delete this._slotWnd[this._slotIframeName]}_destroy(){this._slotWnd.removeEventListener("message",this._onMessage);for(let e in this)this.hasOwnProperty(e)&&delete this[e]}_setSize(e,t){if(this._iframe){let i=this._iframe.style;e<1||t<1?(i.width="100%",i.height="100%"):(i.width=e+"px",i.height=t+"px")}}_onMessage(e){if(this._iframe.contentWindow!==e.source)return;let t,i=this;try{t=JSON.parse(e.data)}catch(e){t={}}if(t.MoeVideoVpaid&&(i._updateGetters(t.getters),t=t.data))switch(t.event){case"iframeLoaded":i._callInitAd();break;case"AdStopped":i._trigger(t.event,t.data),i._destroyFrame(),i._destroy();break;default:i._trigger(t.event,t.data)}}_callInitAd(){let e=this._environmentVars,t={};for(let i in e)e.hasOwnProperty(i)&&"object"!=typeof e[i]&&(t[i]=e[i]);this._creativeData.refInfo=(0,s.getInfo)();const i=this._width>1?this._width:this._slot.offsetWidth,r=this._height>1?this._height:this._slot.offsetHeight;this._width===i&&this._height===r||(this._width=i,this._height=r,setTimeout(()=>{this.resizeAd(i,r)})),this._call("initAd",i,r,this._viewMode,this._desiredBitrate,this._creativeData,t)}_send(e){this._sentToFrameFromSlot?this._doSending(e):this._callStack.push(e)}_doSending(e){try{this._sentToFrameFromSlot(JSON.stringify({MoeVideoVpaid:!0,data:e}))}catch(t){console.warn("vpaid send message error",e,t)}}_call(e){this._send({method:e,params:[].slice.call(arguments,1)})}_updateGetters(e){this._getters=e}handshakeVersion(){return"2.0"}resizeAd(e,t,i){this._setSize(e,t),this._call("resizeAd",e,t,i)}startAd(){this._call("startAd")}stopAd(){this._call("stopAd")}pauseAd(){this._call("pauseAd")}resumeAd(){this._call("resumeAd")}expandAd(){this._call("expandAd")}collapseAd(){this._call("collapseAd")}skipAd(){this._call("skipAd")}getAdLinear(){return this._getters?this._getters.adLinear:void 0}get adLinear(){return this.getAdLinear()}getAdWidth(){return this._getters?this._getters.adWidth:void 0}get adWidth(){return this.getAdWidth()}getAdHeight(){return this._getters?this._getters.adHeight:void 0}get adHeight(){return this.getAdHeight()}getAdExpanded(){return this._getters?this._getters.adExpanded:void 0}get adExpanded(){return this.getAdExpanded()}getAdSkippableState(){return this._getters?this._getters.adSkippableState:void 0}get adSkippableState(){return this.getAdSkippableState()}getAdRemainingTime(){return this._getters?this._getters.adRemainingTime:void 0}get adRemainingTime(){return this.getAdRemainingTime()}getAdDuration(){return this._getters?this._getters.adDuration:void 0}get adDuration(){return this.getAdDuration()}getAdVolume(){return this._getters?this._getters.adVolume:void 0}get adVolume(){return this.getAdVolume()}setAdVolume(e){void 0!==this._getters&&(this._getters.adVolume=e,this._call("setAdVolume",e))}set adVolume(e){this.setAdVolume(e)}getAdCompanions(){return this._getters?this._getters.adCompanions:void 0}getAdIcons(){return this._getters?this._getters.adIcons:void 0}subscribe(e,t,i){this._listeners.hasOwnProperty(t)||(this._listeners[t]=[]),this._listeners[t].push({fn:e,scope:i||window})}unsubscribe(e,t){try{let i=this._listeners[t]||[];for(let t=i.length-1;t>=0;t--)i[t].fn===e&&i.splice(t,1);this._listeners[t]=i}catch(e){}}_trigger(e,t){let i=this._listeners[e]||[];for(let e=0;e<i.length;e++)i[e].fn.call(i[e].scope,t)}}},{"../../../config/player-version":1,"../../common/js/utils/ref":2,"./lib/Event":5}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VPAID_EVENTS=i.Event=void 0;i.Event={AdError:"AdError"};i.VPAID_EVENTS=["AdStarted","AdStopped","AdSkipped","AdLoaded","AdLinearChange","AdSizeChange","AdExpandedChange","AdSkippableStateChange","AdDurationChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdClickThru","AdInteraction","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdError","AdLog"]},{}],6:[function(e,t,i){"use strict";var s=e("./api");window.getVPAIDAd=s.getVPAIDAd},{"./api":4}]},{},[6]);