!function(){function e(o){var n=i[o];if(void 0!==n)return n.exports;var r=i[o]={id:o,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.exports}var t={7262:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".lmGh3l{animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:none;border-collapse:separate;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;column-fill:balance;grid-column-gap:normal;column-gap:normal;column-rule:medium none currentColor;column-span:1;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-feature-settings:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-origin:50% 50% 0;transform-style:flat;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial;display:block;position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:auto;visibility:hidden;overflow:hidden;z-index:0}",""]),n.locals={AdPodContainer:"lmGh3l"},e.exports=n},3857:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,'.xgTU{border-radius:12px;background:#fff;padding:6px 6px 8px;position:relative;line-height:var(--pc-line-height);display:flex;flex-direction:column}.xgTU .v9O31FyU{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%}.EOC{display:flex;flex-direction:row;padding:6px}.TthxH{width:100%;max-height:calc(var(--pc-card-width) - 12px);height:calc(var(--pc-card-width) - 12px);min-height:1px;flex:1;border-radius:8px;object-fit:cover}.EOC .TthxH{height:100%;width:40%;max-height:unset;min-height:unset;flex:unset}@supports (aspect-ratio:1){.EOC .TthxH{width:auto;aspect-ratio:1}}.f9zF{color:rgba(32,53,96,.6);margin-top:3%;min-height:5.1em;height:calc(100% - var(--pc-card-width) - 12px);display:flex;flex-direction:column;justify-content:space-between}.EOC .f9zF{margin-top:0;padding-left:8px;height:97%;flex:1;min-width:1px}.RcBgo8vJ{font-size:1.67em;height:calc(var(--pc-line-height)*1em);overflow:hidden;word-wrap:break-word}.tBk{color:#000}.xlZ{color:#ff4c52}.DQX2O7{font-size:.73em;color:#a3acbf;margin-left:10px;position:relative;display:inline-block}.DQX2O7:after{content:"";left:0;top:50%;width:100%;height:1px;position:absolute;background:#f95146;transform:rotate(-2deg)}.N0gJEFXB9{color:rgba(32,53,96,.6);margin-top:3%;flex:1;min-height:calc(2em*var(--pc-line-height))}.QrruyRGuW{font-size:var(--pc-description-font-size);display:-webkit-box;-webkit-line-clamp:var(--pc-lines-count);-webkit-box-orient:vertical;line-clamp:var(--pc-lines-count);overflow:hidden}.KYHRqsbE{color:inherit;text-decoration:none}',""]),n.locals={EcomProductCard:"xgTU",ClickThroughLink:"v9O31FyU",EcomProductCard_horizontal:"EOC",EcomProductCard__Image:"TthxH",EcomProductCard__Details:"f9zF",EcomProductCard__pricesContainer:"RcBgo8vJ",EcomProductCard__price:"tBk",EcomProductCard__price_withOldPrice:"xlZ",EcomProductCard__oldPrice:"DQX2O7",EcomProductCard__textContainer:"N0gJEFXB9",EcomProductCard__text:"QrruyRGuW",EcomProductCard__link:"KYHRqsbE"},e.exports=n},9759:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,'.KLmJ9DLaAU *,[class^=EcomProductsCarousel]{box-sizing:border-box}.KLmJ9DLaAU{display:flex;height:100%}.wbRd{display:flex;flex-direction:column;justify-content:center}.jLwR33Qq,.ZrxtcYBeoe{font:inherit;display:flex;justify-content:center;align-items:center;width:2.4em;height:2.4em;padding:10.75px 8px;border-radius:2.4em;border:none;background:#fff;color:"#000";cursor:pointer;box-shadow:0 0 5px rgba(0,0,0,.17)}.jLwR33Qq:disabled,.ZrxtcYBeoe:disabled{cursor:auto}.FYb5hyXa,.tTHKU{width:100%}.jLwR33Qq:disabled .FYb5hyXa,.ZrxtcYBeoe:disabled .tTHKU{opacity:.5}.L2YzuD0Mu0{flex:1;display:flex;align-items:center;border-radius:12px;overflow:auto;scroll-behavior:smooth;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;scrollbar-width:none}.L2YzuD0Mu0::-webkit-scrollbar{display:none}.GbkxHB1hnq{justify-content:center}.cOVOkErn1{display:flex;justify-content:center;align-items:center;width:var(--pc-card-container-width);min-width:var(--pc-card-container-width);height:100%;padding:4px max(4px,calc(var(--pc-card-container-width)/2 - var(--pc-card-width)/2));scroll-snap-align:start}.BFjG .xgTU{min-height:min(calc(var(--pc-card-width)*7/5),100%);max-height:calc(var(--pc-card-width)*2)}.yjPQ .xgTU{min-height:min(calc(var(--pc-card-width)/3),100%);max-height:calc(var(--pc-card-width)/2)}.cOVOkErn1 .xgTU{width:100%;height:100%;box-shadow:0 0 5px rgba(0,0,0,.17)}.pIWve52A{display:flex;flex-direction:column;justify-content:center}',""]),n.locals={EcomProductsCarousel:"KLmJ9DLaAU",EcomProductsCarousel__slideToLeftContainer:"wbRd",EcomProductsCarousel__slideToLeft:"jLwR33Qq",EcomProductsCarousel__slideToRight:"ZrxtcYBeoe",EcomProductsCarousel__slideToLeftIcon:"FYb5hyXa",EcomProductsCarousel__slideToRightIcon:"tTHKU",EcomProductsCarousel__productCards:"L2YzuD0Mu0",EcomProductsCarousel__productCards_noScroll:"GbkxHB1hnq",EcomProductsCarousel__productCardContainer:"cOVOkErn1",EcomProductsCarousel__productCardContainer_verticalCards:"BFjG",EcomProductCard:"xgTU",EcomProductsCarousel__productCardContainer_horizontalCards:"yjPQ",EcomProductsCarousel__slideToRightContainer:"pIWve52A"},e.exports=n},4873:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(9792),s=i(2840),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".krDBXP,.krDBXP *{font-family:"+r.locals.AD_FONT+";box-sizing:border-box}.krDBXP{position:absolute;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.5);padding:4px 10px 68px}.QaNIWtU{text-align:right;padding-right:2.4em}.NIN6M{padding:0;color:#fff;background:none;border:none;font:inherit;cursor:pointer;opacity:1;visibility:visible;transition:"+a.locals.default_transition_duration+" opacity "+s.locals.default_transition_timing_function+","+a.locals.default_transition_duration+" visibility "+s.locals.default_transition_timing_function+"}.yJBKzVWp{visibility:hidden;opacity:0}.k80CfIY5xL{height:24px;width:24px}.OC3xyUT .KLmJ9DLaAU{max-width:33.33333%;margin:0 auto}.OC3xyUT.WtQqWM .KLmJ9DLaAU{max-width:unset;margin:unset}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,default_transition_duration:""+a.locals.default_transition_duration,default_transition_timing_function:""+s.locals.default_transition_timing_function,EcomProductsPackshotScreen:"krDBXP",EcomProductsPackshotScreen__closeButtonContainer:"QaNIWtU",EcomProductsPackshotScreen__closeButton:"NIN6M",EcomProductsPackshotScreen__closeButton_hidden:"yJBKzVWp",EcomProductsPackshotScreen__closeIcon:"k80CfIY5xL",EcomProductsPackshotScreen_singleVisibleItem:"OC3xyUT",EcomProductsCarousel:"KLmJ9DLaAU",EcomProductsPackshotScreen_vertical:"WtQqWM"},e.exports=l},1256:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".O4J23v{display:inline-block;color:#000;font-size:16px;font-family:"+r.locals.AD_FONT+";background-color:#ffd400;border-radius:3px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto}.mXNBSrH{padding:10px 16px;line-height:16px}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,HoneypotButton:"O4J23v",HoneypotButton__content:"mXNBSrH"},e.exports=a},6383:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".BHJ{background-color:#000;opacity:.5}",""]),n.locals={HoneypotOverlay:"BHJ"},e.exports=n},5046:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".IATtScyH{position:relative}.Bscqx{cursor:pointer}.VuqVyVc8{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.Gm1jTaP9m{position:absolute;top:0;left:0}",""]),n.locals={HoneypotScreen:"IATtScyH",HoneypotScreen_clickable:"Bscqx",HoneypotScreen__buttonWrapper:"VuqVyVc8",HoneypotScreen__honeypotOverlayWrapper:"Gm1jTaP9m"},e.exports=n},9881:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,":root{}.rS6c{display:flex;flex-grow:1;flex-shrink:1;align-items:center;justify-content:center;box-shadow:none}.FLLBf{z-index:10000}.HIAlCjn{box-sizing:content-box;padding-top:32px;background-color:#ecf4f9;border-radius:4px;box-shadow:0 12px 12px rgba(25,58,75,.1),0 4px 4px rgba(25,58,75,.05),0 0 4px rgba(25,58,75,.05)}.lxuYaF7Im{z-index:1;display:none;overflow:hidden;font-family:Helvetica,Arial,sans-serif;opacity:0;transition:opacity .2s}.HIAlCjn .lxuYaF7Im{position:absolute;top:0;left:0;width:100%;height:32px}.XYAvzn{box-shadow:0 0 20px 20px rgba(96,109,128,.15)}.g6JKXHbp{background-color:#fff}.Pfsm1{background-color:#283459}.Y8P9vcHJe{position:relative;z-index:2;flex-shrink:0;width:100%;height:100%;overflow:hidden;font-size:0}.oS65VJN{position:relative;display:flex;flex-grow:1;flex-shrink:1;align-items:stretch;visibility:hidden}.BleDSr{position:absolute;top:0;left:0;display:block;width:100%;height:100%;margin:0;padding:0}.heS4A,.J2fa5tPii{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.heS4A{display:none;background-position:50%;background-size:cover}.xrw1oTJe{position:absolute;top:0;right:0;bottom:0;left:0;margin:0;padding:0;overflow:hidden}.LPbzlLYM{position:absolute;top:0;right:0;z-index:2;box-sizing:content-box;width:12px;height:12px;padding:10px;cursor:pointer}.LPbzlLYM svg{width:12px;height:12px;vertical-align:top}.ZiKdKkHAMb{font-size:18px}.Bpk .ZiKdKkHAMb{min-width:0;max-width:44vh;margin:0 3.5vh 0 3vh}.avAguHZ4o{position:absolute;top:9px;left:13px;display:flex;align-items:flex-end;color:#afc5cf;font-weight:700;font-size:12px;font-style:normal;line-height:14px;letter-spacing:.05em;text-transform:uppercase}.ZFiN,.Dg7wIQ0iA{cursor:pointer}.Dg7wIQ0iA{min-width:5em;max-height:2.4em;margin-bottom:.7em;overflow:hidden;color:#000;font-size:1.5em;line-height:1.2em;text-align:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ZFiN{position:relative;display:inline-block;box-sizing:border-box;min-width:10em;padding:.6em 1.2em .7em;color:#006aff;font-weight:300;font-size:1em;text-align:center;background-color:#e5f0ff;border-radius:.3em}.ZFiN:hover{background-color:#d9e9ff}.qRE{position:absolute;top:-15px;left:-15px;width:100%;height:100%;padding:15px}.tA5vlZ .Dg7wIQ0iA{color:#fff}.tA5vlZ .ZFiN{color:#fff;background-color:#535c7a}.tA5vlZ .ZFiN:hover{background-color:#5d6682}.Bpk{transition:box-shadow .2s linear,background-color .2s linear,width .4s ease,height .4s ease,left .4s ease,top .4s ease,bottom .4s ease,right .4s ease;will-change:width,height,left,top,bottom,right}.IxOfxVm2QJ{transition:box-shadow .2s linear,background-color .2s linear,margin-top .2s linear,transform .4s ease}.Bpk .Y8P9vcHJe{transition:width .4s,height .4s;will-change:width,height}.o2rfwOAis{transition:none}.FLLBf .LPbzlLYM{display:block}.FLLBf .lxuYaF7Im{opacity:1}.PaCPemxiu1 .lxuYaF7Im{display:block;opacity:0}.rS6c:not(.zIS) .lxuYaF7Im,.Lg542b .lxuYaF7Im{opacity:0}.rS6c:not(.zIS) .LPbzlLYM,.Lg542b .LPbzlLYM{display:none}.WfOaIIcSq.zIS.IxOfxVm2QJ{margin-top:32px}.XYAvzn .Y8P9vcHJe{width:auto}",""]),n.locals={yaInPageStickyWrapper:"rS6c",yaInPageStickyWrapper__sticky:"FLLBf",yaInPageStickyWrapper__sticky__flyroll:"HIAlCjn",yaInpageAdditionalContentContainer:"lxuYaF7Im",yaInPageStickyWrapper__sticky__covering:"XYAvzn",yaInPageStickyWrapper__sticky__covering_color_scheme_light:"g6JKXHbp",yaInPageStickyWrapper__sticky__covering_color_scheme_dark:"Pfsm1",yaInPageWrapper:"Y8P9vcHJe",yaInPagePlaceholderElement:"oS65VJN",InPageLayout__videoSlot:"BleDSr",InPageLayout__packshotContainer:"heS4A",InPageLayout__slot:"J2fa5tPii",InPageLayout__videoSlotContainer:"xrw1oTJe",yaInpageCross:"LPbzlLYM",yaInpageAdditionalContent:"ZiKdKkHAMb",yaInPageStickyWrapper__variant__covering:"Bpk",yaInpageAdditionalContent__adTitle:"avAguHZ4o",yaInpageAdditionalContent__button:"ZFiN",yaInpageAdditionalContent__description:"Dg7wIQ0iA",yaInpageAdditionalContent__buttonClickableArea:"qRE",yaInpageAdditionalContent_dark:"tA5vlZ",yaInPageStickyWrapper__variant__flyroll:"IxOfxVm2QJ",yaInPageStickyWrapper__unAnimated:"o2rfwOAis",yaInPageStickyWrapper__additionalContent_enabled:"PaCPemxiu1",yaInPageStickyWrapper__detached:"zIS",yaInPageStickyWrapper__inline:"Lg542b",yaInPageStickyWrapper__isAnimating:"WfOaIIcSq"},e.exports=n},5432:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".v9O31FyU{color:inherit;text-decoration:none;pointer-events:auto}.v9O31FyU[data-pointer-events]{pointer-events:none}",""]),n.locals={ClickThroughLink:"v9O31FyU"},e.exports=n},7480:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".X6KCRcr{display:inline-block;color:#000;font-size:16px;font-family:"+r.locals.AD_FONT+";background-color:#ffd400;border-radius:3px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto}.TW6swv{padding:10px 16px;line-height:16px}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,PackshotButton:"X6KCRcr",PackshotButton__content:"TW6swv"},e.exports=a},4368:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".deT{background-color:#000;opacity:.5}",""]),n.locals={PackshotOverlay:"deT"},e.exports=n},3162:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".iG7WbYuHPM{position:relative}.LS9wxEd0{cursor:pointer}.D1gTxMq{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center}.uCOl{font-weight:700;cursor:pointer}.n85G,.uCOl{box-sizing:border-box;text-align:center;margin:4px 0;width:100%;color:#fff;font-family:"+r.locals.AD_FONT+"}.EOc6i{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.NUSz0cM{justify-content:center;display:flex;margin:8px}.veZXK1{position:absolute;top:0;left:0}.opnsaIL{position:absolute;bottom:10px;display:flex;justify-content:center;width:100%;color:#fff;font-family:"+r.locals.AD_FONT+"}.imoe{position:absolute;bottom:0;width:100%;padding:4px;color:#fff;opacity:.85;font-family:"+r.locals.AD_FONT+"}.vGQV{justify-content:left}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,PackshotScreen:"iG7WbYuHPM",PackshotScreen_clickable:"LS9wxEd0",PackshotScreen__content:"D1gTxMq",PackshotScreen__title:"uCOl",PackshotScreen__body:"n85G",PackshotScreen__buttonWrapper:"EOc6i",PackshotScreen__buttonWrapper_newDesign:"NUSz0cM",PackshotScreen__packshotOverlayWrapper:"veZXK1",PackshotScreen__textBlock:"opnsaIL",PackshotScreen__textBlock_newDesgin:"imoe",PackshotScreen__buttonWrapper_newDesign_float_left:"vGQV"},e.exports=a},5817:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(5092),s=i(1307),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".pUKc{display:inline-flex;align-items:center;height:15px;box-sizing:border-box;padding:0 6px;color:#b1b1b1;font-weight:400;font-size:6px;font-family:"+r.locals.AD_FONT+";line-height:normal;letter-spacing:.075em;text-transform:uppercase;text-decoration:none;text-shadow:0 2px 2px rgba(0,0,0,.1);background:rgba(38,38,38,.65);border-radius:24px;transform-origin:bottom left;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto}.xUZ6{font-size:8px;height:17px}.H2z7eDg{cursor:pointer}.MKH{margin:0 3px;font-weight:700;font-size:4px;line-height:1.5}.xUZ6 .MKH{font-size:6px}.giha{font-size:8px;background:#eef1f4;text-shadow:none}.giha .MKH{font-size:8px}.Sun97{}.pUKc.b44B7sv,.pUKc.phLIA{-webkit-backdrop-filter:none;backdrop-filter:none;text-shadow:none}.pUKc.phLIA{background:hsla(0,0%,100%,.8);color:#3a3c40}.pUKc.b44B7sv{background:rgba(26,43,77,.4);color:#fff}.CKa{}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,AD_LABEL_SMALL_HEIGHT:""+a.locals.AD_LABEL_SMALL_HEIGHT,AD_LABEL_MIDDLE_HEIGHT:""+s.locals.AD_LABEL_MIDDLE_HEIGHT,AdLabel:"pUKc",AdLabel_fullSize:"xUZ6",AdLabel_clickable:"H2z7eDg",AdLabel__delimiter:"MKH",AdLabel_survey:"giha",AdLabel__ageLabel:"Sun97",AdLabel_dark:"b44B7sv",AdLabel_light:"phLIA",AdLabel__domain:"CKa"},e.exports=l},7769:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".EW1{display:flex;align-items:center}",""]),n.locals={AdLabelsPanel:"EW1"},e.exports=n},9843:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".dvn0Y8WIC{pointer-events:auto;display:block;position:relative;height:17px;width:17px;margin-left:3px;border-radius:20px;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.riRrmoZE5g{height:15px;width:15px;margin-left:2px}.dvn0Y8WIC>svg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}",""]),n.locals={BusinessUnitAdLabel:"dvn0Y8WIC",BusinessUnitAdLabel_small:"riRrmoZE5g"},e.exports=n},3614:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".DC7OST6B{display:inline-block;height:16px;padding:0 6px;color:#000;font-weight:500;font-size:11px;font-family:"+r.locals.AD_FONT+";text-decoration:none;white-space:nowrap;background-color:#fff;border:1px solid #e5e5e5;border-radius:2px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,SocialAdvertisingAdLabel:"DC7OST6B"},e.exports=a},2935:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".IcNZZytS{height:100%;opacity:0}.w2yuJP{opacity:1}.ABOFYwk3r{height:calc(100% - var(--ctat-margin-top) - var(--ctat-margin-bottom));display:flex;align-items:center;justify-content:center;margin-left:var(--ctat-horizontal-margin);margin-right:var(--ctat-horizontal-margin);margin-top:var(--ctat-margin-top);position:relative;z-index:0}.Udr,.kwXQ{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;font-family:"+r.locals.AD_FONT+";font-weight:600;text-shadow:0 0 16px rgba(0,0,0,.05),0 0 8px rgba(0,0,0,.05),0 4px 4px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05),0 1px 1px rgba(0,0,0,.05)}.w2yuJP .kwXQ .bDhlfpng8u{--ctat-animation-delay-line:calc(var(--ctat-animation-title-part-duration)*3*var(--stw-text-line-index));--ctat-animation-delay-third:calc(var(--ctat-animation-title-part-duration)*var(--stw-text-char-inside-line-third));--ctat-animation-overlap-char:calc(var(--ctat-animation-delay-third) + var(--ctat-animation-delay-line));animation-name:yI85z;animation-duration:var(--ctat-animation-title-part-duration);animation-delay:calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-overlap-char) + var(--ctat-animation-title-animation-show-delay));animation-fill-mode:both;animation-timing-function:ease-in-out;animation-play-state:var(--ctat-animation-playing-state)}@keyframes yI85z{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.Udr .YT0HiFhkUl,.kwXQ .YT0HiFhkUl{overflow:clip;pointer-events:auto}.w2yuJP .kwXQ .YT0HiFhkUl{--ctat-animation-title-animation-enlarge-current-line-delay:calc(var(--ctat-animation-title-animation-enlargement-delay) + (var(--ctat-animation-title-animation-enlargement-duration) + var(--ctat-animation-title-enlargement-next-line-delay))*var(--stw-text-line-index));--ctat-animation-title-animation-hide-current-line-delay:calc(var(--ctat-animation-title-animation-hide-delay) + var(--ctat-animation-title-animation-hide-duration)*var(--stw-text-line-index));animation-name:Tzd,mC4ZksnR;animation-duration:var(--ctat-animation-title-animation-enlargement-duration),var(--ctat-animation-title-animation-hide-duration);animation-delay:calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-title-animation-enlarge-current-line-delay)),calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-title-animation-hide-current-line-delay));animation-fill-mode:both,forwards;animation-timing-function:cubic-bezier(.35,0,.65,1),ease-in-out;animation-play-state:var(--ctat-animation-playing-state),var(--ctat-animation-playing-state)}@keyframes Tzd{0%{transform:scale(1) translateY(0)}to{transform:scale(1.1) translateY(0)}}@keyframes mC4ZksnR{0%{transform:scale(1.1) translateY(0);opacity:1}99%{transform:scale(1.1) translateY(100%);opacity:0}to{transform:scale(1.1) translateY(9999px);opacity:0}}.w2yuJP .Udr .YT0HiFhkUl{--ctat-animation-body-animation-show-current-line-delay:calc(var(--ctat-animation-body-animation-show-delay) + (var(--ctat-animation-body-animation-show-duration)*0.5 + var(--ctat-animation-body-animation-show-line-delay))*var(--stw-text-line-index));--ctat-animation-body-animation-enlargement-current-line-delay:calc(var(--ctat-animation-body-animation-enlargement-delay) + var(--ctat-animation-body-animation-show-duration)*var(--stw-text-line-index));animation-name:uzkpxky,zKV;animation-duration:var(--ctat-animation-body-animation-show-duration),var(--ctat-animation-body-animation-enlargement-duration);animation-delay:calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-body-animation-show-current-line-delay)),calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-body-animation-enlargement-current-line-delay));animation-fill-mode:both,none;animation-timing-function:ease-in-out,ease-in-out;animation-play-state:var(--ctat-animation-playing-state),var(--ctat-animation-playing-state)}.w2yuJP .Udr{z-index:0;animation-name:spV5r0;animation-delay:calc(var(--ctat-animation-current-time)*-1 + var(--ctat-animation-body-animation-show-delay));animation-duration:.1s;animation-timing-function:linear;animation-fill-mode:both}.w2yuJP .kwXQ{z-index:1}@keyframes spV5r0{0%{z-index:0}to{z-index:1}}@keyframes uzkpxky{0%{transform:translateY(9999px);opacity:0}1%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes zKV{0%{transform:scale(1);letter-spacing:normal}33%{transform:scale(1.1);letter-spacing:.1em}to{transform:scale(1);letter-spacing:normal}}.brvkC9diV{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.1)}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,CallToActionText:"IcNZZytS",CallToActionText__animated:"w2yuJP",CallToActionText__overlay:"ABOFYwk3r",CallToActionText__body:"Udr",CallToActionText__title:"kwXQ",SplitTextLinesWrapper__char:"bDhlfpng8u","title-char-reveal":"yI85z",SplitTextLinesWrapper__textLine:"YT0HiFhkUl","title-line-enlargement":"Tzd","title-line-hide":"mC4ZksnR","body-line-show":"uzkpxky","body-line-enlargement":"zKV","body-show":"spV5r0",CallToActionTextContainer:"brvkC9diV"},e.exports=a},5655:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".MeUJXyocW7{display:flex;align-items:center;pointer-events:auto;border:none;font:inherit;height:100%;min-height:32px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:inherit;background-color:rgba(38,38,38,.65);border-radius:4px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);padding:0 10px;cursor:pointer}.AtJF7hn{height:2em}.gdm7{margin-left:8px;text-align:left}.PmXM{font-weight:500;text-transform:capitalize}.mz01jgummJ{position:relative;font-size:.86em;text-transform:lowercase}.bViJoB4a{visibility:hidden}.eq2Ui{position:absolute;top:0;left:0}",""]),n.locals={EcomShopSkinButton:"MeUJXyocW7",EcomShopSkinButton__ShowHideIcon:"AtJF7hn",EcomShopSkinButton__Text:"gdm7",EcomShopSkinButton__TextMainLine:"PmXM",EcomShopSkinButton__TextDetailsLine:"mz01jgummJ",EcomShopSkinButton__Placeholder:"bViJoB4a",EcomShopSkinButton__TextDetailsContent:"eq2Ui"},e.exports=n},6479:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".ZbBw{position:absolute;box-shadow:0 10px 20px -4px rgba(0,0,0,.36);background-color:#2f2f32;border-radius:6px;font-family:"+r.locals.AD_FONT+";color:#fff;font-weight:400;font-size:13px;line-height:16px;letter-spacing:-.31px}.BBjhtWLoF{position:absolute;width:24px;height:8px}.BBjhtWLoF svg{position:absolute;left:0;top:0}.zQMTeLDIUh{display:flex}.O53yst{padding:5px 8px 7px}.AKflz2{pointer-events:auto;padding:5px 5px 0 0}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,Tooltip:"ZbBw",Tooltip__arrow:"BBjhtWLoF",Tooltip__body:"zQMTeLDIUh",Tooltip__text:"O53yst",Tooltip__closeContainer:"AKflz2"},e.exports=a},7121:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".Yxhy77D{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}",""]),n.locals={TooltipContainer:"Yxhy77D"},e.exports=n},8866:function(e,t,i){var o=i(1907),n=i(6939),r=i(9792),a=i(2840),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".Bd81{border-radius:16px;cursor:pointer;transition:"+r.locals.default_transition_duration+" background-color "+a.locals.default_transition_timing_function+";will-change:background-color}.Bd81:not(.XWxvm),.XWxvm{background-color:rgba(35,37,38,.1)}.Bd81:not(.XWxvm):hover,.XWxvm:hover{background-color:rgba(35,37,38,.4)}.MjpcavxoQ0{transform:translate(12px,12px);will-change:transform}.zbSohY{transform:rotate(45deg);opacity:0}.SjEyoyVJ,.zbSohY{transition:"+r.locals.default_transition_duration+" transform "+a.locals.default_transition_timing_function+","+r.locals.default_transition_duration+" opacity "+a.locals.default_transition_timing_function+";will-change:transform,opacity}.XWxvm .SjEyoyVJ{opacity:0}.XWxvm .zbSohY{opacity:1}.XWxvm .tKoD6kjbb0{transform:translateY(6px)}.XWxvm .mUyAoYqN{transform:translateY(-6px)}.XWxvm .TbAhp{transform:rotate(0deg)}.XWxvm .s0BzSsys7P{transform:rotate(90deg)}",""]),s.locals={default_transition_duration:""+r.locals.default_transition_duration,default_transition_timing_function:""+a.locals.default_transition_timing_function,AbuseAnimationIcon:"Bd81",AbuseAnimationIcon_cross:"XWxvm",AbuseAnimationIcon__lines:"MjpcavxoQ0",AbuseAnimationIcon__line:"zbSohY",AbuseAnimationIcon__dot:"SjEyoyVJ",AbuseAnimationIcon__dot_top:"tKoD6kjbb0",AbuseAnimationIcon__dot_bottom:"mUyAoYqN",AbuseAnimationIcon__line_left:"TbAhp",AbuseAnimationIcon__line_right:"s0BzSsys7P"},e.exports=s},2020:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(7441),s=i(1154),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".Hmhas{display:inline-block;color:#000;font-weight:"+a.locals.AD_FONT_WEIGHT+";font-size:16px;font-family:"+r.locals.AD_FONT+";cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tlXpQM{cursor:pointer}.Wr24TDSSt{text-decoration:none}.Oop9OVPEGH{display:flex;align-items:center;height:"+s.locals.small_button_height+";opacity:.6}.tlXpQM .Oop9OVPEGH{opacity:.915}.tlXpQM:hover .Oop9OVPEGH{opacity:1}.Ojyqi{padding:4px;pointer-events:auto}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,AD_FONT_WEIGHT:""+a.locals.AD_FONT_WEIGHT,small_button_height:""+s.locals.small_button_height,Button:"Hmhas",Button_active:"tlXpQM",Button_link:"Wr24TDSSt",Button__content:"Oop9OVPEGH",Button__clickable:"Ojyqi"},e.exports=l},5050:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".EKTrc2u{position:absolute;bottom:0;left:0;width:100%;height:88px;background-image:linear-gradient(-180deg,transparent,rgba(0,0,0,.3) 35%,rgba(0,0,0,.6) 99%);pointer-events:none;transition:opacity .3s ease-in-out}.ZcdEfW{opacity:0}",""]),n.locals={ControlsBottomShadow:"EKTrc2u",ControlsBottomShadow_hidden:"ZcdEfW"},e.exports=n},1796:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".QZZZbUP0{filter:drop-shadow(0 2px 3px rgba(0,0,0,.2));width:26px;height:24px}.WodqI0r47a{width:100%;height:100%}",""]),n.locals={MuteIcon:"QZZZbUP0",MuteIcon_Fill:"WodqI0r47a"},e.exports=n},4115:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"@keyframes tRhUkJO{0%{transform:translate(-50%,-50%) rotate(0deg)}to{transform:translate(-50%,-50%) rotate(1turn)}}.wZI1fy{animation-name:tRhUkJO;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}",""]),n.locals={SpinnerIcon__css_animated:"wZI1fy",spin:"tRhUkJO"},e.exports=n},5751:function(e,t,i){var o=i(1907),n=i(6939),r=i(1154),a=i(4430),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".xbBNuDT{font-size:18px}.xbBNuDT .FlAYFF{height:"+r.locals.middle_button_height+"}.HsRd3J{color:#fff;text-shadow:0 2px 2px rgba(0,0,0,.1)}.HsRd3J .ueq{position:relative;background-color:"+a.locals.button_inactive_background_color+";border-radius:4px;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.opMhUZQ8F .ueq{background-color:"+a.locals.button_active_background_color+"}.HsRd3J.opMhUZQ8F:hover .ueq{background-color:"+a.locals.button_hovered_background_color+"}.opMhUZQ8F .Oop9OVPEGH{opacity:1}",""]),s.locals={middle_button_height:""+r.locals.middle_button_height,button_active_background_color:""+a.locals.button_active_background_color,button_hovered_background_color:""+a.locals.button_hovered_background_color,button_inactive_background_color:""+a.locals.button_inactive_background_color,SquareButton_fullSize:"xbBNuDT",SquareButton__basecontent:"FlAYFF",SquareButton:"HsRd3J",SquareButton__basebutton:"ueq",SquareButton_active:"opMhUZQ8F",Button__content:"Oop9OVPEGH"},e.exports=s},1172:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".s05bz{width:100%;transform-origin:0;will-change:transform}.s05bz,.Gqw4G4o4{position:absolute;height:2px}.k0ChB{background-color:#ff1a2d;transform:scaleX(0)}.Zps{background-color:#cdcdcd;transform:scaleX(1)}",""]),n.locals={TimelineBar:"s05bz",TimelineBar__container:"Gqw4G4o4",TimelineBar__progress:"k0ChB",TimelineBar__background:"Zps"},e.exports=n},1197:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".JFux76{filter:drop-shadow(0 2px 3px rgba(0,0,0,.2));width:26px;height:24px}.j9kEme{width:100%;height:100%}",""]),n.locals={UnmuteIcon:"JFux76",UnmuteIcon_Fill:"j9kEme"},e.exports=n},1155:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".lIoPCIbxC{}",""]),n.locals={AbuseContainer:"lIoPCIbxC"},e.exports=n},7486:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(9792),s=i(2840),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".fONxg{position:absolute;z-index:1;box-sizing:border-box;overflow:hidden;background-color:#fff;opacity:0;transition:"+a.locals.default_transition_duration+" opacity "+s.locals.default_transition_timing_function+","+a.locals.default_transition_duration+" height "+s.locals.default_transition_timing_function+";pointer-events:none;will-change:opacity,height}.fONxg:not(.d1ons){visibility:hidden}.d1ons{opacity:1;pointer-events:auto}.fONxg:not(.dpqgp2mYrY){top:36px;right:4px;width:240px;border-radius:16px;box-shadow:4px 4px 40px rgba(0,21,64,.22)}.dpqgp2mYrY{top:0;right:0;bottom:0;left:0}.ivHgz2cYx1{box-sizing:border-box;padding:8px}.dpqgp2mYrY .ivHgz2cYx1{height:100%;overflow:auto}.xpB1m{display:flex;align-items:center;height:36px}.xbA6EQd5bv{box-sizing:border-box;width:100%;height:112px;padding:8px 12px;color:#575c66;font-size:14px;font-family:"+r.locals.AD_FONT+";line-height:20px;background-color:#f4f6fb;border-color:transparent;border-radius:3px;outline:none;resize:none;pointer-events:auto}.xbA6EQd5bv:focus{border-color:#498bff}.ZKj245{margin-top:8px;background-color:#498bff;border-radius:8px}.ZKj245:hover{background-color:#2e71e5}.FTdKv5mXAU{justify-content:center;height:26px;color:#fff;font-weight:400;line-height:20px}.pIM{padding:8px;color:#3a3d40}.FTdKv5mXAU,.QAIs,.pIM{font-size:15px}.QAIs{color:#a3acbf;line-height:16px;word-break:break-word}.QAIs,.pIM{font-weight:600;font-family:"+r.locals.AD_FONT+";line-height:16px}.KQ52DteV .QAIs,.WcH .QAIs{padding:10px 8px}.nLD7c .QAIs{margin-right:15px;margin-left:10px}.H0T{display:flex;align-items:center;justify-content:center;width:28px;height:28px;margin-right:2px;margin-left:2px;border-radius:50%;cursor:pointer;transition:"+a.locals.default_transition_duration+" background-color "+s.locals.default_transition_timing_function+";pointer-events:auto}.H0T:hover{background-color:#f4f8ff}.mJ96W{display:flex;flex-direction:column}.iDzB{max-height:70px;margin:8px;overflow-y:auto;color:#a3acbf;font-size:11px;font-family:"+r.locals.AD_FONT+";line-height:14px;white-space:pre-line}.dpqgp2mYrY .iDzB{margin-right:18px}.dpqgp2mYrY .mJ96W{height:calc(100% - 36px);min-height:120px}.dpqgp2mYrY .nLD7c,.dpqgp2mYrY .xbA6EQd5bv{height:100%}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,default_transition_duration:""+a.locals.default_transition_duration,default_transition_timing_function:""+s.locals.default_transition_timing_function,AbuseDisplay:"fONxg",AbuseDisplay_visible:"d1ons",AbuseDisplay_fullSize:"dpqgp2mYrY",AbuseDisplay__content:"ivHgz2cYx1",AbuseDisplay__customReasonDisplayHeader:"xpB1m",AbuseDisplay__customReasonDisplayTextarea:"xbA6EQd5bv",AbuseDisplay__customReasonDisplayButton:"ZKj245",AbuseDisplay__customReasonDisplayButtonContent:"FTdKv5mXAU",AbuseDisplay__text:"pIM",AbuseDisplay__hint:"QAIs",AbuseDisplay__complaintDisplay:"KQ52DteV",AbuseDisplay__hideDisplay:"WcH",AbuseDisplay__customReasonDisplay:"nLD7c",AbuseDisplay__arrowLeftIcon:"H0T",AbuseDisplay__messageBox:"mJ96W",AbuseDisplay__legal:"iDzB"},e.exports=l},8561:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".DuFmduo{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;background:#f4f6fb;pointer-events:none}.Se5x{justify-content:center}.MRWrN2Xj{justify-content:left}.MRWrN2Xj .jQ0TwBmPkF{max-width:200px;margin-left:20px}.Se5x .jQ0TwBmPkF{text-align:center}.TxgiLTJPT{color:#3a3d40;font-weight:600;font-size:16px;font-family:"+r.locals.AD_FONT+";line-height:22px}.xLTo6{margin-top:8px;color:#a3acbf;font-size:14px;font-family:"+r.locals.AD_FONT+";line-height:20px}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,AbusePlaceholder:"DuFmduo",AbusePlaceholder_place_center:"Se5x",AbusePlaceholder_place_left:"MRWrN2Xj",AbusePlaceholder__container:"jQ0TwBmPkF",AbusePlaceholder__text:"TxgiLTJPT",AbusePlaceholder__hint:"xLTo6"},e.exports=a},8237:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".Zbc8f{font-family:"+r.locals.AD_FONT+";padding:0 6px;display:grid;grid-template-columns:fit-content(1ch) 1fr fit-content(1ch);align-items:end;font-size:var(--ctalc-font-size);color:#fff}.Zbc8f .nbj .QtefYQc{padding:4px 4px 4px 10px}.uVKhEd6s{font-size:var(--ctalc-skip-button-font-size)}.ETiHW8y .nbj{grid-column:1/2}.Yxxmu{height:100%}.ETiHW8y .Yxxmu{grid-column:2}.ETiHW8y .uVKhEd6s{grid-column:3/4}.ZzpQA2 .nbj{grid-row:2;grid-column:1/2}.ZzpQA2 .uVKhEd6s{grid-row:2;grid-column:3/4}.ZzpQA2 .Yxxmu{grid-row:1;grid-column:1/2}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,CallToActionControls:"Zbc8f",CallToActionControls_SkinActionPanel:"nbj",ActionPanel__clickableLayer:"QtefYQc",CallToActionControls__SkipButton:"uVKhEd6s",CallToActionControls_oneLine:"ETiHW8y",CallToActionControls_SkinProductsPackshotButton:"Yxxmu",CallToActionControls_twoLines:"ZzpQA2"},e.exports=a},7012:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".Gyd2ISEfNJ{position:absolute;top:50%;left:50%;display:flex;transform:translate(-50%,-50%)}",""]),n.locals={CenterControls:"Gyd2ISEfNJ"},e.exports=n},873:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,'.I7DaSSo{padding-top:4px;margin:0 16px;display:flex;align-items:flex-end}.YZ7{padding-bottom:7px}.i9d1{letter-spacing:.01em;display:flex;pointer-events:auto;color:#fff;opacity:.85;text-shadow:0 0 4px rgba(0,0,0,.75);font-size:12px;white-space:nowrap;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.i9d1>:not(:last-child):after{content:"\u2022";padding:0 .3em}.mptTsS{flex:0 0 auto}',""]),n.locals={Backpack:"I7DaSSo",Backpack_FloatedUp:"YZ7",Backpack_labels:"i9d1",Backpack_buttons:"mptTsS"},e.exports=n},4647:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".LHeTRX{pointer-events:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}",""]),n.locals={BackpackAdLabel:"LHeTRX"},e.exports=n},2392:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".rnNJay{}",""]),n.locals={BackpackAdSequence:"rnNJay"},e.exports=n},2219:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,'.lz594{position:relative;display:flex;flex-flow:column nowrap;z-index:0;height:100%;overflow:visible;justify-content:flex-end}.lz594:before{z-index:-1;content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.004) 6.67%,rgba(0,0,0,.018) 13.33%,rgba(0,0,0,.04) 20%,rgba(0,0,0,.073) 26.67%,rgba(0,0,0,.115) 33.33%,rgba(0,0,0,.165) 40%,rgba(0,0,0,.221) 46.67%,rgba(0,0,0,.278) 53.33%,rgba(0,0,0,.334) 60%,rgba(0,0,0,.384) 66.67%,rgba(0,0,0,.426) 73.33%,rgba(0,0,0,.459) 80%,rgba(0,0,0,.482) 86.67%,rgba(0,0,0,.495) 93.33%,rgba(0,0,0,.5));opacity:.65}.TktlaT:before{content:none}.oyHl.lz594:before{top:30px}.Vbrwn68i{opacity:1;transition:none}.oyHl .Vbrwn68i{order:-1;opacity:.01;transition:opacity .3s ease-in-out,order 0s .3s}.bpY9{min-height:3px;margin:4px 16px 0;transition:none}.oyHl .bpY9,.vQMhvtru .bpY9{margin:4px 0 0;transition:margin 0s .3s}',""]),n.locals={ControlPanel:"lz594",ControlPanel_withoutShadow:"TktlaT",ControlPanel_minimized:"oyHl",ControlPanel__controls:"Vbrwn68i",ControlPanel__timeLine:"bpY9",ControlPanel_small:"vQMhvtru"},e.exports=n},8409:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".BXs6F{width:43px;height:43px;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto}.vin9Bqkrig{cursor:default}.BXs6F svg{fill:#fff;opacity:.85;width:40px;height:44px}.vin9Bqkrig svg{opacity:.5}.BXs6F:hover svg{opacity:1}.vin9Bqkrig:hover svg{opacity:.5}",""]),n.locals={ControlPanelButton:"BXs6F",ControlPanelButton_disabled:"vin9Bqkrig"},e.exports=n},8265:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".i1hTZA{display:flex;padding:0 16px;pointer-events:auto}.RYJgDATADe{position:static}.y6XDNXEB{margin-left:auto}",""]),n.locals={ControlPanelControls:"i1hTZA",ControlPanelControls__playButton:"RYJgDATADe",ControlPanelControls__fullscreenButton:"y6XDNXEB"},e.exports=n},6535:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".fFl9qEX{cursor:pointer;display:flex}.A1ef0{will-change:width;width:0;height:43px;position:relative;overflow:hidden;transition:width .2s ease-out}.t4WwMmvZ8 .A1ef0{width:48px}.EQsX{position:absolute;left:0;right:0;top:50%;box-shadow:0 0 1px 0 rgba(0,0,0,.75);height:2px;background:#fff;transform:translateY(-50%);opacity:.5}.YE5zWQKB{position:absolute;top:0;bottom:0;left:0;width:calc(100% - 10px)}.hVf4EV0{position:absolute;background:#fff;width:10px;height:10px;border-radius:5px;top:50%;transform:translateY(-50%);will-change:left}",""]),n.locals={ControlPanelSoundButton:"fFl9qEX",ControlPanelSoundButton__SliderContainer:"A1ef0",ControlPanelSoundButton_opened:"t4WwMmvZ8",ControlPanelSoundButton__SliderContainerLiner:"EQsX",ControlPanelSoundButton__SliderContainerThumbContainer:"YE5zWQKB",ControlPanelSoundButton__SliderContainerThumb:"hVf4EV0"},e.exports=n},9740:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".tgcwh{height:3px;background-color:rgba(0,0,0,.2);position:relative;display:flex}.EBOjY{width:100%;border-radius:3px;border-bottom-left-radius:0;border-top-left-radius:0;background-color:#f8cc46}.XlI2xwv{border-radius:0}",""]),n.locals={ControlPanelTimeLine:"tgcwh",ControlPanelTimeLine__Bar:"EBOjY",ControlPanelTimeLine__Bar_Full:"XlI2xwv"},e.exports=n},6719:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(1154),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".hVBhpG2{font-family:"+r.locals.AD_FONT+";font-size:var(--new-skin-font-size);color:#fff;position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;display:grid;grid-template-rows:auto 1fr auto auto auto;grid-template-columns:auto auto 1fr auto 35px}.vsO{grid-template-rows:auto 1fr auto auto 10%}.mIgd{grid-row:1;grid-column:1;padding:4px 0 0 4px}.I4F{grid-row:1;grid-column:1/5}.z7oV{grid-row:1;grid-column:1}.M6uV{text-align:right}.LhB5{grid-row:4;grid-column:4/6;font-size:var(--new-skin-skip-button-font-size);padding-right:6px;align-self:flex-end}.w36xEy .gsOC{padding-top:0;padding-bottom:0}.w36xEy .TRl{height:"+a.locals.small_button_height+"}.ZdKSQefO{grid-row:2;grid-column:1/6;padding:10px 36px;overflow:hidden;position:relative}.KAEzk4qsR{pointer-events:auto}.UNPhFA8X .ZdKSQefO,.MVGyEC .ZdKSQefO,.MVGyEC.UNPhFA8X .ZdKSQefO{grid-row:2;grid-column:1/6;padding:10px 20px}.dtI2{grid-row:4;grid-column:1;padding:6px 0 4px 16px;overflow:hidden}.w36xEy .dtI2{padding-top:0;padding-left:6px;padding-bottom:0;align-self:flex-end}.OQsyV6{grid-row:4;grid-column:1;padding:6px 0 4px 16px;height:4em}.w36xEy .OQsyV6{height:auto;padding-left:6px}.dtI2+.OQsyV6{grid-column:2}.UNPhFA8X .dtI2+.OQsyV6{grid-row:4;grid-column:2}.MVGyEC.UNPhFA8X .dtI2+.OQsyV6{grid-row:3;grid-column:1;align-self:flex-end}.UPGe{grid-row:5;grid-column:1/6}.bhNUsD41o{position:absolute;right:0;bottom:0;left:0}.brvkC9diV .IcNZZytS{overflow:hidden}",""]),s.locals={AD_FONT:""+r.locals.AD_FONT,small_button_height:""+a.locals.small_button_height,NewSkin:"hVBhpG2",NewSkin_CtaAlwaysOnTenPercentOverBottom:"vsO",NewSkin__AdLabelContainer:"mIgd",NewSkin__TopControlsContainer:"I4F",NewSkin_TopMuteButtonContainer:"z7oV",NewSkin_TopMuteButtonContainer_rightPosition:"M6uV",NewSkin__SkipButtonContainer:"LhB5",NewSkin_smallControls:"w36xEy",SkipButton:"gsOC",SkipButton__clickable:"TRl",NewSkin__ProductsPackshotContainer:"ZdKSQefO",NewSkin__ProductsPackshotContainer_visible:"KAEzk4qsR",NewSkin_twoControlLines:"UNPhFA8X",NewSkin_vertical:"MVGyEC",NewSkin__CtaContainer:"dtI2",NewSkin__ProductsPackshotButton:"OQsyV6",NewSkin_BottomControlsContainer:"UPGe",NewSkin__DisclaimerContainer:"bhNUsD41o",CallToActionTextContainer:"brvkC9diV",CallToActionText:"IcNZZytS"},e.exports=s},8315:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".yI3z{position:absolute;top:50%;left:50%;display:flex;transform:translate(-50%,-50%)}.O93GFlT{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);background-color:rgba(0,0,0,.2);display:grid;align-items:center;justify-items:center;place-items:center;pointer-events:auto;filter:drop-shadow(0 2px 3px rgba(0,0,0,.2))}.O93GFlT svg{fill:#fff;width:40px;height:43px}.r0j7aH{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:auto}",""]),n.locals={OverlayLayer__spinnerContainer:"yI3z",OverlayLayer__playButtonContainer:"O93GFlT",OverlayLayer__pauseContainer:"r0j7aH"},e.exports=n},9931:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".zRL3{display:flex}.zRL3 .yP46jNK{margin-left:auto}.zRL3 .s3c0{width:28px;height:28px;padding:2px}.zRL3 .s3c0 svg{filter:drop-shadow(0 2px 3px rgba(0,0,0,.2));fill:#f2f2f2;opacity:1}",""]),n.locals={TopControlsLayer:"zRL3",TopControlsLayer__skipButton:"yP46jNK",TopControlsLayer__playButton:"s3c0"},e.exports=n},1209:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".MP7Oi{pointer-events:auto;position:absolute;top:0;right:0;bottom:0;left:0}",""]),n.locals={UnderlyingLayer:"MP7Oi"},e.exports=n},9997:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".vy9{width:40px;height:44px;cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;padding:0;border:0;background-color:transparent;outline:0;outline-offset:-2px;overflow:visible;opacity:.85}.kDEMpP3F{opacity:.5}.vy9:not(.kDEMpP3F):hover{opacity:1}",""]),n.locals={PlayerButtonMimic:"vy9",PlayerButtonMimic_disabled:"kDEMpP3F"},e.exports=n},8183:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".iOG{position:absolute;left:0;right:0;bottom:0;display:flex;flex-flow:column nowrap}",""]),n.locals={PlayerLikeBottomControls:"iOG"},e.exports=n},6515:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".PkC64cQ{padding:0 10px;position:relative;display:flex;justify-content:space-between;align-items:stretch;pointer-events:auto;opacity:1;transition:opacity .3s ease-in-out}.tX0JHuYT{opacity:0}.R1o0zGeZP{display:flex}.QkeYtQZb{display:flex;margin-left:auto}",""]),n.locals={PlayerLikeControlLine:"PkC64cQ",PlayerLikeControlLine_hidden:"tX0JHuYT",PlayerLikeControlLine__leftButtons:"R1o0zGeZP",PlayerLikeControlLine__rightButtons:"QkeYtQZb"},e.exports=n},3030:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".n5OFBkNXL{width:100%;height:16px;pointer-events:none;position:relative;margin-bottom:-4px;opacity:1;transition:opacity .1s ease-in-out}.v6kXEih{opacity:0}.dyfai4hHk{position:absolute;left:10px;right:10px;top:0;bottom:0}.GotG{position:absolute;overflow:hidden;top:10px;height:4px;width:100%;transform:scaleY(.5) translateX(0);transition-property:transform;transition-duration:.2s;will-change:transform;box-shadow:0 1px 1px 1px rgba(0,0,0,.1)}.v3svn{border-radius:5px 5px 4.9px;transform:scaleY(1)}.Ede{width:100%;position:absolute;top:0;right:0;bottom:0;left:0;background-color:#fff;opacity:.4}.iJoLH{width:100%;position:absolute;top:0;bottom:0;left:0;transform-origin:0;background:#fc0}",""]),n.locals={PlayerLikeTimeline:"n5OFBkNXL",PlayerLikeTimeline_hidden:"v6kXEih",PlayerLikeTimeline__innerContainer:"dyfai4hHk",PlayerLikeTimeline__backgroundTrack:"GotG",PlayerLikeTimeline__backgroundTrack_mobile:"v3svn",PlayerLikeTimeline__background:"Ede",PlayerLikeTimeline__timeLine:"iJoLH"},e.exports=n},4483:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(1154),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".C6PyIRF0{font-family:"+r.locals.AD_FONT+";font-size:var(--skin-font-size);color:#fff;position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;display:grid;grid-template-rows:auto 1fr auto auto auto auto;grid-template-columns:auto auto 1fr auto}.uyLveHc2Xc{grid-row:1;grid-column:1;padding:4px 0 0 4px;justify-self:flex-start}.h8lH9k{grid-row:4;grid-column:4;font-size:var(--skin-skip-button-font-size);padding-right:6px;align-self:end}.upt5 .gsOC{padding-top:0;padding-bottom:0}.upt5 .TRl{height:"+a.locals.small_button_height+"}.qmLea08QMC{grid-row:2;grid-column:1/5;padding:0 36px;overflow:hidden}.cVGOG .qmLea08QMC{grid-column:1/5}.c4Ccx4CNj .qmLea08QMC,.c4Ccx4CNj.cVGOG .qmLea08QMC{grid-row:2/3;grid-column:1/5;padding:10px}.szb3{pointer-events:auto}.c4Ccx4CNj .I2z{max-width:unset;margin:unset}.yLYg{grid-row:4;grid-column:1;padding:6px 0 4px 10px;overflow:hidden}.upt5 .yLYg{padding-top:0;padding-bottom:0;padding-left:6px;align-self:flex-end}.UL1q6T{grid-row:4;grid-column:1;padding:6px 0 4px 10px;height:4em}.upt5 .UL1q6T{height:auto}.yLYg+.UL1q6T{grid-column:2}.c4Ccx4CNj.cVGOG .yLYg+.UL1q6T{grid-row:3;grid-column:1}.SBNd{grid-row:5;grid-column:1/5;padding:2px 6px 10px;display:flex;align-items:flex-end;flex-wrap:wrap}.T6K7{width:100%;margin-bottom:2px;margin-top:-2px}.T6K7 .GclDTo5S{padding:4px}.fGDFtWK{order:1;flex:1;margin:0}.fGDFtWK .GclDTo5S{padding:4px 10px}.nqss8yJ{grid-row:6;grid-column:1/5;min-height:6px}.t19cjx9u{grid-row:6;grid-column:1/5}.brvkC9diV .IcNZZytS{overflow:hidden}",""]),s.locals={AD_FONT:""+r.locals.AD_FONT,small_button_height:""+a.locals.small_button_height,Skin:"C6PyIRF0",Skin__AdLabelContainer:"uyLveHc2Xc",Skin__SkipButtonContainer:"h8lH9k",Skin_smallControls:"upt5",SkipButton:"gsOC",SkipButton__clickable:"TRl",Skin__ProductsPackshotContainer:"qmLea08QMC",Skin_twoControlLines:"cVGOG",Skin_vertical:"c4Ccx4CNj",Skin__ProductsPackshotContainer_visible:"szb3",Skin__ProductsPackshotContainer_singleVisibleItem:"I2z",Skin__CtaContainer:"yLYg",Skin__ProductsPackshotButton:"UL1q6T",Skin__MuteButtonAndSubtitlesContainer:"SBNd",Skin__SubtitlesContainer:"T6K7",Subtitles__container:"GclDTo5S",Skin__SubtitlesContainer_bottom:"fGDFtWK",Skin__DisclaimerContainer:"nqss8yJ",Skin__VideoInComboControlsContainer:"t19cjx9u",CallToActionTextContainer:"brvkC9diV",CallToActionText:"IcNZZytS"},e.exports=s},4061:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(4430),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".GclDTo5S{display:flex;flex-flow:column nowrap;padding:4px 10px;overflow:hidden;font-size:16px;font-family:"+r.locals.AD_FONT+";letter-spacing:0;text-shadow:0 2px 2px rgba(0,0,0,.1)}.jERLyvXM{margin:2px auto 0;padding:.25em;color:#fff;white-space:pre-wrap;text-align:center;background-color:"+a.locals.button_active_background_color+";border-radius:4px}",""]),s.locals={AD_FONT:""+r.locals.AD_FONT,button_active_background_color:""+a.locals.button_active_background_color,Subtitles__container:"GclDTo5S",Subtitles__subtitle:"jERLyvXM"},e.exports=s},4499:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".nGX2q{padding:4px}.nGX2q .xbGE6jnfM{position:absolute;top:0;right:35px}",""]),n.locals={TopControls:"nGX2q",TopControls__skinButton:"xbGE6jnfM"},e.exports=n},1895:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".HAC{display:flex;align-items:flex-end;min-height:48px}.o4ZMmSpw{position:relative}.k1rRbZhLeO{visibility:visible;opacity:1}.HLVK{visibility:hidden;opacity:0;transition:visibility 0s .3s,opacity .3s ease-in-out}.YD1b{visibility:visible;opacity:1}.PGEjvFJbB{visibility:hidden;opacity:0;transition:visibility 0s .3s,opacity .3s ease-in-out}.HLVK .wHPdKLTT,.k1rRbZhLeO .wHPdKLTT{padding:10px 10px 4px 21px}",""]),n.locals={VideoInComboControls:"HAC",DisclaimerContainer:"o4ZMmSpw",ComboVideoControlsMuteAndTimelineWithHoverEffects_visible:"k1rRbZhLeO",ComboVideoControlsMuteAndTimelineWithHoverEffects_hidden:"HLVK",ComboVideoControls__controlsBottomShadow_visible:"YD1b",ComboVideoControls__controlsBottomShadow_hidden:"PGEjvFJbB",MuteUnmuteButtonWithoutBackground:"wHPdKLTT"},e.exports=n},8971:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".rkc7{position:absolute;top:4px;right:4px;width:24px;height:24px;cursor:pointer;pointer-events:auto}.ekY8eeUGO{z-index:2}",""]),n.locals={AbuseBurgerButton:"rkc7",AbuseBurgerButton_inFullSize:"ekY8eeUGO"},e.exports=n},2645:function(e,t,i){var o=i(1907),n=i(6939),r=i(9792),a=i(2840),s=n(o);s.i(r,"",!0),s.i(a,"",!0),s.push([e.id,".on5{display:block;width:100%;color:#498bff;font-weight:400;border-radius:8px;transition:"+r.locals.default_transition_duration+" background-color "+a.locals.default_transition_timing_function+"}.K3yNJ{display:flex;align-items:center;margin-right:13px}.zsBZkE6hh1{margin-left:auto}.on5:hover{background-color:#e5f2ff}.on5 .Ojyqi{padding:0}.l1W{padding:8px}.CYdzvsfeNg{height:auto;font-size:15px;line-height:16px}",""]),s.locals={default_transition_duration:""+r.locals.default_transition_duration,default_transition_timing_function:""+a.locals.default_transition_timing_function,AbuseOptionButton:"on5",AbuseOptionButton__leftIcon:"K3yNJ",AbuseOptionButton__rightIcon:"zsBZkE6hh1",Button__clickable:"Ojyqi",AbuseOptionButton__clickable:"l1W",AbuseOptionButton__content:"CYdzvsfeNg"},e.exports=s},7276:function(e,t,i){var o=i(1907),n=i(6939),r=i(1154),a=n(o);a.i(r,"",!0),a.push([e.id,".xnMGgJdLTn{cursor:pointer}.MhKJjNy4D{font-size:18px}.MhKJjNy4D .Cxddw{height:"+r.locals.middle_button_height+"}.UjY7bt6RN{width:60px;height:60px}.t4kLh3q{width:80px;height:80px}",""]),a.locals={middle_button_height:""+r.locals.middle_button_height,CirclePlayButton:"xnMGgJdLTn",CirclePlayButton_fullSize:"MhKJjNy4D",CirclePlayButton__basecontent:"Cxddw",CirclePlayButton__icon:"UjY7bt6RN",CirclePlayButton__icon_fullSize:"t4kLh3q"},e.exports=a},4659:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".m7z7vXgYt{width:100%;height:100%;font-weight:100;fill:#c4c4c4}.LFSf9PeWN{text-transform:uppercase}",""]),n.locals={DisclaimerSvg:"m7z7vXgYt",DisclaimerSvg_text:"LFSf9PeWN"},e.exports=n},550:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".rBGwjUf{display:flex;box-sizing:border-box;width:100%;padding:2px .2em;font-family:Arial,Helvetica,sans-serif;background:rgba(0,0,0,.4)}",""]),n.locals={Disclaimer:"rBGwjUf"},e.exports=n},9130:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".wAlK3sFr3S{position:absolute;top:50%;left:50%;width:38px;height:38px;transform:translate(-50%,-50%)}",""]),n.locals={Spinner:"wAlK3sFr3S"},e.exports=n},3683:function(e,t,i){var o=i(1907),n=i(6939),r=i(1154),a=n(o);a.i(r,"",!0),a.push([e.id,".tAcz7tK6hj{}.Guc{visibility:hidden}.PhPG7X9Nt0{display:flex;align-items:center;justify-content:center}.Wm5QtIB{}.VZgRZw{display:flex;align-items:center;justify-content:center;width:"+r.locals.small_button_height+";height:"+r.locals.small_button_height+"}.LIf{width:"+r.locals.middle_button_height+";height:"+r.locals.middle_button_height+"}.FvJnmk{width:29px;height:24px}.DvmRD{}.BYisG7{position:relative;bottom:1px;margin-right:"+r.locals.small_button_left_right_margin+"}.Z5BG9iy{white-space:nowrap;transform-origin:left center}.JB6xLEaII{margin-right:"+r.locals.middle_button_left_right_margin+"}",""]),a.locals={small_button_height:""+r.locals.small_button_height,middle_button_height:""+r.locals.middle_button_height,small_button_left_right_margin:""+r.locals.small_button_left_right_margin,middle_button_left_right_margin:""+r.locals.middle_button_left_right_margin,MuteButton:"tAcz7tK6hj",MuteButton__hidden:"Guc",VolumeButton__content:"PhPG7X9Nt0",VolumeButton:"Wm5QtIB",VolumeButton__iconContainer:"VZgRZw",VolumeButton__iconContainer_fullSize:"LIf",VolumeButton__icon:"FvJnmk",UnmuteButton:"DvmRD",UnmuteButton__text:"BYisG7",UnmuteButton__text_animation:"Z5BG9iy",UnmuteButton__text_fullSize:"JB6xLEaII"},e.exports=a},8453:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".wHPdKLTT{width:28px;height:28px;padding:4px;cursor:pointer;pointer-events:auto}.pFWV{width:var(--mute-unmute-responsive-width);height:var(--mute-unmute-responsive-height)}",""]),n.locals={MuteUnmuteButtonWithoutBackground:"wHPdKLTT",MuteUnmuteButtonWithoutBackground_Size_Responsive:"pFWV"},e.exports=n},2563:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".xvw{line-height:3;display:flex;align-items:center;box-sizing:border-box;min-width:0;height:2.4em;padding:0 .5em;color:#000;font-weight:700;font-size:1em;font-family:"+r.locals.AD_FONT+";white-space:nowrap;background-color:#ffd500;border-radius:4px;cursor:pointer;pointer-events:auto}.m8IdghjlTb{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jmg5GyD,.dHi{height:2.1em;font-size:.9em}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,ActionButton:"xvw",ActionButton__textWrapper:"m8IdghjlTb",ActionButton__content_middle:"jmg5GyD",ActionButton__content_small:"dHi"},e.exports=a},6246:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=n(o);a.i(r,"",!0),a.push([e.id,".tfO8t{flex:1 1 0;margin-right:13px;color:#fff;font-weight:700;font-size:1em;font-family:"+r.locals.AD_FONT+";line-height:1.3;max-width:10em}.YOOd{line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.XlWW{white-space:nowrap}.gCWj3,.XlWW{font-weight:400;font-size:.8em}.XlWW,.YOOd{overflow:hidden;text-overflow:ellipsis}",""]),a.locals={AD_FONT:""+r.locals.AD_FONT,InfoBlock:"tfO8t",InfoBlock__title:"YOOd",InfoBlock__greenUrl:"XlWW",InfoBlock__ageRestriction:"gCWj3"},e.exports=a},9461:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(2100),s=i(4430),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".Vge{height:100%;font-family:"+r.locals.AD_FONT+"}.QtefYQc{overflow:hidden;cursor:pointer;pointer-events:auto;height:4em;max-width:calc(23.33333em + 20px)}.mDe3NJyB{position:relative;min-width:200px;height:100%}.wrRs1H6xr{position:relative;display:flex;align-items:stretch;box-sizing:border-box;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:100%;padding:0 10px;background-color:"+s.locals.button_active_background_color+";border-radius:4px;-webkit-backdrop-filter:"+a.locals.button_backdrop_filter+";backdrop-filter:"+a.locals.button_backdrop_filter+";max-width:calc(23.33333em + 20px)}.lxIZt{position:absolute;top:50%;left:10px;display:flex;align-items:center;justify-content:center;width:32px;min-width:32px;height:32px;border-radius:16px;transform:translateY(-50%)}.Ky7bKc{display:flex;flex-wrap:nowrap;align-items:center;margin-left:35pt;overflow:hidden}.eVPo0G{margin-left:10px}.lxIZt img{border-radius:2px;width:100%;height:100%}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,button_backdrop_filter:""+a.locals.button_backdrop_filter,button_active_background_color:""+s.locals.button_active_background_color,ActionPanel:"Vge",ActionPanel__clickableLayer:"QtefYQc",ActionPanel__content:"mDe3NJyB",ActionPanel__mask:"wrRs1H6xr",ActionPanel__favicon:"lxIZt",ActionPanel__wrapper:"Ky7bKc",ActionPanel__wrapper_wide:"eVPo0G"},e.exports=l},6413:function(e,t,i){var o=i(1907),n=i(6939),r=i(6799),a=i(4430),s=i(1154),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".Rzusih8r{padding:4px;cursor:pointer;pointer-events:auto}.z7eMEj{position:relative;display:flex;align-items:center;height:"+s.locals.small_button_height+";background-color:"+a.locals.button_active_background_color+";border-radius:4px;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);padding-left:4px}.ILtvtv4ox:hover .z7eMEj{background-color:"+a.locals.button_hovered_background_color+"}.Qu4u6t5gl{width:100%;height:100%;border-radius:4px}.hG7T{display:flex;align-items:center;width:20px;min-width:20px;height:20px;margin-right:.35em;font-size:2em;padding-left:3px}.i31 .hG7T{width:26px;height:26px}.gWz{display:inline-block;max-width:90px;margin-right:8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.i31 .gWz{max-width:120px;margin-left:17px}",""]),l.locals={AD_FONT:""+r.locals.AD_FONT,button_hovered_background_color:""+a.locals.button_hovered_background_color,button_active_background_color:""+a.locals.button_active_background_color,middle_button_height:""+s.locals.middle_button_height,small_button_height:""+s.locals.small_button_height,ActionPanelSmall__clickableContainer:"Rzusih8r",ActionPanelSmall:"z7eMEj",ActionPanelSmall__container:"ILtvtv4ox",ActionPanelSmall__favIcon:"Qu4u6t5gl",ActionPanelSmall__favIconContainer:"hG7T",ActionPanelSmall__middle:"i31",ActionPanelSmall__label:"gWz"},e.exports=l},3765:function(e,t,i){var o=i(1907),n=i(6939),r=i(7441),a=i(2100),s=i(4430),l=n(o);l.i(r,"",!0),l.i(a,"",!0),l.i(s,"",!0),l.push([e.id,".TRl{position:relative;display:inline-block;height:3em;padding:4px;color:#fff;font-weight:"+r.locals.AD_FONT_WEIGHT+";text-shadow:0 2px 2px rgba(0,0,0,.1);cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:auto}.gsOC{position:relative;display:flex;box-sizing:border-box;height:100%;padding:.17em;background-color:"+s.locals.button_inactive_background_color+";border-radius:.5em;opacity:.7;-webkit-backdrop-filter:"+a.locals.button_backdrop_filter+";backdrop-filter:"+a.locals.button_backdrop_filter+"}.V4I{cursor:pointer}.V4I>.gsOC{background-color:"+s.locals.button_active_background_color+";opacity:1}.TRl.V4I:hover>.gsOC{background-color:"+s.locals.button_hovered_background_color+"}.aQStVqtUY,.yICbBIt{display:flex;align-items:center;height:100%}.yICbBIt{justify-content:center;width:2.5em}.QAxFM9xwx{margin-left:.8em}.GqlZvSN64o{height:100%;border-radius:4px}.WzPNed{width:100%}.WdILj{display:inline-block;width:50%;text-align:right}.i3q{display:inline-block;width:50%}.W7cW{width:.8em;height:1.2em}",""]),l.locals={AD_FONT_WEIGHT:""+r.locals.AD_FONT_WEIGHT,button_backdrop_filter:""+a.locals.button_backdrop_filter,button_inactive_background_color:""+s.locals.button_inactive_background_color,button_active_background_color:""+s.locals.button_active_background_color,button_hovered_background_color:""+s.locals.button_hovered_background_color,SkipButton__clickable:"TRl",SkipButton:"gsOC",SkipButton_active:"V4I",SkipButton__contentLeft:"aQStVqtUY",SkipButton__contentRight:"yICbBIt",SkipButton__skipText:"QAxFM9xwx",SkipButton__leftImage:"GqlZvSN64o",SkipButton__timeToSkipString:"WzPNed",SkipButton__timeToSkipString__leftDigit:"WdILj",SkipButton__timeToSkipString__rightDigit:"i3q",SkipButton__icon:"W7cW"},e.exports=l},7864:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".qwMdx45Mc2{position:absolute;bottom:0;left:0;width:100%;height:2px}",""]),n.locals={Timeline:"qwMdx45Mc2"},e.exports=n},5676:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".j9mDp4cYQu{--stw-max-width:100%;font-size:0;pointer-events:none}.EMrY{text-align:center}.Q55uaF{position:absolute;top:0;left:0;width:100%;width:var(--stw-max-width);height:100%;font:var(--stw-font);pointer-events:none}.YT0HiFhkUl{display:inline-block;white-space:nowrap}.bDhlfpng8u,.WWg74{display:inline-block;font:var(--stw-font)}",""]),n.locals={SplitTextLinesWrapper__container:"j9mDp4cYQu",SplitTextLinesWrapper__lines:"EMrY",SplitTextLinesWrapper__canvas:"Q55uaF",SplitTextLinesWrapper__textLine:"YT0HiFhkUl",SplitTextLinesWrapper__char:"bDhlfpng8u",SplitTextLinesWrapper__word:"WWg74"},e.exports=n},6416:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,".cKQupZvw1Z{animation:none 0s ease 0s 1 normal none running;-webkit-backface-visibility:visible;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:none;border-collapse:separate;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;column-fill:balance;grid-column-gap:normal;column-gap:normal;column-rule:medium none currentColor;column-span:1;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-size:medium;font-style:normal;font-feature-settings:normal;font-variant:normal;font-weight:400;font-stretch:normal;height:auto;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;left:auto;letter-spacing:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;position:static;right:auto;-moz-tab-size:8;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-origin:50% 50% 0;transform-style:flat;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto;all:initial;display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:0;pointer-events:none;font-size:16px;overflow:hidden;line-height:normal}",""]),n.locals={AdDisplayControllerSkinContainer:"cKQupZvw1Z"},e.exports=n},1154:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={small_button_height:"32px",middle_button_height:"40px",small_button_left_right_margin:"8px",middle_button_left_right_margin:"12px"},e.exports=n},6799:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={AD_FONT:'YS Text, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica", "Arial", sans-serif'},e.exports=n},7441:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={AD_FONT_WEIGHT:"500"},e.exports=n},1307:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={AD_LABEL_MIDDLE_HEIGHT:"10px"},e.exports=n},5092:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={AD_LABEL_SMALL_HEIGHT:"10px"},e.exports=n},2100:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={button_backdrop_filter:"blur(8px)"},e.exports=n},4430:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={button_inactive_background_color:"rgba(38, 38, 38, 0.3)",button_active_background_color:"rgba(38, 38, 38, 0.65)",button_hovered_background_color:"rgba(0, 0, 0, 0.65)"},e.exports=n},9792:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={default_transition_duration:"100ms"},e.exports=n},2840:function(e,t,i){var o=i(1907),n=i(6939)(o);n.push([e.id,"",""]),n.locals={default_transition_timing_function:"ease-in"},e.exports=n},7176:function(e,t,i){"use strict";function o(e,t,i,o,n,r,a){var s,l,d=document.createElement("script"),c=[],u={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:i,url:r},dispatchEvent:function(e){u.sendEvent?(c&&(c.push(e),e=c,c=!1),u.sendEvent(e)):c&&c.push(e)},clientCallback:a};t="_moatApi"+Math.floor(1e8*Math.random());try{l=(s=e.ownerDocument).defaultView||s.parentWindow}catch(h){s=document,l=window}return l[t]=u,d.type="text/javascript",e&&e.insertBefore(d,e.childNodes[0]||null),d.src=["https://yast","atic.net/pc","ode-static/measurers/"].join("")+n+"/moat/"+o+"/moatvideo.js#"+t,u}i.r(t),i.d(t,{initMoatTracking:function(){return o}})},4478:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_URL=void 0,t.HAS_URL=(()=>{try{return new URL("https://yandex.ru"),!0}catch(e){return!1}})()},9233:function(e,t,i){"use strict";var o=this&&this.__rest||function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.CSPLogger=void 0;const n=i(4478),r=i(4385);t.CSPLogger=class{constructor(e,t){void 0===t&&(t={});var{url:i="https://csp.yandex.net/csp"}=e,n=o(e,["url"]);this.additional=t,this.cspEventListener=e=>{try{const t=new URL(e.blockedURI);if(this.url===t.origin+t.pathname&&"1"===t.searchParams.get("js_client"))return this.unsubscribe(),void(console.warn&&console.warn("URL for logging CSP was blocked"))}catch(n){}const t={"csp-report":{"blocked-uri":e.blockedURI,"column-number":e.columnNumber,disposition:e.disposition,"document-uri":e.documentURI,"effective-directive":e.effectiveDirective,"line-number":e.lineNumber,"original-policy":e.originalPolicy,referrer:e.referrer,"script-sample":e.sample,"status-code":e.statusCode,"violated-directive":e.violatedDirective}},i=JSON.stringify(t),o=this.addParamsToUrl(this.url,Object.assign(Object.assign(Object.assign({},this.config),this.additional),{js_client:"1"}));r.sendLog(o,i)},this.url=i,this.config=n}setAdditional(e){this.additional=Object.assign(Object.assign({},this.additional),e)}addParamsToUrl(e,t){const i=new URL(e);for(const o in t){const e=t[o];e&&"string"===typeof e&&t.hasOwnProperty(o)&&i.searchParams.append(o,e)}return i.toString()}subscribe(e){void 0===e&&(e=document),"onsecuritypolicyviolation"in document&&n.HAS_URL&&e.addEventListener("securitypolicyviolation",this.cspEventListener)}unsubscribe(e){void 0===e&&(e=document),e.removeEventListener("securitypolicyviolation",this.cspEventListener)}}},4385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendLog=void 0,t.sendLog=function(e,t){if(navigator.sendBeacon&&navigator.sendBeacon(e,t))return;const i=new XMLHttpRequest;i.open("POST",e),i.send(t)}},6939:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",o="undefined"!==typeof t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),o&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),o&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,o,n,r){"string"===typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);o&&a[c[0]]||("undefined"!==typeof r&&("undefined"===typeof c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},1907:function(e){"use strict";e.exports=function(e){return e[1]}},5335:function(e){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return parseInt(t.substring(i+5,t.indexOf(".",i)),10);if(t.indexOf("Trident/")>0){var o=t.indexOf("rv:");return parseInt(t.substring(o+3,t.indexOf(".",o)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},3438:function(e){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i]);return e})},4738:function(e){"use strict";e.exports='<svg width=\'100%\' height=\'100%\' viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1 1L13 13" stroke="#AFC5CF" stroke-width="2"/>\n<path d="M1 13L13 1" stroke="#AFC5CF" stroke-width="2"/>\n</svg>\n'},3716:function(e){"use strict";e.exports=JSON.parse('{"be":{"adsdk":{"ABUSE_ADS_TEXT":"","ABUSE_COPIED":"","ABUSE_COPY_TEXT":"","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"","ABUSE_IMPROVE_REASON_TEXT":"","ABUSE_OPTION_ABOUT":"","ABUSE_OPTION_ADVERTISER_INFO":"","ABUSE_OPTION_ALREADY_PURCHASED":"","ABUSE_OPTION_ANOTHER_REASON":"","ABUSE_OPTION_COMPLAINT":"","ABUSE_OPTION_FALSE_INFO_SOCIAL":"","ABUSE_OPTION_HIDE":"","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"","ABUSE_OPTION_NOT_INTERESTED":"","ABUSE_OPTION_OVERLAP_CONTENT":"","ABUSE_OPTION_POLITICAL_SOCIAL":"","ABUSE_OPTION_SCAMMERS":"","ABUSE_OPTION_SEEN_TOO_OFTEN":"","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"","ABUSE_OPTION_UNPLEASANT_CONTENT":"","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"","ABUSE_PLACEHOLDER_HINT_HIDE":"","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"","ABUSE_PLACEHOLDER_TEXT_HIDE":"","ABUSE_REPORT_PROBLEM":"\u0417\u0430\u0440\u0435\u043f\u043e\u0440\u0442\u0438\u0442\u044c \u0431\u0430\u0433","ABUSE_SCREEN_DESCRIPTION":"","ABUSE_SCREEN_DESCRIPTION_SHORT":"","ABUSE_SCREEN_TITLE":"","ABUSE_VARIANT_ANNOYING":"","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"","ABUSE_VARIANT_NOT_INTERESTED":"","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"","ABUSE_VARIANT_SPAM":"","ABUSE_VARIANT_SPAM_SHORT":"","ADTUNE_COPY_TOKEN":"","AD_TITLE":"","BU_LABEL_TOOLTIP_TEXT":"\u041f\u0440\u0430\u0446\u0443\u0435 \u043d\u0430 \u0442\u044d\u0445\u043d\u0430\u043b\u043e\u0433\u0456\u044f\u0445 \u042f\u043d\u0434\u0435\u043a\u0441\u0430","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"","MORE":"","MOTION_BTN":"","MOTION_BTN_WITHOUT_GREEN_URL":"","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"","PREV_ECOM_PRODUCT":"","REPEAT":"","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"","SKIP":"","SKIP_TIME_LEFT":"","SOCIAL_ADVERTISING_AD_LABEL":"","SURVEY_AD_LABEL":"","SURVEY_AD_LABEL_OF_QUESTIONS":"","SURVEY_CONTINUE_BUTTON_TEXT":"","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_PACKSHOT_COMPANY":"","SURVEY_PACKSHOT_FROM":"","SURVEY_PACKSHOT_TEXT":"","SURVEY_SINGLE_CHOICE_HINT_TEXT":"","SURVEY_SKIP_BUTTON_TEXT":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_LABEL":"","TIME_LEFT":"","UNMUTE":"","UNMUTE_INVITE":"","VISIT_SITE":"","YANDEX_DIRECT":"","YANDEX_DIRECT_LINK":""}},"en":{"adsdk":{"ABUSE_ADS_TEXT":"Ad","ABUSE_COPIED":"Copied","ABUSE_COPY_TEXT":"Copy link","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"Enter your message","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"Submit","ABUSE_IMPROVE_REASON_TEXT":"State the reason:","ABUSE_OPTION_ABOUT":"Ads on Yandex","ABUSE_OPTION_ADVERTISER_INFO":"Advertiser info","ABUSE_OPTION_ALREADY_PURCHASED":"Already purchased","ABUSE_OPTION_ANOTHER_REASON":"Another reason","ABUSE_OPTION_COMPLAINT":"Report","ABUSE_OPTION_FALSE_INFO_SOCIAL":"Speculation","ABUSE_OPTION_HIDE":"Hide","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"Illegal goods or services","ABUSE_OPTION_NOT_INTERESTED":"Not interested","ABUSE_OPTION_OVERLAP_CONTENT":"Covers page content","ABUSE_OPTION_POLITICAL_SOCIAL":"Political ad","ABUSE_OPTION_SCAMMERS":"Scammers","ABUSE_OPTION_SEEN_TOO_OFTEN":"I see this ad too often","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"Shocking content","ABUSE_OPTION_UNPLEASANT_CONTENT":"I don\'t like it","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"Thanks! The moderators will review this ad","ABUSE_PLACEHOLDER_HINT_HIDE":"We use your responses to suggest ads that will be interesting for you","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"Report registered","ABUSE_PLACEHOLDER_TEXT_HIDE":"Ad hidden","ABUSE_REPORT_PROBLEM":"Report a bug","ABUSE_SCREEN_DESCRIPTION":"We try to show you ads that match your interests. Tell us why you didn\'t like this video. This will help us select better ads for you.","ABUSE_SCREEN_DESCRIPTION_SHORT":"Please tell us why you didn\'t like this video. This will help us select better ads for you.","ABUSE_SCREEN_TITLE":"Report this ad","ABUSE_VARIANT_ANNOYING":"Intrusive or annoying","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"False information","ABUSE_VARIANT_NOT_INTERESTED":"I\'m not interested in this","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"I\'m not interested in this","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"Political ad","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"Shocking content","ABUSE_VARIANT_SPAM":"Inappropriate content or spam","ABUSE_VARIANT_SPAM_SHORT":"Looks like spam","ADTUNE_COPY_TOKEN":"Copy token","AD_TITLE":"Ad","BU_LABEL_TOOLTIP_TEXT":"Based on Yandex technologies","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"Learn more","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"For more information, see the advertiser\'s website","MORE":"More","MOTION_BTN":"Learn more","MOTION_BTN_WITHOUT_GREEN_URL":"Address and phone number","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"of","PREV_ECOM_PRODUCT":"","REPEAT":"Repeat","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"sec","SKIP":"Skip","SKIP_TIME_LEFT":"Skip ad","SOCIAL_ADVERTISING_AD_LABEL":"Social ad","SURVEY_AD_LABEL":"Survey","SURVEY_AD_LABEL_OF_QUESTIONS":"questions","SURVEY_CONTINUE_BUTTON_TEXT":"Continue","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"Select up to $x responses","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"Select 1 or more responses","SURVEY_PACKSHOT_COMPANY":"Yandex Surveys","SURVEY_PACKSHOT_FROM":"Survey powered by","SURVEY_PACKSHOT_TEXT":"Thank you!","SURVEY_SINGLE_CHOICE_HINT_TEXT":"Select 1 response","SURVEY_SKIP_BUTTON_TEXT":"Skip","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"Read more","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"Read more on the website","THEME_EMPTY_ACTION_BUTTON_LABEL":"Go","TIME_LEFT":"Ad","UNMUTE":"Unmute","UNMUTE_INVITE":"Move mouse over ad<br>to hear sound","VISIT_SITE":"Go to advertiser\u2019s site","YANDEX_DIRECT":"Yandex.Direct","YANDEX_DIRECT_LINK":""}},"kk":{"adsdk":{"ABUSE_ADS_TEXT":"","ABUSE_COPIED":"","ABUSE_COPY_TEXT":"","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"","ABUSE_IMPROVE_REASON_TEXT":"","ABUSE_OPTION_ABOUT":"","ABUSE_OPTION_ADVERTISER_INFO":"","ABUSE_OPTION_ALREADY_PURCHASED":"","ABUSE_OPTION_ANOTHER_REASON":"","ABUSE_OPTION_COMPLAINT":"","ABUSE_OPTION_FALSE_INFO_SOCIAL":"","ABUSE_OPTION_HIDE":"","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"","ABUSE_OPTION_NOT_INTERESTED":"","ABUSE_OPTION_OVERLAP_CONTENT":"","ABUSE_OPTION_POLITICAL_SOCIAL":"","ABUSE_OPTION_SCAMMERS":"","ABUSE_OPTION_SEEN_TOO_OFTEN":"","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"","ABUSE_OPTION_UNPLEASANT_CONTENT":"","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"","ABUSE_PLACEHOLDER_HINT_HIDE":"","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"","ABUSE_PLACEHOLDER_TEXT_HIDE":"","ABUSE_REPORT_PROBLEM":"\u0417\u0430\u0440\u0435\u043f\u043e\u0440\u0442\u0438\u0442\u044c \u0431\u0430\u0433","ABUSE_SCREEN_DESCRIPTION":"","ABUSE_SCREEN_DESCRIPTION_SHORT":"","ABUSE_SCREEN_TITLE":"","ABUSE_VARIANT_ANNOYING":"","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"","ABUSE_VARIANT_NOT_INTERESTED":"","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"","ABUSE_VARIANT_SPAM":"","ABUSE_VARIANT_SPAM_SHORT":"","ADTUNE_COPY_TOKEN":"","AD_TITLE":"","BU_LABEL_TOOLTIP_TEXT":"\u042f\u043d\u0434\u0435\u043a\u0441 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043b\u0430\u0440\u044b\u043d\u0434\u0430 \u0436\u04b1\u043c\u044b\u0441 \u0456\u0441\u0442\u0435\u0439\u0434\u0456","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"","MORE":"","MOTION_BTN":"","MOTION_BTN_WITHOUT_GREEN_URL":"","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"","PREV_ECOM_PRODUCT":"","REPEAT":"","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"","SKIP":"","SKIP_TIME_LEFT":"","SOCIAL_ADVERTISING_AD_LABEL":"","SURVEY_AD_LABEL":"","SURVEY_AD_LABEL_OF_QUESTIONS":"","SURVEY_CONTINUE_BUTTON_TEXT":"","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_PACKSHOT_COMPANY":"","SURVEY_PACKSHOT_FROM":"","SURVEY_PACKSHOT_TEXT":"","SURVEY_SINGLE_CHOICE_HINT_TEXT":"","SURVEY_SKIP_BUTTON_TEXT":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_LABEL":"","TIME_LEFT":"","UNMUTE":"","UNMUTE_INVITE":"","VISIT_SITE":"","YANDEX_DIRECT":"","YANDEX_DIRECT_LINK":""}},"ru":{"adsdk":{"ABUSE_ADS_TEXT":"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435","ABUSE_COPIED":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e","ABUSE_COPY_TEXT":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c","ABUSE_IMPROVE_REASON_TEXT":"\u0423\u0442\u043e\u0447\u043d\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443:","ABUSE_OPTION_ABOUT":"\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u043d\u0430 \u042f\u043d\u0434\u0435\u043a\u0441\u0435","ABUSE_OPTION_ADVERTISER_INFO":"\u041e \u0440\u0435\u043a\u043b\u0430\u043c\u043e\u0434\u0430\u0442\u0435\u043b\u0435","ABUSE_OPTION_ALREADY_PURCHASED":"\u0423\u0436\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0442\u0435\u043d\u043e","ABUSE_OPTION_ANOTHER_REASON":"\u0414\u0440\u0443\u0433\u0430\u044f \u043f\u0440\u0438\u0447\u0438\u043d\u0430","ABUSE_OPTION_COMPLAINT":"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f","ABUSE_OPTION_FALSE_INFO_SOCIAL":"\u041d\u0435\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","ABUSE_OPTION_HIDE":"\u0421\u043a\u0440\u044b\u0442\u044c","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"\u041d\u0435\u0437\u0430\u043a\u043e\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440/\u0443\u0441\u043b\u0443\u0433\u0430","ABUSE_OPTION_NOT_INTERESTED":"\u041d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442","ABUSE_OPTION_OVERLAP_CONTENT":"\u041f\u0435\u0440\u0435\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043d\u0442","ABUSE_OPTION_POLITICAL_SOCIAL":"\u041f\u043e\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0435\u043a\u043b\u0430\u043c\u0430","ABUSE_OPTION_SCAMMERS":"\u042d\u0442\u043e \u043c\u043e\u0448\u0435\u043d\u043d\u0438\u043a\u0438","ABUSE_OPTION_SEEN_TOO_OFTEN":"\u0412\u0438\u0436\u0443 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0447\u0430\u0441\u0442\u043e","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"\u0428\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442","ABUSE_OPTION_UNPLEASANT_CONTENT":"\u041c\u043d\u0435 \u044d\u0442\u043e \u043d\u0435\u043f\u0440\u0438\u044f\u0442\u043d\u043e","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","ABUSE_PLACEHOLDER_HINT_HIDE":"\u041c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0432\u0430\u0448\u0438 \u043e\u0442\u0432\u0435\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0443\u044e \u0440\u0435\u043a\u043b\u0430\u043c\u0443","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"\u0416\u0430\u043b\u043e\u0431\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0430","ABUSE_PLACEHOLDER_TEXT_HIDE":"\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043a\u0440\u044b\u0442\u043e","ABUSE_REPORT_PROBLEM":"\u0417\u0430\u0440\u0435\u043f\u043e\u0440\u0442\u0438\u0442\u044c \u0431\u0430\u0433","ABUSE_SCREEN_DESCRIPTION":"\u041c\u044b \u0441\u0442\u0430\u0440\u0430\u0435\u043c\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u0443\u044e \u0432\u0430\u043c \u0440\u0435\u043a\u043b\u0430\u043c\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0432\u0430\u0448\u0438\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0430\u043c. \u041f\u043e\u044f\u0441\u043d\u0438\u0442\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u043c \u043d\u0435 \u043f\u043e\u0434\u043e\u0448\u0451\u043b \u0440\u043e\u043b\u0438\u043a. \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043c \u043b\u0443\u0447\u0448\u0435 \u043e\u0442\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u0443.","ABUSE_SCREEN_DESCRIPTION_SHORT":"\u041f\u043e\u044f\u0441\u043d\u0438\u0442\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0447\u0435\u043c\u0443 \u0432\u0430\u043c \u043d\u0435 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0441\u044f \u0440\u043e\u043b\u0438\u043a. \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043c \u043b\u0443\u0447\u0448\u0435 \u043e\u0442\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u0443.","ABUSE_SCREEN_TITLE":"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430&nbsp;\u0440\u0435\u043a\u043b\u0430\u043c\u0443","ABUSE_VARIANT_ANNOYING":"\u041d\u0430\u0432\u044f\u0437\u0447\u0438\u0432\u043e \u0438\u043b\u0438 \u043d\u0430\u0434\u043e\u0435\u043b\u043e","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"\u041d\u0435\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","ABUSE_VARIANT_NOT_INTERESTED":"\u041d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0441\u044c \u044d\u0442\u043e\u0439 \u0442\u0435\u043c\u043e\u0439","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"\u041d\u0435\u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0430\u044f \u0442\u0435\u043c\u0430","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"\u041f\u043e\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0435\u043a\u043b\u0430\u043c\u0430","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"\u0428\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442","ABUSE_VARIANT_SPAM":"\u0421\u043e\u043c\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u0441\u043f\u0430\u043c","ABUSE_VARIANT_SPAM_SHORT":"\u041f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 \u0441\u043f\u0430\u043c","ADTUNE_COPY_TOKEN":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043a\u0435\u043d","AD_TITLE":"\u0420\u0435\u043a\u043b\u0430\u043c\u0430","BU_LABEL_TOOLTIP_TEXT":"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u0445 \u042f\u043d\u0434\u0435\u043a\u0441\u0430","ECOM_PRODUCTS_BUTTON_HIDE":"\u0421\u043a\u0440\u044b\u0442\u044c","ECOM_PRODUCTS_BUTTON_SHOW":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c","LEARN_MORE":"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"\u0411\u043e\u043b\u044c\u0448\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u043e\u0434\u0430\u0442\u0435\u043b\u044f","MORE":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435","MOTION_BTN":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435","MOTION_BTN_WITHOUT_GREEN_URL":"\u0410\u0434\u0440\u0435\u0441 \u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d","MOTION_DIETARYSUPPL_DISCLAIMER":"\u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u043e\u043c","MOTION_DISTANCE_SALES":"\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430 \u043d\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u0438\u0440\u0443\u0435\u043c\u043e\u043c \u0441\u0430\u0439\u0442\u0435.","MOTION_DRUG_DISCLAIMER":"\u0415\u0441\u0442\u044c \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f. \u041f\u043e\u0441\u043e\u0432\u0435\u0442\u0443\u0439\u0442\u0435\u0441\u044c \u0441 \u0432\u0440\u0430\u0447\u043e\u043c.","MOTION_HIDE_DISCLAIMER":"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443","MOTION_SHOW_DISCLAIMER":"\u042e\u0440. \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","NEXT_ECOM_PRODUCT":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442","OF":"\u0438\u0437","PREV_ECOM_PRODUCT":"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442","REPEAT":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c","REWARDED_TIMER_1":"\u0414\u043e \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0430\u0434\u044b","REWARDED_TIMER_2":"\u0441\u0435\u043a","SECONDS":"\u0441\u0435\u043a","SKIP":"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c","SKIP_TIME_LEFT":"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u0443","SOCIAL_ADVERTISING_AD_LABEL":"\u0421\u043e\u0446\u0440\u0435\u043a\u043b\u0430\u043c\u0430","SURVEY_AD_LABEL":"\u041e\u043f\u0440\u043e\u0441","SURVEY_AD_LABEL_OF_QUESTIONS":"\u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432","SURVEY_CONTINUE_BUTTON_TEXT":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e $x \u043e\u0442\u0432\u0435\u0442\u043e\u0432","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 1 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432","SURVEY_PACKSHOT_COMPANY":"\u042f\u043d\u0434\u0435\u043a\u0441 \u0412\u0437\u0433\u043b\u044f\u0434","SURVEY_PACKSHOT_FROM":"\u041e\u043f\u0440\u043e\u0441 \u0441\u0434\u0435\u043b\u0430\u043d \u043d\u0430 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u0445","SURVEY_PACKSHOT_TEXT":"\u0421\u043f\u0430\u0441\u0438\u0431\u043e!","SURVEY_SINGLE_CHOICE_HINT_TEXT":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 1 \u043e\u0442\u0432\u0435\u0442","SURVEY_SKIP_BUTTON_TEXT":"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435","THEME_EMPTY_ACTION_BUTTON_LABEL":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438","TIME_LEFT":"\u0420\u0435\u043a\u043b\u0430\u043c\u0430","UNMUTE":"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a","UNMUTE_INVITE":"\u041d\u0430\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0443\u0440\u0441\u043e\u0440,<br>\u0447\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a","VISIT_SITE":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u043e\u0434\u0430\u0442\u0435\u043b\u044f","YANDEX_DIRECT":"\u042f\u043d\u0434\u0435\u043a\u0441.\u0414\u0438\u0440\u0435\u043a\u0442","YANDEX_DIRECT_LINK":"https://direct.yandex.ru/?partner"}},"tr":{"adsdk":{"ABUSE_ADS_TEXT":"Reklam","ABUSE_COPIED":"Kopyaland\u0131","ABUSE_COPY_TEXT":"Ba\u011flant\u0131y\u0131 kopyala","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"Mesaj\u0131n\u0131z\u0131 girin","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"G\xf6nder","ABUSE_IMPROVE_REASON_TEXT":"Nedenini a\xe7\u0131klay\u0131n:","ABUSE_OPTION_ABOUT":"Yandex\'te reklam","ABUSE_OPTION_ADVERTISER_INFO":"Reklam veren hakk\u0131nda","ABUSE_OPTION_ALREADY_PURCHASED":"Zaten sat\u0131n al\u0131nd\u0131","ABUSE_OPTION_ANOTHER_REASON":"Ba\u015fka bir neden var","ABUSE_OPTION_COMPLAINT":"\u015eikayet et","ABUSE_OPTION_FALSE_INFO_SOCIAL":"Yanl\u0131\u015f bilgi","ABUSE_OPTION_HIDE":"Gizle","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"Yasad\u0131\u015f\u0131 mal/hizmet","ABUSE_OPTION_NOT_INTERESTED":"\u0130lgilenmiyorum","ABUSE_OPTION_OVERLAP_CONTENT":"\u0130\xe7eri\u011fin \xfczerini kapl\u0131yor","ABUSE_OPTION_POLITICAL_SOCIAL":"Siyasi i\xe7erikli reklam","ABUSE_OPTION_SCAMMERS":"Doland\u0131r\u0131c\u0131lar","ABUSE_OPTION_SEEN_TOO_OFTEN":"Bunu \xe7ok s\u0131k g\xf6r\xfcyorum","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"Rahats\u0131z edici i\xe7erik","ABUSE_OPTION_UNPLEASANT_CONTENT":"Ho\u015fuma gitmiyor","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"Te\u015fekk\xfcr ederiz! Moderat\xf6r k\u0131sa s\xfcre i\xe7erisinde reklam\u0131 kontrol edecektir","ABUSE_PLACEHOLDER_HINT_HIDE":"Size en uygun reklam\u0131 se\xe7mek i\xe7in yan\u0131tlar\u0131n\u0131z\u0131 de\u011ferlendiriyoruz","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"\u015eikayet kay\u0131t alt\u0131na al\u0131nd\u0131","ABUSE_PLACEHOLDER_TEXT_HIDE":"Reklam gizlendi","ABUSE_REPORT_PROBLEM":"Report a bug","ABUSE_SCREEN_DESCRIPTION":"\u0130lgi alanlar\u0131n\u0131za uygun reklamlar g\xf6stermeye \xe7al\u0131\u015f\u0131yoruz. Sizin i\xe7in daha faydal\u0131 reklamlar se\xe7ebilmemiz i\xe7in bu videoyu neden be\u011fenmedi\u011finizi a\xe7\u0131klar m\u0131s\u0131n\u0131z?","ABUSE_SCREEN_DESCRIPTION_SHORT":"Size daha uygun reklamlar se\xe7ebilmemiz i\xe7in bu videoyu neden be\u011fenmedi\u011finizi a\xe7\u0131klar m\u0131s\u0131n\u0131z?","ABUSE_SCREEN_TITLE":"Reklam\u0131 \u015fikayet et","ABUSE_VARIANT_ANNOYING":"Israrc\u0131 veya b\u0131kt\u0131r\u0131c\u0131","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"Yanl\u0131\u015f bilgi","ABUSE_VARIANT_NOT_INTERESTED":"Bu konuyla ilgilenmiyorum","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"Konu ilgimi \xe7ekmiyor","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"Siyasi i\xe7erikli reklam","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"Rahats\u0131z edici i\xe7erik","ABUSE_VARIANT_SPAM":"G\xfcvenilir olmayan i\xe7erik veya spam","ABUSE_VARIANT_SPAM_SHORT":"Spam gibi g\xf6r\xfcn\xfcyor","ADTUNE_COPY_TOKEN":"Token\'\u0131 kopyala","AD_TITLE":"Reklam","BU_LABEL_TOOLTIP_TEXT":"Bir Yandex teknolojisidir","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"Daha fazla bilgi edinin","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"Reklam verenin sitesinden daha fazla bilgi","MORE":"Daha fazla","MOTION_BTN":"Daha fazla bilgi","MOTION_BTN_WITHOUT_GREEN_URL":"Adres ve telefon","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"","PREV_ECOM_PRODUCT":"","REPEAT":"Tekrarla","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"sn","SKIP":"Atla","SKIP_TIME_LEFT":"Reklam\u0131 atla","SOCIAL_ADVERTISING_AD_LABEL":"","SURVEY_AD_LABEL":"Anket","SURVEY_AD_LABEL_OF_QUESTIONS":"soru","SURVEY_CONTINUE_BUTTON_TEXT":"Devam et","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"$x yan\u0131ta kadar se\xe7ebilirsiniz","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"1 veya birka\xe7 yan\u0131t se\xe7in","SURVEY_PACKSHOT_COMPANY":"Yandex.Surveys","SURVEY_PACKSHOT_FROM":"Anket teknolojiler \xfczerine ger\xe7ekle\u015ftirildi","SURVEY_PACKSHOT_TEXT":"Te\u015fekk\xfcr ederiz!","SURVEY_SINGLE_CHOICE_HINT_TEXT":"1 yan\u0131t se\xe7in","SURVEY_SKIP_BUTTON_TEXT":"Atla","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"Daha fazla bilgi","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"Daha fazla bilgi i\xe7in siteye gidin","THEME_EMPTY_ACTION_BUTTON_LABEL":"Git","TIME_LEFT":"Reklam","UNMUTE":"Sesi a\xe7","UNMUTE_INVITE":"Sesi a\xe7mak i\xe7in<br>imleci \xfczerine getirin","VISIT_SITE":"Reklam verenin sitesine git","YANDEX_DIRECT":"","YANDEX_DIRECT_LINK":""}},"uk":{"adsdk":{"ABUSE_ADS_TEXT":"","ABUSE_COPIED":"","ABUSE_COPY_TEXT":"","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"","ABUSE_IMPROVE_REASON_TEXT":"","ABUSE_OPTION_ABOUT":"","ABUSE_OPTION_ADVERTISER_INFO":"","ABUSE_OPTION_ALREADY_PURCHASED":"","ABUSE_OPTION_ANOTHER_REASON":"","ABUSE_OPTION_COMPLAINT":"","ABUSE_OPTION_FALSE_INFO_SOCIAL":"","ABUSE_OPTION_HIDE":"","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"","ABUSE_OPTION_NOT_INTERESTED":"","ABUSE_OPTION_OVERLAP_CONTENT":"","ABUSE_OPTION_POLITICAL_SOCIAL":"","ABUSE_OPTION_SCAMMERS":"","ABUSE_OPTION_SEEN_TOO_OFTEN":"","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"","ABUSE_OPTION_UNPLEASANT_CONTENT":"","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"","ABUSE_PLACEHOLDER_HINT_HIDE":"","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"","ABUSE_PLACEHOLDER_TEXT_HIDE":"","ABUSE_REPORT_PROBLEM":"\u0417\u0430\u0440\u0435\u043f\u043e\u0440\u0442\u0438\u0442\u044c \u0431\u0430\u0433","ABUSE_SCREEN_DESCRIPTION":"","ABUSE_SCREEN_DESCRIPTION_SHORT":"","ABUSE_SCREEN_TITLE":"","ABUSE_VARIANT_ANNOYING":"","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"","ABUSE_VARIANT_NOT_INTERESTED":"","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"","ABUSE_VARIANT_SPAM":"","ABUSE_VARIANT_SPAM_SHORT":"","ADTUNE_COPY_TOKEN":"","AD_TITLE":"","BU_LABEL_TOOLTIP_TEXT":"\u041f\u0440\u0430\u0446\u044e\u0454 \u043d\u0430 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0456\u044f\u0445 \u042f\u043d\u0434\u0435\u043a\u0441\u0430","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"","MORE":"","MOTION_BTN":"","MOTION_BTN_WITHOUT_GREEN_URL":"","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"","PREV_ECOM_PRODUCT":"","REPEAT":"","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"","SKIP":"","SKIP_TIME_LEFT":"","SOCIAL_ADVERTISING_AD_LABEL":"","SURVEY_AD_LABEL":"","SURVEY_AD_LABEL_OF_QUESTIONS":"","SURVEY_CONTINUE_BUTTON_TEXT":"","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_PACKSHOT_COMPANY":"","SURVEY_PACKSHOT_FROM":"","SURVEY_PACKSHOT_TEXT":"","SURVEY_SINGLE_CHOICE_HINT_TEXT":"","SURVEY_SKIP_BUTTON_TEXT":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_LABEL":"","TIME_LEFT":"","UNMUTE":"","UNMUTE_INVITE":"","VISIT_SITE":"","YANDEX_DIRECT":"","YANDEX_DIRECT_LINK":""}},"uz":{"adsdk":{"ABUSE_ADS_TEXT":"","ABUSE_COPIED":"","ABUSE_COPY_TEXT":"","ABUSE_CUSTOM_FIELD_PLACEHOLDER":"","ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT":"","ABUSE_IMPROVE_REASON_TEXT":"","ABUSE_OPTION_ABOUT":"","ABUSE_OPTION_ADVERTISER_INFO":"","ABUSE_OPTION_ALREADY_PURCHASED":"","ABUSE_OPTION_ANOTHER_REASON":"","ABUSE_OPTION_COMPLAINT":"","ABUSE_OPTION_FALSE_INFO_SOCIAL":"","ABUSE_OPTION_HIDE":"","ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE":"","ABUSE_OPTION_NOT_INTERESTED":"","ABUSE_OPTION_OVERLAP_CONTENT":"","ABUSE_OPTION_POLITICAL_SOCIAL":"","ABUSE_OPTION_SCAMMERS":"","ABUSE_OPTION_SEEN_TOO_OFTEN":"","ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL":"","ABUSE_OPTION_UNPLEASANT_CONTENT":"","ABUSE_PLACEHOLDER_HINT_COMPLAINT":"","ABUSE_PLACEHOLDER_HINT_HIDE":"","ABUSE_PLACEHOLDER_TEXT_COMPLAINT":"","ABUSE_PLACEHOLDER_TEXT_HIDE":"","ABUSE_REPORT_PROBLEM":"\u0417\u0430\u0440\u0435\u043f\u043e\u0440\u0442\u0438\u0442\u044c \u0431\u0430\u0433","ABUSE_SCREEN_DESCRIPTION":"","ABUSE_SCREEN_DESCRIPTION_SHORT":"","ABUSE_SCREEN_TITLE":"","ABUSE_VARIANT_ANNOYING":"","ABUSE_VARIANT_FALSE_INFO_SOCIAL_AD":"","ABUSE_VARIANT_NOT_INTERESTED":"","ABUSE_VARIANT_NOT_INTERESTED_SOCIAL_AD":"","ABUSE_VARIANT_POLITICAL_SOCIAL_AD":"","ABUSE_VARIANT_SHOCKING_CONTENT_SOCIAL_AD":"","ABUSE_VARIANT_SPAM":"","ABUSE_VARIANT_SPAM_SHORT":"","ADTUNE_COPY_TOKEN":"","AD_TITLE":"","BU_LABEL_TOOLTIP_TEXT":"Yandex texnologiyalarida ishlaydi","ECOM_PRODUCTS_BUTTON_HIDE":"","ECOM_PRODUCTS_BUTTON_SHOW":"","LEARN_MORE":"","LEARN_MORE_ON_ADVERTISERS_WEBSITE":"","MORE":"","MOTION_BTN":"","MOTION_BTN_WITHOUT_GREEN_URL":"","MOTION_DIETARYSUPPL_DISCLAIMER":"","MOTION_DISTANCE_SALES":"","MOTION_DRUG_DISCLAIMER":"","MOTION_HIDE_DISCLAIMER":"","MOTION_SHOW_DISCLAIMER":"","NEXT_ECOM_PRODUCT":"","OF":"","PREV_ECOM_PRODUCT":"","REPEAT":"","REWARDED_TIMER_1":"","REWARDED_TIMER_2":"","SECONDS":"","SKIP":"","SKIP_TIME_LEFT":"","SOCIAL_ADVERTISING_AD_LABEL":"","SURVEY_AD_LABEL":"","SURVEY_AD_LABEL_OF_QUESTIONS":"","SURVEY_CONTINUE_BUTTON_TEXT":"","SURVEY_FIXED_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_MULTIPLE_CHOICE_HINT_TEXT":"","SURVEY_PACKSHOT_COMPANY":"","SURVEY_PACKSHOT_FROM":"","SURVEY_PACKSHOT_TEXT":"","SURVEY_SINGLE_CHOICE_HINT_TEXT":"","SURVEY_SKIP_BUTTON_TEXT":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_DEFAULT_TITLE":"","THEME_EMPTY_ACTION_BUTTON_LABEL":"","TIME_LEFT":"","UNMUTE":"","UNMUTE_INVITE":"","VISIT_SITE":"","YANDEX_DIRECT":"","YANDEX_DIRECT_LINK":""}}}')}},i={};e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,{a:i}),i},e.d=function(t,i){for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";function t(e){return"string"===typeof e}function i(e){return t(e)&&e.length>0}function o(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function n(e){if(!Boolean(null==e?void 0:e.toString))return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function r(e,t){return void 0===t&&(t=window),("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function a(e){return"function"===typeof e}function s(e){return JSON.stringify(e,function(){const e=[],n=function(){const e="undefined"===typeof WeakMap?void 0:new WeakMap,t=[];return{set:(i,o)=>{if(void 0!==e)try{e.set(i,o)}catch(n){t.push({path:o,value:i})}else t.push({path:o,value:i})},get:i=>{const o=Nl(t,(e=>e.value===i));return void 0!==e&&void 0===o?e.get(i):o?o.path:void 0}}}();return(r,s)=>{if(a(s))return t(s.name)?s.name:"[Function]";if(Ol(s))return kl(s);if(!o(s))return s;if(Rl(s))return(l=s).id?l.id:l.className?l.className:"HTML Element";var l;const d=n.get(s);if(i(d))return"[Circular "+d+"]";for(;e.length>0&&e[e.length-1].value[r]!==s;)e.pop();const c=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:c,value:s}),n.set(s,c),s}}())}function l(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function d(){}function c(e){return"function"===typeof e||"Function"===wl(e)}function u(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function h(e,t){if(!c(e.matchMedia))return!1;const i=e.matchMedia(t);return u(i)&&Boolean(i.matches)}function p(e){return void 0===e&&(e=window),function(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:i,maxTouchPoints:o}=t;return i||o||0}(e)>0&&!function(e){return void 0===e&&(e=window),function(e){void 0===e&&(e=window);const t=Fl(e);return"boolean"===typeof t?-1:t}(e)>11}(e)}(e)||function(e){return h(e,jl)}(e)||function(e){return h(e,Yl)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}function m(e,t){if(void 0===t&&(t=!0),Gl&&t)return[];{const t=[];let i=e;for(;;)try{if(i=i.ownerDocument.defaultView.frameElement,!i)return t;t.push(i)}catch(Bv){return t}}}function A(e){let t=function(){let i;return t=()=>i,i=e.apply(this,arguments),i};return function(){return t.apply(this,arguments)}}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const i in e)g(e,i)&&t.push(i);return t}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_.apply(this,arguments)}function y(e,t){try{return e()}catch(Bv){"function"===typeof t&&t(Bv)}}function f(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function S(e){let t="";for(let i=0;i<e;i++)t+=(16*md()|0).toString(16);return t}function T(e,t,i){void 0===i&&(i=" ");const o=t-e.length;if(o>0){let t=i;for(;t.length<o;)t+=t;return(t.length>o?t.substr(0,o):t)+e}return e}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b(e,t,i){for(const o in e)E(e,o)&&t.call(i,e[o],o,e)}function C(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function P(e,t){if(void 0===t&&(t=!0),Gl&&t)return[];{const t=[];let i=e;for(;;)try{if(i=i.ownerDocument.defaultView.frameElement,!i)return t;t.push(i)}catch(Bv){return t}}}function w(e){const t=P(e.documentElement).map((e=>e.ownerDocument));return t.unshift(e),t.map((e=>({location:C(e.defaultView),referrer:e.referrer})))}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},O.apply(this,arguments)}function I(e){Pd.href=e;let t=Pd.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const i=(Pd.search||"")+(Pd.hash||""),o=e.lastIndexOf(i),n=-1===o?e:e.slice(0,o);if(wd.test(e)){const t=I(e.replace(wd,"https:"));return Pd.href=e,O({},t,{originalPath:n,protocol:e.slice(0,e.indexOf(":")+1),href:Pd.href})}const r=Pd.protocol&&/^[a-z\-]+:/i.test(Pd.protocol)?Pd.protocol:"";return{originalPath:n,href:Pd.href,protocol:r,host:Pd.host,hostname:Pd.hostname,port:Pd.port,pathname:t,search:Pd.search,hash:Pd.hash}}function k(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,i="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(i?"/":"")+e.search+e.hash}const i="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+i+e.pathname+e.search+e.hash}function D(e){const t={},i=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let o=0;o<i.length;o++){const e=i[o].indexOf("=");let n,r;if(-1===e?(n=Od(i[o]),r=""):(n=Od(i[o].slice(0,e)),r=i[o].slice(e+1)),n){const e=Boolean(/(\[\])$/.exec(n));n=n.replace(/\[\]$/,""),e?void 0===t[n]?t[n]=[Od(r)]:t[n]=[].concat(t[n],Od(r)):t[n]=Od(r)}}return t}function N(e){const t=[];for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];Ed(o)?t.push(Id(i,o)):void 0!==o&&t.push(i+"="+encodeURIComponent(o))}return"?"+t.join("&")}function R(e,t,i){let{override:o=!0,saveOriginalPath:n=!1}=void 0===i?{}:i;const r=I(e),a=D(r.search);return b(t,((e,t)=>{(void 0===a[t]||o)&&(a[t]=e)})),k(O({},r,{search:N(a)}),n)}function V(e,t){return-1!==e.indexOf(t)}function L(e){return Boolean(e)}function x(e){return e}function B(e){o(console)&&a(console.warn)&&console.warn(e)}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},M.apply(this,arguments)}function U(e,t){const i=F(H(e,{}),t);return o=t,Ud.has(o)?(0,Bd[t])(i):i;var o}function F(e,t){for(const{sourceName:o,getter:n}of e){const e=y((()=>n(t)));if(i(e))return B("VAS WARNING! Hardcoded parameter=["+t+"] with value=["+e+"] found in ["+o+"]"),e}}function H(e,t){const i={},o=w(e.document);for(const{location:r}of o)b(D(I(r).search),((e,t)=>{i[t]=e}));const n=function(e){return{adsdktracelogs:e.VAS_TRACE_LOGS,adsdksecuremode:e.VAS_SECURE_MODE,adsdkwithcredentials:e.VAS_WITH_CREDENTIALS,adsdkabflags:e.VAS_AB_FLAGS,adsdkuaas:e.VAS_UAAS,[kd]:e.VAS_AIM_BANNER_ID,[Dd]:e.VAS_AIM_DESIGN_ID,[Nd]:e.VAS_AIM_DESIGN_NAME,[Rd]:e.VAS_AIM_SUBDESIGN_ID,adsdkhoneypotforced:e.VAS_HONEYPOT_FORCED,adsdkgrforced:e.VAS_GR_FORCED,vasconsolelogs:e.VAS_CONSOLE_LOGS,vasnetworklogs:e.VAS_NETWORK_LOGS,vasdebug:e.VAS_DEBUG,vasfulldebug:e.VAS_FULL_DEBUG}}(t);return[{sourceName:"UrlParams",getter:e=>i[e]},{sourceName:"LocalStorage",getter:t=>Md(e,t)},{sourceName:"GlobalVariable",getter:t=>{for(const n of Sd(e)){var i,o;const e=null==(i=n.Ya)||null==(o=i.hardcodedParams)?void 0:o[t];if(e)return String(e)}}},{sourceName:"ABFlag",getter:e=>n[e]}]}function z(e){let t=e;const i=[e],{top:o}=e;for(;t!==o;)t=t.parent,i.push(t);return i}function W(e){if(!e)return[];const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}function j(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];$l(e)&&Jl(e,(e=>{"function"===typeof e&&e(...i)}))}function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Y.apply(this,arguments)}function G(e,t){return function(e){const i=Ql,o=i.console;if(!t||void 0===o)return;const n="AdSDKJS[InPage]:";for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];null==o.log||o.log(n,e,...a)}}function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},X.apply(this,arguments)}function K(e){var n,r,a,s,l,d;const c=(e=>{let t;return{rootFields:y((()=>(e=>{if(o(e)){const t={},{vsid:o,contentPlayerVersion:n,pcodeVersion:r,widgetVersion:a}=e;if(i(o)&&(t.vsid=o),i(n)&&(t.contentPlayerVersion=n),i(r)&&(t.pcodeVersion=r),i(a)&&(t.widgetVersion=a),v(t).length>0)return t}})(e)),(e=>{t=e}))||void 0,extractionError:t}})(null==qd?void 0:qd.STATS_ROOT_PARAMS),{config:u,parsingError:h}=function(e,t){let i,o=(null==t?void 0:t.VAS_UAAS_CONFIG)||td;try{const t=U(e,"adsdkuaas"),i=nd(t);if(i.error)throw i.error;o=i.config}catch(Bv){i=Bv}return{config:o,parsingError:i}}(e,qd),p=function(e,i,o){var n;const r=i.flags,a=null!=(n=null==o?void 0:o.AB_FLAGS)?n:{};const s=U(e,"adsdkabflags"),l=t(s)?fd(s.split(","),((e,t)=>{const[i,o]=t.split("=");return X({},e,{[i]:o})}),{}):{};return X({},{},r,a,l)}(e,u,qd),m=function(e,t){const i=H(e,t),o=fd(Vd,((e,t)=>{const o=F(i,t);return M({},e,{[t]:(0,Bd[t])(o)})}),{});return o.adsdkdebug&&(console.warn("adsdkdebug is deprecated, use vasfulldebug instead"),o.vasfulldebug=!0),o.vasfulldebug&&(o.vasnetworklogs="false"!==F(i,"vasnetworklogs"),o.vasconsolelogs="false"!==F(i,"vasconsolelogs"),o.vasdebug="false"!==F(i,"vasdebug")),o}(e,p),A=m.vasdebug,g=m.vasconsolelogs,_=G(m.adsdktracelogs,g),f=(null==c||null==(n=c.rootFields)?void 0:n.vsid)||(null==qd?void 0:qd.VSID)||(void 0===T&&(T=gd),[S(44),vd,_d(T),yd()].join("x"));var T;_((null!=c&&null!=(r=c.rootFields)&&r.vsid||null!=qd&&qd.VSID?"Use VSID from session":"Generate new VSID")+" ["+f+"]");const E=null!=(a=null==qd?void 0:qd.VAS_USER_SESSION_RANDOM)?a:md(),b=(null==qd?void 0:qd.ICOOKIE)||u.iCookie,C=(null==qd?void 0:qd.AdditionalStatsRootFields)||c.rootFields||void 0,P=(null==qd?void 0:qd.TEST_IDS)||u.testIds||void 0,w=(Wd&&I(Wd).hostname,null!=(s=null==qd?void 0:qd.loaderLoadedFromAnYandexRu)&&s),{productTheme:O,pageId:k,impId:D}=null!=qd?qd:{};return{hardcodedParams:m,isDebugEnabled:A,VSID:f,VAS_USER_SESSION_RANDOM:E,AB_FLAGS:p,ICOOKIE:b,TEST_IDS:P,VAS_UAAS_CONFIG:u,VAS_UAAS_CONFIG_ParseError:h,AdditionalStatsRootFields:C,AdditionalStatsRootFieldsExtractionError:c.extractionError,STATS_ROOT_PARAMS:null!=(l=null==qd?void 0:qd.STATS_ROOT_PARAMS)?l:{},isRumEnabledByLogProbability:!1,loaderLoadedFromAnYandexRu:w,activeTestIds:null==qd?void 0:qd.ActiveTestIds,grWasSent:null!=(d=null==qd?void 0:qd.grWasSent)&&d,productTheme:O,pageId:k,impId:D}}function q(e){let{element:t,eventName:i,listener:o,options:n,ignoreBubbling:r=!1}=e;const s=r?function(e){e.target===t&&o.call(this,e)}:o,l=function(e){let t=!1,i=!1,o=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),i=Boolean(e.passive),o=Boolean(e.once)),{capture:t,passive:i,once:o}}(n),d=ac?l:l.capture,c=l.once&&!nc?function(e){u(),s.call(this,e)}:s,u=()=>{a(t.removeEventListener)&&t.removeEventListener(i,c,d)};return t.addEventListener(i,c,d),u}function Q(e,t){void 0===t&&(t=window);let i=d;const o=t=>{"pagehide"===t.type&&t.persisted||(e(t),i())},n=sc(lc,(e=>q({element:t,eventName:e,listener:o})));return i=A((()=>{j(n)})),i}function J(e){setTimeout((()=>{throw e}),0)}function Z(e){return dc?W(e.location.ancestorOrigins):[]}function $(e){let t="",i="";return e&&w(e).reverse().forEach((e=>{let{location:o,referrer:n}=e;t=t||o,i=i||n})),{location:t,referrer:i}}function ee(e){let t=function(){let i;return t=()=>i,i=e.apply(this,arguments),i};return function(){return t.apply(this,arguments)}}function te(){}function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ie.apply(this,arguments)}function oe(e){const{method:t,url:i,async:o=!0,data:n,responseType:r="text",onBeforeSend:a=te,onRetry:s=te,checkStatus:l=(e=>yc===e),headers:d={},xhrConstructor:c=XMLHttpRequest,retries:u=0,timeout:h=0,withCredentials:p,onAbort:m,onSetup:A}=e;if(!c)return;const g=e.onSuccess?ee(e.onSuccess):te,v=e.onError?ee(e.onError):te;let _,y=!1,f=0,S=e=>{y=!0,S=te,_=e,T(new Error("Abort request")),"function"===typeof m&&m(e)};const T=t=>{if(E.onerror=null,E.onreadystatechange=null,f&&clearTimeout(f),f&&4!==E.readyState||y)try{E.abort()}catch(t){}if(!y)if(u>0){const i=s(t,E);if("boolean"!==typeof i||Boolean(i)||S(),y)return;oe(ie({},e,{onSetup:e=>{let{abort:t}=e;S=e=>t(e),y&&t(_)},retries:u-1}))}else S=te,v(t,E)},E=new c;try{E.open(t,i,o)}catch(Bv){return void T(Bv)}if(E.responseType=r,E.withCredentials=Boolean(p),b(d,((e,t)=>{try{E.setRequestHeader(t,e)}catch(Bv){}})),h>0&&isFinite(h)&&(f=window.setTimeout((()=>{T(new Error("Request timeout, "+i))}),h)),E.onerror=T,E.onreadystatechange=()=>{if(4===E.readyState){const{status:e}=E;l(e)?(S=te,clearTimeout(f),g(E)):T(new Error("Invalid request status "+e+", "+i))}},("function"!==typeof A||(A({abort:e=>S(e)}),!y))&&(a(E,e),!y))try{E.send(n)}catch(Bv){T(Bv)}}function ne(e){return Il(e)&&Boolean(e.code)}function re(e){return"ontouchstart"in e}function ae(e){return e.screen.availHeight>e.screen.availWidth?"portrait":"landscape"}function se(){const{document:e}=Ql;if(void 0!==e&&"function"===typeof e.hasFocus)try{return e.hasFocus()}catch(t){}}function le(e){return"function"===typeof Object.entries?Object.entries(e):sc(v(e),(t=>[t,e[t]]))}function de(e,t){void 0===t&&(t=!0);const i=Rc(e);return i?!e[i]:t}function ce(e,t,i){for(const o in e)g(e,o)&&t.call(i,e[o],o,e)}function ue(e){if(!o(e))return;const t={};return ce(e,((e,o)=>{void 0!==e&&("boolean"!==typeof e?i(e)&&(t[o]=e):t[o]=String(e))})),t}function he(e){return"number"===typeof e&&isFinite(e)&&e>0}function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},pe.apply(this,arguments)}function me(e){return"number"===typeof e&&isFinite(e)}function Ae(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function ge(e,t){Jl(e,(e=>{Ae(e,t)}))}function ve(e,t){const i={};return Jl(v(e),(o=>{i[o]=t(e[o],o)})),i}function _e(e,t){return function(){try{e(...arguments)}catch(i){Wc.error({error:new Ml(i,{code:t})}),J(i)}}}function ye(e){const{hostname:t,pathname:i}=I(e),o=jc.test(t),n=t===Qd&&i.startsWith("/adfox"),r=t===Jd&&Yc.test(i);return o||n||r}function fe(e){if(!e)return!1;const{hostname:t}=I(e);return!(!t||0===t.length)&&Gc(Xc,(e=>{return e===t||(o="."+e)===(i=t).substring(i.length-o.length);var i,o}))}function Se(e){(new Image).src=e}function Te(e,t){if(fe(e)||ye(e)){const i=function(e,t){return!!Kc&&window.navigator.sendBeacon(e,t)}(e,t);if(i)return}else fe(e)&&Wc.log({name:"TrackYandexUrlWithImage",data:{url:e},probability:Cc});Se(e)}function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ee.apply(this,arguments)}function be(e){const t=function(e){if("function"===typeof e.getVideoPlaybackQuality){const t=e.getVideoPlaybackQuality();if(o(t)){const{droppedVideoFrames:e,corruptedVideoFrames:i,totalVideoFrames:o}=t;return{droppedVideoFrames:e,corruptedVideoFrames:i||0,totalVideoFrames:o}}}const t=e;return"number"===typeof t.webkitDroppedFrameCount&&"number"===typeof t.webkitDecodedFrameCount?Ee({},Qc,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):Qc}(e),{droppedVideoFrames:i,totalVideoFrames:n}=t;let r=Jc.droppedVideoFramesRatio;return he(n)&&me(i)&&(r=i/n),Ee({},t,{droppedVideoFramesRatio:r})}function Ce(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join("")}function Pe(){return Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Pe.apply(this,arguments)}function we(e,t){const i=function(e,t){return Number(e)&Math.pow(2,t)-1}(e,t).toString(2);return Oe(i,t)}function Oe(e,t){return T(e,t,"0")}function Ie(){return Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ie.apply(this,arguments)}function ke(){return ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ke.apply(this,arguments)}function De(e){let{url:t,options:i,ignoreAbd:o=!1,win:n}=e;if(a(kc(n))&&!o)return t;if(!fe(t)&&!ye(t))return t;const r=bu(i.size),s=Math.round(100*i.visibility),l=Math.round(100*i.videoVolume),d=Math.round(i.videoAvatarSize.width),c=Math.round(i.videoAvatarSize.height),u=se(),h="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_REMOVE_OLD_SIZE_PARAMS_FROM_VMAP_REQUEST"),p=Uc.getActiveTestIds().join(";"),m=null==qd?void 0:qd.productTheme;return R(t,ke({"adsdk-bundle-version":gd,"adsdk-bundle-name":jd},!h&&{"adsdk-container-visibility":String(s),"adsdk-container-width":String(r.width),"adsdk-container-height":String(r.height),"video-avatar-width":String(d),"video-avatar-height":String(c)},{"adsdk-test-tag":"TRUE"===Uc.getFlagValueAndActivateTestId("DISABLE_VAS_TEST_TAG")?void 0:String(wu.serialize()),"ad-session-id":Su(),[eu]:ic,shyid:Tu(n),"top-ancestor":vc,"top-ancestor-undetermined":_c?"0":"1","client-ts":String(Date.now()),"client-timezone-offset":String((new Date).getTimezoneOffset()),"viewability-undetermined":ku()?"0":"1","video-volume":String(l),"video-muted":i.videoMuted?"1":"0","pcode-active-testids":p||void 0,"document-has-focus":void 0===u?"unknown":String(u),"is-fullscreen":void 0===i.isFullscreen?"unknown":String(i.isFullscreen),"device-orientation":re(n)?ae(n):void 0,[nu]:void 0===i.adPodId?"unknown":i.adPodId,"product-theme":void 0===m?"unknown":m}),{override:!1})}function Ne(e){let{error:t,trackingUrls:i}=e;oc("Track error=["+t+"]"),function(e){if(!Array.isArray(e))return;const t=sc(e,(e=>De({url:e,options:$c,win:window})));Jl(t,(e=>Te(e)))}(i)}function Re(e,t){void 0===t&&(t=[]),Wc.errorToStats(e),Ne({error:e,trackingUrls:t})}function Ve(e,t,i,o){function n(){null!==r&&clearTimeout(r),r=null}3===arguments.length&&"boolean"!==typeof i&&(o=i,i=!1);let r=null;const a=function(){const a=arguments;o=o||this,i&&null===r&&e.apply(o,a),n(),r=window.setTimeout((function(){i||e.apply(o,a),r=null}),t)};return a.cancel=n,a}function Le(e,t){try{return e()}catch(Bv){"function"===typeof t&&t(Bv)}}function xe(e){return function(e){return void 0===e&&(e=window),void 0===Vu&&(Vu=function(e){return void 0===e&&(e=window),e.JSON&&f(e.JSON.stringify)&&f(e.JSON.parse)}(e)?e.JSON:{stringify:Lu("stringify"),parse:Lu("parse")}),Vu}().stringify(e,function(){const e=[],i=function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(i,o)=>{if(void 0!==e)try{e.set(i,o)}catch(n){t.push({path:o,value:i})}else t.push({path:o,value:i})},get:i=>{const o=Ru(t,(e=>e.value===i));return void 0!==e&&void 0===o?e.get(i):o?o.path:void 0}}}();return(o,n)=>{if(c(n))return t(n.name)?n.name:"[Function]";if(!u(n))return n;const r=i.get(n);if(r)return"[Circular "+r+"]";for(;e.length>0&&e[e.length-1].value[o]!==n;)e.pop();const a=(e.length>0?e[e.length-1].path:"")+(o?"/"+o:"~");return e.push({path:a,value:n}),i.set(n,a),n}}())}function Be(e){return void 0===e&&(e=""),e.replace(ju,(e=>e in Yu?Yu[e]:e))}function Me(e){if(!o(e))return;const{AUCTION_DC_PARAMS:t}=e;return o(t)&&o(t.data_params)?Xu(t.data_params):void 0}function Ue(e){const t=Me(e);if(!t)return;const{text:i}=t;return o(i)?i:void 0}function Fe(e){const t=Ue(e);if(!t||!o(e))return{};const{HAS_TITLE:n,HAS_BODY:r}=e;return{title:i(t.title)?Be(t.title):void 0,body:i(t.body)?Be(t.body):void 0,hasBody:"boolean"===typeof r?r:void 0,hasTitle:"boolean"===typeof n?n:void 0}}function He(e){const t=function(e){const t=[];let i=0;for(e=e.replace(/[^A-Za-z0-9\-_=]/g,"");i<e.length;){const o=Ku.indexOf(e.charAt(i++)),n=Ku.indexOf(e.charAt(i++)),r=Ku.indexOf(e.charAt(i++)),a=Ku.indexOf(e.charAt(i++)),s=o<<2|n>>4,l=(15&n)<<4|r>>2,d=(3&r)<<6|a;t.push(String.fromCharCode(s)),64!==r&&t.push(String.fromCharCode(l)),64!==a&&t.push(String.fromCharCode(d))}return t.join("")}(e);return function(e){const t=[];let i=0;for(;i<e.length;){const o=e.charCodeAt(i);if(o<128)t.push(String.fromCharCode(o)),i++;else if(o>191&&o<224){const n=e.charCodeAt(i+1);t.push(String.fromCharCode((31&o)<<6|63&n)),i+=2}else{const n=e.charCodeAt(i+1),r=e.charCodeAt(i+2);t.push(String.fromCharCode((15&o)<<12|(63&n)<<6|63&r)),i+=3}}return t.join("")}(t)}function ze(e){let t,{remainingLoadWrapperVastCount:i,isAdFox:o,url:n,adBreakType:r,adPlacementOptions:a,adConfig:s}=e;return t=o||n&&ye(n)?"AD_FOX":n&&fe(n)?"YANDEX":"EXTERNAL",{adPlacementOptions:a,vastSourceType:t,vastTimeout:3e3,remainingLoadWrapperVastCount:i,adBreakType:r,requestMethod:qu({secureMode:s.secureMode,url:n})?"VASFrame":"XMLHttpRequest"}}function We(e){if(!o(e))return;const{AUCTION_DC_PARAMS:t}=e;if(!o(t)||!o(t.data_params))return;const n=Xu(t.data_params);if(!o(n))return;const r=n.target_url;return i(r)?r:void 0}function je(e){let{type:t}=e;return i(t)&&Zu.indexOf(t)>-1?"js":"video"}function Ye(e,t){if(e!==$u.EMPTY)return!1;if(!o(t))return!1;const{AUCTION_DC_PARAMS:i}=t;if(!o(i))return!1;const{data_params:n}=i;if(!o(n))return!1;const{misc:r}=n;if(!o(r))return!1;const{layout_type:a}=r;return"clickable_video"===a}function Ge(e){return function(e){return""+nh+e+"/"}(e)}function Xe(e){if(!o(e))throw new Ml({code:"CANNOT_DETECT_VAS_MEDIA_FILE_BY_NON_OBJECT_JSON",details:{adParametersObject:e}});const{theme:t}=e;if(t===$u.INTERACTIVE_VIEWER)return{url:ih,adFormatType:"interactiveViewer",detectionMethod:"ivTheme"};if(Ye(t,e))return{url:ch,adFormatType:"clickableVideo",detectionMethod:"clickableOnlyVideo"};if(t===$u.EMPTY)return{url:ch,adFormatType:"themeEmpty",detectionMethod:"emptyTheme"};if(t===$u.SURVEY)return{url:ch,adFormatType:"survey",detectionMethod:"surveyTheme"};if(t===$u.MOTION)return{url:rh,adFormatType:"motion",detectionMethod:"motionTheme"};throw new Ml({code:"CANNOT_DETECT_CREATIVE_BY_AD_PARAMETERS",details:{adParametersObject:e}})}function Ke(e){const t=null==e?void 0:e.mediaFiles[0];if(!o(t))return"external";const{type:i,url:n}=t;if("js"!==je({type:i}))return"video";if(!fe(n))return"external";try{if(e.adParametersObject){const{adFormatType:t}=Xe(e.adParametersObject);return t}}catch(r){}return"external"}function qe(e,t){return{AB_FLAGS_STORE:t,VSID:e.VSID,VAS_USER_SESSION_RANDOM:e.VAS_USER_SESSION_RANDOM,AB_FLAGS:e.AB_FLAGS,ICOOKIE:e.ICOOKIE,TEST_IDS:e.TEST_IDS,VAS_UAAS_CONFIG:e.VAS_UAAS_CONFIG,AdditionalStatsRootFields:e.AdditionalStatsRootFields,STATS_ROOT_PARAMS:e.STATS_ROOT_PARAMS,loaderLoadedFromAnYandexRu:e.loaderLoadedFromAnYandexRu,ActiveTestIds:e.activeTestIds,grWasSent:e.grWasSent,productTheme:e.productTheme,pageId:e.pageId,impId:e.impId}}function Qe(e,t){const i=e.style;for(const o in t)t.hasOwnProperty(o)&&(i[fh(o)]=t[o])}function Je(e){if("function"===typeof Object.keys)return Object.keys(e);{const t=[];for(const i in e)E(e,i)&&t.push(i);return t}}function Ze(e,t){Je(t).forEach((i=>{const o=t[i];null===o?e.removeAttribute(i):e.setAttribute(i,o)}))}function $e(){return $e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},$e.apply(this,arguments)}function et(){return et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},et.apply(this,arguments)}function tt(){return tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},tt.apply(this,arguments)}function it(e){const t={};return Jl(e,(e=>{let[i,o]=e;t[i]=o})),t}function ot(){return ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ot.apply(this,arguments)}function nt(){return nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},nt.apply(this,arguments)}function rt(e){if(!e)return null;try{const t=(new DOMParser).parseFromString(e,"application/xml");return null===t.querySelector("parsererror")?t:null}catch(t){return null}}function at(){return at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},at.apply(this,arguments)}function st(e){let{url:t,data:i,timeout:o,doRequest:n=Gh,withCredentials:r}=e;return new Promise((async(e,a)=>{"https:"===window.location.protocol&&(t=function(e){return Pd.href=e,Pd.protocol="https:",Pd.href}(t));const s=Xh(o),l=n({url:t,data:i,withCredentials:r});try{const t=await Promise.race([l,s]);return t?e(at({},t,{xml:rt(t.responseText)})):a({reason:"timeout",error:new Error("XHR Timeout")})}catch(d){return a(d)}}))}function lt(e){return[].concat.apply([],e)}function dt(e){return-1!==e.search(/[rR]each/)}function ct(){return ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ct.apply(this,arguments)}function ut(){return ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ut.apply(this,arguments)}function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ht.apply(this,arguments)}function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},pt.apply(this,arguments)}function mt(e){const t=[];if(!$l(e))return t;for(const i of e){const e=At(i);e&&t.push(e)}return t}function At(e){if(!o(e))return;const{width:t,height:n,url:r,type:a}=e;return i(r)?pt({},he(t)&&he(n)?{width:t,height:n}:void 0,i(a)?{type:a}:void 0,{url:r}):void 0}function gt(){return gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},gt.apply(this,arguments)}function vt(e){if(!o(e))return op;const{type:t,poster:i}=e;return gt({},t in tp?{type:t}:void 0,{poster:mt(i)})}function _t(){return _t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_t.apply(this,arguments)}function yt(e){return!!o(e)&&!!e.id&&!!i(e.description)}function ft(e,t,i){if(void 0===i&&(i=""),e.hasAttribute(t)){var o;const i=e.getAttribute(t);return null!=(o=null==i?void 0:i.trim())?o:""}return i}function St(e){var t,i;return null!=(t=null==e||null==(i=e.textContent)?void 0:i.trim())?t:""}function Tt(e){return Boolean(e&&St(e).length)}function Et(e){const t=parseInt(ft(e,"width",0),10),o=parseInt(ft(e,"height",0),10),n=parseInt(ft(e,"bitrate",0),10),r=ft(e,"minBitrate",""),a=r?parseInt(r,10):void 0,s=ft(e,"maxBitrate",""),l=s?parseInt(s,10):void 0,d=ft(e,"vmafAvg",""),c=d?parseFloat(d):void 0,u=ft(e,"codec",""),h={width:t,height:o,bitrate:n,type:ft(e,"type"),url:St(e)};return i(u)&&(h.codec=u),he(a)&&(h.minBitrate=a),he(l)&&(h.maxBitrate=l),he(a)&&he(l)&&a>l&&Wc.error({error:new Ml({code:"MIN_BITRATE_GREATER_THAN_MAX_BITRATE",details:{adMediaFile:h}})}),he(c)&&(h.vmafAvg=c),h.url?h.type?h:(Wc.error({error:new Ml({code:"INVALID_MEDIA_FILE_TYPE",details:{adMediaFile:h}})}),null):(Wc.error({error:new Ml({code:"INVALID_MEDIA_FILE_URL",details:{adMediaFile:h}})}),null)}function bt(e){var t,n,r;if(!o(e))return;const a=null==(t=e.AUCTION_DC_PARAMS)||null==(n=t.data_params)||null==(r=n.misc)?void 0:r.productType;return i(a)?a:void 0}function Ct(e){const t={};return o(e)&&Jl(v(e),(i=>{const o=e[i];Array.isArray(o)&&(t[i]=Vc(o,(e=>"string"===typeof e)))})),t}function Pt(){const e={};for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return Jl(i,(t=>{Jl(v(t),(i=>{const o=e[i]||[],n=t[i]||[];e[i]=[...o,...n]}))})),e}function wt(e){if(void 0===e)return;const t=Number(e);return he(t)?t:void 0}function Ot(e,t){const i={};return Jl(v(e),(o=>{t(e[o],o)&&(i[o]=e[o])})),i}function It(){return It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},It.apply(this,arguments)}function kt(e){const t=Qh(mp);if(!o(e))return t;const i=(e,i)=>{void 0===t.controlsVisibility[i]&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)};i(e.showSoundButton,"mute"),i(e.showSkipButton,"skip");const{controlsSettings:n}=e;if(o(n)){const{controlsVisibility:e}=n;if(o(e)&&b(e,((e,i)=>{hp.indexOf(i)>-1&&"boolean"===typeof e&&(t.controlsVisibility[i]=e)})),!1===n.visibility){const e=Ot(t.controlsVisibility,(e=>!0===e));t.controlsVisibility=It({},pp,e)}"videoInCombo"===n.skinVariant&&(t.skinVariant="videoInCombo")}return delete t.visibility,t}function Dt(){return Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Dt.apply(this,arguments)}function Nt(e){const{packshotSettings:t}=e;if(!o(t))return Ap;const{isEnabled:i,disableButton:n,disableOverlay:r,disableTitle:a}=t;return Dt({},Ap,{isEnabled:!1!==i&&void 0,disableButton:n,disableOverlay:r,disableTitle:a})}function Rt(e){const t=o(e)?e:{},i="number"===typeof t.bufferFullTimeout?Math.min(t.bufferFullTimeout,dp):void 0;return{config:{pauseOnClickThrough:void 0===t.pauseOnClickThrough||Boolean(t.pauseOnClickThrough),backgroundBlur:void 0===t.backgroundBlur?void 0:Boolean(t.backgroundBlur),description:"string"===typeof t.description?t.description:void 0,videoTimeout:he(t.videoTimeout)?t.videoTimeout:void 0,vpaidTimeout:he(t.vpaidTimeout)?t.vpaidTimeout:void 0,bufferFullTimeout:i,bufferEmptyLimit:he(t.bufferEmptyLimit)?t.bufferEmptyLimit:void 0,clickThroughUrl:"string"===typeof t.clickThroughUrl?t.clickThroughUrl:void 0,trackingEvents:t.trackingEvents?Ct(t.trackingEvents):{},controlsSettings:kt(t),videoSlotCanAutoPlay:void 0===t.videoSlotCanAutoPlay?void 0:Boolean(t.videoSlotCanAutoPlay),desiredBitrate:wt(t.desiredBitrate),lang:"string"===typeof t.lang?t.lang:Fu,packshotSettings:Nt(t),contentAfterAd:vt(t.contentAfterAd)},errors:[]}}function Vt(e){try{return"string"===typeof e?JSON.parse(e):void 0}catch(Bv){return}}function Lt(e){return"string"!==typeof e?NaN:fd(e.split(":").reverse(),((e,t,i)=>e+parseFloat(t)*60**i),0)}function xt(e){if(e.indexOf("%")>-1){const t=parseFloat(e);return me(t)?{unit:"portion",value:t/100}:void 0}const t=Lt(e);if(me(t))return{unit:"seconds",value:t}}function Bt(e){return"number"===typeof e&&isFinite(e)&&e>=0}function Mt(){return Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Mt.apply(this,arguments)}function Ut(e){let{domain:t,greenUrlTextPrefix:o,greenUrlTextSuffix:n}=e;return i(o)?o:i(n)?n:i(t)?t:void 0}function Ft(e){const{BUTTON_LABELS:t,BUTTON_TEXT:n}=e;return o(t)&&i(t[Fu])?t[Fu]:i(n)?n:void 0}function Ht(e){const t=Me(e);if(!o(t))return;if(o(t.unmoderated))return t.unmoderated;if(!o(t.text))return;const{text:i}=t;return o(i.unmoderated)?(_p(),i.unmoderated):void 0}function zt(e){return he(e)&&function(e){return me(e)&&Math.floor(e)===e}(e)}function Wt(e){return!v(e).length}function jt(e){var t,n;const{AUCTION_DC_PARAMS:r}=e;if(!o(r)||!o(r.data_params))return;const a=Xu(r.data_params);if(!o(a))return;const s=(null==(t=a.click_url)?void 0:t.action_button)||(null==(n=a.click_url)?void 0:n.text_name);return i(s)?s:void 0}function Yt(e){if(!o(e))return!1;const{pythia:i}=e;if(!o(i))return!1;const{extra:n}=i;return!!t(n)&&void 0!==D(n).bl_adg}function Gt(){return Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Gt.apply(this,arguments)}function Xt(e){Jl(e,(e=>Wc.error({error:e})))}function Kt(e,t){let i=!1;const o=function(){const o=i?t:e;return i=!0,o.apply(this,arguments)};return function(){return o.apply(this,arguments)}}function qt(e){let{win:t,methodName:i,data:o,id:n}=e;t.postMessage({methodName:i,data:o,id:n},"*")}function Qt(e){const t=Object.values;if("function"===typeof t)return t(e);const i=[];for(const o in e)g(e,o)&&i.push(e[o]);return i}function Jt(){return Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jt.apply(this,arguments)}function Zt(){return Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Zt.apply(this,arguments)}function $t(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:i={}}=t;if("number"===typeof i.downlink)return i.downlink;if("number"===typeof i.downlinkMax)return i.downlinkMax;if("string"===typeof i.type||"number"===typeof i.type)switch(i.type){case Mp.BLUETOOTH:return 3;case Bp.CELL_2G:return.384;case Bp.CELL_3G:case Mp.CELLULAR:return 2;case Mp.WIMAX:return 37;case Mp.NONE:return 0;case Bp.ETHERNET:case Mp.ETHERNET:case Bp.WIFI:case Mp.WIFI:case Mp.MIXED:return 10;case Bp.UNKNOWN:case Mp.UNKNOWN:case Mp.OTHER:}return-1}function ei(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}function ti(e,t){const i=window,o=i.document;if(t&&(n=function(e){return e.location.host}(i))&&n&&0!==n.length&&((e,t)=>{for(let a=0;a<e.length;a++)if(i=e[a],o=void 0,r=void 0,i===n||(r="."+i)===(o=n).substring(o.length-r.length))return!0;var i,o,r;return!1})(Hp))return t;var n;let r=ii(e,o);if("t\n"===r&&i.top!==i.self)try{r=ii(e,i.parent.document)}catch(Bv){}return function(e,t){void 0===t&&(t=1e6);const i=function(e,t){e=e.replace(/\r\n/g,"\n");let i="";for(let o=0;o<e.length;o++){const n=e.charCodeAt(o);let r;if(n<128?r=String.fromCharCode(n):n>127&&n<2048?(r=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128)),i.length+r.length>t)break;i+=r}return i}(e,3*t/4|0);return function(e){let t="",i=0;for(;i<e.length;){const o=e.charCodeAt(i++),n=e.charCodeAt(i++),r=e.charCodeAt(i++),a=o>>2,s=(3&o)<<4|n>>4;let l=(15&n)<<2|r>>6,d=63&r;isNaN(n)?l=d=64:isNaN(r)&&(d=64),t=t+zp.charAt(a)+zp.charAt(s)+zp.charAt(l)+zp.charAt(d)}return t}(i)}(r,e)}function ii(e,t){const i=[];let o=0;i.push("t"+(t.title||"")),o+=i[0].length;for(let n=1;n<4&&o<e;n++){const e=t.getElementsByTagName("h"+n),r=e.length;for(let t=0;t<r;t++){const r=oi(e[t]);o+=r.length,i.push(""+n+r)}}return i.join("\n")+"\n"}function oi(e){const t=[];let i="";if(!e)return i;for(t.push(e);t.length>0;)if(3===(e=t.pop()).nodeType)i+=e.nodeValue+" ";else if(e.childNodes&&e.childNodes.length>0){const i=e.childNodes;for(let e=i.length-1;e>=0;e--)t.push(i[e])}return i.replace(/\s+/g," ")}function ni(e){return Boolean(e.YA_TURBO_PAGES)}function ri(e,t){void 0===t&&(t=1e6);const i=function(e,t){e=e.replace(/\r\n/g,"\n");let i="";for(let o=0;o<e.length;o++){const n=e.charCodeAt(o);let r;if(n<128?r=String.fromCharCode(n):n>127&&n<2048?(r=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128)),i.length+r.length>t)break;i+=r}return i}(e,3*t/4|0);return function(e){let t="",i=0;for(;i<e.length;){const o=e.charCodeAt(i++),n=e.charCodeAt(i++),r=e.charCodeAt(i++),a=o>>2,s=(3&o)<<4|n>>4;let l=(15&n)<<2|r>>6,d=63&r;isNaN(n)?l=d=64:isNaN(r)&&(d=64),t=t+Ku.charAt(a)+Ku.charAt(s)+Ku.charAt(l)+Ku.charAt(d)}return t}(i)}function ai(e){let t;try{t=JSON.stringify(e)}catch(Bv){}return t}function si(e){return void 0===e&&(e=window),Boolean(e.ampSeen)}function li(e){void 0===e&&(e=window);let t="";const i=e.context,o=e.Ya;return si(e)&&i&&i.master.Ya&&i.master.Ya.getSkipToken?t=i.master.Ya.getSkipToken():o&&o.Context&&o.Context.AdvManager&&o.Context.AdvManager.getSkipToken&&(t=o.Context.AdvManager.getSkipToken()),t}function di(e){return void 0===e&&(e=window),String(e.location)}function ci(e){return void 0===e&&(e=window),ri(((e,t)=>{let i=[];try{i=e.cookie?e.cookie.split("; "):[]}catch(Bv){}const o=/(%[0-9A-Z]{2})+/g;let n;for(let r=0;r<i.length;r++){const e=i[r].split("="),t=e.slice(1).join("=");try{const i=e[0].replace(o,decodeURIComponent);if(t.replace(o,decodeURIComponent),"_ym_uid"===i){n=decodeURIComponent(t);break}}catch(Bv){return}}return n})(e.document)||"")}function ui(e){return void 0===e&&(e=window),e.location.hostname}function hi(){return hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},hi.apply(this,arguments)}function pi(){return pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},pi.apply(this,arguments)}function mi(e,t){void 0===t&&(t="");const{params:i,bids:o,matchIdDirect:n=!1,reloadCounter:r}=e,a=pi({},function(e){const t=e.win||window,i=void 0===e.isTurbo?ni(t):e.isTurbo,o=Gc(Kp,(e=>e.test(t.location.hostname)));return(e=>{var t;let{win:i,date:o=new Date,pr1:n,pr:r,testtag:a,isTurbo:s=ni(i),addsSsSkipToken:l=!1,layoutConfig:d=new Fp,cookies:c,loaderVer:u,bundleVer:h,adSessionId:p,location:m,extid_loader:A,extid_tag_loader:g}=e;d.set("req_no",Xp++),d.set("ad_no",function(){const e=function(){const e=window;let t=0;return e.Ya&&e.Ya.Context&&e.Ya.Context.AdvManager&&e.Ya.Context.AdvManager.getCapturedCount&&(t=e.Ya.Context.AdvManager.getCapturedCount()),t}();return Wp()+e}());const v=hi({},(e=>{let{win:t,pr:i,date:o=new Date,pr1:n=Gp(),location:r,extid_loader:a,extid_tag_loader:s}=e;const l=si(t)&&t.context&&t.context.sourceUrl||void 0,d=l||t.document.referrer;return{dl:l||r||di(t),date:Yp(o),pd:o.getDate(),pdh:t.screen.height,pdw:t.screen.width,pr1:n,pr:i,prr:d,pv:o.getHours(),pw:o.getDay(),extid_loader:void 0===a?ci(t):a,extid_tag_loader:void 0===s?ui(t):s}})({win:i,date:o,pr1:n,pr:r,location:m,extid_loader:A,extid_tag_loader:g}),{ylv:"0."+(u||"1"),ybv:"0."+(h||"1"),ytt:null!=(t=null==a?void 0:a.toString())?t:"","is-turbo":Number(s),"skip-token":li(),"ad-session-id":p||fu(),"layout-config":d.toString(),"enable-flat-highlight":1},c);return l&&(v["ss-skip-token-length"]=20,v["allow-repeat-ads"]=0),v})(pi({},e,{win:t,isTurbo:i,addsSsSkipToken:o}))}(e),i||{},n?{"matchid-direct":1}:{},{"enable-page-options":65536});if(Jl(qp,(e=>{a[e]=void 0})),Boolean(a.pk)&&void 0!==a.pk)try{a.pk=decodeURIComponent(a.pk)}catch(Bv){}if(o){const e=sc(o,(e=>pi({},e,{placement_id:e.placement_id?String(e.placement_id):void 0})));e.toJSON&&(e.toJSON=void 0),a.bids=ri(ai(e)||"")}return a.grab=ti(2048-t.length),a.utf8="\u2713",r&&(a.adf_refresh=r),a}function Ai(){const e=window;var t,i,o;return"number"!==typeof e.pr&&(e.pr=(null==e||null==(t=e.Ya)?void 0:t.headerBidding)&&(null==e||null==(i=e.Ya)||null==(o=i.headerBidding)?void 0:o.pr)||Gp()),e.pr}function gi(){return gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},gi.apply(this,arguments)}function vi(e,t){const i=kc(window);let o;try{const t=tc.loaderLoadedFromAnYandexRu?Qd+"/adfox":Jd+"/ads/adfox";o=function(e){const{base:t,queryParams:i}=function(e){!function(e){const{ownerId:t}=e;if(!t)throw new Error("there is no `ownerId` for getAdfoxBulkUrl()")}(e);const t=function(e){let t,{adblock:i,useXhr:o,ownerId:n,domain:r=Qp}=e;return t=o?"getBulk/v2":i?"getCodeTest":"prepareCode","https://"+r+"/"+n+"/"+t}(e);return{base:t,queryParams:mi(e,t)}}(e);return R(t,i)}(gi({},e,{layoutConfig:new Fp,useXhr:!0,domain:t,pr:Ai()}))}catch(r){throw new Ml(r,{code:"CREATE_ADFOX_URL_ERROR",details:{adFoxParameters:e}})}if(!ei(o))throw new Ml({code:"CANNOT_CREATE_ADFOX_URL",details:{adFoxParameters:e}});const n=De({url:o,options:t,ignoreAbd:!0,win:window});return i?i(n):n}async function _i(e){let{adFoxParameters:t,adPlacementOptions:i,secureMode:n,__requestInfoForLogs:r={}}=e;const a=vi(t,i);r.adFoxUrl=a;const s=qu({secureMode:n,url:a})?Yh:Gh;try{const e=await s({url:a,withCredentials:!0});if(r.responseText=e.responseText,r.responseHeaders=e.responseHeaders,200!==e.responseStatus)throw new Error("Invalid status ["+e.responseStatus+"]");const{creative:t,errors:i}=function(e){const t=Vt(e),i=[];if(!o(t))throw new Ml({code:"ADFOX_AD_DATA_IS_NOT_VALID_JSON_OBJECT",details:{adFoxDataString:e}});const{errors:n,data:r}=t;if(Array.isArray(n)&&n.length>0){if(t.errors&&1===t.errors.length&&"204"===t.errors[0].status)throw new Ml({code:"NO_AD_SECTION",details:{reason:"status-204"}});throw new Ml({code:"ADFOX_AD_DATA_ERROR",details:{adFoxData:t}})}if(!Array.isArray(r))throw new Ml({code:"INVALID_ADFOX_DATA_FORMAT",details:{adFoxData:t}});const a=Vc(r,((e,n)=>{if(!o(e)||!o(e.attributes))return i.push(new Ml({code:"INVALID_ADFOX_CREATIVE_DATA",details:{adFoxData:t,index:n}})),!1;const{campaignId:r,vastBase64:a}=e.attributes;return"string"===typeof a&&a.length>0||"string"===typeof r&&r.length>0||(i.push(new Ml({code:"NO_REQUIRED_PARAMETERS_IN_ADFOX_CREATIVE",details:{adFoxData:t,index:n}})),!1)}));if(0===a.length)throw new Ml({code:"NO_ADS_IN_ADFOX_DATA",details:{adFoxData:t}});return a.length>1&&i.push(new Ml({code:"EXTRA_ADFOX_DATA",details:{adFoxData:t}})),{creative:a[0].attributes,errors:i}}(e.responseText);return Xt(i),t}catch(l){if(ne(l))throw l;throw new Ml(l,{code:"ADFOX_AD_DATA_LOADING_ERROR",details:{adFoxParameters:t,adFoxUrl:a}})}}function yi(){return yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},yi.apply(this,arguments)}function fi(){return fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},fi.apply(this,arguments)}function Si(e,t){let i=e;return"OnlyYandexCreatives"===t&&(i=Vc(i,(e=>"video"===je(e)||fe(e.url)))),i}function Ti(e,t){const i=Si(e,t);return sc(i,(e=>"video"!==je(e)?e:tm(e)))}function Ei(e){let{secureMode:t,vastAd:i}=e;const o=Ti(i.mediaFiles,t);return!!o.length&&Rp(o,(e=>"video"===je(e)))}function bi(e){const t={};return ce(e,((e,i)=>{t[e]=i})),t}function Ci(){return Ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ci.apply(this,arguments)}function Pi(){return Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Pi.apply(this,arguments)}function wi(){return wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},wi.apply(this,arguments)}function Oi(){return Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Oi.apply(this,arguments)}function Ii(){return Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ii.apply(this,arguments)}function ki(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}function Di(e){var t;const{adParametersObject:n,description:r}=e;if(!o(n))throw new Ml({code:"CANNOT_CONVERT_IV_INTO_AD_CREATE_WITHOUT_AD_PARAMETERS",details:{vastAd:e}});const{tickerData:a,interactiveElements:s,mediaFiles:l,adTitle:d,adTune:c}=n,u=ki(n,um),h=a&&a.isVisible&&i(a.text),p=Array.isArray(s)&&s.length>0,m=!(!h&&!p&&"DO_NOT_LOAD"===Uc.getFlagValueAndActivateTestId("IV_CONCEALED_ANIMATION_LOADING_POLICY")||"NEVER_LOAD"===Uc.getFlagValueAndActivateTestId("IV_CONCEALED_ANIMATION_LOADING_POLICY"));if(d){const{errors:t,params:i}=bp(d);null!=t&&t.length?Wc.error({error:new Ml({code:"YANDEX_VAST_INCORRECT_AD_TITLE_EXTENSION_AD_PARAMETERS",details:{errors:t}})}):(Wc.log({name:"UsingAdTitleExtensionInAdParametersVast",probability:Cc}),e.adTitleParameters=i)}if(c){const{errors:t,params:i}=Cp(c);t&&Wc.error({error:new Ml({code:"YANDEX_VAST_INCORRECT_ADFOX_ADTUNE_AD_PARAMETERS",details:{errors:sc(t,(e=>JSON.stringify(e)))}})}),i&&(Wc.log({name:"UsingAdFoxAdTuneExtensionInAdParametersVast",probability:Cc}),e.adTune=i)}const A=Ii({},u,{adParameters:{description:r,tickerData:a,interactiveElements:s},mediaFiles:m?[...l,lm]:l}),{clickUrlData:g}=e,v=null!=(t=g.serializablePlaybackParametersClickUrl)?t:g.vastClickUrl,_=Ii({},e.serializablePlaybackParameters,{clickThroughUrl:v});return Ii({},e,{mediaFiles:[ep],adParametersObject:A,adParameters:JSON.stringify(A),originallyConvertedFromVast:e,serializablePlaybackParameters:_})}function Ni(e){const{adParametersObject:t}=e;if(!o(t))throw new Ml({code:"CANNOT_CONVERT_MOTION_INTO_AD_CREATIVE_WITHOUT_AD_PARAMETERS",details:{vastAd:e}});const{AUCTION_DC_PARAMS:i,HAS_BUTTON:n,HAS_AGE:r,HAS_LEGAL:a,LEGAL_TEXT:s}=t,l=Ii({},ki(t,hm),{adParameters:Ii({AUCTION_DC_PARAMS:i},"HAS_BUTTON"in t?{HAS_BUTTON:n}:{},"HAS_AGE"in t?{HAS_AGE:r}:{},"HAS_LEGAL"in t?{HAS_LEGAL:a}:{},"LEGAL_TEXT"in t?{LEGAL_TEXT:s}:{}),mediaFiles:[dm]});return Ii({},e,{mediaFiles:[ep],adParametersObject:l,adParameters:JSON.stringify(l),originallyConvertedFromVast:e})}function Ri(e){const{adParametersObject:t}=e;if(!o(t))throw new Ml({code:"CANNOT_CONVERT_EMPTY_INTO_AD_CREATIVE_WITHOUT_AD_PARAMETERS",details:{vastAd:e}});let i;if(!($l(t.mediaFiles)&&t.mediaFiles.length>0))throw new Ml({code:"CANNOT_CONVERT_EMPTY_INTO_AD_CREATIVE_WITHOUT_MEDIA_FILES",details:{vastAd:e}});i=t.mediaFiles;const n=Ii({},t,{mediaFiles:i,adParameters:Ii({},t),adCreativeConversionType:"theme-empty"});return Ii({},e,{mediaFiles:[ep],adParametersObject:n,adParameters:JSON.stringify(n),originallyConvertedFromVast:e})}function Vi(e){let{secureMode:t,vastAd:i}=e;const{trackingEvents:o}=i,n=Si(i.mediaFiles,t);if(0===n.length)throw new Ml({code:"CANNOT_CONVERT_VIDEO_VAST_INTO_AD_CREATIVE_WITHOUT_MEDIA_FILES",details:{vastAd:i}});const r={adParameters:{},interactiveElements:[],mediaFiles:n,tickerData:{}},a=s(r),l=i.clickUrlData.vastClickUrl;return Ii({},i,{mediaFiles:[ep],adParametersObject:r,adParameters:a,serializablePlaybackParameters:{clickThroughUrl:l,trackingEvents:o,controlsSettings:{controlsVisibility:{}},lang:"ru",packshotSettings:{},contentAfterAd:op},clickUrlData:Ii({},i.clickUrlData,{serializablePlaybackParametersClickUrl:l}),originallyConvertedFromVast:i})}function Li(e){const{adParametersObject:t}=e;if(!o(t))throw new Ml({code:"CANNOT_CONVERT_VAST_AD_INTO_CLICKABLE_VIDEO_AD_CREATIVE_WITHOUT_AD_PARAMETERS",details:{vastAd:e}});const i=e.clickUrlData.tgaOfferClickUrl,n=Ii({},e.adParametersObject,{adParameters:e.adParametersObject});return Ii({},e,{mediaFiles:[ep],adParametersObject:n,adParameters:JSON.stringify(n),serializablePlaybackParameters:Ii({clickThroughUrl:i},t.playbackParameters),clickUrlData:Ii({},e.clickUrlData,{serializablePlaybackParametersClickUrl:i}),originallyConvertedFromVast:e})}function xi(e){var t;const{adParametersObject:i}=e,{vastClickUrl:n}=e.clickUrlData;if(!o(i))throw new Ml({code:"CANNOT_CONVERT_SURVEY_INTO_AD_CREATIVE_WITHOUT_AD_PARAMETERS",details:{vastAd:e}});const r="TRUE"===Uc.getFlagValueAndActivateTestId("SHOULD_NOT_USE_SURVEY_CLICK_THROUGH_URL_AS_CLICK_TRACKING"),a=null!=(t=i.trackingEvents)?t:{};if(!r){const e=$l(a.clickThrough)?a.clickThrough:[];a.clickThrough=[...e,n],Wc.log({name:"UseSurveyClickThroughUrlAsClickTracking",data:{adParametersObject:i}})}const s=Ii({},i,{mediaFiles:[cm],adParameters:Ii({},i),trackingEvents:a});return Ii({},e,{mediaFiles:[ep],adParametersObject:s,adParameters:JSON.stringify(s),originallyConvertedFromVast:e})}function Bi(e){var t;let i,{vastAd:o,secureMode:n}=e;if(void 0===o.mediaFiles[0])return{vastAd:o,reason:"ConvertNothingWithoutMediaFile"};if(Ei({secureMode:n,vastAd:o}))return{vastAd:Vi({secureMode:n,vastAd:o}),reason:"ConvertVideoVastIntoAdCreative"};try{i=Xe(o.adParametersObject),Wc.log({name:"CreativeDetectedByParameters",sensors:{method:i.detectionMethod,source:"vastLoader"}})}catch(c){throw Wc.log({name:"PrepareYandexVastDetectionError",data:{error:c},probability:1}),c}const r="motion"===i.adFormatType,a="themeEmpty"===i.adFormatType,s="survey"===i.adFormatType,l="interactiveViewer"===i.adFormatType,d="clickableVideo"===i.adFormatType;if(!o.originallyConvertedFromVast&&(null==(t=o.adParametersObject)||!t.__dontCovertMePlease__)){if(d)return{vastAd:Li(o),reason:"ConvertClickableOnlyVideo"};if(a)return{vastAd:Ri(o),reason:"ConvertVideoBannerThemeEmpty"};if(l)return{vastAd:Di(o),reason:"ConvertInteractiveViewerVpaidIntoAdCreative"};if(r)return{vastAd:Ni(o),reason:"ConvertMotionVpaidIntoAdCreative"};if(s)return{vastAd:xi(o),reason:"ConvertVideoBannerSurveyAdCreative"}}return{vastAd:o,reason:"ConvertNothingForNonYandex"}}function Mi(e){const{adParametersObject:t}=e;return!!t&&Ye(t.theme,t)}function Ui(e){const t=$p(e);return V(dh,t)}function Fi(e){let{mediaFiles:t}=e;const[i]=t;return void 0!==i&&function(e){let{url:t}=e;return t===$h}(i)}function Hi(e){var t;const{mediaFiles:i,adParametersObject:n}=e;if(!o(null==n||null==(t=n.adParameters)?void 0:t.pythia))return!1;const[r]=i;return void 0!==r&&Fi(e)}function zi(e){let{mediaFiles:t,adParametersObject:i}=e;if((null==i?void 0:i.theme)===$u.SURVEY)return!0;const[o]=t;return void 0!==o&&function(e){const t=$p(e);return V(pm,t)}(o.url)}function Wi(e){const{adParametersObject:t}=e;return(null==t?void 0:t.theme)===$u.EMPTY&&mm(e)}function ji(e){return void 0===e?e:Array.isArray(e)?e.join("\n"):String(e)}function Yi(e){if(!o(e))return;const t={},i=["string","number","boolean"];for(const o in e)e.hasOwnProperty(o)&&i.indexOf(typeof e[o])>=0&&(t[o]=e[o]);return t}function Gi(){return Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Gi.apply(this,arguments)}function Xi(){return Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Xi.apply(this,arguments)}function Ki(e){var t;if(tc.isDebugEnabled&&Boolean(null==(t=console)?void 0:t.error)){for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];console.error(e,...o)}}function qi(e){const{text:t,textColor:o,isVisible:n}=e||Sm;return{text:i(t)?t:Sm.text,textColor:o||Sm.textColor,isVisible:"boolean"===typeof n?n:Sm.isVisible}}function Qi(e,t){const i=[],o=[];return Jl(e,((n,r)=>{t(n,r,e)?i.push(n):o.push(n)})),[i,o]}function Ji(e){return!!o(e)&&"string"===typeof e.url&&!!e.url.trim()&&"string"===typeof e.type&&!!e.type.trim()}function Zi(e){const t=[];if(!Array.isArray(e))throw new Ml({code:"INVALID_MEDIA_FILES_PARAMETER_IN_AD_PARAMETERS",details:{rawMediaFiles:e}});if(0===e.length)throw new Ml({code:"NO_MEDIA_FILES_IN_AD_PARAMETERS",details:{rawMediaFiles:e}});const i=Vc(e,Ji);if(i.length!==e.length&&t.push("AD_PARAMETERS_CONTAINS_INVALID_MEDIA_FILES"),0===i.length)throw new Ml({code:"NO_VALID_MEDIA_FILES_IN_AD_PARAMETERS",details:{mediaFiles:e}});const[o,n]=Qi(i,(e=>e.type===im));if(o.length>1)throw new Ml({code:"AD_CREATIVE_HAS_TOO_MANY_ANIMATION_MEDIA_FILES_IN_AD_PARAMETERS",details:{mediaFiles:e}});return{errorCodes:t,videoMediaFiles:n,animationMediaFile:o[0]}}function $i(e){const t=[];let i={};if(o(e))i=e;else{if("string"!==typeof e)throw new Ml({code:"NO_INTERACTIVE_AD_PARAMETERS",details:{}});try{i=JSON.parse(e)}catch(p){throw new Ml(p,{code:"INVALID_INTERACTIVE_AD_PARAMETERS",details:{adParametersString:e}})}}if(!o(i))throw new Ml({code:"CANNOT_PARSE_NON_OBJECT_AD_PARAMETERS",details:{adParametersJson:i}});const{tickerData:n,adParameters:r,interactiveElements:a=[],mediaFiles:s}=i,{errorCodes:l,animationMediaFile:d,videoMediaFiles:c}=Zi(s),u=sc(l,(t=>new Ml({code:t,details:{adParametersString:JSON.stringify(e)}})));return t.push(...u),{raw:i,parsed:{tickerData:qi(n),animationMediaFile:d,videoMediaFiles:c,adParameters:(h=r,"string"===typeof h?h:o(h)?ai(h):void 0),interactiveElements:a},errors:t};var h}function eo(){return eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},eo.apply(this,arguments)}function to(e){return Bt(e.height)&&Bt(e.width)}function io(e,t){return function(e,t,i){if(e.length<1)return;let[o]=e,n=t(o);for(let r=1;r<e.length;r++){const i=e[r],a=t(i);a-n<0&&(o=i,n=a)}return o}(e,t)}function oo(e,t){let{height:i}=t;const o=Vc(e,to);return void 0===i?o[0]:io(o,(e=>{let{height:t}=e;return Math.abs(t-i)}))}function no(e){(new Image).src=e}function ro(e){return!!i(e)&&bm.indexOf(e.toLowerCase())>-1}function ao(){return ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ao.apply(this,arguments)}function so(e,t){var i,o,n;return null==(i=t.ya)||null==(o=i.videoAd)||null==(n=o.loadedModules)?void 0:n[e]}function lo(e){return function(e){const{src:t,win:i,onBeforeLoad:o=d}=e,n=new Ml(new Error,{});let r=d;return{promise:new Promise(((e,a)=>{const s=i.document.createElement("script");let d=!1;r=()=>{d=!0,l(s)};s.type="text/javascript",s.async=!0,s.onload=()=>{d||e()},s.onerror=e=>{d||(a(new Ml(n,{message:"Failed to load script ["+t+"]",details:{src:t,isSelfWindow:i===window,event:e}})),r())},s.src=t,s.charset=Vm,o(s),function(e){const t=e.document;let i=t.getElementsByTagName("head")[0];return i||(i=t.createElement("head"),t.documentElement.appendChild(i)),i}(i).appendChild(s)})),teardown:r}}(e)}function co(){return co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},co.apply(this,arguments)}function uo(){return uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},uo.apply(this,arguments)}function ho(e){const{src:t,win:i}=e,o=function(e,t){const{hostname:i}=I(e),o=kc(t);return o?-1===ec.indexOf(i)?e:o(e):e}(t,i);return lo(uo({},Lm,e,{src:o}))}function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},po.apply(this,arguments)}function mo(){return mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},mo.apply(this,arguments)}function Ao(e){let{animationMediaFile:t,win:o}=e;const{url:n}=t,r=sm[n];if(n===ap)return{teardown:d,promise:Promise.resolve((e=>{const t=function(e){let{adCreativeInitParameters:{slot:t,adParametersString:o},duration:n}=e;const r=new Um;let a;return{startAd(e){if(!i(o))throw new Ml({code:"NO_AIM_AD_CREATIVE_INVALID_PARAMETERS",details:{adParametersString:o}});e.dispatchAdStarted();const{filterReasons:s}=JSON.parse(o);a=t.ownerDocument.createElement("div"),Qe(a,Fm);const l=t.ownerDocument.createElement("h2");l.textContent="\u041d\u0430\u0446\u0435\u043b\u0438\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e",Qe(l,Hm),a.appendChild(l);const d=t.ownerDocument.createElement("p");if(d.textContent="\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043d\u0430\u0446\u0435\u043b\u0438\u0432\u0430\u043d\u0438\u0435, \u043d\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0435",a.appendChild(d),s&&s.length){d.textContent=d.textContent+". \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u044b \u043d\u0435 \u0431\u044b\u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b:";const e=t.ownerDocument.createElement("ul");Qe(e,zm),Jl(s,(i=>{let{id:o,description:n}=i;const r=t.ownerDocument.createElement("li");r.textContent="#"+o+": "+n,e.appendChild(r)})),a.appendChild(e)}const c=t.ownerDocument.createElement("p");c.textContent="\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u0435 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b.",a.appendChild(c);const u=t.ownerDocument.createElement("p");return u.textContent="VSID: "+ic,a.appendChild(u),t.appendChild(a),Wc.log({name:"NoAimScreenShowStarted",probability:1}),new Promise((e=>{r.start(),r.addCallback(n*Mm,(()=>{r.destroy(),Wc.log({name:"NoAimScreenShowCompleted",probability:1}),e({reason:"complete"})}))}))},stopAd(){r.destroy(),Wc.log({name:"NoAimScreenShowStopped",probability:1}),l(a)},pauseAd(){r.stop()},resumeAd(){r.start()},getAdRemainingTime:()=>Math.max(n-r.getTime()/Mm,0),getAdDuration:()=>n}}({adCreativeInitParameters:e,duration:15});return{promise:Promise.resolve(t),teardown:d}}))};if(n===jm)return{teardown:d,promise:Promise.resolve((e=>{const t=function(e){let{adCreativeInitParameters:{slot:t}}=e;const i=new Um;let o;return{startAd:e=>(e.dispatchAdStarted(),o=t.ownerDocument.createElement("div"),Qe(o,Wm),o.textContent="VAS test AdCreative STARTED",t.appendChild(o),new Promise((e=>{i.start(),i.addCallback(15e3,(()=>{i.destroy(),e({reason:"complete"})}))}))),stopAd(){i.destroy(),l(o)},pauseAd(){o.textContent="VAS test AdCreative PAUSED",i.stop()},resumeAd(){o.textContent="VAS test AdCreative PLAYING",i.start()},getAdRemainingTime:()=>Math.max(15-i.getTime()/Mm,0),getAdDuration:()=>15}}({adCreativeInitParameters:e});return{promise:Promise.resolve(t),teardown:d}}))};if(void 0!==r){let e=d;const t=new Promise(((t,i)=>{e=function(e){var t;let{moduleName:i,version:o=oh,onSuccess:n,onError:r,win:s,timeout:l}=e;const c=null!=(t=tc.hardcodedParams.adsdkecmaver)?t:Rm;let u="loading";const h=Date.now(),p=A(_e((e=>{u="success";const t=Date.now()-h;Wc.log({name:"ModuleLoaded",data:{loaderVersion:gd,bundleVersion:o},values:{timeSpent:t},sensors:{bundleName:i},dailySensors:{ecmaVersion:c}}),n(e)}),"LOAD_MODULE_CALLBACK_ERROR")),m=A(_e((e=>{u="error",Wc.error({error:e}),r(e)}),"LOAD_MODULE_CALLBACK_ERROR"));if(Dm(s))return Wc.log({name:"LoadModuleBrokeInIE",probability:1}),m(new Ml({code:"LOAD_MODULE_REJECTED_IN_IE",details:{moduleName:i,version:o,timeout:l}})),d;if("TRUE"===Uc.getFlagValueAndActivateTestId("VAS_TURN_OFF_ES5")&&"ES5"===c)return Wc.log({name:"LoadModuleDiscardES5",probability:1}),m(new Ml({code:"LOAD_MODULE_REJECTED_ES5",details:{moduleName:i,version:o,timeout:l}})),d;const g=so(i,s);if(g)return p(g),d;const v=(e=>{let{bundleName:t,win:i,ecmaVersion:o,version:n}=e;const r=mh[o],s=kc(i),l=(e=>nm[e]+".bundle.js")(t),d=""+Ge(n)+r+"/"+l;return a(s)?s(d):d})({version:o,bundleName:i,win:s,ecmaVersion:c}),{promise:_,teardown:y}=(e=>{let{src:t,win:i}=e;return ho({src:t,onBeforeLoad:xm,win:i})})({src:v,win:s}),{promise:f,clear:S}=Qu(l,window),T=q({element:s,eventName:"unload",listener:()=>{m(new Ml({code:"LOAD_MODULE_REJECTED_BY_WINDOW_UNLOAD",details:{moduleName:i,version:o,timeout:l}}))}}),E=()=>{T(),S()};return f.then((()=>{m(new Ml({code:"LOAD_MODULE_TIMEOUT",details:{moduleUrl:v,moduleName:i,version:o,timeout:l}}))})),_.then((()=>{E();const e=so(i,s);e?p(e):m(new Ml({code:"CANNOT_INIT_MODULE",details:{moduleUrl:v,moduleName:i,version:o}}))})).catch((e=>{E(),m(new Ml(e,{code:"CANNOT_LOAD_MODULE",details:{moduleUrl:v,moduleName:i,version:o}}))})),()=>{E(),y(),"loading"===u&&Wc.log({name:"LoadModuleTeardownCalled",probability:1})}}({moduleName:r,version:void 0,onSuccess:e=>{t(e.initAdCreative)},onError:e=>{i(e)},win:o,timeout:3e4})}));return{teardown:e,promise:t}}const{promise:s,teardown:c}=ho({src:n,win:o});return{promise:s.then((()=>o.initAdCreative)),teardown:c}}function go(e){let{scope:t,errorType:i,error:o,details:n}=e;return new Ml(o,{code:Ym(t,i),details:n})}function vo(e,t){return function(e,t){const n=[];n.push(q({element:e,eventName:"unhandledrejection",listener:e=>{t(new Error,"UNHANDLED_PROMISE_REJECTION",{event:e})}})),n.push(q({element:e,eventName:"error",listener:(e,i,o,n,r)=>{t(e.error||new Error,"UNHANDLED_GLOBAL_ERROR",{event:e,src:i,line:o,column:n,error:r,filename:null==e?void 0:e.filename,message:null==e?void 0:e.message})}})),n.push(q({element:window,eventName:"securitypolicyviolation",listener:e=>{let{blockedURI:i,columnNumber:o,documentURI:n,effectiveDirective:r,lineNumber:a,originalPolicy:s,referrer:l,sourceFile:d,statusCode:c,violatedDirective:u}=e;const h={blockedURI:i,columnNumber:o,documentURI:n,effectiveDirective:r,lineNumber:a,originalPolicy:s,referrer:l,sourceFile:d,statusCode:c,violatedDirective:u};t(new Error,"SECURITY_POLICY_VIOLATION",{securityPolicyViolationEventData:h})}}));const r=new Gm.CSPLogger({project:"adsdk",from:JSON.stringify({vsid:ic,version:gd})});r.subscribe(e.document),n.push((()=>{r.unsubscribe(e.document)}));const a=new Xm({win:e,onReport:e=>{const{reportSourceEvent:n,reports:r,records:a}=e,s=new Error;0===r.length&&0===a.length&&t(s,"EMPTY_REPORT",{reportSourceEvent:n,reportSource:"empty",report:void 0}),Jl(le({reports:r,records:a}),(e=>{let[r,a]=e;return Jl(a,(e=>{t(s,function(e){if(!o(e))return"EMPTY_REPORT_ITEM";const{type:t,body:n}=e;if(!i(t))return"EMPTY_REPORT_TYPE";if("csp-violation"===t)return"CSP_VIOLATION_REPORT";if("intervention"===t){if(o(n)&&i(n.message)){const e=n.message.toLowerCase();if(e.indexOf("network usage")>-1)return"NETWORK_USAGE_INTERVENTION_REPORT";if(e.indexOf("peak cpu")>-1)return"PEAK_CPU_INTERVENTION_REPORT";if(e.indexOf("total cpu")>-1)return"TOTAL_CPU_INTERVENTION_REPORT";if(e.indexOf("cpu usage")>-1)return"CPU_USAGE_INTERVENTION_REPORT";if(e.indexOf("touchmove")>-1)return"TOUCHMOVE_INTERVENTION_REPORT"}return"UNKNOWN_INTERVENTION_REPORT"}return"deprecation"===t?"DEPRECATION_REPORT":"feature-policy-violation"===t?"FEATURE_POLICY_VIOLATION_REPORT":"UNKNOWN_REPORT_TYPE"}(e),{reportSourceEvent:n,reportSource:r,report:e})}))}))}});return n.push((()=>{a.destroy()})),()=>j(n)}(e,((e,i,o)=>{if("SECURITY_POLICY_VIOLATION"===i){const{securityPolicyViolationEventData:e}=o;if(void 0!==e){const{blockedURI:t}=e;if(t&&t.indexOf(Km)>-1)return}}t(e,i,o)}))}function _o(e){return 0===Jm.length&&(Qm=window.setInterval((()=>{j(Jm)}),qm)),Jm.push(e),()=>{const t=Jm.indexOf(e);t>-1&&Jm.splice(t,1),0===Jm.length&&window.clearInterval(Qm)}}function yo(e,t){const i=e.ownerDocument.createElement("iframe");if(t&&Ze(i,t),i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",e.appendChild(i),void 0!==i.contentDocument&&null!==i.contentDocument)return i.contentDocument.open(),i.contentDocument.close(),i.contentDocument.body.style.margin="0",i.style.borderWidth="0",i.contentDocument.body.style.width="100%",i.contentDocument.body.style.height="100%",i;l(i)}function fo(){const e=yo(...arguments);if(e)return e.width="0",e.height="0",e.style.position="absolute",e}function So(){return So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},So.apply(this,arguments)}function To(){return To=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},To.apply(this,arguments)}function Eo(e){let t;try{t=e.devicePixelRatio}catch(Bv){}return he(t)?t:1}function bo(){return bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},bo.apply(this,arguments)}function Co(e){if(i(e))return e.split(",")[0].trim()}function Po(e){let{mediaFile:o,canPlayType:n}=e;const{type:r}=o,a=(e=>{switch(e){case"h264":case"hevc":case"mpeg4":return hA(e),"avc1.4D401E,mp4a.40.2";default:return e}})(o.codec);if(!t(r))return"noType";if(r===dA&&Gl)return"cannotPlayWebmDueToMacOSLimitations";if(!n(cA({type:r,codec:a})))return"cannotPlay";const s=function(e){let{mediaFile:t,abFlags:{disableVp8:o,disableVp9:n,enableH265:r,disable144p:a}}=e;const s=Co(t.codec);if(i(s)){if(a&&144===function(e){let{width:t,height:i}=e;if(he(t)&&he(i))return Math.min(t,i)}(t))return"quality144pIsDisabled";if(!function(e){return 0===e.indexOf("avc1.")}(s))return function(e){return"vp8"===e||"vp08"===e||0===e.indexOf("vp08.")||0===e.indexOf("vp8.")}(s)?o?"vp8CodecIsDisabled":void 0:function(e){return 0===e.indexOf("hev1.")}(s)||function(e){return 0===e.indexOf("hvc1.")}(s)?r?void 0:"h265CodecIsDisabled":function(e){return"vp9"===e||"vp09"===e||0===e.indexOf("vp9.")||0===e.indexOf("vp09.")}(s)?n?"vp9CodecIsDisabled":void 0:"unsupportedVideoCodec"}}({mediaFile:{codec:a,width:o.width,height:o.height},abFlags:{disableVp8:"TRUE"===Uc.getFlagValueAndActivateTestId("DISABLE_VP8_CODECS"),enableH265:!0===lA,disableVp9:sA,disable144p:!0===nA}});return s||void 0}function wo(e){let{mediaFileSize:i,slotSize:o}=e;if(!i)return{reason:"unknownVideoContentSize",value:$c.videoPixelRatio};let{width:n,height:r}=i;if(t(n)&&(n=Number(n),pA()),t(r)&&(r=Number(r),pA()),!me(n)||!me(r))return{reason:"hasIncorrectWidthAndOrHeight",value:1e3};if(n<0||r<0)return{reason:"incorrect",value:$c.videoPixelRatio};if(0===r||0===o.height)return{reason:"incorrect",value:$c.videoPixelRatio};if(0===n||0===o.width)return{reason:"incorrect",value:$c.videoPixelRatio};const a=n/r;return{reason:"normal",value:o.width/o.height>a?r/o.height:n/o.width}}function Oo(e){void 0===e&&(e=window);const t=e.MediaSource||e.WebKitMediaSource;return t&&c(t.isTypeSupported)&&!function(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;return!!t&&!(t.prototype&&c(t.prototype.appendBuffer)&&c(t.prototype.remove))}(e)?t:void 0}function Io(e){let{type:t}=e;return _A||yA?!_A&&yA?"noMse":_A&&!yA?"noFetch":i(t)?-1===t.toLowerCase().indexOf(dA)?"isNotWebm":vA?void 0:"cannotPlayWebmWithMse":"noType":"noMseAndFetch"}function ko(e,t,i){return e>i?i:e<t?t:e}function Do(e,t){return e<=t?0:t>=TA?1:(ko(e,t,TA)-t)/(TA-t)}function No(e){if(!function(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}(e))return"invalidObject";const{type:o,codec:n,url:r,maxBitrate:a,minBitrate:s,vmafAvg:l,hasAudio:d}=e;let{width:c,height:u,bitrate:h}=e;if(c=null===c?void 0:c,u=null===u?void 0:u,h=null===h?void 0:h,void 0===h||he(h)||EA(e),void 0===l||he(l)||wA(e),void 0===n||i(n)||bA(e),void 0===c&&void 0===u||he(c)&&he(u)||PA(e),(void 0!==s||void 0!==a)&&(!he(s)||!he(a)||s>=a))return"invalidMinMaxBitrate";if("string"!==typeof r)return"invalidUrl";if(!r.trim())return"emptyUrl";if(void 0!==o){if(!t(o))return"invalidType";0===o.trim().length&&OA(e)}return void 0!==d&&"boolean"!==typeof d&&CA(e),{type:o,codec:n,url:r,width:c,height:u,bitrate:h,maxBitrate:a,minBitrate:s,vmafAvg:l,hasAudio:d}}function Ro(){return Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ro.apply(this,arguments)}function Vo(e,n,r){const a=Date.now(),s=[],l=[],d=[];for(const i of e){const e=No(i);if(t(e))s.push({mediaFile:i,reason:e});else{const i=e,o=Po({mediaFile:i,canPlayType:n.canPlayType});t(o)?l.push({mediaFile:i,reason:o}):d.push(i)}}const c=sc(d,(e=>function(e,t){const{value:n,reason:r}=wo({mediaFileSize:e,slotSize:t.container}),a=function(e){let{videoPixelRatio:t,opts:{perfectVpr:i}}=e;return t-i}({videoPixelRatio:n,opts:t}),s=Math.abs(a),l=function(e){let{bitrate:t,desiredBitrate:i}=e;if(!he(t))return 1;if(he(i))return Do(t,i);const n=navigator;if(o(n)&&o(n.connection)){const{downlink:e}=n.connection;if(he(e))return Do(t,1e3*e)}}({bitrate:e.bitrate,desiredBitrate:t.desiredBitrate}),d=function(e){let{type:t,mediaFileTypePriorities:{webm:o,mp4:n,hls:r,unknown:a,unset:s}}=e;if(!i(t))return s;const l=t.toLowerCase();return l===dA?o:"video/mp4"===l?n:ro(t)?r:a}({type:e.type,mediaFileTypePriorities:t.mediaFileTypePriorities}),c=function(e,t){return t.isVideoADB?void 0===Io(e)?0:1:0}(e,t);return{videoPixelRatio:n,videoPixelRatioReason:r,videoPixelRatioSolution:s,mediaFileTypePrioritySolution:d,adbCompatibilitySolution:c,bitrateCappingSolution:l}}(e,n))),u=he(n.desiredBitrate)?"desiredBitrate":"videoPixelRatio",h=sc(c,(e=>{let{videoPixelRatioSolution:t,mediaFileTypePrioritySolution:i,adbCompatibilitySolution:o,bitrateCappingSolution:n}=e;return t+i+o+(void 0===n?0:n*kA)})),p=sc(h,((e,t)=>Ro({},d[t],c[t],{prioritySolution:e}))),m=io(p,(e=>{let{prioritySolution:t}=e;return t}));let A,g;var v;oc("prioritisedMediaFiles=["+JSON.stringify(p)+"]"),oc("invalidMediaFiles=["+JSON.stringify(s)+"]"),oc("notPlayableMediaFiles=["+JSON.stringify(l)+"]"),m&&(A=Co(m.codec),g=null==(v=m.type)?void 0:v.split("/")[1]);const{adBreak:_,adPodId:y,initiator:f}=r;return Wc.log({name:"PrioritiseMediaFiles",data:{adBreak:_,adPodId:y,initiator:f,input:Ro({},n,{dpr:Eo(window)}),output:{invalidMediaFiles:Qh(s),notPlayableMediaFiles:Qh(l),mediaFiles:Qh(p),mediaFile:m?Ro({},m):void 0,methodType:u}},values:{timeSpent:Date.now()-a},sensors:{initiator:f,method:u,type:V(["webm","mp4","m3u8"],g)?g:"unknown",codec:V(["vp8","vp9","avc","hvc"],A)?A:"unknown"},probability:1}),{prioritisedMediaFile:m,invalidMediaFiles:s,notPlayableMediaFiles:l,playableMediaFiles:p}}function Lo(){return Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Lo.apply(this,arguments)}function xo(e){for(const{width:t,height:i}of e){const e=Number(t),o=Number(i);if(he(e)&&he(o))return{width:e,height:o}}}function Bo(e,t){return Nl(Ti(e,t),(e=>"js"===je(e)))}function Mo(e){return[...e].sort(((e,t)=>{const i=e.vastAd.sequence,o=t.vastAd.sequence;return i===o?0:-1===i?1:-1===o?-1:i-o}))}function Uo(e){return"number"===typeof e.repeatNumber}function Fo(){return Fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fo.apply(this,arguments)}function Ho(e){var t;let{adConfig:i,adBreak:o,adPlacementOptions:n,win:r}=e;const s=o.adFoxParameters||i.adFoxParameters;var l;if(s)return async function(e){return new Jp(e).loadVastPromise}({adConfig:Fo({},i,{adFoxParameters:s,wrapperMaxCount:null!=(l=i.wrapperMaxCount)?l:3}),adBreakType:o.adType,adPlacementOptions:n,win:r});const{loadHarmlessVastCallback:d}=i,c=i.hasOwnProperty("vast")?i.vast:void 0,u=o.inlineVast,h=tc.isDebugEnabled?(()=>{if(!tc.isDebugEnabled)return;const e=ZA();if(null==e||!e.getVast)return;const t=e.getVast();return Wc.log({name:"LoadInlineTestUtilsVast",data:{vast:t},probability:1}),t})():void 0,p=null!=(t=null!=h?h:c)?t:u;if(p)return Dp({xmlString:p,loadParameters:ze({adConfig:i,adBreakType:o.adType,remainingLoadWrapperVastCount:3,isAdFox:!1,adPlacementOptions:n}),vastUrl:void 0}).then((e=>(d&&0===e.children.length&&d({adPods:sc(e.ads,(e=>{var t;return{clickThroughUrl:null!=(t=e.clickUrlData.vastClickUrl)?t:""}}))}),e)));const m=i.vastUrl?i.vastUrl:function(e){const{adTagURI:t,sessionId:i,repeatNumber:o,adConfig:n,adPlacementOptions:r,win:s}=e;return a(kc(s))?t:function(e){const{adConfig:t,win:i,adTagURI:o,adPlacementOptions:n,repeatNumber:r,sessionId:a}=e;return fe(o)?De({url:R(o,vm({adConfig:t,win:i,repeatNumber:r,sessionId:a})),options:n,win:window}):o}({adConfig:n,adTagURI:t,adPlacementOptions:r,win:s,repeatNumber:o,sessionId:i})}({adConfig:i,adTagURI:o.adTagURI,sessionId:o.sessionId,repeatNumber:Uo(o)?o.repeatNumber:void 0,adPlacementOptions:n,win:r});return Ip({url:m,loadParameters:ze({adConfig:i,adBreakType:o.adType,remainingLoadWrapperVastCount:3,isAdFox:!1,url:m,adPlacementOptions:n})})}async function zo(e){const{adConfig:t,adBreak:i}=e;let o;try{o=await Ho(e)}catch(c){throw ne(c)||(c.details||(c.details={}),c.details.adConfig=t),Re(c),c}const n=[];for(const u of o.ads)try{var r;const e=u.mediaFiles[0],i=null!=(r=null==e?void 0:e.url)?r:"",o={interactiveViewerCreativeSrc:(a=i,$p(a)===ih),motionCreativeSrc:Ui(i),themeEmpty:Wi(u),clickableVideo:Mi(u),survey:zi(u),surveyAdCreative:Hi(u),videoVastAd:Ei({secureMode:t.secureMode,vastAd:u})},s=Gc(Qt(o),(e=>e));if(Boolean(e)&&s){const{vastAd:e,reason:i}=Bi({secureMode:t.secureMode,vastAd:u});Wc.log({name:i,data:{next:e,yandexVastCriteria:o},sensors:{source:"vastLoader"}}),n.push(e)}else n.push(u)}catch(c){Wc.error({error:c})}var a,s;if(o.children.length>0){const e=Wo(o);Wc.log({name:(s=o.url,function(e){return void 0===e?"Inline":ye(e)?"AdFox":fe(e)?"Yandex":""}(s)+"WrapperVASTLoaded"),data:e,probability:1})}const l=sc(n,(e=>(e.vast=o,new JA(i,e,t,Wc)))),d=Mo(l);if(0===d.length)throw new Ml({code:"NO_AD_SECTION",details:{reason:"no-media-ad"}});if(Vc(d,(e=>e.hasMediaFiles())).length>0)return{mediaAds:d,vast:o};if(function(e){return Gc(e,(e=>e.vastAd.mediaFiles.length!==e.getMediaFiles().length))}(d)){const e=Zp(sc(l,(e=>e.vastAd.mediaFiles)));throw new Ml({code:"ALL_MEDIA_FILES_FILTERED_OUT",details:{adConfig:t,unfilteredMediaFiles:e}})}throw new Ml({code:"NO_AD_TO_DISPLAY",details:void 0})}function Wo(e){return{children:sc(e.children,(e=>Wo(e))),url:e.url,xmlString:e.xmlString}}function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},jo.apply(this,arguments)}function Yo(){return Yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Yo.apply(this,arguments)}function Go(){return Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Go.apply(this,arguments)}function Xo(){return Xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Xo.apply(this,arguments)}function Ko(e){return!!t(e)&&sg.indexOf(e)>-1}function qo(e,t){return Vc(e,(e=>e.adType===t))}function Qo(e,t){const i=function(t,i){const o={};return Je(t).forEach((i=>{var n;o[i]=(t[i],n=i,e.style[n])})),o}(t);return Qe(e,t),ee((()=>{Qe(e,i)}))}function Jo(e){const t=e.getRootNode;if(c(t))return t.call(e);let i=e;for(;i.parentNode;)i=i.parentNode;return i}function Zo(e){return!!e&&"ShadowRoot"===wl(e)}function $o(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let i=e;for(;i;){if(i&&t.document.body.contains(i))return!0;const e=Jo(i);if(!Zo(e)||!lg(e.host))return!1;i=e.host}return!1}function en(){return en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},en.apply(this,arguments)}function tn(){return tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},tn.apply(this,arguments)}function on(e,t,i){const o=()=>sc(e,(e=>e.getValue()));let n=t(...o());i(n);const r=()=>{const e=t(...o());n!==e&&(n=e,i(e))},a=sc(e,(e=>e.add(r)));return()=>{j(a)}}function nn(e,t){let{width:i,height:o}=e;const n=sc([i,o],(e=>Math.round(e))),r=Math.min(...n),a=Math.max(...n);return t?r>=160&&a*r>=48e3:r>=Bg&&a*r>=57600}function rn(e,t){const i=function(e){void 0===e&&(e=window);const{document:t={}}=e;return Vc(zg,(e=>{let{enabled:i}=e;return i in t}))}(e);if(i.length>0)return i[0];const o=function(e,t){var i,o;return void 0===e&&(e=window),void 0===t&&(t=null!=(i=null==(o=e.HTMLVideoElement)?void 0:o.prototype)?i:{}),Vc(zg,(e=>{let{enabled:i}=e;return i in t}))}(e,t);return o.length>0?o[0]:void 0}function an(e,t){const i=rn(e,t);if(!i)return null;let o=e.document[i.element];return t&&t[i.element]&&(o=t),o||null}function sn(e,t){const i=an(e);return!!i&&i.contains(t)}function ln(e){var t;void 0===e&&(e=Ql);const{navigator:i={}}=null!=(t=e)?t:{},{connection:o={}}=i;if("number"===typeof o.downlink)return o.downlink;if("number"===typeof o.downlinkMax)return o.downlinkMax;const n=o.type;if("string"===typeof n||"number"===typeof n)switch(n){case"BLUETOOTH":return 3;case Yg:return.384;case Gg:case"CELLULAR":return 2;case"WIMAX":return 37;case"NONE":return 0;case Wg:case"ETHERNET":case jg:case"WIFI":case"MIXED":return 10}return-1}function dn(e){const{videoWidth:t,videoHeight:i}=e;if(he(t)&&he(i))return{width:t,height:i}}function cn(e){let{win:t,slotSize:i,slotVisibilityRatio:o,adPodId:n,videoNode:r,bufferingTime:a,adBreakType:s,adFormatType:l,productType:d}=e;const c=function(e){if(void 0===e&&(e=window),void 0===e.screen)return Hg;const{width:t=Hg.width,height:i=Hg.height}=e.screen;return{width:t,height:i}}(t),u=c.width*c.height,h=i.width*i.height,p=0===u?0:h/u,m=Eo(t),A=ln(),g=r?dn(r):void 0,v=function(e){let{slotSize:t,videoContentSize:i}=e;const o=void 0===i?t.width/t.height:i.width/i.height,n=t.width/t.height>o,r=n?t.height*o:t.width/o,a=n?t.height:t.width;return{adjacentSize:r,innerSize:a,extraHorizontalSpace:n,width:n?r:a,height:n?a:r}}({slotSize:i,videoContentSize:g});let _=$c.videoFramesInfo,y=$c.videoSrc,f=$c.videoCurrentSrc,S=$c.videoMuted,T=$c.videoVolume,E=$c.currentTime,b=$c.bufferingTimeRatio,C=$c.remainingBufferedTime,P=$c.isFullscreen;r&&(_=be(r),y=r.src,f=r.currentSrc,S=r.muted,T=r.volume,E=r.currentTime,C=Xg(r),me(E)&&me(a)&&a+E>0&&(b=a/(a+E)),P=sn(t,r));const{value:w}=wo({mediaFileSize:g,slotSize:i});let O=$c.videoToDevicePixelRatio;return he(w)&&(O=w/m),{visibility:o,size:i,adPodId:n,relativeSizeRatio:p,screenSize:c,devicePixelRatio:m,downlink:A,videoContentSize:g,videoAvatarSize:v,videoPixelRatio:w,videoToDevicePixelRatio:O,videoFramesInfo:_,videoSrc:y,videoCurrentSrc:f===y?void 0:f,videoMuted:S,videoVolume:T,bufferingTime:a,currentTime:E,bufferingTimeRatio:b,remainingBufferedTime:C,adBreakType:s,adFormatType:l,isFullscreen:P,productType:d}}function un(e){return function(e,t){let i=e;return Jl(le(t),(o=>{let[n,r]=o;if(void 0===r)return;const a="["+n+"]";if(r!==a)for(;i.indexOf(a)>-1;)Wc.log({name:"ReplaceVastMacro",data:{macroName:n,macroValue:r,stringToReplace:e,macros:t}}),i=i.replace(a,r)})),i}(e,Qg)}function hn(e){let{trackingUrls:t,options:i,sendBeaconParams:o}=e;if(!Array.isArray(t))return;const n=Vc(t,ei),r=sc(n,un),a=sc(r,(e=>De({url:e,options:i,win:window})));Jl(a,(e=>Te(e,o)))}function pn(e){return Jl(v(Og),(t=>{const i=Og[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>{if("function"===typeof e[i])try{return e[i]()}catch(o){Wc.error({error:new Ml({code:"VPAID_METHOD_FOR_GETTER_ERROR",details:{propertyName:t}})})}else Wc.error({error:new Ml({code:"VPAID_HAS_NO_METHOD_FOR_GETTER",details:{propertyName:t}})})}})})),Jl(v(Ig),(t=>{const i=Ig[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!0,set:o=>{if("function"===typeof e[i])try{return e[i](o)}catch(n){Wc.error({error:new Ml({code:"VPAID_METHOD_FOR_SETTER_ERROR",details:{propertyName:t,value:o}})})}else Wc.error({error:new Ml({code:"VPAID_HAS_NO_METHOD_FOR_SETTER",details:{propertyName:t,value:o}})})}})})),e}function mn(){return mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},mn.apply(this,arguments)}function An(){return An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},An.apply(this,arguments)}function gn(){return gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},gn.apply(this,arguments)}function vn(){return vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},vn.apply(this,arguments)}function _n(e){return Array.isArray(e)?Vc(e,(e=>"string"===typeof e&&e.length>0)):[]}function yn(e,t){const i=e[t],{AUCTION_DC_PARAMS:n}=e,r=function(e){if(!o(e))return;const{data_params:t}=e;if(!o(t))return;const{misc:i}=t;if(!o(i))return;const{object_id:n}=i,r=t[n];return o(r)?r:void 0}(n),a=null==r?void 0:r[t],s=null==r?void 0:r.unmoderated;return{rootField:i,bannerParametersField:a,unmoderatedBannerParametersField:o(s)?s[t]:void 0}}function fn(e){const t=[],i=[];return o(e)?{measurers:Ot(e,((n,r)=>r!==cv&&(o(n)?!!function(e){return e===cv||-1!==dv.indexOf(e)}(r)||(i.push({name:"UnsupportedMeasurer",data:{measurerName:r,measurersParameters:e}}),!1):(t.push(new Ml({code:"MEASURER_PARAMS_IN_NOT_AN_OBJECT",details:{measurerName:r,measurersParameters:e}})),!1)))),errors:t,events:i}:(void 0!==e&&t.push(new Ml({code:"INVALID_MEASURERS_PARAMETERS",details:{measurersParameters:e}})),{measurers:{},errors:t,events:i})}function Sn(){return Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Sn.apply(this,arguments)}function Tn(e){return o(e)?ve(uv,((t,i)=>_n(e[i]))):Qh(uv)}function En(e){const{sad:t,AUCTION_DC_PARAMS:i}=e;return"sad"===t||!!o(i)&&"sad"===i.sad}function bn(e){return e<2?1e3:2===e?3e3:5e3}function Cn(e,t,i){let o;const n=new Bc,r=on(e,t,(e=>{o=e,n.dispatch(e)})),a=new hh(o,i),s=n.add(a);return{valueSignal:a,teardown:()=>{s(),r()}}}function Pn(){return Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Pn.apply(this,arguments)}function wn(){return wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},wn.apply(this,arguments)}function On(e){let{eventName:t,trackingEventDetails:i,trackingUrls:o,options:{devicePixelRatio:n,downlink:r,relativeSizeRatio:a,screenSize:s,size:l,visibility:d,videoContentSize:c,videoAvatarSize:u,videoPixelRatio:h,videoToDevicePixelRatio:p,videoFramesInfo:m,videoSrc:A,videoCurrentSrc:g,videoMuted:v,videoVolume:_,bufferingTime:y,bufferingTimeRatio:f,currentTime:S,remainingBufferedTime:T,adBreakType:E,adFormatType:b,isFullscreen:C,adPodId:P,productType:w},pixelsSource:O}=e;const I=Av[t],k=void 0===I?1:I+1;Av[t]=k;const D={videoContentSize:c,videoAvatarSize:{width:Math.round(u.width),height:Math.round(u.height)},videoPixelRatio:h,videoToDevicePixelRatio:p,videoFramesInfo:m,videoSrc:A,bufferingTime:y,bufferingTimeRatio:f,currentTime:S,remainingBufferedTime:T},N={devicePixelRatio:n,downlink:r,relativeSizeRatio:a,screenSize:s,size:l,visibility:d,videoCurrentSrc:g,videoMuted:v,videoVolume:_,adBreakType:E,adFormatType:b,isFullscreen:C,adPodId:P,productType:w},{values:R,sensors:L,dailySensors:x}=i,B=wn({trackingUrls:o,isVisibilityReliable:ku(),counterInBundle:k},D,N);1e3===k&&Wc.error({error:new Ml({code:"NORMAL_EVENT_TRACKING_COUNT_EXCEEDED",details:wn({eventName:t,eventTrackingsCounts:Av},B)})});const M="vast"===O?(e=>"VastTracking_"+e)(t):(e=>"AdParametersTracking_"+e)(t),U="vast"===O&&V(mv,t)?1:bc,F={data:B,values:R,sensors:L,dailySensors:x};Wc.log(wn({name:M,probability:U},F))}function In(e){return!!o(e)&&Rl(e)}function kn(e,t){const i=q({element:e,eventName:"timeupdate",listener:()=>{e.currentTime>0&&!e.paused&&(n(),t())}}),o=q({element:e,eventName:"playing",listener:()=>{e.duration>0&&(n(),t())}}),n=()=>{i(),o()};return n}function Dn(e){const t=Ql;t.__vasClickRegistration?t.__vasClickRegistration.duplicates.push(e):(t.__vasClickRegistration={details:e,duplicates:[]},t.setTimeout((()=>{delete t.__vasClickRegistration}),qm))}function Nn(){return Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Nn.apply(this,arguments)}function Rn(e){const t=new Ev(e),i=pn(t),{measurableVPAIDCreative:o,userInteractionDispatchers:n}=function(e,t,i){void 0===i&&(i={});const o=e,{onStop:n=d,onInitMeasurer:r=d,onTrackEvent:a=d,onExecutionError:s=d,onAdError:l=d,onPlayingStateChange:c=d}=i,u=new pv(o,t,{onStop:n,onInitMeasurer:r,onTrackEvent:a,onExecutionError:s,onAdError:l,onPlayingStateChange:c}),h=function(e,t){let{vpaidWillCallMethod:i,vpaidWillSetProperty:o}=t;const n=ve(Pg,((e,t)=>function(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return i(t,o)}));return Jl(v(wg),(t=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:()=>e[t],set:e=>{o(t,e)}})})),n}(o,u);return{measurableVPAIDCreative:h,userInteractionDispatchers:u.userInteractionDispatchers,vpaidCreativeProxyForMeasurers:u.vpaidCreativeProxyForMeasurers}}(i,e,{onStop:e=>{let{error:t,reason:i}=e;t?Wc.error({error:t}):Wc.log({name:"AdCreativeMeasured",data:{stopReason:i}})},onInitMeasurer:e=>{!function(e){if("yandexTestMeasurer"===e.measurerName)return;const t=Rg[e.measurerName];Wc.log({name:t,data:void 0})}(e)},onTrackEvent:e=>{On(e)},onExecutionError:e=>{Wc.error({error:e})},onAdError:e=>{let{error:t}=e;Wc.errorToStats(t)}});return{creative:o,wrapper:t,userInteractionDispatchers:n}}function Vn(e){const t="undefined"!==typeof Object.getOwnPropertyDescriptor(e.document,"hidden"),i="undefined"!==typeof Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.document),"hidden");return t||i}function Ln(e){return Boolean(e.IntersectionObserver)&&!n(e.IntersectionObserver)}function xn(e){var t,i,o,n,r,a,s,l;const d=null!=(t=null!=(i=null!=(o=null!=(n=e.requestAnimationFrame)?n:e.mozRequestAnimationFrame)?o:e.webkitRequestAnimationFrame)?i:e.msRequestAnimationFrame)?t:t=>e.setTimeout(t,16.666666666666668),c=null!=(r=null!=(a=null!=(s=null!=(l=e.cancelAnimationFrame)?l:e.mozCancelAnimationFrame)?s:e.webkitCancelAnimationFrame)?a:e.msCancelAnimationFrame)?r:t=>e.clearTimeout(t);return{requestAnimationFrame:d.bind(e),cancelAnimationFrame:c.bind(e)}}function Bn(e,t){for(var i in t)e[i]=t[i];return e}function Mn(e){var t=e.parentNode;t&&t.removeChild(e)}function Un(e,t,i){var o,n,r,a={};for(r in t)"key"==r?o=t[r]:"ref"==r?n=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?kv.call(arguments,2):i),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return Fn(e,a,o,n,null)}function Fn(e,t,i,o,n){var r={type:e,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==n?++Nv:n};return null!=Dv.vnode&&Dv.vnode(r),r}function Hn(e){return e.children}function zn(e,t){this.props=e,this.context=t}function Wn(e,t){if(null==t)return e.__?Wn(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?Wn(e):null}function jn(e){var t,i;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e){e.__e=e.__c.base=i.__e;break}return jn(e)}}function Yn(e){(!e.__d&&(e.__d=!0)&&Rv.push(e)&&!Gn.__r++||Lv!==Dv.debounceRendering)&&((Lv=Dv.debounceRendering)||Vv)(Gn)}function Gn(){for(var e;Gn.__r=Rv.length;)e=Rv.sort((function(e,t){return e.__v.__b-t.__v.__b})),Rv=[],e.some((function(e){var t,i,o,n,r,a;e.__d&&(r=(n=(t=e).__v).__e,(a=t.__P)&&(i=[],(o=Bn({},n)).__v=n.__v+1,er(a,n,o,t.__n,void 0!==a.ownerSVGElement,null!=n.__h?[r]:null,i,null==r?Wn(n):r,n.__h),tr(i,n),n.__e!=r&&jn(n)))}))}function Xn(e,t,i,o,n,r,a,s,l,d){var c,u,h,p,m,A,g,v=o&&o.__k||Mv,_=v.length;for(i.__k=[],c=0;c<t.length;c++)if(null!=(p=i.__k[c]=null==(p=t[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?Fn(null,p,null,null,p):Array.isArray(p)?Fn(Hn,{children:p},null,null,null):p.__b>0?Fn(p.type,p.props,p.key,null,p.__v):p)){if(p.__=i,p.__b=i.__b+1,null===(h=v[c])||h&&p.key==h.key&&p.type===h.type)v[c]=void 0;else for(u=0;u<_;u++){if((h=v[u])&&p.key==h.key&&p.type===h.type){v[u]=void 0;break}h=null}er(e,p,h=h||Bv,n,r,a,s,l,d),m=p.__e,(u=p.ref)&&h.ref!=u&&(g||(g=[]),h.ref&&g.push(h.ref,null,p),g.push(u,p.__c||m,p)),null!=m?(null==A&&(A=m),"function"==typeof p.type&&null!=p.__k&&p.__k===h.__k?p.__d=l=Kn(p,l,e):l=qn(e,p,h,v,m,l),d||"option"!==i.type?"function"==typeof i.type&&(i.__d=l):e.value=""):l&&h.__e==l&&l.parentNode!=e&&(l=Wn(h))}for(i.__e=A,c=_;c--;)null!=v[c]&&("function"==typeof i.type&&null!=v[c].__e&&v[c].__e==i.__d&&(i.__d=Wn(o,c+1)),nr(v[c],v[c]));if(g)for(c=0;c<g.length;c++)or(g[c],g[++c],g[++c])}function Kn(e,t,i){var o,n;for(o=0;o<e.__k.length;o++)(n=e.__k[o])&&(n.__=e,t="function"==typeof n.type?Kn(n,t,i):qn(i,n,n,e.__k,n.__e,t));return t}function qn(e,t,i,o,n,r){var a,s,l;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==i||n!=r||null==n.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(n),a=null;else{for(s=r,l=0;(s=s.nextSibling)&&l<o.length;l+=2)if(s==n)break e;e.insertBefore(n,r),a=r}return void 0!==a?a:n.nextSibling}function Qn(e,t,i){"-"===t[0]?e.setProperty(t,i):e[t]=null==i?"":"number"!=typeof i||Uv.test(t)?i:i+"px"}function Jn(e,t,i,o,n){var r;e:if("style"===t)if("string"==typeof i)e.style.cssText=i;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)i&&t in i||Qn(e.style,t,"");if(i)for(t in i)o&&i[t]===o[t]||Qn(e.style,t,i[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=i,i?o||e.addEventListener(t,r?$n:Zn,r):e.removeEventListener(t,r?$n:Zn,r);else if("dangerouslySetInnerHTML"!==t){if(n)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==i?"":i;break e}catch(e){}"function"==typeof i||(null!=i&&(!1!==i||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,i):e.removeAttribute(t))}}function Zn(e){this.l[e.type+!1](Dv.event?Dv.event(e):e)}function $n(e){this.l[e.type+!0](Dv.event?Dv.event(e):e)}function er(e,t,i,o,n,r,a,s,l){var d,c,u,h,p,m,A,g,v,_,y,f=t.type;if(void 0!==t.constructor)return null;null!=i.__h&&(l=i.__h,s=t.__e=i.__e,t.__h=null,r=[s]),(d=Dv.__b)&&d(t);try{e:if("function"==typeof f){if(g=t.props,v=(d=f.contextType)&&o[d.__c],_=d?v?v.props.value:d.__:o,i.__c?A=(c=t.__c=i.__c).__=c.__E:("prototype"in f&&f.prototype.render?t.__c=c=new f(g,_):(t.__c=c=new zn(g,_),c.constructor=f,c.render=rr),v&&v.sub(c),c.props=g,c.state||(c.state={}),c.context=_,c.__n=o,u=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=f.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=Bn({},c.__s)),Bn(c.__s,f.getDerivedStateFromProps(g,c.__s))),h=c.props,p=c.state,u)null==f.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==f.getDerivedStateFromProps&&g!==h&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(g,_),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(g,c.__s,_)||t.__v===i.__v){c.props=g,c.state=c.__s,t.__v!==i.__v&&(c.__d=!1),c.__v=t,t.__e=i.__e,t.__k=i.__k,t.__k.forEach((function(e){e&&(e.__=t)})),c.__h.length&&a.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(g,c.__s,_),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(h,p,m)}))}c.context=_,c.props=g,c.state=c.__s,(d=Dv.__r)&&d(t),c.__d=!1,c.__v=t,c.__P=e,d=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(o=Bn(Bn({},o),c.getChildContext())),u||null==c.getSnapshotBeforeUpdate||(m=c.getSnapshotBeforeUpdate(h,p)),y=null!=d&&d.type===Hn&&null==d.key?d.props.children:d,Xn(e,Array.isArray(y)?y:[y],t,i,o,n,r,a,s,l),c.base=t.__e,t.__h=null,c.__h.length&&a.push(c),A&&(c.__E=c.__=null),c.__e=!1}else null==r&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=ir(i.__e,t,i,o,n,r,a,l);(d=Dv.diffed)&&d(t)}catch(e){t.__v=null,(l||null!=r)&&(t.__e=s,t.__h=!!l,r[r.indexOf(s)]=null),Dv.__e(e,t,i)}}function tr(e,t){Dv.__c&&Dv.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Dv.__e(e,t.__v)}}))}function ir(e,t,i,o,n,r,a,s){var l,d,c,u=i.props,h=t.props,p=t.type,m=0;if("svg"===p&&(n=!0),null!=r)for(;m<r.length;m++)if((l=r[m])&&(l===e||(p?l.localName==p:3==l.nodeType))){e=l,r[m]=null;break}if(null==e){if(null===p)return document.createTextNode(h);e=n?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),r=null,s=!1}if(null===p)u===h||s&&e.data===h||(e.data=h);else{if(r=r&&kv.call(e.childNodes),d=(u=i.props||Bv).dangerouslySetInnerHTML,c=h.dangerouslySetInnerHTML,!s){if(null!=r)for(u={},m=0;m<e.attributes.length;m++)u[e.attributes[m].name]=e.attributes[m].value;(c||d)&&(c&&(d&&c.__html==d.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(function(e,t,i,o,n){var r;for(r in i)"children"===r||"key"===r||r in t||Jn(e,r,null,i[r],o);for(r in t)n&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||i[r]===t[r]||Jn(e,r,t[r],i[r],o)}(e,h,u,n,s),c)t.__k=[];else if(m=t.props.children,Xn(e,Array.isArray(m)?m:[m],t,i,o,n&&"foreignObject"!==p,r,a,r?r[0]:i.__k&&Wn(i,0),s),null!=r)for(m=r.length;m--;)null!=r[m]&&Mn(r[m]);s||("value"in h&&void 0!==(m=h.value)&&(m!==e.value||"progress"===p&&!m)&&Jn(e,"value",m,u.value,!1),"checked"in h&&void 0!==(m=h.checked)&&m!==e.checked&&Jn(e,"checked",m,u.checked,!1))}return e}function or(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(e){Dv.__e(e,i)}}function nr(e,t,i){var o,n;if(Dv.unmount&&Dv.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||or(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){Dv.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(n=0;n<o.length;n++)o[n]&&nr(o[n],t,"function"!=typeof e.type);i||null==e.__e||Mn(e.__e),e.__e=e.__d=void 0}function rr(e,t,i){return this.constructor(e,i)}function ar(e,t,i){var o,n,r;Dv.__&&Dv.__(e,t),n=(o="function"==typeof i)?null:i&&i.__k||t.__k,r=[],er(t,e=(!o&&i||t).__k=Un(Hn,null,[e]),n||Bv,Bv,void 0!==t.ownerSVGElement,!o&&i?[i]:n?null:t.firstChild?kv.call(t.childNodes):null,r,!o&&i?i:n?n.__e:t.firstChild,o),tr(r,e)}function sr(e,t){var i={__c:t="__cC"+xv++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var i,o;return this.getChildContext||(i=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&i.some(Yn)},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};return i.Provider.__=i.Consumer.contextType=i}function lr(e,t){Dv.__h&&Dv.__h(Hv,e,Wv||t),Wv=0;var i=Hv.__H||(Hv.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function dr(e){return Wv=1,function(e,t,i){var o=lr(Fv++,2);return o.t=e,o.__c||(o.__=[fr(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=Hv),o.__}(fr,e)}function cr(e,t){var i=lr(Fv++,3);!Dv.__s&&yr(i.__H,t)&&(i.__=e,i.__H=t,Hv.__H.__h.push(i))}function ur(e,t){var i=lr(Fv++,4);!Dv.__s&&yr(i.__H,t)&&(i.__=e,i.__H=t,Hv.__h.push(i))}function hr(e){return Wv=5,pr((function(){return{current:e}}),[])}function pr(e,t){var i=lr(Fv++,7);return yr(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function mr(e,t){return Wv=8,pr((function(){return e}),t)}function Ar(e){var t=Hv.context[e.__c],i=lr(Fv++,9);return i.c=e,t?(null==i.__&&(i.__=!0,t.sub(Hv)),t.props.value):e.__}function gr(){jv.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(vr),e.__H.__h.forEach(_r),e.__H.__h=[]}catch(Nv){e.__H.__h=[],Dv.__e(Nv,e.__v)}})),jv=[]}function vr(e){var t=Hv;"function"==typeof e.__c&&e.__c(),Hv=t}function _r(e){var t=Hv;e.__c=e.__(),Hv=t}function yr(e,t){return!e||e.length!==t.length||t.some((function(t,i){return t!==e[i]}))}function fr(e,t){return"function"==typeof t?t(e):t}function Sr(){return Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Sr.apply(this,arguments)}function Tr(e){var t,i,o="";if("string"===typeof e||"number"===typeof e)o+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=Tr(e[t]))&&(o&&(o+=" "),o+=i);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function Er(){for(var e,t,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(t=Tr(e))&&(o&&(o+=" "),o+=t);return o}function br(e){const[t,i]=dr(e.getValue());return cr((()=>(i(e.getValue()),e.add(i))),[e]),t}function Cr(e,t){var i;const o=(null!=(i=e.ownerDocument)?i:document).createElement("style");return o.type="text/css",o.textContent=t,e.appendChild(o),o}function Pr(e){const t=Ar(o_);ur((()=>a_.useStyleModule(t,e)),[e])}function wr(e){let{buttonText:t,onClick:i}=e;return{buttonText:t,openClickThroughUrl:i}}function Or(){return Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Or.apply(this,arguments)}function Ir(e){var t,i,n;const r=[ic],a=null==(t=e.adParametersObject)||null==(i=t.AUCTION_DC_PARAMS)||null==(n=i.data_params)?void 0:n.misc;if(o(a)){const{object_id:e="",pageId:t="",impId:i="",campaignid:o="",bidreqid:n=""}=a;r.push(e,t,i,o,n)}return r.join()}function kr(e){if(!o(e))return!1;if(!i(e.vendor))return!1;if(!i(e.javaScriptResource))return!1;const t=e.verificationParameters;return!(!i(t)&&!o(t))&&!(void 0!==e.trackingEvents&&!o(e.trackingEvents))}function Dr(e){if(!Array.isArray(e))return!1;for(const t of e)if(!kr(t))return!1;return!0}function Nr(){return Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Nr.apply(this,arguments)}function Rr(e,t){const n=function(e){switch(e){case"limited":return"limited";case"domain":return"domain";default:return"full"}}(t.omidAccessMode);if("TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ENABLE_OMSDK_TEST_MODE"))return[{vendorKey:"IAS",javaScriptResource:"https://static.adsafeprotected.com/fw.js?ias_campId=CAMP_ID&ias_placementId=AD_GROUP_ID",accessMode:"full",verificationParameters:'{"config":"/rjss/yandex/82444/58348904/skeleton.js?iasProxyPartnerId=32908","host":"https://jsconfig.adsafeprotected.com"}',trackingEvents:{}},{vendorKey:"iabtechlab.com-omid",javaScriptResource:E_,accessMode:"full",verificationParameters:"iabtechlab-Yandex",trackingEvents:{}}];const r=function(e,t){return sc(e,(e=>Nr({},e,{accessMode:t})))}(e.adVerifications,n),a=function(e,t){if(!e)return[];const{rootField:n,bannerParametersField:r,unmoderatedBannerParametersField:a}=yn(e,"measurers"),s=o(n)&&n.omid,l=o(r)&&r.omid,d=o(a)&&a.omid,c=Vc([s,l,d],Boolean);if(0===c.length)return[];const u=Vc(c,Dr);c.length!==u.length&&Wc.error({error:new Ml({code:"OMID_OBJECT_FROM_AD_PARAMETERS_IS_INVALID",details:{adParameters:JSON.stringify(e)}})});const h=u.shift();return Array.isArray(h)?sc(h,(e=>{let{vendor:o,javaScriptResource:n,trackingEvents:r,verificationParameters:a}=e;return{vendorKey:o,javaScriptResource:n,trackingEvents:null!=r?r:{},verificationParameters:i(a)?a:JSON.stringify(a),accessMode:t}})):[]}(e.adParametersObject,n),s=(l=[...r,...a],Vc(l,(e=>{const{javaScriptResource:t,trackingEvents:o}=e;try{const e=new URL(t);if(N_.has(e.hostname))return!0}catch(Bv){Wc.error({error:new Ml({code:"OMID_COULD_NOT_CONFIRM_JAVASCRIPT_RESOURCE",details:{errorMessage:Bv.message,javaScriptResource:t}})})}const n=o.verificationNotExecuted;return i(n)&&Te(n.replace("[REASON]","1")),Wc.log({name:"OmidVerificationJavascriptResourceIsNotSupported",data:{parameters:JSON.stringify(e)},probability:1}),!1})));var l;return 0!==s.length?s:void 0}function Vr(e,t,i,o){"undefined"!==typeof i&&"undefined"!==typeof t&&(i+=!V_.test(t)&&i>>>0?"px":"",e.style.setProperty?e.style.setProperty(t,i,o?"important":""):e.style.cssText+=";"+t+": "+i+(o?"!important":""))}function Lr(e,t,i){const o=it(sc(le(t),(e=>{let[t,i]=e;return[x_(t),i]})));return L_(e,o,i)}function xr(){return xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},xr.apply(this,arguments)}function Br(){return Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Br.apply(this,arguments)}function Mr(e){let{height:t,width:i}=e;const o=Math.min(t,i);return o<300?40:o>1080?70:40+(o-300)/780*30}function Ur(e){let{height:t,width:i}=e;return.275*Mr({height:t,width:i})}function Fr(e,t){const i=function(e){const t=function(){if("undefined"===typeof ky){let t=null;try{t=Element.prototype.attachShadow}catch(e){}if(t&&n(t))ky=t;else{const e=document.createElement("iframe");e.style.setProperty("display","none"),document.body.appendChild(e);const t=Pc(e,"contentWindow.Element.prototype.attachShadow");ky=t&&n(t)?t:null,document.body.removeChild(e)}}return ky}();return t&&t.bind(e)}(e);if(!a(i))return null;try{return i(t)}catch(o){return null}}function Hr(e){var t;if(null!=(t=!Boolean(e.ownerDocument))?t:!e.ownerDocument.defaultView)return null;const i=e.ownerDocument.defaultView,o=Fr(e,{mode:"open"});if(!o)return null;const n=i.document.createElement("div");return o.appendChild(n),n}function zr(e,t){if(e===t)return!0;if(!o(e)||!o(t))return!1;if($l(e)!==$l(t))return!1;const i=v(e),n=v(t);if(i.length!==n.length)return!1;for(const o of n){if(!(o in e))return!1;if(!zr(e[o],t[o]))return!1}return!0}function Wr(e){return e.getIsConvertedFromVideoVast()?"video":Ke(e.vastAd)}function jr(){return jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},jr.apply(this,arguments)}function Yr(e){try{oc("Track event=["+e.eventName+"]"),On(e=jr({},e,{options:Gr(e.options)})),hn(e)}catch(t){Wc.error({error:new Ml({code:"TRACK_EVENT_WITH_STATS_ERROR",details:{trackingUrlsParams:e}})})}}function Gr(e){const{size:t,screenSize:i,videoContentSize:o}=e;return jr({},e,{size:ve(t,Math.round),screenSize:ve(i,Math.round),videoContentSize:o&&ve(o,Math.round)})}function Xr(e,t){const i=function(e){const t=Rc(e);if(t)return t.replace(/hidden/i,"visibilitychange")}(e);return i?q({element:e,eventName:i,listener:()=>{t(de(e))}}):d}function Kr(){return Kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Kr.apply(this,arguments)}function qr(e){"function"===typeof(null==e?void 0:e.catch)&&e.catch((()=>{}))}function Qr(){return Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qr.apply(this,arguments)}function Jr(){return Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jr.apply(this,arguments)}function Zr(e){const t=Ht(e);return yp(null==t?void 0:t.images)}function $r(e){const{adParametersObject:t}=e;if(!o(t))return;const n=t.packshot_duration;if(!he(n))return;const r=t.PACKSHOT_IMAGE_URL;if(!i(r))return;const a=e.clickUrlData.tgaOfferClickUrl;if(void 0===a)return;const{title:s}=Fe(t);return{packshotDuration:n,packshotImageUrl:r,packshotActionButtonClickUrl:a,packshotTitle:s,packshotButtonText:Ft(t)}}function ea(e,t){const{adParametersObject:i}=e;if(!o(i))return;const n=$r(e),r=null==n?void 0:n.packshotImageUrl;if(r)return r;const a=Zr(i.adParameters);return 0!==a.length?(e=>{let{size:t,images:i}=e;const{width:o,height:n}=t,r=function(e){var t;void 0===e&&(e={});const i=Array.isArray(e.images)?e.images:[e.images],o=Math.min(2,e.pixelRatio||window.devicePixelRatio||1),n=[];for(const r of i)if(r.width&&r.height&&r.url){const t=Jr({},e,{pixelRatio:o,image:r});n.push(My(t))}n.sort(((e,t)=>e.coeff-t.coeff));for(const r of n)if(r.coeff>1)return r;return null!=(t=n[n.length-1])?t:{}}({boundingRectangle:{width:o,height:n},images:sc(i,(e=>{if($l(e)){const[t,i,o,n]=e;return{url:t,width:parseInt(i,10),height:parseInt(o,10),smartCenters:n?n["smart-centers"]:[]}}return e})),stretch:!0});if(Boolean(r))return r.url})({size:t,images:a}):void 0}function ta(e,t){return Uy.indexOf(e)>=Uy.indexOf(t)}function ia(e){let{creativeLifeCycleStage:t,isYandexCreative:i,adCreativeWrapper:o}=e;if(ta(t,"start")){if(o){const e=o.params.animationParameters,t=o.params.videoParameters;if(e&&!o.adCreativeLatch.getDispatched())return t?"YANDEX_AD_CREATIVE_WITH_VIDEO_START_TIMEOUT_NO_ANIMATION":"YANDEX_AD_CREATIVE_NO_VIDEO_START_TIMEOUT_NO_ANIMATION";if(t&&!o.videoStartedLatch.getDispatched())return e?"YANDEX_AD_CREATIVE_WITH_ANIM_VIDEO_START_TIMEOUT":"YANDEX_AD_CREATIVE_NO_ANIM_VIDEO_START_TIMEOUT"}return i?"YANDEX_VPAID_START_TIMEOUT":"VPAID_START_TIMEOUT"}return ta(t,"init")?i?"YANDEX_VPAID_INIT_TIMEOUT":"VPAID_INIT_TIMEOUT":i?"YANDEX_VPAID_LOAD_TIMEOUT":"VPAID_LOAD_TIMEOUT"}function oa(e){if(!Fi(e))return!1;const{adParametersObject:t}=e;return!!o(t)&&"theme-empty"===t.adCreativeConversionType}function na(e){var t;if(!oa(e))return;const i=Zy(e);if(!o(i))return;const{adParametersObject:n,parsedParameters:r}=i;if(!o(n)||!o(r))return;const a=jt(n);if(!a)return;const{greenUrl:s,targetUrl:l,hasTitle:d,title:c,hasBody:u,body:h,hasAgeRestriction:p,ageRestriction:m}=r,A=null==(t=e.assets.button)?void 0:t.caption;return{greenUrl:s,clickUrl:a,targetUrl:l,label:null!=A?A:Ft(n),title:!1===d?void 0:c,body:!1===u?void 0:h,ageRestriction:p?m:void 0}}function ra(){return ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ra.apply(this,arguments)}function aa(){return aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},aa.apply(this,arguments)}function sa(e){const[t,i]=dr(void 0),o=e instanceof HTMLElement?{current:e}:e;return ur((()=>{if(null==o||!o.current)return;const e=new af(o.current);return e.onResize.add((e=>i(e))),i(e.getSize()),()=>e.destroy()}),[null==o?void 0:o.current]),t}function la(e,t,i,o){if(!1===sf)return new Intl.NumberFormat(i,{currency:t,style:"currency"}).format(e);try{return new Intl.NumberFormat(i,{currency:t,style:"currency",maximumFractionDigits:o}).format(e)}catch(Bv){if(Ol(Bv)&&(/maximumFractionDigits/.test(Bv.message)||/invalid digits/.test(Bv.message)))return sf=!1,la(e,t,i);throw Bv}}function da(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M8.387 2.887a1.25 1.25 0 0 0-1.768-1.769L.62 7.116a1.25 1.25 0 0 0 0 1.768l5.998 5.998a1.25 1.25 0 0 0 1.768-1.769L6.62 11.347a12.498 12.498 0 0 0-2.198-1.75l-.934-.586.058-.058 1.2.171a12.5 12.5 0 0 0 1.767.126H18.75a1.25 1.25 0 0 0 0-2.5H6.513a12.5 12.5 0 0 0-1.768.126l-1.199.17-.058-.058.938-.588A12.5 12.5 0 0 0 6.62 4.652l1.766-1.765Z",fill:"currentColor"},[])])}function ca(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M11.616 14.884a1.25 1.25 0 0 1-.003-1.771l1.766-1.765c.664-.663 1.4-1.25 2.195-1.748l.938-.588-.059-.059-1.199.171a12.5 12.5 0 0 1-1.767.126H10v.003H8.75V9.25h-7.5a1.25 1.25 0 1 1 0-2.5h12.237a12.5 12.5 0 0 1 1.767.126l1.2.17.057-.057-.934-.586a12.495 12.495 0 0 1-2.198-1.75l-1.766-1.766a1.25 1.25 0 0 1 1.768-1.769l5.998 5.998a1.25 1.25 0 0 1 0 1.768l-5.998 5.998a1.25 1.25 0 0 1-1.765.002Z",fill:"currentColor"},[])])}function ua(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 489.645 489.645"},t),[Un("path",{d:"M460.656 132.911c-58.7-122.1-212.2-166.5-331.8-104.1-9.4 5.2-13.5 16.6-8.3 27 5.2 9.4 16.6 13.5 27 8.3 99.9-52 227.4-14.9 276.7 86.3 65.4 134.3-19 236.7-87.4 274.6-93.1 51.7-211.2 17.4-267.6-70.7l69.3 14.5c10.4 2.1 21.8-4.2 23.9-15.6 2.1-10.4-4.2-21.8-15.6-23.9l-122.8-25c-20.6-2-25 16.6-23.9 22.9l15.6 123.8c1 10.4 9.4 17.7 19.8 17.7 12.8 0 20.8-12.5 19.8-23.9l-6-50.5c57.4 70.8 170.3 131.2 307.4 68.2 58.1-30 191.5-147.7 103.9-329.6z",fill:"currentColor"},[])])}function ha(){return ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ha.apply(this,arguments)}function pa(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"stroke-width":"2","stroke-linecap":"round",stroke:"currentColor",d:"m8 8 8 8m0-8-8 8"},[])])}function ma(e){var t;if(!fe(e)&&!ye(e)||!mc)return e;const i=Kl[Kl.length-1];return function(e,t,i){if(void 0===i)return e;const o=I(e),n=D(o.search);return n.target_ref=i,k(O({},o,{search:N(n)}))}(e,0,(null!=(t=null==i?void 0:i.ownerDocument)?t:document).referrer)}function Aa(){return Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Aa.apply(this,arguments)}function ga(){return ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ga.apply(this,arguments)}function va(e,t){const i=Qh(mp);!1===t.visibility?i.visibility=!1:i.visibility=e.visibility;for(const o of Ef)!1===i.visibility?i.controlsVisibility[o]=!1:"boolean"===typeof t.controlsVisibility[o]?i.controlsVisibility[o]=t.controlsVisibility[o]:i.controlsVisibility[o]=e.controlsVisibility[o];return i}function _a(){const e=Qh(mp);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const n=Vc(i,(e=>Boolean(e)));return fd(n,((e,t)=>va(e,t)),e)}function ya(e){const{imhoParams:t}=e;if(function(e){let{mediaFiles:t}=e;const[i]=t;return void 0!==i&&Ui(i.url)}(e))return!1;if(zi(e)||Hi(e))return!1;if(Fi(e)){const{adParametersObject:t}=e;if(!t)return!1;const i=y((()=>Zi(t.mediaFiles)));if(!i)return!1;const{videoMediaFiles:o}=i;if(0===o.length)return!1;if(Rp(o,(e=>!1===e.hasAudio)))return!1}return!t||t.showSoundButton}function fa(e){if(zi(e)||Hi(e))return!1}function Sa(e){const{imhoParams:t,serializablePlaybackParameters:i}=e,o={controlsVisibility:{adLabel:null==t?void 0:t.showLabel,mute:ya(e),skip:!0,play:fa(e)}};let n;return i&&(n=i.controlsSettings),_a(o,n)}function Ta(e,t){const i=aA(e);return V(t,i)?i:void 0}function Ea(e){let{playbackParameters:t,vastAd:i,adBreakType:o,isYandexAdCreative:n}=e;const r=_a(Sa(i),t.controlsSettings),{skipDelay:a,eventName:s}=function(e){var t,i;let{vastAd:o}=e;const{skipTime:n,skipOffset:r}=o,a=null==(t=o.adParametersObject)||null==(i=t.playbackParameters)?void 0:i.skipDelay;return me(a)?(Wc.log({name:"UsingVastSkipDelayPlaybackParameter",data:{skipDelay:a}}),{skipDelay:a,eventName:void 0}):me(r)?me(n)?{skipDelay:n,eventName:"UsingSkipTimeExtensionValue"}:{skipDelay:r,eventName:void 0}:{skipDelay:0,eventName:void 0}}({vastAd:i});let l,d=a;if(he(a)){const e=Uc.getFlagValueAndActivateTestId("VAS_SKIP_DELAY_SHIFT");if(e){const t=Number(e);me(t)&&(d+=t)}}void 0!==s&&Wc.log({name:s}),!0===t.backgroundBlur?l="blur":i.backgroundColor&&(l={color:i.backgroundColor});const c=!1===t.packshotSettings.isEnabled?void 0:$r(i);let u;"inpage"!==o&&(u=(e=>xf["preroll"===e?"preroll":"non_preroll"])(o));let h=5e3;u&&he(u.bufferFullTimeout)?h=u.bufferFullTimeout:he(t.bufferFullTimeout)?h=t.bufferFullTimeout:i.serializablePlaybackParameters&&he(i.serializablePlaybackParameters.bufferFullTimeout)?h=i.serializablePlaybackParameters.bufferFullTimeout:"inpage"!==o&&(h=ig.bufferFullTimeout);let p,m,A=5;u&&he(u.bufferEmptyLimit)?A=u.bufferEmptyLimit:he(t.bufferEmptyLimit)?A=t.bufferEmptyLimit:i.serializablePlaybackParameters&&he(i.serializablePlaybackParameters.bufferEmptyLimit)?A=i.serializablePlaybackParameters.bufferEmptyLimit:"inpage"!==o&&(A=ig.bufferEmptyLimit),p=u&&he(u.videoTimeout)?u.videoTimeout:he(t.videoTimeout)?t.videoTimeout:i.serializablePlaybackParameters&&he(i.serializablePlaybackParameters.videoTimeout)?i.serializablePlaybackParameters.videoTimeout:"inpage"===o?bf:ig.videoTimeout,m=u&&he(u.vpaidTimeout)?u.vpaidTimeout:he(t.vpaidTimeout)?t.vpaidTimeout:i.serializablePlaybackParameters&&he(i.serializablePlaybackParameters.vpaidTimeout)?i.serializablePlaybackParameters.vpaidTimeout:"inpage"===o?Cf:ig.vpaidTimeout;const g=t.clickThroughUrl||i.clickUrlData.vastClickUrl||i.clickUrlData.tgaOfferClickUrl;let v=d;return!n&&me(t.skipDelayForNonYandexCreatives)&&(v=t.skipDelayForNonYandexCreatives),{controlsSettings:r,background:l,skipDelay:v,bufferFullTimeout:h,bufferEmptyLimit:A,videoTimeout:p,vpaidTimeout:m,clickThroughUrl:g,packshotParameters:c,packshotSettings:t.packshotSettings}}function ba(e){if("error"===e.reason)return e.details}function Ca(){return Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ca.apply(this,arguments)}function Pa(e){const{config:t,errors:i}=function(e){const t=[],i=o(e)?e:{};let n,r,s;if(Rl(i.backgroundSlot)?n=i.backgroundSlot:void 0!==i.backgroundSlot&&t.push(new Ml({code:"BACKGROUND_SLOT_IS_NOT_ELEMENT_OR_UNDEFINED",details:{config:e}})),void 0!==i.skipDelayForNonYandexCreatives&&(me(i.skipDelayForNonYandexCreatives)&&i.skipDelayForNonYandexCreatives>=0?r=i.skipDelayForNonYandexCreatives:t.push(new Ml({code:"INCORRECT_SKIP_DELAY_FOR_NON_YANDEX_CREATIVES_FORMAT",details:{value:i.skipDelayForNonYandexCreatives,stringValue:String(i.skipDelayForNonYandexCreatives),type:typeof i.skipDelayForNonYandexCreatives}}))),o(i.adSequence)&&Bt(i.adSequence.index)&&Bt(i.adSequence.count)){const{index:e,count:t}=i.adSequence;s={index:e,count:t}}return{config:{backgroundSlot:n,clickThroughCallback:a(i.clickThroughCallback)?i.clickThroughCallback:void 0,clickThroughConfirmation:"boolean"===typeof i.clickThroughConfirmation?i.clickThroughConfirmation:void 0,renderSkin:a(i.renderSkin)?i.renderSkin:void 0,visibilitySlot:Rl(i.visibilitySlot)?i.visibilitySlot:void 0,retainLastMediaAfterPlayback:"boolean"===typeof i.retainLastMediaAfterPlayback?i.retainLastMediaAfterPlayback:void 0,enableInfinityPackshot:"boolean"===typeof i.enableInfinityPackshot?i.enableInfinityPackshot:void 0,skipDelayForNonYandexCreatives:r,disableSurveyCompleteScreen:"boolean"===typeof i.disableSurveyCompleteScreen?i.disableSurveyCompleteScreen:void 0,disableSurveyStartTimeout:"boolean"===typeof i.disableSurveyStartTimeout?i.disableSurveyStartTimeout:void 0,adSequence:s,enableNewSkin:!0===(null==i?void 0:i.enableNewSkin)},errors:t}}(e),{config:n,errors:r}=Rt(e);return{config:Ca({},t,n),errors:[...i,...r]}}function wa(e){let{width:t}=e;return t<Bf?"small":t>1e3?"big":"middle"}function Oa(e){try{var t;return(null!=(t=e.navigator)?t:{}).userAgent||""}catch(Bv){return""}}function Ia(e){const t=Oa(e).toLowerCase();return/ipad|iphone|ipod/.test(t)&&!Boolean(e.MSStream)&&!(e=>e.navigator.userAgent.indexOf("UCBrowser")>-1)(e)}function ka(e){if(Ia(e)&&Boolean(e.navigator)){const{platform:t}=e.navigator;if(t&&/iP(hone|od|ad)/.test(t)){const t=e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return parseInt(t[1],10)}}return-1}function Da(e){const t=document.createElement("textarea"),i=window.pageYOffset||document.documentElement.scrollTop;t.style.fontSize="12pt",t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",t.style.top=i+"px",t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length);try{document.execCommand("copy")}catch(o){}document.body.removeChild(t)}function Na(e,t){const i={};return Je(t).forEach((t=>{i[t]=e.getAttribute(t)})),Ze(e,t),ee((()=>{Ze(e,i)}))}function Ra(e,t,i){const o=i.split(".");let n=e;for(let a=0;a<o.length-1;a++)n=n[o[a]];const r=o[o.length-1];if(void 0===n[r])n[r]=t;else if("object"===typeof n[r])for(const a in t)t.hasOwnProperty(a)&&Ra(e,t[a],i+"."+a)}function Va(e,t,i){e[i]||(e[i]={}),Ra(e,t,i)}function La(e){var t,i;const o=e;return null!=(t=o.ya)&&null!=(i=t.videoAd)&&i.debugParameters||Va(o,{videoAd:{debugParameters:{}}},"ya"),o.ya.videoAd.debugParameters}function xa(e){return Gf.test(e)}function Ba(e){const t=e.match(Gf);if(null===t)throw new Error("Timestamp parse error");return 3600*parseFloat(t[1]||"0")+60*parseFloat(t[2])+parseFloat(t[3])}function Ma(e){return-1!==e.indexOf("--\x3e")}function Ua(e,t){const{paused:i}=e,o=t();return i||qr(e.play()),o}function Fa(e,t){const i=()=>{const i=dn(e);t(i)},o=[];return o.push(q({element:e,eventName:"resize",listener:i}),_o(i)),()=>{j(o)}}function Ha(){return Ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ha.apply(this,arguments)}function za(e){return e.muted?0:e.volume}function Wa(e,t,i){if(!e)return nS;const o=oS(e.controlsVisibility),n=Boolean(t.abuseUrl);return{isCloseAvailable:o&&n,isCloseDialogActive:"selection"===i}}function ja(e,t){if(void 0!==e)return!!rS[e]&&Boolean(t)}function Ya(){return Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ya.apply(this,arguments)}function Ga(e){const t=uS(e);return e.muted=!1,e.volume=1,e.allowedToPlay?(t(),"allowed"):(e.muted=!0,e.volume=0,e.allowedToPlay?(t(),"muted"):(t(),"restricted"))}function Xa(e){let{adParametersObject:t}=e;const i=Ht(t);if(!i)return;const{showTitleAndBody:o}=i;return"boolean"===typeof o?o:void 0}function Ka(){return Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ka.apply(this,arguments)}function qa(e){return fd(e,((e,t)=>e+t.getDuration()),0)}function Qa(e){var t,i,o,n,r,a;const s=e.ownerDocument,l=s.defaultView,d=s.documentElement,c=e.getBoundingClientRect();return{winWidth:bS?Math.max(d.clientWidth,null!=(t=null==l?void 0:l.innerWidth)?t:0):null!=(i=null!=(o=null==l?void 0:l.innerWidth)?o:d.clientWidth)?i:s.body.clientWidth,winHeight:bS?Math.max(d.clientHeight,null!=(n=null==l?void 0:l.innerHeight)?n:0):null!=(r=null!=(a=null==l?void 0:l.innerHeight)?a:d.clientHeight)?r:s.body.clientHeight,left:c.left,top:c.top,width:c.width,height:c.height}}function Ja(e){let{width:t,height:i,top:o,left:n,winWidth:r,winHeight:a}=e;const s=n+t,l=o+i,d=ko(n,0,r),c=ko(o,0,a);return{winWidth:r,winHeight:a,left:d,top:c,width:ko(s,d,r)-d,height:ko(l,c,a)-c}}function Za(e,t){return e.width*e.height/(t.width*t.height)}function $a(e){const t=function(e){return[Qa(e),...sc(m(e),Qa)]}(e);let i=Ja(t[0]),o=Za(i,t[0]);for(let a=1;a<t.length;a++){i=Ja((n=i,{winWidth:(r=t[a]).winWidth,winHeight:r.winHeight,left:n.left+r.left,top:n.top+r.top,width:n.width,height:n.height})),o=Za(i,t[0])}var n,r;return o}function es(){return es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},es.apply(this,arguments)}function ts(){return ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ts.apply(this,arguments)}function is(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"6",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"m1 1 3.5 4L1 9",stroke:"#498BFF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[])])}function os(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M4 1h5v5M9 1 1.5 8.5",stroke:"#C6CFD8","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},[])])}function ns(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"m11.598 5 2.743 4.75c.68 1.177 1.13 1.96 1.41 2.567.283.614.268.799.266.814a1.25 1.25 0 0 1-.508.88c-.012.009-.165.115-.839.176-.664.061-1.568.063-2.927.063H6.258c-1.36 0-2.263-.002-2.928-.063-.673-.061-.826-.167-.838-.176a1.25 1.25 0 0 1-.508-.88c-.002-.015-.017-.2.266-.814.28-.607.73-1.39 1.41-2.567L6.402 5c.68-1.177 1.133-1.959 1.518-2.504.39-.552.558-.632.572-.638a1.25 1.25 0 0 1 1.017 0c.013.006.181.086.571.638.386.545.839 1.327 1.518 2.504zm-6.64-.833C6.286 1.869 6.949.72 7.815.335a2.917 2.917 0 0 1 2.373 0c.865.386 1.529 1.534 2.855 3.832l2.742 4.75c1.326 2.297 1.99 3.445 1.89 4.388a2.917 2.917 0 0 1-1.186 2.055c-.766.557-2.093.557-4.745.557H6.258c-2.653 0-3.979 0-4.746-.557a2.917 2.917 0 0 1-1.186-2.055c-.099-.943.564-2.091 1.89-4.388l2.743-4.75zM8.995 10.5c-.578 0-1.035.433-1.035 1.036 0 .602.457 1.047 1.035 1.047.59 0 1.048-.445 1.048-1.047 0-.603-.458-1.036-1.048-1.036zM8.02 5.1a.417.417 0 0 1 .417-.434h1.129c.237 0 .427.197.416.434l-.255 4.167a.417.417 0 0 1-.416.399h-.62a.417.417 0 0 1-.415-.399L8.02 5.1z",fill:"#498BFF"},[])])}function rs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M16.256 15.256a.833.833 0 0 0 0-1.179L2.923.744a.833.833 0 1 0-1.179 1.179l1.594 1.593C1.32 4.948.25 6.902.25 8c0 1.875 3.125 6.25 8.75 6.25a9.83 9.83 0 0 0 4.171-.9l1.906 1.906a.833.833 0 0 0 1.179 0zm-4.357-3.178A8.309 8.309 0 0 1 9 12.583c-2.135 0-3.974-.745-5.373-1.997-1.06-.948-1.71-2.1-1.71-2.586 0-.486.65-1.638 1.71-2.586.285-.255.588-.489.909-.7l1.448 1.448A3.333 3.333 0 0 0 10.42 10.6l1.478 1.479zm4.035-.68C17.125 10.175 17.75 8.838 17.75 8c0-1.875-3.125-6.25-8.75-6.25-.87 0-1.679.104-2.426.288l1.433 1.434c.324-.037.655-.055.993-.055 2.135 0 3.974.746 5.373 1.997 1.06.948 1.71 2.1 1.71 2.586 0 .425-.497 1.358-1.329 2.219l1.18 1.179z",fill:"#498BFF"},[])])}function as(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0zm-8.538 5.504c-1.025 0-1.362-.628-1.362-1.21 0-.244.077-.611.138-.825l1.07-4.612h-1.253a.25.25 0 0 1-.243-.307l.076-.325a.35.35 0 0 1 .28-.265l2.838-.5a.5.5 0 0 1 .573.608L12.14 16.05a.189.189 0 0 0 .33.164l1.165-1.425a.322.322 0 0 1 .514.386l-.7 1.013c-.734 1.07-1.407 1.316-1.988 1.316zm.338-9.862c0 .505.398.933 1.102.933.688 0 1.193-.382 1.346-.994.03-.123.046-.26.046-.368 0-.505-.398-.933-1.102-.933-.673 0-1.193.382-1.346.994-.03.123-.046.26-.046.368z",fill:"#498BFF"},[])])}function ss(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"16",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M7.36 15.5H9.97V.5H6.173C2.353.5.345 2.464.345 5.356c0 2.31 1.101 3.67 3.065 5.072L0 15.5h2.827l3.799-5.676-1.317-.885c-1.597-1.08-2.374-1.921-2.374-3.734 0-1.597 1.123-2.676 3.26-2.676H7.36V15.5Z",fill:"#498BFF"},[])])}function ls(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("g",{"clip-path":"url(#svg-bug-icon-jsx-inline-1RCLVi9)"},[Un("path",{d:"M19.118 10.272h-2.353V6.971l1.47-1.44a.747.747 0 0 0 0-1.16.83.83 0 0 0-1.213 0l-1.507 1.406h-.478c0-2.635-2.243-4.777-5-4.777-2.794 0-5 2.142-5 4.777h-.588L2.94 4.372a.83.83 0 0 0-1.213 0 .747.747 0 0 0 0 1.159l1.507 1.44v3.301H.882c-.514 0-.882.386-.882.843 0 .492.368.843.882.843h2.353v.843c0 1.054.258 2.002.772 2.845l-1.985 1.931a.747.747 0 0 0 0 1.16.83.83 0 0 0 1.213 0l1.875-1.792c1.066.949 2.464 1.476 4.008 1.476h1.764c1.508 0 2.905-.527 3.97-1.476l1.876 1.791a.83.83 0 0 0 1.213 0 .747.747 0 0 0 0-1.159l-1.985-1.931a5.378 5.378 0 0 0 .809-2.845v-.843h2.353c.478 0 .882-.351.882-.843 0-.457-.404-.843-.882-.843Zm-9.081-7.586c1.764 0 3.235 1.405 3.235 3.09h-6.47c0-1.685 1.433-3.09 3.235-3.09Zm.845 14.049v-6.603c0-.211-.22-.422-.44-.422h-.883a.437.437 0 0 0-.441.422v6.603C6.838 16.735 5 14.979 5 12.8V7.462h10v5.339c0 2.178-1.875 3.934-4.118 3.934Z",fill:"#498BFF"},[])]),Un("defs",{},[Un("clipPath",{id:"svg-bug-icon-jsx-inline-1RCLVi9"},[Un("path",{fill:"#fff",d:"M0 0h20v20H0z"},[])])])])}function ds(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M9.117 7.349a2.5 2.5 0 0 0 0 3.535.833.833 0 1 1-1.179 1.179 4.167 4.167 0 0 1 0-5.893l2.946-2.946a4.167 4.167 0 1 1 5.893 5.892l-.91.911a.833.833 0 1 1-1.18-1.178l.911-.911a2.5 2.5 0 0 0-3.535-3.536L9.117 7.35Zm1.767 5.302a2.5 2.5 0 0 0 0-3.535.833.833 0 1 1 1.178-1.179 4.167 4.167 0 0 1 0 5.892l-2.916 2.917a4.167 4.167 0 0 1-5.893-5.892l.855-.855a.833.833 0 1 1 1.178 1.179l-.854.854a2.5 2.5 0 0 0 3.535 3.536l2.917-2.917Z",fill:"#498BFF"},[])])}function cs(){return cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},cs.apply(this,arguments)}function us(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"16",height:"10",viewBox:"0 0 16 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M3.345 4.167h11.368c.435 0 .787.37.787.833 0 .46-.35.833-.787.833H3.345l1.91 1.911a.833.833 0 1 1-1.178 1.179L.744 5.589a.833.833 0 0 1 0-1.178l3.333-3.334a.833.833 0 1 1 1.179 1.179l-1.91 1.91Z",fill:"#498BFF"},[])])}function hs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{fill:"#FC0",d:"M14.684 3.292Q17.053 5.661 17.053 9q0 3.34-2.369 5.708Q12.34 17.053 9 17.053V18q3.742 0 6.371-2.629Q18 12.742 18 9q0-3.718-2.629-6.371Q12.742 0 9 0v.947q3.34 0 5.684 2.345z"},[])])}function ps(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M30 60c16.569 0 30-13.431 30-30C60 13.431 46.569 0 30 0 13.431 0 0 13.431 0 30c0 16.569 13.431 30 30 30Z",fill:"#000","fill-opacity":".65"},[]),Un("path",{d:"M25.423 19.454c-.793-.476-1.19-.714-1.516-.684a1 1 0 0 0-.713.404C23 19.44 23 19.901 23 20.826v18.348c0 .925 0 1.388.194 1.652a1 1 0 0 0 .713.404c.326.03.723-.208 1.516-.684l15.29-9.174c.755-.453 1.132-.679 1.26-.971a1 1 0 0 0 0-.802c-.128-.292-.505-.518-1.26-.971l-15.29-9.174Z",fill:"#fff","fill-rule":"evenodd","clip-rule":"evenodd"},[])])}function ms(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("circle",{cx:"8",cy:"8",r:"8",fill:"#262626","fill-opacity":".65"},[]),Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.127 12.808H10.8v-9.6H8.368c-2.445 0-3.73 1.257-3.73 3.108 0 1.478.705 2.348 1.962 3.246l-2.183 3.246h1.81l2.43-3.633-.842-.566c-1.022-.69-1.52-1.23-1.52-2.39 0-1.022.72-1.713 2.087-1.713h.745v8.302Z",fill:"#b1b1b1"},[])])}function As(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{d:"M13 14a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V14zm9 0a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V14z"},[])])}function gs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{d:"M13.53 12.956a1 1 0 0 0-1.53.848v16.392a1 1 0 0 0 1.53.848l13.113-8.196a1 1 0 0 0 0-1.696L13.53 12.956z"},[])])}function vs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{d:"M12 19a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h3l4.317 4.317a.4.4 0 0 0 .683-.283V14.966a.4.4 0 0 0-.683-.283L15 19h-3z"},[])])}function _s(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{d:"M12 19a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h3l4.317 4.317a.4.4 0 0 0 .683-.283V14.966a.4.4 0 0 0-.683-.283L15 19h-3zm13.267 3.3a6.981 6.981 0 0 0-1.773-4.645L22 18.984a4.99 4.99 0 0 1 1.267 3.317c0 1.22-.45 2.399-1.267 3.318l1.494 1.329a6.982 6.982 0 0 0 1.773-4.647z"},[])])}function ys(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.707 30.707a1 1 0 0 0 0-1.414l-16-16a1 1 0 0 0-1.414 1.414L14.586 19H12a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h3l4.317 4.317a.4.4 0 0 0 .683-.283v-4.62l6.293 6.293a1 1 0 0 0 1.414 0zm.232-3.182-1.49-1.49a8.941 8.941 0 0 0 .818-3.734c0-2.197-.81-4.318-2.28-5.972L26.48 15a10.949 10.949 0 0 1 1.46 12.525zm-4.7-4.7 1.673 1.673a6.981 6.981 0 0 0-1.418-6.843L22 18.984a4.99 4.99 0 0 1 1.24 3.841zM20 14.965v4.62l-2.793-2.792 2.11-2.11a.4.4 0 0 1 .683.283z"},[])])}function fs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({version:"1.1"},t),[Un("path",{d:"M12 19a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h3l4.317 4.317a.4.4 0 0 0 .683-.283V14.966a.4.4 0 0 0-.683-.283L15 19h-3zm17.267 3.301c0-2.687-.99-5.28-2.787-7.301l-1.494 1.329a8.982 8.982 0 0 1 2.281 5.972 8.98 8.98 0 0 1-2.28 5.972l1.493 1.33a10.983 10.983 0 0 0 2.787-7.302z"},[]),Un("path",{d:"M25.267 22.3a6.981 6.981 0 0 0-1.773-4.645L22 18.984a4.99 4.99 0 0 1 1.267 3.317c0 1.22-.45 2.399-1.267 3.318l1.494 1.329a6.982 6.982 0 0 0 1.773-4.647z"},[])])}function Ss(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 19 19",version:"1.1"},t),[Un("path",{d:"M15 15a1 1 0 1 1 2 0v1.077c0 .76-.082 1.185-.318 1.627a2.364 2.364 0 0 1-.978.977c-.442.237-.866.319-1.627.319H2.923c-.76 0-1.185-.082-1.627-.319a2.363 2.363 0 0 1-.977-.977C.082 17.262 0 16.838 0 16.077V4.5A2.5 2.5 0 0 1 2.501 2l1.501.005a1 1 0 0 1-.006 2L2.5 4a.5.5 0 0 0-.5.5v11.577c0 .459.022.57.082.684.038.07.087.12.157.157.113.06.225.082.684.082h11.154c.459 0 .571-.022.684-.082a.363.363 0 0 0 .157-.157c.06-.113.082-.225.082-.684V15zm4-4a1 1 0 1 1-2 0 9 9 0 0 0-9-9 1 1 0 0 1 0-2c6.075 0 11 4.925 11 11zm-4 0a1 1 0 1 1-2 0 5 5 0 0 0-5-5 1 1 0 0 1 0-2 7 7 0 0 1 7 7zm-4 0a1 1 0 1 1-2 0 1 1 0 0 0-1-1 1 1 0 0 1 0-2 3 3 0 0 1 3 3z",fill:"#fff","fill-opacity":".85"},[])])}function Ts(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",style:"fill:#fff"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 9a9 9 0 1 0 18 0A9 9 0 0 0 0 9zm16 0A7 7 0 1 1 2 9a7 7 0 0 1 14 0zM5.825 6.858c0-1.863 1.54-2.997 3.483-2.997 1.917 0 3.348 1.134 3.348 2.808v.054c0 1.593-1.026 2.241-1.984 2.66l-.243.108c-.324.148-.432.324-.432.715a.351.351 0 0 1-.351.351H8.7a.486.486 0 0 1-.486-.486c0-.918.324-1.498 1.174-1.877l.243-.108c.81-.364 1.242-.661 1.242-1.336 0-.729-.62-1.215-1.566-1.215-.972 0-1.7.486-1.7 1.404a.324.324 0 0 1-.325.324H6.23a.405.405 0 0 1-.405-.405zm3.28 4.266c-.728 0-1.282.526-1.282 1.282s.554 1.283 1.283 1.283c.729 0 1.282-.527 1.282-1.283 0-.756-.553-1.282-1.282-1.282z",fill:"#fff"},[])])}function Es(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"40",height:"44",version:"1.1",style:"fill:#fff"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"m13.636 15.636.001-.001.001.001.437-.437a.575.575 0 0 1 .786-.025l1.049.92a1.67 1.67 0 0 0 2.318-.051c.286-.288.468-.679.485-1.112h.003l.091-1.392a.575.575 0 0 1 .574-.538H20V13v.001h.619c.303 0 .554.235.574.538l.09 1.392h.005c.017.435.201.828.49 1.116a1.666 1.666 0 0 0 2.33.03l1.031-.904a.575.575 0 0 1 .786.026l.437.437.002-.002v.004l.436.437a.575.575 0 0 1 .026.785l-.919 1.05a1.665 1.665 0 0 0-.442 1.133 1.669 1.669 0 0 0 1.604 1.67v.003l1.393.092c.302.02.537.27.537.573V22H29v.002h-.002v.617a.575.575 0 0 1-.537.574l-1.392.093v.001a1.666 1.666 0 0 0-1.116.49c-.302.302-.488.72-.488 1.18 0 .438.168.836.443 1.134l-.002.001.92 1.05c.2.227.189.57-.026.785l-.437.437v.002l-.438.436a.575.575 0 0 1-.785.026l-1.01-.884a1.666 1.666 0 0 0-1.173-.48 1.669 1.669 0 0 0-1.67 1.607h-.004l-.091 1.392a.575.575 0 0 1-.544.537h-1.297a.575.575 0 0 1-.543-.537l-.092-1.392h-.003a1.666 1.666 0 0 0-.49-1.12 1.666 1.666 0 0 0-1.18-.487c-.454 0-.866.181-1.167.475l-1.016.89a.575.575 0 0 1-.785-.027l-.437-.437h-.002v-.001l-.437-.437a.575.575 0 0 1-.025-.786l.92-1.049h-.002a1.669 1.669 0 0 0-.049-2.32 1.666 1.666 0 0 0-1.112-.485v-.001l-1.393-.093A.575.575 0 0 1 11 22.62V22h.001v-.619c0-.303.235-.553.538-.573l1.392-.092v-.003a1.666 1.666 0 0 0 1.605-1.67c0-.441-.171-.842-.45-1.141l-.912-1.042a.575.575 0 0 1 .026-.785l.437-.438h-.001zM23.375 22a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0z"},[])])}function bs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"40",height:"44",version:"1.1",style:"fill:#fff"},t),[Un("path",{d:"M14 23a1 1 0 1 0-2 0v7h7a1 1 0 1 0 0-2h-5v-5zm6-9a1 1 0 1 0 0 2h6v5a1 1 0 1 0 2 0v-7h-8z"},[])])}function Cs(e){let{playingState:t,volumeStatus:i,controlsVisibility:o}=e;return"idle"!==t&&"unknown"!==i&&!1!==o.mute}function Ps(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M.797 11.793 5.587 7 .796 2.207A1 1 0 0 1 2.21.793l5.497 5.5a1 1 0 0 1 0 1.414l-5.497 5.5a1 1 0 0 1-1.414-1.414Z",fill:"#fff"},[])])}function ws(e,t){if(e)return e.medicine?{text:Wu("MOTION_DRUG_DISCLAIMER",t),mandatoryHeightPortion:.05}:e.dietarysuppl?{text:Wu("MOTION_DIETARYSUPPL_DISCLAIMER",t),mandatoryHeightPortion:.1}:void 0}function Os(){var e;const{isAbuseSubmitted:t}=xS(),i=oE(),{shouldShowSkipButton:o}=Bb(),n=i_(),r=n.height>n.width,{themeEmptyParameters:a}=my(),s=ny(),{isPackshotPlaying:l}=FS(),{timeToSkip:d}=uy(),c=Vb(),{ecomShopState:u}=Nb(),{shouldUseNewSkin:h}=IS(),p=Y_(),m=UE();if(t)return{isActionButtonVisible:!1,isSkipButtonVisible:!1,isProductsButtonVisible:!1,shouldUseTwoLinesLayout:!1,isExperimentLiftButtonsUp:!1,fontSize:"",skipButtonFontSize:"",skinSize:i,disclaimerInfo:void 0,isEcomShopVisible:!1,shouldUseSmallCta:!1,isOutstream:!1,isVerticalFormat:r,ecomShop:void 0};const A="videoInCombo"===c,g=!1!==s.actionButton&&void 0!==a&&!l,v=!1!==s.skip&&!A&&o,_=v&&d!==ly,y=!1!==s.productsButton&&void 0!==(null==(e=u.ecomShop)?void 0:e.products)&&u.ecomShop.products.length>0&&!l&&("small"!==i||r),f=(v||y)&&n.width<750||"small"===i,S=h&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_LIFT_BUTTONS_UP_IN_NEW_SKIN")||"PLAYER_LIKE_SKIN"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_VARIANT"),T=n.width<Bf||n.height<300,E=.28*Mr(n)+"px";return{isActionButtonVisible:g,isSkipButtonVisible:_,isProductsButtonVisible:y,isExperimentLiftButtonsUp:S,skinSize:i,shouldUseTwoLinesLayout:f,fontSize:T?"0.8em":Ur(n)+"px",skipButtonFontSize:E,disclaimerInfo:!1===s.disclaimers?void 0:ws(m,p),isEcomShopVisible:u.isVisible&&!l,shouldUseSmallCta:T,isOutstream:A,isVerticalFormat:r,ecomShop:u.ecomShop}}function Is(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 26 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M4.667 7.333c0-3.826 2.5-6.672 6.335-6.666 3.835.006 6.331 2.844 6.331 6.666h1.19c.871 0 1.187.088 1.508.254.321.166.576.41.754.724.18.315.28.627.314 1.498l.509 12.724A3.333 3.333 0 0 1 18.278 26H3.722a3.333 3.333 0 0 1-3.331-3.467L.901 9.81c.035-.871.135-1.183.314-1.498.178-.314.433-.558.754-.724.32-.166.637-.254 1.508-.254h1.19ZM3.057 22.64v.013l-.001.014c0 .368.298.666.667.666h14.581a.667.667 0 0 0 .64-.693L18.438 10H3.562l-.505 12.64Zm7.941-19.307c-2.278-.003-3.665 1.576-3.665 4h7.334c0-2.42-1.386-3.996-3.669-4ZM5.667 13.657c0-.963.732-1.657 1.657-1.657C8.268 12 9 12.694 9 13.657c0 .963-.732 1.676-1.676 1.676-.925 0-1.657-.713-1.657-1.676ZM14.657 12c-.925 0-1.657.694-1.657 1.657 0 .963.732 1.676 1.657 1.676.944 0 1.676-.713 1.676-1.676S15.601 12 14.657 12Z",fill:"currentColor"},[])])}function ks(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 26 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.513 7.399.39 4.276a1.333 1.333 0 0 1 1.885-1.885l22.667 22.666a1.333 1.333 0 1 1-1.886 1.886l-1.684-1.684a3.319 3.319 0 0 1-2.096.741H4.723a3.333 3.333 0 0 1-3.331-3.466l.509-12.725c.035-.87.135-1.183.314-1.498.178-.314.433-.558.754-.724.16-.083.318-.146.544-.188ZM19.43 23.316a.662.662 0 0 1-.126.017H4.723a.667.667 0 0 1-.667-.666v-.027L4.563 10h1.552l2.011 2.01c-.829.092-1.458.754-1.458 1.647 0 .963.732 1.676 1.657 1.676.872 0 1.563-.608 1.663-1.46l9.443 9.443ZM19.438 10l.236 5.903 2.78 2.78-.355-8.874c-.035-.87-.135-1.183-.314-1.498a1.814 1.814 0 0 0-.754-.724c-.32-.166-.637-.254-1.508-.254h-1.19c0-3.822-2.496-6.66-6.33-6.666-2.215-.004-3.984.943-5.084 2.48l1.93 1.931c.598-1.1 1.691-1.747 3.149-1.745 2.283.004 3.669 1.58 3.669 4h-4.562L13.77 10h5.667Z",fill:"currentColor"},[])])}function Ds(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 -5 15 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M1.25 0a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5ZM5 .25a1 1 0 0 0 0 2h12a1 1 0 1 0 0-2H5Zm0 5a1 1 0 0 0 0 2h12a1 1 0 1 0 0-2H5Zm-1 6a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm-4-5a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM1.25 10a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",fill:"currentColor"},[])])}function Ns(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 -5 15 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M1.25 0a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5ZM5 .25a1 1 0 0 0 0 2h12a1 1 0 1 0 0-2H5Zm0 5a1 1 0 0 0 0 2h12a1 1 0 1 0 0-2H5Zm-1 6a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm-4-5a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM1.25 10a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",fill:"currentColor"},[])])}function Rs(){return Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Rs.apply(this,arguments)}function Vs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"24",height:"10",viewBox:"0 0 24 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M0 8c6 0 9-8 12-8s6 8 12 8v1.5H0V8Z",fill:"#2F2F32"},[])])}function Ls(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 16.003a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm2.404-11.82A1 1 0 1 1 11.818 5.6L9.414 8.003l2.404 2.404a1 1 0 0 1-1.414 1.414L8 9.417 5.596 11.82a1 1 0 0 1-1.414-1.414l2.404-2.404-2.404-2.404a1 1 0 0 1 1.414-1.415L8 6.59l2.404-2.405v-.001Z",fill:"#fff","fill-opacity":".25"},[])])}function xs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.263 4.06c2.08 2.159 3.227 4.929 3.227 7.8 0 2.871-1.146 5.641-3.227 7.8l-1.73-1.42c1.703-1.768 2.641-4.032 2.641-6.38 0-2.347-.938-4.613-2.641-6.38l1.73-1.42ZM7.61 9.26l3.964-3.9h1.33v13h-1.33l-3.97-3.9H3.64v-5.2h3.97Zm11.248 2.6a7.666 7.666 0 0 0-2.053-5.2l-1.73 1.487a5.48 5.48 0 0 1 1.467 3.712 5.48 5.48 0 0 1-1.467 3.714l1.73 1.487a7.667 7.667 0 0 0 2.053-5.2Z",fill:"#F2F2F2"},[])])}function Bs(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.61 4 2.5 5.328 7.145 9.24H3.637v5.201h3.966l3.973 3.901h1.33v-4.25L19.92 20s.3-.292.62-.64c.242-.271.582-.697.582-.697L3.61 4Zm12.907 8.412 2.002 1.686a7.556 7.556 0 0 0 .346-2.258 7.666 7.666 0 0 0-2.054-5.2l-1.732 1.487a5.48 5.48 0 0 1 1.469 3.713c0 .192-.01.383-.031.572Zm3.817 3.215 1.79 1.508A10.962 10.962 0 0 0 23.5 11.84c0-2.871-1.147-5.642-3.23-7.801l-1.73 1.42c1.704 1.767 2.643 4.034 2.643 6.381a8.918 8.918 0 0 1-.85 3.787ZM9.98 6.907l2.925 2.464V5.339h-1.33L9.981 6.907Z",fill:"#F2F2F2"},[])])}function Ms(){return Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ms.apply(this,arguments)}function Us(e){e.styles;var t=Object.assign({},e);return delete t.styles,Un("svg",Object.assign({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t),[Un("path",{d:"M2 9a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1h6a1 1 0 1 0 0-2H2V9Zm6-9a1 1 0 0 0 0 2h6v5a1 1 0 1 0 2 0V1a1 1 0 0 0-1-1H8Z"},[])])}function Fs(){return Fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fs.apply(this,arguments)}function Hs(e){const t=sc(e.children,(e=>Hs(e)));return{xmlString:e.xmlString,children:t}}function zs(e){const t={};for(const i in e)g(e,i)&&void 0!==e[i]&&(t[i]=e[i]);return t}function Ws(e){if(!o(e))return{};const{stickTo:t,stickyColorScheme:i}=e;return zs({stickTo:js(t,FP),stickyColorScheme:js(i,UP)})}function js(e,t){if("string"!==typeof e)return;if(!o(t))return;const i=e.toLowerCase();return Qt(t).indexOf(i)>-1?i:void 0}function Ys(e,t){const i=t.querySelector('Extension[type="'+e+'"]');return i?St(i):void 0}function Gs(e,t){return"true"===Ys(e,t)}function Xs(){return Xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Xs.apply(this,arguments)}function Ks(){return Ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ks.apply(this,arguments)}function qs(e,t,i){var o;const n=[],r=i.querySelector("AdSource");if(!r)throw new Ml({code:"VMAP_AD_BREAK_WITHOUT_AD_SOURCE",details:t});let a=0;if(r.hasAttribute("id")){if(a=Number(r.getAttribute("id")),!zt(a))throw new Ml({code:"INVALID_AD_BREAK_IMP_ID_ATTRIBUTE",details:t})}else n.push(new Ml({code:"NO_AD_BREAK_IMP_ID_ATTRIBUTE",details:t}));const s=i.querySelector("Extensions");if(!s)throw new Ml({code:"NO_AD_BREAK_EXTENSIONS",details:t});const l=r.querySelector("VASTAdData"),d=null!=(o=null==l?void 0:l.querySelector("VAST"))?o:void 0,c=d?(e=>(new XMLSerializer).serializeToString(e))(d):void 0,u=r.querySelector("AdTagURI"),h=St(u);if(!u||!h)throw new Ml({code:"VMAP_AD_SOURCE_WITHOUT_AD_TAG_URI",details:t});const p={adTagURI:h,adFoxParameters:void 0,inlineVast:c},m=i.getAttribute("breakType"),A=ft(i,"breakId"),g=ft(i,"timeOffset","start"),v=()=>new Ml({code:"VMAP_INCORRECT_TIME_OFFSET",details:Ks({},t,{timeOffset:g,breakIdAttribute:A})});if(-1===MP.indexOf(A))throw new Ml({code:"VMAP_UNSUPPORTED_AD_BREAK_TYPE",details:Ks({},t,{breakIdAttribute:A})});const _=function(e,t){switch(e){case"linear,nonlinear":return[new Ml({code:"LINEAR_AND_NON_LINEAR_ALLOWED_IN_AD_BREAK",details:t})];case"linear":return[];case"nonlinear":return[new Ml({code:"NON_LINEAR_AD_BREAK_IN_NOT_SUPPORTED",details:t})];default:throw new Ml({code:"INVALID_BREAK_TYPE_ATTRIBUTE",details:t})}}(m,t);let y;if(n.push(..._),"inpage"===A)y=function(e){const t=Ys("Stick",e),i=Ws({stickTo:Ys("StickTo",e),stickyColorScheme:Ys("ColorScheme",e)});return Xs({stick:"true"===t,adType:"inpage",replayMode:HP(e)},i)}(s);else if("inroll"===A)y={adType:"inroll"};else if("postPauseroll"===A)y={adType:"postPauseroll"};else if("start"===g){if(BP[g]!==A)throw v();y={adType:"preroll"}}else if("end"===g){if(BP[g]!==A)throw v();y={adType:"postroll"}}else{if(!/^\d{2}:\d{2}:\d{2}(\.\d+)?/.test(g))throw v();{if("midroll"!==A)throw v();const e=function(e,t){return Number(Ys("MaxRepeatCount",t))}(0,s),t=Lt(ft(i,"repeatAfter")),o={timeOffset:Lt(g),repeatAfter:isNaN(t)?0:t,maxRepeatCount:isNaN(e)?0:e,repeatNumber:0};y=Ks({adType:"midroll",broadcastReplace:Gs("BroadcastReplace",s)},o)}}return{adBreak:Ks({impId:a},y,e,p),errors:n,events:[]}}function Qs(){return Qs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qs.apply(this,arguments)}function Js(e){let{vmapXmlObject:t,vmapLoadParams:i,vmapAdBreaksConfig:o}=e;const n=[],r=[],a=[],{xml:s,responseText:l}=t,c={responseText:l,vmapLoadParams:i};if(null===s||void 0===s)throw new Ml(i?{code:"VMAP_EMPTY_RESPONSE",details:Qs({},i,{vmapXmlObject:t})}:{code:"VMAP_IS_EMPTY",details:{vmapXmlObject:t}});const u=s.querySelector("VMAP");if(!u)throw new Ml({code:"NO_VMAP_ROOT_NODE",details:c});const h=u.querySelectorAll("AdBreak");null!==h&&0!==h.length||r.push({name:"NoVmapAdBreaks",data:c});const p=new xP,m=s.querySelector("VMAP > Extensions");if(!m)throw new Ml({code:"NO_VMAP_EXTENSIONS",details:c});d(u.querySelectorAll("TrackingEvents"));const A=e=>{const t=m.querySelector('Extension[type="'+e+'"]');return t?St(t):""};p.isSingleVideoSession="true"===A("SingleVideoSession"),p.isUniformat="true"===u.getAttribute("ya-uniformat");const g={sessionId:A("SessionID"),vastTimeout:parseInt(A("VASTTimeout"),10)};for(let d=0;d<h.length;d++)try{const{adBreak:e,errors:t,events:i}=qs(Qs({},g,o),c,h[d]);p.adBreaks.push(e),n.push(...t),r.push(...i)}catch(v){n.push(v)}return a.push({name:"CreateVmapFromXMLString",data:{vmap:l},sensors:{uniformat:p.isUniformat}}),{vmap:p,errors:n,events:r,valuesEvents:a}}function Zs(){return Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Zs.apply(this,arguments)}function $s(){return $s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},$s.apply(this,arguments)}function el(e){if(!o(e))return{};const{partnerId:t,category:n,vmapId:r,vmapScenarioId:a,impId:s,videoContentId:l,additionalParams:d,vmap:c,hasPreroll:u}=e;if(void 0!==s&&!zt(s))throw new Ml({code:"INVALID_CONFIG_IMP_ID_VALUE",details:{config:e}});if(void 0!==r&&!zt(r))throw new Ml({code:"INVALID_CONFIG_VMAP_ID_VALUE",details:{config:e}});if(void 0!==c&&!i(c))throw new Ml({code:"INVALID_CONFIG_INLINE_VMAP_VALUE",details:{config:e}});if(void 0!==u&&"boolean"!==typeof u)throw new Ml({code:"INVALID_CONFIG_HAS_PREROLL_VALUE",details:{config:e}});if(void 0!==a&&!zt(a))throw new Ml({code:"INVALID_CONFIG_VMAP_SCENARIO_ID_VALUE",details:{config:e}});return $s({},function(e){const t=o(e)?e:{};return zs({vmapLoadTimeout:void 0===t.vmapLoadTimeout?void 0:Number(t.vmapLoadTimeout)})}(e),{vmap:c,hasPreroll:u,partnerId:void 0===t?void 0:Number(t),category:void 0===n?void 0:Number(n),impId:s,vmapId:r,vmapScenarioId:a,videoContentId:"string"===typeof l?l:void 0,additionalParams:Yi(d)})}function tl(){return tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},tl.apply(this,arguments)}function il(e){if(!o(e))return{};const n=function(e){if(!o(e))return{};const{wrapperMaxCount:n}=e;if(void 0!==n&&!Bt(n))throw new Ml({code:"INVALID_WRAPPER_MAX_COUNT",details:{wrapperMaxCount:n}});const r={wrapperMaxCount:n};if(void 0!==e.adFoxParameters){const n=o(a=e.adFoxParameters)?ai(a)?void 0===a.containerId||i(a.containerId)?t(a.ownerId)?0===a.ownerId.length?"ADFOX_PARAMETERS_OWNER_ID_IS_EMPTY_STRING":void 0:"ADFOX_PARAMETERS_OWNER_ID_IS_NOT_A_STRING":"ADFOX_PARAMETERS_CONTAINER_ID_IS_INVALID":"ADFOX_PARAMETERS_IS_NOT_SERIALIZABLE":"ADFOX_PARAMETERS_IS_NOT_AN_OBJECT";if(n)throw new Ml({code:n,details:{adConfig:e}});r.adFoxParameters=e.adFoxParameters}var a;return r}(e),r=el(e),s=function(e){if(!o(e))return;let t,i;return t=Array.isArray(e.videoGenreId)?sc(e.videoGenreId,String):void 0===e.videoGenreId?void 0:String(e.videoGenreId),i=Array.isArray(e.videoGenreName)?sc(e.videoGenreName,String):void 0===e.videoGenreName?void 0:String(e.videoGenreName),{width:void 0===e.width?void 0:String(e.width),height:void 0===e.height?void 0:String(e.height),videoContentId:void 0===e.videoContentId?void 0:String(e.videoContentId),videoContentName:void 0===e.videoContentName?void 0:String(e.videoContentName),videoPublisherId:void 0===e.videoPublisherId?void 0:String(e.videoPublisherId),videoPublisherName:void 0===e.videoPublisherName?void 0:String(e.videoPublisherName),videoGenreId:t,videoGenreName:i,musicArtistId:void 0===e.musicArtistId?void 0:String(e.musicArtistId),musicGenreId:"string"===typeof e.musicGenreId?e.musicGenreId:void 0,musicGenreName:"string"===typeof e.musicGenreName?e.musicGenreName:void 0,tagsList:Array.isArray(e.tagsList)?sc(e.tagsList,String):void 0,extParam:void 0===e.extParam?void 0:String(e.extParam),targetRef:void 0===e.targetRef?void 0:String(e.targetRef),distrId:void 0===e.distrId?void 0:String(e.distrId)}}(e),l=function(e){if(!o(e))return;const{metaRequestIndex:t,metaImpIdRequestIndex:i}=e;if(void 0!==t&&!Bt(t))throw new Ml({code:"INVALID_CONFIG_META_REQUEST_INDEX_VALUE",details:{config:e}});if(void 0!==i&&!Bt(i))throw new Ml({code:"INVALID_CONFIG_META_IMP_ID_REQUEST_INDEX_VALUE",details:{config:e}});return{metaRequestIndex:t,metaImpIdRequestIndex:i}}(e),d=function(e){const t={};return o(e)?(V(["full","creative","limited","domain"],e.omidAccessMode)&&(Wc.log({name:"OmidAccessModeIsSetThroughAdConfig",data:{accessMode:e.omidAccessMode}}),t.omidAccessMode=e.omidAccessMode),t):t}(e);return tl({},n,r,s,l,d,{vastUrl:void 0===e.vastUrl?void 0:String(e.vastUrl),adBreakType:Ko(e.adBreakType)?e.adBreakType:void 0,vast:e.hasOwnProperty("vast")&&i(e.vast)?String(e.vast):void 0,desiredBitrate:wt(e.desiredBitrate),secureMode:GP(e),preferableAdSize:WP(e),loadHarmlessVastCallback:a(e.loadHarmlessVastCallback)?e.loadHarmlessVastCallback:void 0})}function ol(e){return i(e)?e:"0"}function nl(e){const t=o(e)?e:{};return zs({vastTimeout:void 0===t.vastTimeout?void 0:Number(t.vastTimeout)})}function rl(){return rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},rl.apply(this,arguments)}function al(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}function sl(e){let t={};try{const i=Md({localStorage:e},ZP);null!==i&&(t=JSON.parse(i))}catch(o){}const i={};return b(t,((e,t)=>{he(e)&&(i[t]=e)})),i}function ll(){return ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ll.apply(this,arguments)}function dl(e){let{config:t,adPlacementOptions:i,videoSlot:o,win:n}=e;const{partnerId:r}=t;if(!r)throw new Ml({code:"VMAP_CONFIG_WITHOUT_PARTNER_ID",details:void 0});const a=((e,t,i,o,n)=>{const{category:r,vmapScenarioId:a,hasPreroll:s,targetRef:l}=e,d=function(e){let{vmapId:t,category:i}=e;return t&&i?{"vmap-id":String(t),"video-category-id":String(i)}:t?{"vmap-id":String(t),"video-category-id":void 0}:{"vmap-id":void 0,"video-category-id":String(i)}}(e),c=gm(e);let u;try{u=new $P}catch(v){}let h=0;"number"===typeof r&&u&&(h=u.getWatchedTimeSinceAd({category:r}));const p=C(n),m=n.document.referrer;let A;A=l||(p===Am?m:p);const g="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ADD_LAYOUT_CONFIG_TO_VMAP_REQUEST")?function(e){var t,i,o,n,r,a,s,l;const{videoSlot:d,preferableAdSize:c,adPlacementOptions:u,useMinimalSizeRestriction:h=!1}=e,p=void 0===(null==d||null==(t=d.ownerDocument)?void 0:t.defaultView)||null===(null==d||null==(i=d.ownerDocument)?void 0:i.defaultView)?e.win:d.ownerDocument.defaultView,m=void 0===d?void 0:ph(d),A=null!=(o=null==u?void 0:u.screenSize)?o:{width:p.innerWidth,height:p.innerHeight},g=h?{width:320,height:Bg}:{width:0,height:0},v=Math.round((null==c?void 0:c.width)||(null==u||null==(n=u.size)?void 0:n.width)||(null==m?void 0:m.width)||g.width),_=Math.round((null==c?void 0:c.height)||(null==u||null==(r=u.size)?void 0:r.height)||(null==m?void 0:m.height)||g.height),y=function(e,t,i){if(void 0!==e)return e.visibility>.5?1:0;if(void 0===t)return 0;const{width:o,height:n,top:r,left:a,right:s,bottom:l}=t;let d=1;const c=Math.max(Math.min(s,i.width)-Math.max(a,0),0),u=Math.max(Math.min(l,i.height)-Math.max(r,0),0);return o?d*=c/o:(a<0||s>i.width)&&(d=0),n?d*=u/n:(r<0||l>i.height)&&(d=0),d>=.5?1:0}(u,m,A),f=h&&!Boolean((null==c?void 0:c.width)||(null==u||null==(a=u.size)?void 0:a.width)||(null==m?void 0:m.width)),S=h&&!Boolean((null==c?void 0:c.height)||(null==u||null==(s=u.size)?void 0:s.height)||(null==m?void 0:m.height));(f||S)&&Wc.log({name:"UsedDefaultSizeForLayoutConfig",data:{isDefaultWidthUsed:f,isDefaultHeightUsed:S,preferableAdSize:c,adPlacementOptions:u,videoSlotSize:m}});const T=void 0===m?{top:0,left:0}:function(e,t){const i=function(e){return{left:void 0===e.pageXOffset?e.document.documentElement.scrollLeft:e.pageXOffset,top:void 0===e.pageYOffset?e.document.documentElement.scrollTop:e.pageYOffset}}(e);return{left:Math.round(t.left+i.left),top:Math.round(t.top+i.top)}}(p,m),E=null!=(l=null==u?void 0:u.devicePixelRatio)?l:Eo(p);return(A.width<v||A.height<_)&&Wc.log({name:"LayoutConfigWinSizeIsSmallerThanVideoNodeSize",data:{winSize:A,videoSlotSize:{width:v,height:_}}}),{win_width:Math.round(A.width),win_height:Math.round(A.height),pixel_ratio:E,bandwidth:ln(p),width:v,height:_,w:v,h:_,left:T.left,top:T.top,visible:y,req_no:tw++}}({win:n,adPlacementOptions:i,preferableAdSize:o,videoSlot:t,useMinimalSizeRestriction:"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_MINIMAL_SIZE_INSTEAD_OF_ZERO_FOR_LAYOUT_CONFIG")}):void 0;return void 0!==g&&Wc.log({name:"VmapRequestWithLayoutConfig",data:{layoutConfig:g}}),ll({},c,d,{[iu]:iw(s),[tu]:void 0===a?void 0:String(a),[ou]:String(Math.floor(h)),client_type:"html"},"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ENABLE_VAST_IN_VMAP")?{"target-ref":A,"inline-preroll-vast-in-vmap":"1"}:{},void 0===g?{}:{"layout-config":JSON.stringify(g)})})(t,o,i,t.preferableAdSize,n),s=De({url:R(""+ew+r,a),ignoreAbd:!0,options:i,win:n}),l=kc(n);return"function"===typeof l?l(R(s,{abd:"1"})):s}function cl(){return cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},cl.apply(this,arguments)}async function ul(){let e;if(1===arguments.length)e=arguments.length<=0?void 0:arguments[0];else{const t=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2],n=el(t),r=dl({config:n,adPlacementOptions:i,videoSlot:o,win:window}),{vmapLoadTimeout:a}=n;let s=3e3;void 0!==a&&0!==a&&(s=a),e={url:r,vmapLoadParams:{url:r,config:t,timeout:s},timeout:s}}const{url:t,vmapLoadParams:i,timeout:o}=e,n=Date.now();let r;Wc.log({name:"VmapLoadStart",data:i});try{const e=!a(kc(window)),i="boolean"===typeof tc.hardcodedParams.adsdkwithcredentials?tc.hardcodedParams.adsdkwithcredentials:e;r=await st({url:t,data:null,timeout:o,withCredentials:i})}catch(d){const e=Kh({thrownError:d,errorCode:"VMAP_LOAD_ERROR",errorDetails:i,timeoutCode:"VMAP_LOAD_TIMEOUT",timeoutDetails:i});throw Wc.error({error:e}),e}const{responseStatus:s,responseText:l}=r;if(200!==s){const e=QP(l);if(he(e))throw new Ml({code:"BAD_PARTNER_OR_DOMAIN_FOR_VMAP_REQUEST",details:cl({},i,{responseStatus:s,disabledPageId:e})});throw new Ml({code:"INVALID_VMAP_RESPONSE_STATUS",details:cl({},i,{responseStatus:s,responseText:r.responseText})})}try{const e=nl(i.config),{vmap:t,events:o,valuesEvents:a,errors:s}=Js({vmapXmlObject:r,vmapLoadParams:i,vmapAdBreaksConfig:e});Xt(s),Jl(o,(e=>{Wc.log(cl({},e,{probability:1}))})),Jl(a,(e=>{Wc.log(e)}));const l=cl({},it(sc(MP,(e=>["adBreak_"+e,!1]))),it(sc(t.adBreaks,(e=>["adBreak_"+e.adType,!0]))));return Wc.log({name:"VmapLoadSuccess",data:i,values:{adBreaksCount:t.adBreaks.length,timeSpent:Date.now()-n},sensors:l}),t}catch(d){throw Wc.errorToStats(d),d}}function hl(e){return e.getBoundingClientRect().bottom>e.ownerDocument.body.getBoundingClientRect().bottom}function pl(e){var t;if(!e)return!1;const i=null!=(t=(e.ownerDocument||document).defaultView)?t:window;return Boolean(i.Element)&&e instanceof i.Element}function ml(e,t){void 0===t&&(t=40);const i=e.ownerDocument,{body:o}=i,n=i.documentElement,r=i.defaultView,a=Math.max(o.scrollHeight,o.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return e===n||e===o?a-((r.pageYOffset||n.scrollTop)-(n.clientTop||0)+r.innerHeight)<t:!(e.clientHeight>0&&e.scrollHeight>e.clientHeight&&e.scrollHeight-(e.scrollTop+e.clientHeight)>t)}function Al(e){const{parentElement:t}=e;if(!t)return!1;const i=t.parentElement;if(!i)return!1;let o=i;for(;Boolean(o);){if(pl(o)&&!ml(o))return!1;o=o.parentNode||o.host}return!0}function gl(e,t){if(sw)return!1;const{left:i,right:o,top:n,bottom:r}=ph(e),s=o-i,l=r-n,d=e.ownerDocument!==document;let c;if(d){const t=Array.prototype.slice.call(document.getElementsByTagName("iframe"),0);c=Nl(t,(t=>t.contentWindow===e.ownerDocument.defaultView))}return!Gc(t,(t=>{let[o,r]=t,u=i+(s-1)*(1+o)/2,h=n+(l-1)*(1+r)/2;if(c){const{left:e,top:t}=ph(c);u+=e,h+=t}const p=document.elementFromPoint(u,h);if(!p||e===p||e.contains(p))return!0;if(d&&"IFRAME"===p.tagName&&p.contentWindow&&p.contentWindow.document.body.contains(e))return!0;if(a(e.getRootNode)){if(vl(p,e))return!0;if(_l(p,e))return!0}return!1}))}function vl(e,t){const i=e.getRootNode();return!!Boolean(null==i?void 0:i.host)&&(!!t.contains(i.host)||vl(i.host,t))}function _l(e,t){const i=t.getRootNode();return!!Boolean(null==i?void 0:i.host)&&(e===i.host||_l(e,i.host))}function yl(e){return e[uw]}function fl(){return fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},fl.apply(this,arguments)}function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Sl.apply(this,arguments)}function Tl(e){let{placeholderElement:t,placeholderWidth:i,adContentSize:o}=e;const n=function(e){let{placeholderWidth:t,adContentSize:i}=e;if(!i)return;const{width:o,height:n}=i;if(!he(o)||!he(n))return;const r=n/o;return Math.floor(t*r)}({placeholderWidth:i,adContentSize:o});void 0!==n?o&&(oc("inPage: adjust ad height to adContentSize=["+JSON.stringify(o)+"] nextHeight=["+n+"]"),L_(t,{height:n+"px"},!0)):oc("inPage: skip adjust placeholder to unknown ad size")}function El(){return El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},El.apply(this,arguments)}function bl(){return bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},bl.apply(this,arguments)}const Cl={}.toString,Pl=/\[object (\w+)\]/,wl=e=>{const t=Cl.call(e);if(!t)return null;const i=t.match(Pl);if(!i)return null;return i[1]||null},Ol=e=>e instanceof Error||"Error"===wl(e),Il=e=>!!o(e)&&!!t(e.name)&&!!t(e.message),kl=e=>({name:e.name,message:e.message,stack:e.stack}),Dl=[].find,Nl=n(Dl)?(e,t)=>Dl.call(e,t):(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];if(t(o,i,e))return o}},Rl=e=>{try{return"display"in r(e)}catch(Bv){return!1}};var Vl=e(3438),Ll=e.n(Vl);const xl="DEFAULT_ERROR_MESSAGE",Bl="?:?:?";class Ml extends Error{constructor(){const e=2===arguments.length?arguments.length<=0?void 0:arguments[0]:void 0,t=2===arguments.length?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],i=Il(e)||"object"===typeof e&&e&&"code"in e&&"details"in e?e:{message:String(e||xl)};super(),this.originalError="object"===typeof e&&e?e:{unknown:e,unknownStr:String(e)},Ll()(this,Ml.prototype);const o=t.code||i.code||i.id||0,n=t.message||i.message||xl;this.message="VAS Error ["+o+"]"+(n?"["+n+"]":""),this.code=o,this.details=t.details||i.details||"";const r=i.stack||function(e){const{url:t,line:i,col:o,fileName:n,columnNumber:r,lineNumber:a}=e;return(t||n||"?")+":"+(i||a||"?")+":"+(o||r||"?")}(i);let a=r===Bl?this.stack:r;if(a&&a!==Bl)this.stack=a;else if(!this.stack)try{throw new Error(this.message)}catch(Bv){this.stack=a=Bv.stack||Bl}this.toString=()=>s(this.toJSON()),this.toJSON=()=>({originalError:this.originalError,message:this.message,code:this.code,details:this.details,stack:a})}}const Ul=e=>{if(Ol(e))return e;const t=String(e)||"DEFAULT_ERROR_MESSAGE";return new Error(t)},Fl=e(5335),Hl=(e,t,i)=>{const o=new Array(e.length);for(let n=0;n<e.length;n++)o[n]=t.call(i,e[n],n,e);return o},zl=["","webkit","moz","o","ms"],Wl=["","-webkit-","-ms-","-moz-","-o-"],jl=Hl(Wl,(e=>"("+e+"any-pointer:coarse)")).join(","),Yl=Hl(Wl,(e=>"("+e+"touch-enabled)")).join(","),Gl=(void 0===Xl&&(Xl=window),function(e){void 0===e&&(e=window);const t=function(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(Bv){return""}}(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const i=t.replace(/\(.+?\)/gi,"").split(" ").map((e=>e.trim().split("/")[0])).filter((e=>e&&"mobile"!==e));return 4===i.length&&"mozilla"===i[0]&&"applewebkit"===i[1]&&"version"===i[2]&&"safari"===i[3]}(Xl)||function(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1}(e)}(Xl)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&p(e)}(Xl));var Xl;const Kl=m(document.documentElement),{length:ql}=Kl,Ql=ql>0?Kl[ql-1].ownerDocument.defaultView:window,Jl=(e,t,i)=>{for(let o=0;o<e.length;o++)t.call(i,e[o],o,e)},Zl=function(e,t){let i=e.isArray;if(!n(i)){const t=i;try{delete e.isArray;const o=e.isArray;"function"===typeof o&&(i=o),e.isArray=t}catch(Bv){}}return i}(Array),$l=Boolean(Zl)?e=>Zl.call(Array,e):e=>"Array"===wl(e),ed=["expFlags"],td={testIds:"",flags:{}},id=A((()=>{try{return __UAAS_CFG__}catch(e){return e}})),od=e=>{if(Ol(e))return{error:e,config:td};try{const i=o(e)?e:JSON.parse(""+(e||"")),n=(e=>!!o(e)&&!(!("expFlags"in e)||!$l(e.expFlags)))(i)?(e=>{const t=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,ed),i={},n={};return Jl(e.expFlags,(e=>{Jl(e,(e=>{let{CONTEXT:{FLAGS:t},TESTID:r}=e;o(t)&&Jl(v(t),(e=>{var o;const a=t[e];i[e]=a,n[e]=null!=(o=n[e])?o:[],n[e].push({value:a,testId:r[0]})}))}))})),_({flags:i,flagsMap:n},t)})(i):i;if(!((e,i)=>{if(!o(i))throw new Error("Parsed replaced macro is not an object: "+e);if(function(e){if(void 0!==e){if(!t(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length)for(const t of e.split(";")){const i=t.split(",");if(3!==i.length)throw new Error("testIdParts length error ["+e+"]");const[o,,n]=i;if(0===o.trim().length)throw new Error("testId length error ["+e+"]");if(0===n.trim().length)throw new Error("testId bucket length error ["+e+"]")}}}(i.testIds),!("flags"in i)||!o(i.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0})(String(e),n))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:n}}catch(i){return{error:i,config:td}}},nd=A((e=>od(e||id()))),rd=!f(Math.random)||Math.random()===Math.random(),ad=Date&&c(Date.now)?()=>Date.now():()=>(new Date).getTime(),sd="undefined"===typeof window?void 0:window.performance,ld=sd&&c(sd.now),dd=sd&&sd.timing&&sd.timing.navigationStart?sd.timing.navigationStart:ad();let cd=0;const ud=ld?()=>sd.now():()=>(()=>{const e=ad()-dd;return cd=Math.max(e,cd),cd})(),hd=2147483647;let pd=Date.now()*ud()%hd;const md=rd?function(){return pd=16807*pd%hd,(pd-1)/2147483646}:function(){return Math.random()};let Ad;try{Ad="679916"}catch(Bv){Ad="INVALID_BUILD_VERSION"}const gd=Ad,vd="VAS",_d=e=>T(e.substr(-4),4,"0"),yd=()=>T(Date.now().toString().slice(0,10),10,"0"),fd=function(e,t,i){let o=0;for(arguments.length<3&&(o=1,i=e[0]);o<e.length;o++)i=t(i,e[o],o,e);return i},Sd=e=>{const t=[];for(;e;)try{if(C(e),t.push(e),e.parent===e)break;e=e.parent}catch(Bv){break}return t},Td=function(e,t){let i=e.isArray;if(!f(i)){const t=i;try{delete e.isArray;const o=e.isArray;"function"===typeof o&&(i=o),e.isArray=t}catch(Bv){}}return i}(Array),Ed=Boolean(Td)?e=>Td.call(Array,e):e=>"Array"===wl(e);class bd{constructor(e){this.cache=e}get(e){return this.cache[e]}has(e){return e in this.cache}set(e,t){this.cache[e]=t}}const Cd=function(e,t,i){return void 0===t&&(t=e=>e),void 0===i&&(i=new bd({})),function(){const o=t.apply(this,arguments);if(i.has(o))return i.get(o);const n=e.apply(this,arguments);return i.set(o,n),n}},Pd=document.createElement("a"),wd=(Cd((e=>O({},I(e)))),/^(android-app:|chrome-extension:)/),Od=e=>{try{return decodeURIComponent(e)}catch(Bv){return e}},Id=(e,t)=>t.map((t=>e+"[]="+encodeURIComponent(t))).join("&"),kd="aim-banner-id",Dd="aim-design-id",Nd="aim-design-name",Rd="aim-subdesign-id",Vd=v({adsdkver:0,adsdkecmaver:0,adsdktracelogs:0,adsdksecuremode:0,adsdkwithcredentials:0,adsdkabflags:0,adsdkuaas:0,[kd]:0,[Dd]:0,[Nd]:0,[Rd]:0,adsdkhoneypotforced:0,adsdkgrforced:0,vasnetworklogs:0,vasconsolelogs:0,vasdebug:0,vasfulldebug:0,adsdkdebug:0}),Ld={Unsafe:0,Safe:0,ForceSafe:0,OnlyYandexCreatives:0},xd=v(Ld),Bd={adsdkver:e=>i(e)?e:void 0,adsdkecmaver:e=>{const t=null==e?void 0:e.toUpperCase();return"ES2017"===t||"ES5"===t?t:void 0},adsdktracelogs:L,adsdksecuremode:e=>e&&V(xd,e)?e:void 0,adsdkwithcredentials:e=>{const t=e?(""+e).toLowerCase():void 0;return"true"===t||"false"!==t&&void 0},adsdkabflags:x,adsdkuaas:x,[kd]:x,[Dd]:x,[Nd]:x,[Rd]:x,adsdkhoneypotforced:L,adsdkgrforced:L,vasnetworklogs:L,vasconsolelogs:L,vasdebug:L,vasfulldebug:e=>"false"!==e&&Boolean(e),adsdkdebug:L},Md=(e,t)=>{try{return e.localStorage.getItem(t)}catch(i){return null}},Ud=new Set(Vd),Fd=(z(window),e=>o(e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__));let Hd=document.currentScript;if(!Hd){const e=W(document.getElementsByTagName("script"));Hd=Nl(e,Fd),Hd||(Hd=e[e.length-1])}const zd=Hd,Wd=zd?zd.src:"",jd="InPage",Yd=d,Gd=d,Xd=d,Kd=e=>{let{propertyName:t}=e;return{call:e=>Yd(Y({propertyName:t},e)),subscribe:e=>Xd(Y({propertyName:t},e)),wait:e=>(e=>{let{propertyName:t}=e;return new Promise((e=>{Xd({callback:function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e(i)},propertyName:t})}))})(Y({propertyName:t},e)),waitUntil:e=>(e=>{let{propertyName:t,comparator:i}=e;return new Promise((e=>{Xd({propertyName:t,callback:function(){i(...arguments)&&e()}})}))})(Y({propertyName:t},e)),clear:e=>Gd(Y({propertyName:t},e))}};Kd({propertyName:"DEBUG_LOG_GLOBAL_CALLBACK_PROPERTY_NAME"});const qd=zd?zd.__AD_SDK_SCRIPT_SESSION_PARAMETERS__:void 0;zd&&delete zd.__AD_SDK_SCRIPT_SESSION_PARAMETERS__;const Qd=["a","n.ya","nd","ex.ru"].join(""),Jd=["y","a","nde","x.ru"].join(""),Zd=["ya","sta","tic.net"].join(""),$d=["ver","ify.y","a","nde","x.ru"].join(""),ec=[Jd,Qd,Zd],tc=K(window),ic=tc.VSID,oc=G(tc.hardcodedParams.adsdktracelogs,tc.hardcodedParams.vasconsolelogs);let nc=!1,rc=!1,ac=!1;try{const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>nc=!0}),Object.defineProperty(t,"passive",{get:()=>rc=!0}),Object.defineProperty(t,"capture",{get:()=>ac=!0}),e.addEventListener("click",d,t)}catch(Mw){}const sc=(e,t,i)=>{const o=new Array(e.length);for(let n=0;n<e.length;n++)o[n]=t.call(i,e[n],n,e);return o},lc=["pagehide","unload"],dc=Boolean(window.location.ancestorOrigins),cc=Z(window),uc=P(document.documentElement),{length:hc}=uc,pc=hc>0?uc[hc-1].ownerDocument.defaultView:window,mc=function(){const e=Hl(uc,(e=>e.ownerDocument)),{length:t}=e,i=(t?e[t-1]:document).defaultView;return!!i&&i.self!==i.parent}(),{topAncestor:Ac,isTrusted:gc}=function(e){void 0===e&&(e=window);const t=Z(e);if(t.length>0)return{topAncestor:t[t.length-1],isTrusted:!0};const{location:i,referrer:o}=$(e.document),n=mc?o:i,r=!mc||z(pc).length<2,{protocol:a,hostname:s,host:l,port:d}=I(n);return{topAncestor:k({protocol:a,hostname:s,host:l,port:d,originalPath:"",href:"",pathname:"",search:"",hash:""}),isTrusted:r}}(),vc=Ac,_c=gc,yc=200,fc=e=>f(e.navigator.sendBeacon),Sc=fc(window),Tc="https://log.strm.yandex.ru/log",Ec=tc.hardcodedParams.vasnetworklogs||tc.VAS_UAAS_CONFIG.isInternalNetwork||!1,bc=Ec?1:.01,Cc=Ec?1:.001,Pc=(e,t)=>{for(const i of t.split(".")){if(!o(e)){e=void 0;break}e=e[i]}return e},wc="__ADB_CONFIG__",Oc=o(wc)&&wc.fn&&a(wc.fn.encodeUrl)?wc.fn.encodeUrl:void 0,Ic=void 0===Oc?void 0:e=>Oc(e),kc=e=>{if(Ic)return Ic;const t=Sd(e);for(;t.length;){const e=t.pop();if(!e)continue;const i=Pc(e,"ya.videoAd.encodeUrl");if(a(i))return i}},Dc=Sd,Nc=function(e){const t=Dc(e);for(const i of t){const{BANNER_TYPE_FROM_NANPU:e}=i;if("string"===typeof e&&e.length>0)return e}}(window),Rc=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0,Vc=(e,t,i)=>{const o=[];for(let n=0;n<e.length;n++){const r=e[n];t.call(i,r,n,e)&&o.push(r)}return o};class Lc{constructor(e){this.rootFields={},this.error=e=>{let{error:t}=e;const i=ne(t)?t:new Ml(t);this.push({eventName:String(i.code),eventType:"error",data:i,probability:1})},this.log=e=>{const{name:t,probability:i=bc}=e,{data:o,values:n,sensors:r,dailySensors:a}=e;this.push({eventName:t,eventType:"values",data:o,probability:i,values:n,sensors:r,dailySensors:a})},this.setRootFields=e=>{const t=le(e);Jl(t,(e=>{let[t,i]=e;void 0===i?delete this.rootFields[t]:this.rootFields[t]=i}))},this.getRootFields=()=>this.rootFields,this.errorToStats=e=>{const t=ne(e)?e:new Ml(Ul(e));this.push({eventName:String(t.code),eventType:"error",data:t,probability:1})},this.params=e}push(e){let{eventName:t,eventType:i,data:o,probability:n,values:r,sensors:a,dailySensors:l}=e;if(this.params.rnd>=n)return;const{version:d}=this.params,c={version:d,data:o,eventName:t,eventType:i,values:r,sensors:a,dailySensors:l};oc("[Stats] "+i+"="+t,c);const u=Tc+"?VAS="+d+"&event="+t,h=s(this.createFullStatsObject(c));this.sendData(u,h)}sendData(e,t){const i=function(e,t){return!!Sc&&window.navigator.sendBeacon(e,t)}(e,t);i||oe({url:e,data:t,method:"POST"})}createFullStatsObject(e){const{version:t,eventName:o,eventType:n,data:r,sensors:s,dailySensors:l}=e,{location:d,referrer:c}=$(document),u=re(window)?ae(window):void 0,h=a(kc(window)),{testIds:p}=this.params,m=i(p)?Vc(sc(p.split(";"),(e=>Number(e.split(",")[0]))),he):[];return pe({},this.params.AdditionalStatsRootFields,{bannerTypeFromNanpu:Nc,bundleName:jd,abFlags:this.params.AB_FLAGS,iCookie:this.params.iCookie,testIds:m,slots:p},this.rootFields,{service:"VAS",values:e.values,sensors:ue(s),dailySensors:ue(l),timestamp:Date.now(),eventType:n,eventName:o,data:r,vsid:this.params.vsid,version:t,location:C(window),topLocation:d,topAncestor:vc,isTopAncestorUndetermined:!_c||void 0,ancestorOrigins:cc,documentIsVisible:de(document),referrer:window.document.referrer,topReferrer:c,currentScriptSrc:Wd,secureIFrame:mc,isVideoADB:h,rnd:this.params.rnd,topDocumentFocus:se(),pcodeActiveTestIds:this.params.AB_FLAGS_STORE.getActiveTestIds(),deviceOrientation:u})}}const xc=(e,t)=>{for(let i=0;i<e.length;i++)if(t(e[i],i,e))return i;return-1};Kd({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME"});class Bc{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.on.push(...t),()=>{this.remove(...t)}}addOne(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.once.push(...t),()=>{this.remove(...t)}}promise(){return new Promise((e=>{this.addOne(e)}))}dispatch(e){const{once:t}=this;this.once=[],ge(this.on,e),ge(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.on=Vc(this.on,(e=>t.indexOf(e)<0)),this.once=Vc(this.once,(e=>t.indexOf(e)<0))}}class Mc{constructor(e,t){var o=this;this.activeTestIds=[],this.externalActiveTestIds=new Set,this.initialActiveTestIds=[],this.activeFlags=new Set,this.getFlagValueAndActivateTestId=e=>{var t;const i=this.abFlags[e],o=i?null==(t=this.flagToTestIdMap[e])?void 0:t[i]:void 0;if(o)for(const n of o){const t=this.testIdMap.get(n);t&&(this.activateTestId(t),this.activateFlag(e))}return i},this.getActiveTestIds=()=>{return e=[...this.activeTestIds,...Array.from(this.externalActiveTestIds)],Vc(e,((e,t,i)=>i.indexOf(e)===t));var e},this.activateExternalTestIds=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t){const[e]=r.split(",");if(!i(e))continue;const t=o.testIdMap.get(e);i(t)&&o.externalActiveTestIds.add(t)}},this.__isFlagActive=e=>this.activeFlags.has(e),this.__setAbFlags=e=>{this.abFlags=e},this.__restoreAbFlags=()=>{this.abFlags=this.initialAbFlags},this.__setActiveTestIds=e=>{this.initialActiveTestIds=this.activeTestIds,this.activeTestIds=e},this.__restoreActiveTestIds=()=>{this.activeTestIds=this.initialActiveTestIds},this.onTestIdActivated=new Bc,this.abFlags=t,this.initialAbFlags=t;const{flagsMap:n,testIds:r}=e;if(this.testIdMap=new Map,i(r))for(const i of r.split(";")){const[e]=i.split(",");this.testIdMap.set(e,i)}this.flagToTestIdMap=(e=>void 0===e?{}:ve(e,(e=>fd(e,((e,t)=>{var i;let{value:o,testId:n}=t;const r=null!=(i=e[o])?i:[];return r.push(n),e[o]=r,e}),{}))))(n)}activateTestId(e){V(this.activeTestIds,e)||(this.activeTestIds.push(e),this.onTestIdActivated.dispatch(e))}activateFlag(e){this.activeFlags.has(e)||this.activeFlags.add(e)}getNumberFlagValueAndActivateTestId(e){const t=this.getFlagValueAndActivateTestId(e),i=Number(t);return me(i)?i:void 0}}const Uc=(null==qd?void 0:qd.AB_FLAGS_STORE)||function(){const e=new Mc(tc.VAS_UAAS_CONFIG,tc.AB_FLAGS);e.getFlagValueAndActivateTestId("ADSDKVER");const t=null==qd?void 0:qd.ActiveTestIds;return t&&e.activateExternalTestIds(...t),e}();let Fc;!function(e){e[e.DO_NOTHING=0]="DO_NOTHING",e[e.CALL_NORMALLY=1]="CALL_NORMALLY",e[e.DEPENDS_ON_AB_FLAGS=2]="DEPENDS_ON_AB_FLAGS"}(Fc||(Fc={}));class Hc{get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}static addErrorHandler(e){return Hc.errorHandlers.push(e),()=>{const t=xc(Hc.errorHandlers,(t=>t===e));-1!==t&&Hc.errorHandlers.splice(t,1)}}static addCallAfterDestroyErrorHandler(e){return Hc.callAfterDestroyErrorHandlers.push(e),()=>{const t=xc(Hc.callAfterDestroyErrorHandlers,(t=>t===e));-1!==t&&Hc.callAfterDestroyErrorHandlers.splice(t,1)}}constructor(){this._isDestroyed=!1,this.destroyHandlers=[]}addDestroyHandler(e){this._addDestroyHandler(e)}destroy(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[o]=t;this._isDestroyed||(this._isDestroyed=!0,this._destroyReason=o,Jl(this.destroyHandlers,(e=>{try{e(...t)}catch(Mw){j(Hc.errorHandlers,Mw)}})),this.destroyHandlers.length=0)}ignoreAfterDestroy(e,t,i){var o=this;return void 0===i&&(i=Fc.DO_NOTHING),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(!o.isDestroyed)return e.apply(o,r);const s=new Ml({code:"DESTROYABLE_METHOD_CALLED_AFTER_DESTROY",details:{identifier:t}});if(j(Hc.callAfterDestroyErrorHandlers,s),i===Fc.DEPENDS_ON_AB_FLAGS){if("TRUE"===Uc.getFlagValueAndActivateTestId("VAS_DESTROYABLE_THROW_ERROR_AFTER_DESTROY"))throw new Error("You cannot call a method of a class that had destroy() called");if("TRUE"===Uc.getFlagValueAndActivateTestId("VAS_DESTROYABLE_RETURN_UNDEFINED_AFTER_DESTROY"))return}return i===Fc.CALL_NORMALLY?e.apply(o,r):void 0}}_addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}}Hc.errorHandlers=[],Hc.callAfterDestroyErrorHandlers=[];const zc={version:gd,vsid:ic,rnd:tc.VAS_USER_SESSION_RANDOM,AdditionalStatsRootFields:tc.AdditionalStatsRootFields,AB_FLAGS:tc.AB_FLAGS,AB_FLAGS_STORE:Uc,iCookie:tc.ICOOKIE,testIds:tc.TEST_IDS},Wc=new Lc(zc);Hc.addErrorHandler((e=>{Wc.error({error:new Ml(e,{code:"DESTROYABLE_CALLBACK_ERROR",details:void 0})})}));const jc=/^([a-z0-9|-]+\.)*adfox.ru$/,Yc=/\/(an|ads)\/adfox/,Gc=(e,t)=>{for(let i=0;i<e.length;i++)if(t(e[i],i,e))return!0;return!1},Xc=[...["localhost","127.0.0.1"].concat([]),Jd,"yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz",Zd,"yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru","yandexsport.ru"],Kc=(e=>n(e.navigator.sendBeacon))(window),qc=(Kd({propertyName:"KNOCK_GLOBAL_CALLBACK_PROPERTY_NAME"}),-1),Qc={droppedVideoFrames:qc,corruptedVideoFrames:qc,totalVideoFrames:qc},Jc=Ee({},Qc,{droppedVideoFramesRatio:qc}),Zc={width:0,height:0},$c={visibility:0,size:Zc,relativeSizeRatio:0,screenSize:Zc,devicePixelRatio:0,downlink:0,videoContentSize:void 0,videoAvatarSize:Zc,videoPixelRatio:qc,videoToDevicePixelRatio:qc,videoFramesInfo:Jc,videoSrc:"",videoMuted:!0,videoVolume:0,videoCurrentSrc:"",bufferingTime:0,currentTime:0,bufferingTimeRatio:qc,remainingBufferedTime:0,isFullscreen:void 0,adPodId:void 0,productType:void 0},eu="vsid",tu="vmap-scenario-id",iu="has-preroll",ou="wtime-since-ad",nu="ad-pod-id",ru=(e,t,i)=>{let o=e.getItem(t);return o||(o=i(t),e.setItem(t,o)),o},au=(e,t)=>{for(const i of t.split(".")){if(!u(e)){e=void 0;break}e=e[i]}return e},su=(e,t,i)=>{if(!u(e))return e;const o=e,n=t.split("."),r=n.pop();for(const a of n){const t=e[a];e=u(t)?t:e[a]={}}return e[r]=i,o},lu=e=>{try{return e()}catch(Bv){return}},du=(e,t,i,o)=>function(){try{return t.apply(i||this,arguments)}catch(Bv){if(c(o)&&o(Bv),!0===Bv.preventProtect)throw Bv;du.log(Bv,e)}};du.log=function(e,t){console.log("LOG:"+t+":"+e)},du.setTimeout=(e,t,i,o)=>window.setTimeout(du("timeout",e,i,o),t);class cu{}cu.YaContextCallbacks=Ce("Ya.C","ontext._callbacks"),cu.YaContextCallbacksCalls=Ce("Ya.C","ontext._callbacks_call"),cu.AdvManager=Ce("A","dvManager"),cu.AdvBlock=Ce("A","dvBlock"),cu.RTB=Ce("R","TB"),cu.Rtb=Ce("R","tb"),cu.MetrikaAdtune=Ce("metrika_a","dtune");class uu{constructor(e){this.obj=e}getItem(e){return this.obj[e]}setItem(e,t){this.obj[e]=t}}const hu=ee((()=>((e,t,i)=>{let o;return((e,t)=>{const i=e.slice();for(;i.length;){const e=t(i.shift());if(!e)return;i.push(...e)}})([e.top],(e=>{if(o=lu((()=>au(e,t))),!o)return lu((()=>W(e.frames)))||[]})),o||(o=new uu({})),su(e,t,o),o})(self,"Ya.pcodeCrossFrameData"))),pu=ee((()=>((e,t,i)=>{let o=au(e,t);return o||(o=new uu({}),su(e,t,o)),o})(self,"Ya.pcodeWindowData"))),mu="Ya._metrika.dataLayer",Au=du("metrika::pushEvent",((e,t)=>{const i=au(e,mu)||[];su(e,mu,i),i.push({ymetrikaEvent:{type:"params",parent:1,data:{__ym:Pe({},t)}}})})),gu=du("sessionId::configureMetrika",((e,t)=>{Au(e,{adSessionID:t})})),vu=()=>(1e6*md()).toFixed(0)+(new Date).valueOf().toString(),_u="sessionId";let yu;const fu=()=>(yu||(yu=((e,t,i,o)=>{let n=t.getItem(_u);return n||(n=i.getItem(_u)||e(),o(window,n)),t.setItem(_u,n),i.setItem(_u,n),n})(vu,("common",ru(pu(),"common",(()=>new uu({})))),ru(hu(),"common",(()=>new uu({}))),gu)),yu),Su=()=>y(fu)||void 0,Tu=e=>{var t;const i=null==(t=e.yandex)?void 0:t.getSiteUid;if(a(i))return String(i())},Eu=e=>Math.round(e),bu=e=>({width:Eu(e.width),height:Eu(e.height)});class Cu{constructor(e){void 0===e&&(e={}),this.props={},this.setProps(Ie({},this.defaults(),e))}static sliceBits(e,t,i){return function(e,t,i){const o=t+i,n=Oe(e.toString(2),o).substr(-o,i);return parseInt(n,2)}(e,t,i)}defaults(){return{}}toString(){return this.serialize().toString()}setProps(e){return u(e)&&((e,t,i)=>{for(let o=0;o<e.length;o++)t.call(i,e[o],o,e)})(this.getTemplate(),(t=>{let[,i]=t;i&&e.hasOwnProperty(i)&&(this.props[i]=e[i])}),this),this}getProps(){return Ie({},this.props)}clone(){return new(0,this.constructor)(this.props)}serialize(){var e,t;return function(e){const t=[];for(const[i,o]of e){const e=we(o,i);t.push(e)}return function(e){if(e.length>53)throw new Error("bitUtils.toDecimal: \u0431\u043e\u043b\u044c\u0448\u0435 53 \u0431\u0438\u0442 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u0437-\u0437\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430 \u0434\u043b\u0438\u043d\u043e\u0439 "+e.length+" \u0431\u0438\u0442.");return parseInt(e,2)}(t.reverse().join(""))}((e=this.getTemplate(),t=this.props,Hl(e,(e=>{let[i,o]=e;return[i,o&&t[o]||null]}))))}slice(e,t){return Cu.sliceBits(this.serialize(),e,t)}}const Pu=13,wu=new class extends Cu{getTemplate(){return[[10,"VERSION"],[5,"BUNDLE"],[36,"UNUSED"],[1,"ADBLOCK"]]}defaults(){return{VERSION:Number(gd),BUNDLE:Pu,UNUSED:0,ADBLOCK:a(kc(window))}}},Ou="function"===typeof IntersectionObserver&&f(IntersectionObserver),Iu=()=>!ku(),ku=()=>Ou||!mc,Du=e=>(e=>e instanceof Promise||"Promise"===wl(e)&&Boolean(Le((()=>f(e.constructor)))))(e)||(e=>Boolean(Le((()=>c(e.then)&&c(e.catch)))))(e),Nu=[].find,Ru=f(Nu)?(e,t)=>Nu.call(e,t):(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];if(t(o,i,e))return o}};let Vu;const Lu=e=>t=>{const{JSON:i,clean:o}=function(e){void 0===e&&(e=document.body);const t=function(e){const t=function(e,t){let{content:i,size:o}={};const n=e.ownerDocument.createElement("iframe");n.scrolling="no",n.setAttribute("allowfullscreen",""),n.style.display="block",o&&(n.height=o.height,n.width=o.width),e.appendChild(n);const r=n.contentDocument;return r.open(),i&&r.write(i),r.close(),r.body.style.margin="0",n.style.borderWidth="0",n}(e);return t.width="0",t.height="0",t.style.position="absolute",t}(e);return{JSON:t.contentWindow.JSON,clean:()=>function(e){e.src="",function(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}(e)}(t)}}();try{return i[e](t)}finally{o()}},xu="DEFAULT_ERROR_MESSAGE",Bu="?:?:?",Mu=e(3438);class Uu extends Error{constructor(e,t){void 0===t&&(t={});const i="object"===typeof e?e:{message:String(e||xu)};super(),Mu(this,Uu.prototype),this.message=t.message||i.message||xu,this.code=t.code||i.code||i.id||0,this.isFatal=Boolean(function(e){const[t]=((e,t,i)=>{const o=[];for(let n=0;n<e.length;n++){const i=e[n];t.call(undefined,i,n,e)&&o.push(i)}return o})(e,(e=>void 0!==e));return t}([t.isFatal,i.isFatal,true])),this.details=t.details||i.details||"";const o=t.stack||i.stack||function(e){const{url:t,line:i,col:o,fileName:n,columnNumber:r,lineNumber:a}=e;return(t||n||"?")+":"+(i||a||"?")+":"+(o||r||"?")}(i);let n=o===Bu?this.stack:o;if(n&&n!==Bu)this.stack=n;else if(!this.stack)try{throw new Error(this.message)}catch(Bv){this.stack=n=Bv.stack||Bu}this.toString=()=>xe(this.toJSON()),this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,stack:n})}}const Fu="ru";class Hu extends Uu{constructor(){super(...arguments),this.name="TranslatorError"}}const zu=function(e,t){void 0===t&&(t=!1);const i=(t,i,o)=>e[t][i][o],o=(t,i,o)=>e[t]&&e[t][i]&&e[t][i][o],n=e=>{let{keyset:t,key:n,lang:r=Fu,onError:a,throwErr:s=!0}=e;if(o(r,t,n))return i(r,t,n);if(o(Fu,t,n))return i(Fu,t,n);{const e=new Hu("Tanker locale for lang="+r+", keyset="+t+", key="+n+" not found");return s&&J(e),"function"===typeof a&&a(e),""}};return t?Cd(n,(e=>{let{keyset:t,key:i,lang:o}=e;return t+"_"+i+"_"+o})):n}(e(3716)),Wu=function(e,t){return void 0===t&&(t=Fu),zu({keyset:"adsdk",key:e,lang:t})},ju=/&\w+;/g,Yu={"&quot;":'"',"&laquo;":"\xab","&raquo;":"\xbb","&bdquo;":"\u201e","&ndash;":"\u2013","&mdash;":"\u2014"},Gu=["spec","logo","misc"],Xu=e=>{if(o(e))for(const t in e)if(e.hasOwnProperty(t)&&!V(Gu,t))return e[t]},Ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",qu=e=>{var t;let{secureMode:o,url:n}=e;const r=null!=(t=tc.hardcodedParams.adsdksecuremode)?t:o;return"ForceSafe"===r||"Safe"===r&&(!i(n)||!fe(n))},Qu=(e,t)=>{let i=0;return{promise:new Promise((o=>{i=t.setTimeout(o,e)})),clear(){t.clearTimeout(i)},timeoutId:i}},Ju="application/x-javascript",Zu=["application/javascript",Ju];let $u;!function(e){e.INTERACTIVE_VIEWER="video-banner_interactive-viewer",e.MOTION="video-banner_motion",e.EMPTY="video-banner_theme_empty",e.SURVEY="video-banner_survey"}($u||($u={}));const eh=["aw","ap","s-a","d-sd","k-j","s"].join(""),th=eh+"/1_0",ih="https://"+Zd+"/"+th+"/interactive_viewer.js",oh=function(e,t){return U(e,"adsdkver")||t}(window,gd),nh="https://"+Zd+"/vas-bundles/",rh="https://"+Zd+"/"+eh+"/1_0/vpaid-motion.js",ah="https://"+Zd+"/pcode/media/vpaid-motion.js",sh="https://"+Qd+"/system/video-ads-sdk/vpaid-motion.js",lh=Ge(oh)+"vpaid-motion.js",dh=[rh,ah,sh,lh],ch="https://"+Zd+"/"+eh+"/1_0/vpaid-creative.js",uh=["https://"+Zd+"/pcode/media/vpaid-creative.js",ch];class hh extends Bc{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add((i=>{e(i)&&Ae(t,i)}))}subscribeValueConditionOnce(e,t){const i=this.subscribeValueCondition(e,(e=>{i(),Ae(t,e)}));return i}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}const ph=e=>{try{const{left:t,right:i,top:o,bottom:n}=e.getBoundingClientRect();return{left:t,right:i,top:o,bottom:n,width:i-t,height:n-o}}catch(Bv){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},mh={ES5:"bundles",ES2017:"bundles-es2017"},Ah=e=>{let{version:t=gd,win:i}=e;const o=kc(i),n=mh.ES5,r=""+Ge(t)+n+"/proxy_frame.html";return a(o)?o(r):r};let gh;const vh=function(e){return void 0===e&&(e=window),gh||(gh=e.document.createElement("div")),gh}(window),_h=(e,i)=>{const o="undefined"!==typeof vh.style[e];if(o&&i&&t(i))try{vh.style.cssText=e+": "+i+";";const t=Boolean(vh.style.cssText);return vh.style.cssText="",t}catch(Bv){return!1}return o},yh={},fh=function(e){return void 0===e&&(e=""),yh[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let i=0;i<zl.length;i++){const o=zl[i],n=o?""+o+t:e;if(_h(n))return yh[e]=n}return yh[e]=e}(e)},Sh={position:"absolute",width:"100%",height:"100%",left:"0",top:"0"},Th={attributes:{width:"0",height:"0",hidden:""},styles:{display:"none"}},Eh={attributes:{hidden:null,width:null,height:null},styles:{display:"block"}},bh=e=>{let{iframe:t,shouldBeVisibleNow:i}=e;const o=i?Eh:Th;Ze(t,o.attributes),Qe(t,o.styles)},Ch="VAS_FRAME_GLOBAL_CALLBACK",Ph=Kd({propertyName:Ch}),wh=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-same-origin"].join(" ");class Oh extends Hc{constructor(e,t){super(),this.listenForCommandEvents=e=>{const t=q({element:this.port,eventName:"message",listener:t=>{const{data:i}=t;"command"===i.type&&(this.isEventDataCommandLike(i)?e(i):this.destroy(new Ml({code:"VF_DISPATCHER_UNHANDLED_MESSAGE_EVENT",details:{eventData:i}})))}});return this.addDestroyHandler(t),t},this.port=e,this.commandHandlers=t,this.listenForNewCommands(),this.addDestroyHandler(q({element:e,eventName:"messageerror",listener:()=>{this.destroy(new Ml({code:"VF_DISPATCHER_MESSAGE_ERROR",details:{}}))}}))}executeCommand(e,t){const i=S(6),o=Qu(5e3,window);o.promise.then((()=>{this.destroy(new Ml({code:"VF_DISPATCHER_COMMAND_DETERMINATION_TIMEOUT",details:{name:e,commandId:i}}))})).catch(J),this.addDestroyHandler((()=>o.clear()));const n=this.waitForNextCommandEvent({name:e,id:i}),r=new Promise(((t,r)=>{n.then((n=>{if(o.clear(),"success"===n.status)t(n.payload);else if("error"===n.status){const e=n.payload;r((e=>{const t=new Error;return t.name=e.name,t.message=e.message,t.stack=e.stack,t})(e))}else{if("abort"===n.status)return;this.destroy(new Ml({code:"VF_DISPATCHER_UNHANDLED_COMMAND_STATE",details:{status:n.status,payload:n.payload,name:e,commandId:i}}))}})).catch(r)})),a=A((()=>{this.sendCommand({status:"abort",name:e,id:i,payload:void 0})}));return this.sendCommand({status:"start",name:e,id:i,payload:t}),{promise:r,abort:a}}sendCommand(e){try{JSON.stringify(e.payload)}catch(t){return void this.destroy(new Ml({code:"VF_DISPATCHER_COMMAND_PAYLOAD_NON_SERIALIZABLE",details:{error:t}}))}try{this.port.postMessage(tt({},e,{type:"command"}))}catch(t){this.destroy(new Ml({code:"VF_DISPATCHER_SEND_ERROR",details:{error:t}}))}}async waitForNextCommandEvent(e){return new Promise((t=>{const i=this.listenForCommandEvents((o=>{o.name===e.name&&o.id===e.id&&(i(),t(o))}))}))}listenForNewCommands(){this.listenForCommandEvents((e=>{var t;if("start"!==e.status)return;const i=null==(t=this.commandHandlers)?void 0:t[e.name];if(!Boolean(i))return void this.destroy(new Ml({code:"VF_DISPATCHER_NO_SUCH_COMMAND_HANDLER",details:{data:e}}));const o=this.createCommandControlDescriptor(e),n=e.payload;try{i(o,n)}catch(r){this.destroy(new Ml({code:"VF_DISPATCHER_HANDLER_ERROR",details:{error:r}}))}}))}createCommandControlDescriptor(e){const t=new Bc;let i=!1;return this.waitForNextCommandEvent(e).then(this.ignoreAfterDestroy((o=>{i||"abort"===o.status&&o.id===e.id&&(t.dispatch(void 0),i=!0,t.removeAll())}),"Dispatcher.awaitForResolveOfWaitForNextCommandEvent")).catch(d),{resolve:o=>{if(!i)return i=!0,t.removeAll(),this.sendCommand({status:"success",name:e.name,id:e.id,payload:o})},reject:o=>{if(i)return;i=!0,t.removeAll();const n=kl(o);return this.sendCommand({status:"error",name:e.name,id:e.id,payload:n})},subscribeForAbort:function(){return i?d:t.add(...arguments)}}}isEventDataCommandLike(e){return!!o(e)&&"command"===e.type&&!!i(e.id)&&!!i(e.status)}}const Ih=v({abort:0,canplay:0,canplaythrough:0,click:0,durationchange:0,emptied:0,ended:0,error:0,loadeddata:0,loadedmetadata:0,loadstart:0,pause:0,play:0,playing:0,progress:0,ratechange:0,resize:0,seeked:0,seeking:0,suspend:0,timeupdate:0,volumechange:0,waiting:0}),kh=["src","poster"],Dh=v({src:0,currentTime:0,muted:0,volume:0,playbackRate:0}),Nh=["video/mp4","video/webm"],Rh={timeupdate:["currentTime"],durationchange:["duration"],volumechange:["volume","muted"],resize:["videoWidth","videoHeight"],ended:["ended"]},Vh=v({load:0,play:0,pause:0,setAttribute:0}),Lh=(e,t,i)=>{if(!o(e))return e;const n=e,r=t.split("."),a=r.pop();for(const s of r){const t=e[s];e=o(t)?t:e[s]={}}return e[a]=i,n},xh=v({bubbles:0,cancelable:0,composed:0,defaultPrevented:0,eventPhase:0,isTrusted:0,returnValue:0,timeStamp:0,type:0}),Bh=new WeakSet;class Mh extends Hc{static isVideoNodeLocked(e){return Bh.has(e)}constructor(e){super(),this.params=e,this.subscribeVideoNodeEvents(),oc("[OutsideApiLocalVideoNode]: set video node initial props"),this.params.handleVideoNodePropertyChange("playableMimeTypes",it(sc(Nh,(e=>[e,this.params.videoNode.canPlayType(e)])))),Jl(v(Rh),(e=>{const t=Rh[e];Jl(t,(e=>{this.params.handleVideoNodePropertyChange(e,this.params.videoNode[e])}))}))}callVideoNodeMethod(e,t){const{videoNode:o}=this.params;if(V(Vh,e)){if("setAttribute"===e){const[e,n=""]=t;if(!i(e))return;return V(kh,e)?o.setAttribute(e,n):void Wc.error({error:new Ml({code:"VS_REMOTE_VIDEOTAG_RESTRICTED_ATTR",details:{name:e,value:n}})})}return o[e]()}Wc.error({error:new Ml({code:"VF_REMOTE_VIDEOTAG_UNHANDLED_METHOD_CALL",details:{methodName:e,args:t}})})}setVideoNodeProperty(e,t){const{videoNode:i}=this.params;if(!V(Dh,e))return void Wc.error({error:new Ml({code:"VF_INSIDE_FRAME_REMOTE_VIDEO_TAG_PROP_NOT_ALLOWED",details:{propName:e,value:t}})});const o=e,n=i[o];Lh(i,e,t),this.params.handleVideoNodePropertyChange(o,i[o]),this.addDestroyHandler((()=>{Lh(i,e,n)}))}subscribeVideoNodeEvents(){const{videoNode:e}=this.params;Jl(Ih,(t=>{this.addDestroyHandler(q({element:e,eventName:t,listener:e=>{Rh.hasOwnProperty(e.type)&&Jl(Rh[e.type],(e=>{this.params.handleVideoNodePropertyChange(e,this.params.videoNode[e])})),setTimeout(this.ignoreAfterDestroy((()=>{const t=(e=>ot({},it(sc(xh,(t=>[t,e[t]]))),{target:null}))(e);this.params.handleVideoNodeEvent(t)}),"OutsideApiLocalVideoNode.timeoutForHandleVideoNodeEvent"),0)}}))}))}}class Uh extends Hc{constructor(e){super(),this.vpaidEventBus=new Bc,this.vpaidGetterPropertyBus=new Bc,this.dispatcherCommandHandlers={handleVpaidEvent:(e,t)=>{let{resolve:i}=e,[{eventName:o,args:n}]=t;i(),this.vpaidEventBus.dispatch({eventName:o,args:n})},updateVpaidGetterValue:(e,t)=>{let{resolve:i}=e,[{methodName:o,value:n}]=t;i(),this.vpaidGetterPropertyBus.dispatch({methodName:o,value:n})},handleVideoTagMethodCall:(e,t)=>{let{resolve:i,reject:o}=e,[{methodName:n,args:r}]=t;const a=this.localVideoNode;if(a)try{oc("[outsideAPI] call video method=["+n+"], args=["+r+"]");const e=a.callVideoNodeMethod(n,r);return Du(e)?e.then((e=>{i(e)})).catch(o):i(e)}catch(s){this.destroy(new Ml({code:"VF_REMOTE_VIDEO_TAG_CALL_ERROR",details:{error:s}}))}else this.destroy(new Ml({code:"VF_NO_REMOTE_VIDEOTAG_TO_CALL",details:{}}))},handleVideoTagPropertySet:(e,t)=>{let{resolve:i}=e,[{propName:o,value:n}]=t;i();const r=this.localVideoNode;r?V(Dh,o)?(oc("[outsideAPI] set video property name=["+o+"], value=["+n+"]"),r.setVideoNodeProperty(o,n)):this.destroy(new Ml({code:"VF_REMOTE_VIDEOTAG_PROP_SET_NOW_ALLOWED",details:{propName:o,value:n}})):this.destroy(new Ml({code:"VF_NO_REMOTE_VIDEOTAG_TO_SET",details:{propName:o,value:n}}))}},this.handleVideoNodeEvent=e=>{const t=e.type;this.dispatcher.executeCommand("handleVideoTagEvent",[{eventName:t,event:e}])},this.handleVideoNodePropertyChange=(e,t)=>{oc("[outsideApi]: change VIDEO node property ["+e+"] remotely to ["+t+"]"),this.dispatcher.executeCommand("handleVideoTagPropertyChange",[{propName:e,value:t}])},this.params=e,oc("[outsideApi]: init"),this.addDestroyHandler((e=>{e&&Wc.error({error:e})})),this.changeFrameVisibility(!1),this.dispatcher=new Oh(e.port,this.dispatcherCommandHandlers),this.addDestroyHandler((()=>this.dispatcher.destroy(void 0))),this.addDestroyHandler(q({element:e.port,eventName:"message",listener:e=>{if(!(e=>{const t=e.data;return!(!o(t)||"kill-me"!==t.type)})(e))return;const{data:t}=e;this.destroy(new Ml({code:"VAS_FRAME_FATAL_DESTROY",details:{reason:t.reason}}))}})),this.dispatcher.addDestroyHandler((e=>{this.isDestroyed||(Wc.error({error:null!=e?e:new Ml({code:"VF_DISPATCHER_DIED_WITHOUT_REASON",details:{}})}),this.destroy(void 0))})),this.addDestroyHandler((()=>{this.vpaidEventBus.removeAll()}))}async doGETRequest(e){oc("[outsideApi]: start get request");const t=this.dispatcher.executeCommand("doGETRequest",[e]),{responseText:i,responseStatus:o,responseHeaders:n}=await t.promise;return oc("[outsideApi]: finish get request"),{responseStatus:o,responseText:i,responseHeaders:n}}async loadCreative(e){oc("[outsideApi]: start loading creative"),await this.dispatcher.executeCommand("loadCreative",[e]).promise,oc("[outsideApi]: done loading creative")}async initCreative(e){oc("[outsideApi]: start init creative"),await this.dispatcher.executeCommand("initCreative",e).promise,oc("[outsideApi]: done init creative")}async callVpaidMethod(e,t){return oc("[outsideApi]: call VPAID method ["+e+"] remotely with args ["+JSON.stringify(t)+"]"),this.dispatcher.executeCommand("callVpaidMethod",[{methodName:e,args:t}]).promise}changeFrameVisibility(e){const t=this.params.frame;return oc("[outsideApi]: "+(e?"show":"hide")+" frame"),bh({iframe:t,shouldBeVisibleNow:e})}assignVideoTag(e){let{videoElement:t}=e;if(Mh.isVideoNodeLocked(t))throw oc("[outsideApi]: oops, video tag is already assigned"),new Error("VAS_FRAME_VIDEOTAG_ASSIGNED_TWICE");oc("[outsideApi]: assign video tag"),this.localVideoNode=new Mh({videoNode:t,handleVideoNodeEvent:this.handleVideoNodeEvent,handleVideoNodePropertyChange:this.handleVideoNodePropertyChange}),this.addDestroyHandler((()=>{var e;oc("[outsideApi]: UNassign video tag"),null==(e=this.localVideoNode)||e.destroy(void 0)}))}listenRemoteVpaidEvents(e,t){return oc("[OutsideAPI]: add vpaid event listener eventName=["+e+"]"),this.vpaidEventBus.add((i=>{let{eventName:o,args:n}=i;e===o&&t(o,n)}))}listenRemoteVpaidGetterValueChange(e){return this.vpaidGetterPropertyBus.add((t=>{let{methodName:i,value:o}=t;e(i,o)}))}}const Fh=e=>{var t;oc("[initOutsideApi]: do init"),t={name:"before OutsideAPI init call",initParams:e},Ph.call({propertyName:Ch,callbackArguments:[{step:t}]});const{container:i,initTimeout:n}=e,r=new Bc,a=i.ownerDocument.defaultView,s=(async e=>{let{container:t,initAbort:i,initTimeout:n}=e;const r=S(6);Wc.log({name:"VASFrameInitStart",data:{handshakeID:r}});const a=Date.now();let s=!1;const d=new Bc;d.add((()=>{s=!0})),i.add((()=>{oc("[initOutsideApi]: init aborted"),Wc.log({name:"VASFrameInitAborted",data:{handshakeID:r}}),d.dispatch(void 0)}));const c=nt({},qe(tc,Uc),{handshakeID:r}),u=(e=>{let{container:t,frameUrl:i,initialData:o}=e;const n=t.ownerDocument.createElement("iframe"),r=(e=>{const t=$e({},e,{RUM_WRAPPER:void 0,AB_FLAGS_STORE:void 0,STATS_ROOT_PARAMS:void 0,VAS_UAAS_CONFIG:void 0,VAS_UAAS_CONFIG_ParseError:void 0,AdditionalStatsRootFields:void 0,AdditionalStatsRootFieldsExtractionError:void 0,statsInstance:void 0});return encodeURI(JSON.stringify(t))})(o);Ze(n,{name:r,sandbox:wh,src:i,marginwidth:"0",marginheight:"0",scrolling:"no",frameborder:"no",tabindex:"-1",allowtransparency:"true",hidefocus:"true"}),Qe(n,et({},Sh)),bh({iframe:n,shouldBeVisibleNow:!1}),t.appendChild(n);const a=n.name;return a!==r&&Wc.log({name:"VASFrameInsideApiNoNameOnMount",data:{expectedName:r,actualName:a,handshakeID:o.handshakeID},probability:1}),n})({container:t,frameUrl:Ah({win:window}),initialData:c});d.add((()=>{oc("[initOutsideApi]: remove frame"),l(u)}));const h=new MessageChannel;h.port1.start(),d.add((()=>{h.port1.close()}));const p=new Promise((e=>{oc("[initOutsideApi]: wait for frame to load"),u.addEventListener("load",(()=>{oc("[initOutsideApi]: got load event. transfer port"),u.contentWindow.postMessage({type:"init",handshakeID:r},"*",[h.port2]),e()}))})),m=new Promise((e=>{const t=q({element:h.port1,eventName:"message",listener:i=>{const o=i.data;"handshake"===o.type&&o.initialData.handshakeID===r&&(oc("[initOutsideApi]: got handshake event"),t(),e())}})})),A=Promise.all([p,m]),{promise:g,clear:v}=Qu(n,window);if(g.then((()=>{var e;Wc.error({error:new Ml({code:"VAS_FRAME_INIT_TIMEOUT",details:{frameParentNodeTagName:null==(e=u.parentElement)?void 0:e.tagName,frameBoundingClientRect:ph(u),handshakeID:r}})}),d.dispatch(void 0)})),A.then((()=>{v()})),d.add((()=>{v()})),await Promise.race([A,g]),s)throw new Ml({code:"VAS_FRAME_DESTROY_BEFORE_INIT",details:{}});Wc.log({name:"VASFrameInitSuccess",data:{handshakeID:r},values:{timeSpent:Date.now()-a}}),u.removeAttribute("name"),i.removeAll();const _=new Uh({port:h.port1,initialData:c,frame:u});return _.addDestroyHandler((()=>{oc("[initOutsideApi]: do teardown since class destroy"),Wc.log({name:"VASFrameDestroy",data:{handshakeID:r}}),d.dispatch(void 0)})),_.addDestroyHandler(q({element:h.port1,eventName:"message",listener:e=>{const t=e.data;o(t)&&"destroy"===t.type&&Wc.error({error:new Ml({code:"VAS_FRAME_FATAL_DESTROY",details:{reason:t.reason}})})}})),oc("[initOutsideApi]: init done"),_})({container:i,initAbort:r,initTimeout:n,win:a});return{initPromise:s,abortInit:()=>r.dispatch(void 0)}},Hh={idle:["initializing"],initializing:["initialized"]};class zh extends Hc{constructor(){super(),this.state=new hh({name:"idle"},((e,t)=>{const i=Hh[e.name];return i&&V(i,t.name)||Wc.error({error:new Ml({code:"SINGLE_VAS_FRAME_CLASS_INVALID_TRANSITION",details:{from:e.name,to:t.name}})}),oc("SingleVASFrame: change state from ["+e.name+"] to ["+t.name+"]"),!1})),this.users=0,oc("SingleVASFrame: create instance"),this.initPromise=new Promise((e=>{this.state.add((t=>{"initialized"===t.name&&e(t.outsideApi)}))})),this.state.add((e=>{"initializing"===e.name&&e.outsideApiInitPromise.then((e=>{this.state.dispatch({name:"initialized",outsideApi:e}),this.addDestroyHandler((()=>{e.destroy(void 0)}))})).catch((e=>{this.destroy(e)}))}))}init(e){oc("SingleVASFrame: do init");const t=Fh(e);this.addDestroyHandler((()=>{t.abortInit()})),this.state.dispatch({name:"initializing",outsideApiInitPromise:t.initPromise})}addUser(){if(this.isDestroyed)throw new Error("SingleVASFrameClassCannotAddUserAfterDestroy");oc("SingleVASFrame: add user from "+this.users),this.users+=1}removeUser(){oc("SingleVASFrame: remove users from "+this.users),this.users=Math.max(0,this.users-1),0===this.users&&this.destroy(void 0)}}let Wh;const jh=()=>(Wh||(Wh=new zh,Wh.addDestroyHandler((()=>{Wh=void 0}))),Wh),Yh=async e=>{const t=jh();return(await t.initPromise).doGETRequest(e)},Gh=e=>{let{url:t,data:o,withCredentials:n=!0}=e;return new Promise(((e,r)=>{const a=new XMLHttpRequest;a.open("GET",t),a.withCredentials=n,a.onerror=()=>r({reason:"error",error:new Error("XHR Error["+a.status+"]["+a.statusText+"]["+t+"]")}),a.onreadystatechange=(e=>{let{xhr:t,resolve:o}=e;return()=>{if(4!==t.readyState)return;const{status:e}=t;if(0===e)return;const{responseText:n}=t,r={};Jl(t.getAllResponseHeaders().trim().split(/[\r\n]+/),(e=>{const t=e.split(": "),o=t.shift(),n=t.join(": ");i(o)&&(r[o]=n)})),o({responseText:n,responseStatus:e,responseHeaders:r})}})({xhr:a,resolve:e});try{a.send(o)}catch(Mw){Mw.message="XHR Send Error["+Mw.message+"]["+t+"]",r({reason:"error",error:Mw})}}))},Xh=async e=>{await new Promise((t=>{window.setTimeout(t,e)}))},Kh=e=>{let{thrownError:t,errorCode:i,errorDetails:n,timeoutCode:r,timeoutDetails:a}=e;const s=t;if(ne(s))return s;if("string"===typeof s.reason&&o(s.error)){const{error:e,reason:t}=s;if("error"===t)return new Ml(e,{code:i,details:n});if("timeout"===t)return new Ml(e,{code:r,details:a})}return new Ml(t,{code:i,details:n})},qh=function(e,t){let i=e.create;if(!f(i)){const t=i;try{delete e.create,i=e.create,e.create=t}catch(Bv){}}return i}(Object)?Object.create:function(e,t){function i(){}if(i.prototype=e,u(t))for(const o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);return new i},Qh=function e(t,i){void 0===i&&(i={preserveConstructors:!0});let o=t;if(Ed(t)){const o=t.map((t=>e(t,i)));return o}return(n=t)instanceof Date||"Date"===wl(n)?new Date(t.getTime()):(!c(t)&&u(t)&&(o=i.preserveConstructors?qh(t):{},b(t,((t,n)=>{o[n]=e(t,i)}))),o);var n},Jh=ct({},Zc,{bitrate:0}),Zh=ut({},Jh,{type:Ju}),$h="https://"+Zd+"/"+th+"/ad_creative.js",ep=ht({url:$h},Zh),tp={nextAd:0,startVideo:0,continueVideo:0},ip={type:"nextAd",poster:[]},op={poster:[]};let np={ads:[],children:[],xmlString:"",url:void 0,isUniformat:!1},rp={sequence:0,adId:void 0,bidreqid:void 0,campaignid:void 0,pageId:void 0,impId:void 0,vmapRequestId:void 0,creativeId:void 0,parseIndex:0,randomHexString:"",adParameters:"",mediaFiles:[],firstFrameImages:[],icons:[],progressTrackings:[],trackingEvents:{},abuseUrl:"",duration:0,adVerifications:[],creativeParameters:{body:void 0,ageRestriction:void 0,buttonLabel:void 0,showTitleAndBody:void 0,greenUrl:void 0,punyDomain:void 0,domain:void 0,title:void 0,targetUrl:void 0},assets:{button:void 0,logo:void 0,images:void 0,icon:void 0,app:void 0},clickUrlData:{vastClickUrl:void 0,serializablePlaybackParametersClickUrl:void 0,tgaOfferClickUrl:void 0},bannerFlags:void 0,legalText:void 0,surveyParameters:void 0,ecomShop:void 0,adTitleParameters:void 0,adTune:{show:!1,token:"",advertiserInfo:""}};const ap="https://"+Zd+"/"+eh+"/1_0/no-aim-screen.js",sp={type:"ad-creative-animation/javascript",url:ap},lp=(e,t,i)=>{const o=ft(e,t,i),n=parseInt(o,10);return me(n)?n:i},dp=2147483647,cp=-1,up={adLabel:0,socialAdLabel:0,businessUnitAdLabel:0,actionButton:0,skip:0,mute:0,play:0,timeline:0,abuse:0,loader:0,disclaimers:0,ageLabel:0,title:0,body:0,domain:0,backpackAdSequence:0,productsButton:0,controlPanel:0},hp=v(up),pp=ve(up,(()=>!1)),mp={controlsVisibility:{}},Ap={};let gp={showCountDown:!0,showSoundButton:!0,showLabel:!0};const vp=e=>({src:St(e.querySelector("StaticResource")),program:ft(e,"program"),xPosition:lp(e,"xPosition",0),yPosition:lp(e,"yPosition",0),width:lp(e,"width",0),height:lp(e,"height",0)}),_p=A((()=>{Wc.log({name:"AdCreativeVideoBannerVastUnmoderatedInsideText"})}));const yp=e=>{if(!Array.isArray(e))return[];const t=sc(e,(e=>{const t=e[0],n=Number(e[1]),r=Number(e[2]),a=e[3];if(i(t)&&!isNaN(n)&&!isNaN(r)){const e=[t,String(n),String(r)];return o(a)&&e.push(a),e}}));return Vc(t,(e=>void 0!==e))},fp=e=>{const{AUCTION_DC_PARAMS:t}=e;if(!o(t)||!o(t.data_params))return;const n=Xu(t.data_params);if(!o(n))return;const r=n.assets;if(!o(r))return;const a={},{logo:s,button:l,icon:d,app:c,images:u,price_info:h}=r;if(o(s)){const e=le(s);if(e.length){const t={};for(const[o,n]of e){const{url:e,width:r,height:a}=n;i(e)&&zt(r)&&zt(a)&&(t[o]={url:e,width:r,height:a})}Wt(t)||(a.logo=t)}}if(o(l)){const{caption:e,href:t,key:o}=l;i(e)&&i(t)&&i(o)&&(a.button={caption:e,href:t,key:o})}if(o(c)){const{review_count:e,store_name:t,name:o,download_count:n,rating:r,store_app_id:s,store_content_id:l,price_currency_symbol:d,price_currency_code:u,price:h,age:p,free:m}=c;zt(e)&&i(t)&&i(o)&&i(n)&&he(r)&&i(s)&&i(l)&&i(d)&&i(u)&&he(h)&&zt(p)&&"boolean"===typeof m&&(a.app={review_count:e,store_name:t,name:o,download_count:n,rating:r,store_app_id:s,store_content_id:l,price_currency_symbol:d,price_currency_code:u,price:h,age:p,free:m})}if(o(d)){const e=le(d);if(e.length){const t={};for(const[o,n]of e){const{url:e,width:r,height:a}=n;i(e)&&zt(r)&&zt(a)&&(t[o]={url:e,width:r,height:a})}Wt(t)||(a.icon=t)}}if($l(u)&&(a.images=yp(u)),o(r.multicards)&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_MULTICARD_IMAGES_FOR_MOTION")&&(a.multicardImages=(e=>{if(!o(e))return;const t=v(e).sort();return sc(t,(t=>{const i=e[t].image;return sc(i,(e=>({smartCenters:sc(e.SmartCenters,(e=>({x:e.X,y:e.Y,w:e.W,h:e.H}))),url:e.Url,width:e.Width,height:e.Height})))}))})(r.multicards)),o(h)&&i(h.price)&&i(h.currency)&&(a.priceInfo={currency:h.currency,oldPrice:i(h.old)?Number.parseFloat(h.old):void 0,price:Number.parseFloat(h.price)}),r.multicards&&o(r.multicards_click_link)&&o(r.multicards_button_text)&&o(r.multicards_type)){const e=r.multicards,t=r.multicards_click_link,i=r.multicards_button_text[1],o="1"===r.multicards_type[1]?1:0,n=v(e).sort(),s=sc(n,(i=>{const{href:o,currency:n,price_old:r,price:a,text:s,image:l}=e[i],d=t[i],c=void 0!==n&&void 0!==a?{price:a,currency:n,oldPrice:r}:void 0,u=l.sort(((e,t)=>t.Width*t.Height-e.Width*e.Height))[0].Url;return{clickThruUrl:d,priceInfo:c,text:s,link:o,imageUrl:u}}));a.ecomShop={buttonText:i,products:s,type:o}}return a},Sp=A((e=>{Wc.log({name:"AdCreativeVideoBannerVastLegalText",sensors:{source:e}})})),Tp=function(e){let t=0,i=e?sc(e,(e=>e[0])):[],o=e?sc(e,(e=>e[1])):[];const n=e=>(t=i.indexOf(e))>-1,r={get size(){return i.length},has:n,clear:()=>{i=[],o=[]},get:e=>o[i.indexOf(e)],keys:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>i.slice())),values:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>o.slice())),entries:()=>sc(i,((e,t)=>[e,o[t]])),delete:e=>n(e)&&i.splice(t,1)&&Boolean(o.splice(t,1)),forEach(e,t){Jl(o,((o,n)=>e.call(t,o,i[n],r)))},set:(e,a)=>(n(e)?o[t]=a:o[i.push(e)-1]=a,r)};return r},Ep=(Boolean(window.Map)&&"function"===typeof window.Map.prototype.keys&&window.Map,class{constructor(){this.map=new Tp}add(e){return this.map.set(e,e),this}clear(){this.map.clear()}delete(e){return this.map.delete(e)}has(e){return this.map.has(e)}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}get size(){return this.map.size}}),bp=(n(window.Set)&&window.Set,e=>{const t=[];if(!o(e))return t.push(new Error("parsed but not an object")),{errors:t,params:void 0};let n,r;if(0===e.show||1===e.show)n=1===e.show;else{if("boolean"!==typeof e.show)return t.push(new Error('"show" is not a boolean nor 0,1 number')),{errors:t,params:void 0};n=e.show}return"domain"in e&&e.domain&&"string"!==typeof e.domain?(t.push(new Error('"domain" is defined but not a string')),{errors:t,params:void 0}):(i(e.domain)&&(r=e.domain),{errors:void 0,params:{show:n,domain:!r||r.length<=30?r:r.slice(0,30)+"..."}})}),Cp=e=>{let{show:t,token:i,advertiserInfo:o}=e;const n=[];return 0!==t&&1!==t&&n.push({reason:"show is not 0 or 1"}),"string"!==typeof o&&n.push({reason:"advertiserInfo is not a string"}),"string"!==typeof i&&n.push({reason:"token is not a string"}),n.length>0?{errors:n}:{params:{show:Boolean(t),token:i,advertiserInfo:o}}},Pp=(e,t,i)=>{i&&"string"===typeof t&&(e.trackingEvents[t]=[...e.trackingEvents[t]||[],i])};let wp;const Op=function(e,n){let{isYandexVastUrl:r}=void 0===n?{}:n;const a=e.querySelector("VideoClicks"),s=e.querySelectorAll("MediaFile"),l=e.querySelector("Linear"),d=e.querySelector("TrackingEvents"),c=d?d.querySelectorAll("Tracking"):[],u=W(e.querySelectorAll("Impression")),h=e.querySelectorAll("Error"),p=e.querySelector("Extensions"),m=e.querySelector("Description"),g=e.querySelectorAll("Icons Icon"),v=e.querySelector("AdParameters"),_=e.querySelector("AdSystem"),y=e.querySelector("AdTitle"),f=e.querySelector("Creative"),T=i(e.id)?e.id:void 0,E=Qh(rp,{preserveConstructors:!1});E.adId=T,f&&(E.creativeId=i(f.id)?f.id:void 0),E.parseIndex=void 0===wp?(wp=0,wp):++wp,E.randomHexString=S(16);const b=e.querySelector("InLine"),C=e.querySelector("Wrapper"),P=Boolean(b);if(P===Boolean(C)){if(P)throw new Ml({code:r?"YANDEX_INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION":"INLINE_AND_WRAPPER_NODE_IN_ONE_AD_SECTION",details:void 0});throw new Ml({code:r?"YANDEX_NO_INLINE_OR_WRAPPER_NODE":"NO_INLINE_OR_WRAPPER_NODE",details:void 0})}if(E.adVerifications=function(e){const o=[];let n=e.querySelector("AdVerifications");const r=e.querySelector("Extensions");if(!n&&r&&(n=r.querySelector('[type="AdVerifications"]>AdVerifications')),!n)return o;const a=n.querySelectorAll("Verification"),s=[];if(Boolean(a))for(const l of Array.from(a)){const e=l.getAttribute("vendor"),n=St(l.querySelector("JavaScriptResource")),r={},a=l.querySelectorAll("TrackingEvents>Tracking");if(Boolean(a))for(const t of Array.from(a)){const e=ft(t,"event"),o=St(t);i(e)&&i(o)&&(r[e]=o)}const d=St(l.querySelector("VerificationParameters"));i(e)&&i(n)&&t(d)?o.push({vendorKey:e,javaScriptResource:n,trackingEvents:r,verificationParameters:d}):s.push({vendorKey:e,javaScriptResource:n,trackingEvents:r,verificationParameters:d})}return s.length>0&&Wc.error({error:new Ml({code:"OMID_OBJECT_FROM_VERIFICATION_NODE_IN_VAST_IS_INVALID",details:{invalidAdVerifications:JSON.stringify(s)}})}),o}(e),E.sequence=function(e){const t=e.getAttribute("sequence");if(null===t)return-1;const i=parseInt(t,10);return Bt(i)?i:(Wc.error({error:new Ml({code:"INCORRECT_VAST_AD_SEQUENCE_ATTRIBUTE",details:{sequenceAttr:t}})}),-1)}(e),a){const e=St(a.querySelector("ClickThrough"));e&&(E.clickUrlData.vastClickUrl=e);const t=a.querySelectorAll("ClickTracking");for(let i=0;i<t.length;i++)Pp(E,"clickThrough",St(t[i]))}if(P&&v){const e=St(v);E.adParameters=e;const n=Vt(e);if(o(n)){var w;E.adParametersObject=n;const e=function(e){if(!o(e))return;const{AUCTION_DC_PARAMS:t}=e;if(!o(t))return;const{data_params:n}=t;if(!o(n))return;const{misc:r}=n;if(!o(r))return;const{click_url:a}=r;if(!o(a))return;const{abuse:s}=a;return i(s)?s:void 0}(n);e&&(E.abuseUrl=e),E.serializablePlaybackParameters=Rt(n.playbackParameters).config;const r=function(e){if(!o(e))return;const{background:t}=e;return o(t)&&i(t.color)?t.color:void 0}(n);void 0!==r&&(E.backgroundColor=r);const a=function(e){const{PACKSHOT_START_NOTICE_URL:t}=e;if(i(t))return t}(n);a&&Pp(E,"packshotStart",a);const{bidreqid:s,campaignid:l,pageId:d,impId:c,vmapRequestId:u}=function(e){if(!o(e))return{};const{AUCTION_DC_PARAMS:t}=e;if(!o(t))return{};const{data_params:n}=t;if(!o(n))return{};const{misc:r}=n;if(!o(r))return{};const{bidreqid:a,campaignid:s,pageId:l,impId:d,vmap_request_id:c}=r;return{bidreqid:i(a)?a:void 0,campaignid:i(s)?s:void 0,pageId:i(l)?l:void 0,impId:i(d)?d:void 0,vmapRequestId:i(c)?c:void 0}}(n);E.bidreqid=s,E.campaignid=l,E.pageId=d,E.impId=c,E.vmapRequestId=u,E.firstFrameImages=mt(null==(w=n.firstFrame)?void 0:w.images),E.productType=bt(n),Object.assign(E.creativeParameters,(e=>{const t=Ft(e),{title:o,body:n,hasTitle:r,hasBody:a}=Fe(e),s=Ue(e);let l,d,c,u,h;if(s){h=s.domain;const{green_url_text_prefix:t,green_url_text_suffix:o,age:n}=s;c=Ut({domain:h,greenUrlTextPrefix:t,greenUrlTextSuffix:o});const r=Ht(e);l=null==r?void 0:r.punyDomain,d=null==r?void 0:r.showTitleAndBody,i(n)&&(u=n)}return{buttonLabel:t,title:r?o:void 0,body:a?n:void 0,domain:h||void 0,punyDomain:l||void 0,showTitleAndBody:d,greenUrl:c,ageRestriction:u,targetUrl:We(e)}})(n)),E.ecomShop=function(e){if(!o(e))return;const t=fp(e);return null==t?void 0:t.ecomShop}(n);const h=fp(n);h&&Object.assign(E.assets,h),Object.assign(E.clickUrlData,{tgaOfferClickUrl:jt(n),serializablePlaybackParametersClickUrl:E.serializablePlaybackParameters.clickThroughUrl}),function(e){const{tgaOfferClickUrl:t,vastClickUrl:o,serializablePlaybackParametersClickUrl:n}=e,r=Vc([t,o,n],i);0===r.length&&Wc.log({name:"VastAdHasNoClickUrls",data:{clickUrlData:e}}),new Ep(r).size>1&&Wc.log({name:"VastAdHasDifferentClickUrls",data:{clickUrlData:e}})}(E.clickUrlData),E.bannerFlags=function(e){const t=Ue(e);if(!o(t))return;const{banner_flags:n}=t;if(!i(n))return;const r=n.split(",");return{medicine:V(r,"medicine"),dietarysuppl:V(r,"dietarysuppl"),businessUnit:V(r,"business_unit")}}(n),E.legalText=function(e){const{LEGAL_TEXT:t,HAS_LEGAL:n}=e;if(n&&i(t))return Sp("legalField"),t.trim();const r=Ue(e);if(!o(r))return;const{warning:a,dynamic_disclaimer:s}=r;return i(a)&&"1"===s?(Sp("dynamicDisclaimer"),a):void 0}(n),E.surveyParameters=(e=>{if(!o(e))return;const{pythia:i}=e;if(!o(i))return;const{basePath:n,slug:r,extra:a,"survey-config":s}=i;if(!t(a))return;const l=Yt(e),d=new URL(n+"/"+r+"/?"+a);return{surveyConfig:s,location:{host:d.host,pathname:d.pathname,search:d.search},isBrandLiftSurveyCreative:l}})(n)}}if(C){const t=St(e.querySelector("VASTAdTagURI"));if(!t)throw new Ml({code:r?"YANDEX_NO_VAST_AD_TAG_URI":"NO_VAST_AD_TAG_URI",details:void 0});E.vastAdTagUri=t}if(void 0!==s)for(let t=0;t<s.length;t++){const e=Et(s[t]);e&&E.mediaFiles.push(e)}for(let t=0;t<c.length;t++){const e=ft(c[t],"event"),i=St(c[t]);if("progress"===e){const e=ft(c[t],"offset",""),o=xt(e);void 0===o?Wc.error({error:new Ml({code:r?"YANDEX_VAST_INCORRECT_PROGRESS_OFFSET":"VAST_INCORRECT_PROGRESS_OFFSET",details:{url:i,offsetString:e}})}):E.progressTrackings.push({urls:[i],offset:o})}else Pp(E,e,i)}Jl(u,(e=>{Pp(E,"impression",St(e))}));for(let t=0;t<h.length;t++)Pp(E,"error",St(h[t]));for(let t=0;t<g.length;t++)E.icons.push(vp(g[t]));if(p){const e=p.querySelectorAll('Extension[type="skipAd"]');for(let o=0;o<e.length;o++)Wc.log({name:"UsingSkipAdExtensionInVast"}),Pp(E,"skip",St(e[o]));const t=p.querySelector('Extension[type="skipTime"]');if(Tt(t)){const e=Lt(St(t));Wc.log({name:"UsingSkipTimeExtensionInVast",data:{skipTime:e}}),E.skipTime=Lt(St(t)),E.skipTime>180&&(E.skipTime=0)}const i=p.querySelector('Extension[type="controls"]');if(i){const e=(e=>{const t=Mt({},gp),i=e.querySelector('control[id="countdown"]');i&&(t.showCountDown="0"!==ft(i,"layout"));const o=e.querySelector('control[id="soundbtn"]');o&&(t.showSoundButton="0"!==ft(o,"layout"));const n=e.querySelector('control[id="adlabel"]');return n&&(t.showLabel="0"!==ft(n,"layout")),t})(i);Wc.log({name:"UsingControlsExtensionInVast",probability:Cc,data:{imhoParams:e}}),E.imhoParams=e}const n=p.querySelector('Extension[type="AdTitle"]');if(n){const{errors:e,params:t}=(e=>{const t=St(e),i=[];let o;try{o=JSON.parse(t)}catch(Bv){i.push(Ul(Bv))}if(!o)return{errors:i,params:void 0};const n=bp(o);return n.errors?{errors:n.errors,params:void 0}:{errors:void 0,params:n.params}})(n);null!=e&&e.length?Wc.error({error:new Ml({code:r?"YANDEX_VAST_INCORRECT_AD_TITLE_EXTENSION_XML":"VAST_INCORRECT_AD_TITLE_EXTENSION_XML",details:{errors:e}})}):(Wc.log({name:"UsingAdTitleExtensionInXMLVast",probability:Cc}),E.adTitleParameters=t)}const a=A((()=>{Wc.log({name:"UsingCustomTrackingExtensionInVast",probability:Cc})})),s=p.querySelector('Extension[type="CustomTracking"]'),l=s?s.querySelectorAll("Tracking"):[];for(let o=0;o<l.length;o++){a();const e=ft(l[o],"event");Pp(E,e,St(l[o]))}const d=p.querySelector('Extension[type="AdTune"]');if(d){const{params:e,errors:t}=(e=>{const t=[],i=(e=>{try{return{json:JSON.parse(e)}}catch(Mw){return{error:{reason:"failed to parse json",details:Ul(Mw).message}}}})(St(e));if(i.error)return t.push(i.error),{errors:t};if(!o(i.json)||$l(i.json))return t.push({reason:"adtune text content is not an object"}),{errors:t};const n=Cp(i.json);return n.errors&&t.concat(n.errors),t.length>0?{errors:t}:{params:n.params}})(d);t&&Wc.error({error:new Ml({code:r?"YANDEX_VAST_INCORRECT_ADFOX_ADTUNE_EXTENSION_XML":"VAST_INCORRECT_ADFOX_ADTUNE_EXTENSION_XML",details:{errors:sc(t,(e=>JSON.stringify(e)))}})}),e&&(Wc.log({name:"UsingAdFoxAdTuneExtensionInXMLVast",probability:Cc}),E.adTune=e)}}if(Tt(m)&&(E.description=St(m)),Tt(_)){E.adSystem=St(_);const e=ft(_,"dspLabel");i(e)&&(E.dspLabel=e)}if(Tt(y)&&(E.adTitle=St(y)),l){const e=ft(l,"skipoffset","").trim();if(""!==e){const t=Lt(e);isNaN(t)?Re(new Ml({code:r?"YANDEX_INCORRECT_SKIPOFFSET_FORMAT":"INCORRECT_SKIPOFFSET_FORMAT",details:{nodeValue:e}}),E.trackingEvents.error):E.skipOffset=t}const t=l.querySelector("Duration");t&&(E.duration=Lt(St(t)))}return E},Ip=async e=>{var t;let{url:i,loadParameters:o,isWrapper:n=!1}=e;if(!i)return Promise.reject(new Ml({code:"VAST_URL_IS_NOT_DEFINED",details:void 0}));const{vastTimeout:r}=o;Wc.log({name:n?"WrapperVastLoadStart":"VastLoadStart",data:{url:i,loadParameters:o,timeout:r}});const a=Date.now(),s=await kp({url:i,loadParameters:o,isWrapper:n}),l=s.ads[0],d=We(null==l?void 0:l.adParametersObject),c=Boolean(d),u=Ke(l),h=ye(p=i)?"AD_FOX":fe(p)?"YANDEX":"EXTERNAL";var p;const m=null!=(t=o.adPlacementOptions.adBreakType)?t:o.adBreakType;return Wc.log({name:n?"WrapperVastLoadSuccess":"VastLoadSuccess",data:{url:i,timeout:o.vastTimeout},values:{adsCount:s.ads.length,timeSpent:Date.now()-a},sensors:{adBreakType:m,firstAdPodFormatType:u,vastSource:h,hasTargetUrl:c}}),s},kp=async e=>{let{url:t,loadParameters:i,isWrapper:o=!1}=e;const{vastTimeout:n}=i,r=fe(t),a="VASFrame"===i.requestMethod?Yh:Gh,s="boolean"!==typeof tc.hardcodedParams.adsdkwithcredentials||tc.hardcodedParams.adsdkwithcredentials;try{const{responseText:e,responseStatus:o}=await st({url:t,data:null,timeout:n,doRequest:a,withCredentials:s});if(function(e,t,i,o){if(200===i)return;if(204===i&&0===t.length)return void Wc.log({name:"NoContentVastResponseWithEmptyText",data:{url:e,isYandexUrl:o},probability:Cc});let n;switch(t){case"\x3c!-- Bad partner/domain --\x3e":n="BAD_PARTNER_OR_DOMAIN_FOR_VAST_REQUEST";break;case"\x3c!-- PageImp data not found --\x3e":n="BAD_IMP_ID_FOR_VAST_REQUEST";break;default:n=o?"YANDEX_UNEXPECTED_VAST_RESPONSE_TEXT":"UNEXPECTED_VAST_RESPONSE_TEXT"}if(n)throw new Ml({code:n,details:{url:e,responseText:t,responseStatus:i}})}(t,e,o,r),204===o)throw new Ml({code:"NO_AD_SECTION",details:{reason:"status-204"}});return Dp({xmlString:e,loadParameters:i,vastUrl:t})}catch(Mw){const a="AD_FOX"===i.vastSourceType;let s,l;s=ne(Mw)?Mw.code:a?"ADFOX_VAST_LOAD_ERROR":r?"YANDEX_VAST_LOAD_ERROR":"VAST_LOAD_ERROR",l=o?r?"YANDEX_WRAPPER_VAST_LOAD_TIMEOUT":"WRAPPER_VAST_LOAD_TIMEOUT":r?"YANDEX_VAST_LOAD_TIMEOUT":"VAST_LOAD_TIMEOUT";const d=Kh({thrownError:Mw,errorCode:s,errorDetails:void 0,timeoutCode:l,timeoutDetails:{vastTimeout:n,url:t}});return Promise.reject(d)}},Dp=async e=>{var n,r,a,s,l,d;let{loadParameters:c,vastUrl:u,xmlString:h}=e;const p=rt(h),m="YANDEX"===c.vastSourceType;if(!p){const e=(()=>{switch(c.vastSourceType){case"YANDEX":return"YANDEX_INVALID_VAST_XML";case"AD_FOX":return"ADFOX_INVALID_VAST_XML";default:return"INVALID_VAST_XML"}})();throw new Ml({code:e,details:{xmlString:h,vastUrl:u}})}const A=p.querySelector("VAST");if(!A)throw new Ml({code:"NO_AD_SECTION",details:{reason:"no-vast-tag"}});const g=A.getAttribute("version");if(!function(e){if(!Boolean(e))return!0;if(!t(e))return!1;const i=Number(e.split(".")[0]);return!!he(i)&&i<=4}(g))throw new Ml({code:m?"YANDEX_INCOMPATIBLE_VAST_VERSION":"INCOMPATIBLE_VAST_VERSION",details:{xmlString:h,version:g}});const _="true"===A.getAttribute("ya-uniformat"),f="true"===A.getAttribute("ya-has-banner-storage-ad"),S=V(["Yabs Ad Server","Yabs Ad CPC Server"],null!=(n=null==(r=A.querySelector("AdSystem"))?void 0:r.textContent)?n:""),T=W(A.querySelectorAll("VAST Ad"));let E;if(0===T.length)E=function(e){let{isUniformat:t,xmlVastNode:i,xmlString:n}=e;const r=Qh(np,{preserveConstructors:!1}),a=i.querySelector('Extension[type="aim"]');if(!a)return r;const s=a.textContent;if(!s)return r;const l=y((()=>JSON.parse(s)),(()=>{throw new Ml({code:"NO_AIM_SCREEN_JSON_IS_INVALID",details:{aimConfig:s}})}));if(!o(l))throw new Ml({code:"NO_AIM_SCREEN_JSON_IS_NOT_AN_OBJECT",details:{aimConfig:l}});Wc.log({name:"NoAimScreenDataParsed",data:{aimNodeConfig:s},probability:1});const{isActive:d,filterReasons:c}=l;if("boolean"!==typeof d)throw new Ml({code:"NO_AIM_SCREEN_INVALID_IS_ACTIVE_PARAMETER",details:{aimConfig:s}});if(!d)return r;if(!$l(c))throw new Ml({code:"NO_AIM_SCREEN_FILTER_REASONS_IS_NOT_ARRAY",details:{filterReasons:c}});const u=[];for(const o of c){if(!yt(o))throw new Ml({code:"NO_AIM_SCREEN_FILTER_REASON_INVALID",details:{filterReasons:c}});u.push(o)}const h={controlsSettings:{visibility:!1,controlsVisibility:{}},trackingEvents:{},lang:"ru",packshotSettings:{},contentAfterAd:op},p={playbackParameters:h,mediaFiles:[sp],adParameters:{filterReasons:u}};return{isUniformat:t,ads:[_t({},Qh(rp,{preserveConstructors:!1}),{duration:15,serializablePlaybackParameters:h,mediaFiles:[ep],adParameters:JSON.stringify(p),adParametersObject:p})],children:[],xmlString:n,url:void 0}}({isUniformat:_,xmlVastNode:A,xmlString:h});else{const e=[],t=sc(T,(t=>{const o=Op(t,{isYandexVastUrl:m}),{vastAdTagUri:n}=o;if(!n)return[o];if(c.remainingLoadWrapperVastCount<=1)return Wc.error({error:new Ml({code:m?"YANDEX_WRAPPER_VAST_MAX_COUNT_LIMIT":"WRAPPER_VAST_MAX_COUNT_LIMIT",details:void 0})}),[];const{adPlacementOptions:r}=c;return Ip({url:De({url:n,options:r,win:window}),loadParameters:Gt({},c,{remainingLoadWrapperVastCount:c.remainingLoadWrapperVastCount-1}),isWrapper:!0}).then((t=>(e.push(t),sc(t.ads,(e=>{var t,n;return t=e,(n=o).mediaFiles.length&&(t.mediaFiles=[...t.mediaFiles,...n.mediaFiles]),Jl(v(n.trackingEvents),(e=>{t.trackingEvents[e]=[...t.trackingEvents[e]||[],...n.trackingEvents[e]||[]]})),n.clickUrlData.vastClickUrl&&(t.clickUrlData.vastClickUrl=n.clickUrlData.vastClickUrl),null===t.skipTime&&(t.skipTime=n.skipTime),null===t.skipOffset&&(t.skipOffset=n.skipOffset),t.progressTrackings.push(...n.progressTrackings),isNaN(t.duration)&&(t.duration=n.duration),-1===t.sequence&&(t.sequence=n.sequence),t.adSystem||(t.adSystem=n.adSystem),i(n.dspLabel)&&(t.dspLabel=n.dspLabel),e}))))).catch((e=>(ne(e)?Wc.error({error:e}):Wc.error({error:new Ml({code:m?"YANDEX_WRAPPER_VAST_LOAD_ERROR":"WRAPPER_VAST_LOAD_ERROR",details:{error:e,vastAdTagUri:n,parsingParameters:c}})}),[])))}));E={ads:lt(await Promise.all(t)),xmlString:h,children:e,url:u,isUniformat:_}}const b=E.ads[0],C=!!Boolean(b)&&function(e){var t,i,o;const n=Xu(null==(t=e.adParametersObject)||null==(i=t.AUCTION_DC_PARAMS)?void 0:i.data_params),r=null==n||null==(o=n.assets)?void 0:o.images;return void 0!==r&&$l(r)&&r.length>0}(b),P=(null==b?void 0:b.firstFrameImages.length)>0,w=void 0!==(null==b?void 0:b.legalText),O=void 0!==(null==b?void 0:b.bannerFlags),I=!0===(null==b||null==(a=b.bannerFlags)?void 0:a.businessUnit),k=!0===(null==b||null==(s=b.bannerFlags)?void 0:s.medicine),D=!0===(null==b||null==(l=b.bannerFlags)?void 0:l.dietarysuppl),N=!0===(null==b||null==(d=b.adParametersObject)?void 0:d.isStock),R=function(e){var t;const i=null==(t=e.ads[0])?void 0:t.productType;return void 0===i?"unknown":dt(i)}(E);let L;return L=!0===R?"cpm":!1===R?"other":"unknown",Wc.log({name:"CreateVastFromXMLString",data:{vastXmlString:h},sensors:{uniformat:E.isUniformat,hasBannerStorageAd:f,isYabsAd:S,firstAdPodHasImages:C,firstAdPodHasFirstFrameImage:P,firstAdPodCreativeType:L,firstAdPodHasLegalText:w,firstAdPodHasBannerFlags:O,firstAdPodHasBuBannerFlag:I,firstAdPodHasMedicineBannerFlag:k,firstAdPodHasDietarysupplBannerFlag:D,firstAdPodIsStock:N}}),E},Np={bids:[],creatives:{},creativeUrls:{}},Rp=(e,t)=>{for(let i=0;i<e.length;i++)if(!t(e[i],i,e))return!1;return!0};class Vp extends Hc{constructor(e){super(),this.onFetchBidsStart=new Bc,this.postMessageRequestId=ic+"_"+S(16),this.params=e,this.addDestroyHandler((()=>{this.onFetchBidsStart.removeAll()})),this.requestPromise=new Promise((e=>{this.addDestroyHandler(e)})),this.requestBids()}requestBids(){Wc.log({name:"HBRequestStart",data:this.getDataForLogs()}),this.subscribeHBMessages(),this.sendBidsRequest().then((async e=>{let{timeout:t}=e;Wc.log({name:"HBFetchBidsStart",data:Zt({},this.getDataForLogs(),{timeout:t})});const{clear:i,promise:o}=Qu(t,window);throw this.addDestroyHandler(i),await o,new Ml({code:"HB_FETCH_BIDS_TIMEOUT",details:Zt({},this.getDataForLogs(),{timeout:t})})})).catch((e=>{Wc.errorToStats(e),this.destroy(Np)}))}subscribeHBMessages(){this.addDestroyHandler(q({element:this.params.win,eventName:"message",listener:e=>{const{data:t,source:i}=e;if(!o(t)||!o(i))return;const{id:n,methodName:r}=t;if(n===this.postMessageRequestId)switch(r){case"FetchBidsStart":this.handleFetchBidsStartEventData(t.data);break;case"FetchBidsComplete":this.handleFetchBidsCompleteEventData(t.data);break;case"FetchBids":break;default:Wc.error({error:new Ml({code:"HB_MESSAGE_UNKNOWN_METHOD",details:Zt({},this.getDataForLogs(),{methodName:r})})})}}}))}handleFetchBidsStartEventData(e){if(!o(e))return void Wc.error({error:new Ml({code:"HB_MESSAGE_NON_OBJECT_DATA",details:this.getDataForLogs()})});const{timeout:t}=e;he(t)?this.onFetchBidsStart.dispatch({timeout:t}):Wc.error({error:new Ml({code:"HB_MESSAGE_INVALID_START_TIMEOUT",details:Zt({},this.getDataForLogs(),{timeout:t})})})}handleFetchBidsCompleteEventData(e){try{const{bids:i,creatives:n,creativeUrls:r,warnings:a}=function(e,i){const n=[];if(!Array.isArray(e))throw new Ml({code:"HB_NON_ARRAY_BIDS_DATA",details:Jt({},i,{fetchedBids:e})});e.length>1&&n.push(new Ml({code:"HB_EXTRA_BIDS_DATA",details:Jt({},i,{fetchedBids:e})}));const[r]=e;if(!o(r))throw new Ml({code:"HB_NON_OBJECT_BIDS_DATA",details:Jt({},i,{fetchedBids:e})});const{bids:a,creatives:s,creativeUrls:l}=r;if(!Array.isArray(a)||!Rp(a,o))throw new Ml({code:"HB_INVALID_BIDS_OBJECTS",details:Jt({},i,{fetchedBids:e})});if(!o(s)||!Rp(Qt(s),t))throw new Ml({code:"HB_BIDS_INVALID_CREATIVES",details:Jt({},i,{fetchedBids:e})});if(!o(l)||!Rp(Qt(l),t))throw new Ml({code:"HB_BIDS_INVALID_CREATIVE_URLS",details:Jt({},i,{fetchedBids:e})});return{bids:a,creatives:s,creativeUrls:l,warnings:n}}(e,this.getDataForLogs()),s={bids:i,creatives:n,creativeUrls:r};Xt(a),Wc.log({name:"HBFetchBidsComplete",data:Zt({},this.getDataForLogs(),{fetchedBidsObject:s})}),this.destroy(s)}catch(Mw){Wc.errorToStats(Mw)}}sendBidsRequest(){const{win:e,adBreakType:t,adFoxParameters:i}=this.params,o=z(e),n={id:this.postMessageRequestId,methodName:"FetchBids",data:[{containerId:i.containerId,adBreakType:t}]};for(const s of o)qt(Zt({win:s},n));const{promise:r,clear:a}=Qu(100,window);return this.addDestroyHandler(a),new Promise(((t,i)=>{r.then((()=>{const{promise:t,teardown:i}=function(e){let t;const i=Math.random(),o=new Promise((o=>{t=q({element:e,eventName:"message",listener:e=>{let{data:n}=e;n===i&&(t(),o())}}),e.postMessage(i,"*")}));return{teardown:t,promise:o}}(e);return this.addDestroyHandler(i),t})).then((()=>{i(new Ml({code:"HB_HANDSHAKE_TIMEOUT",details:this.getDataForLogs()}))})).catch(i);const o=Kt((e=>{a(),t(e)}),(e=>{Wc.error({error:new Ml({code:"HB_START_MULTIPLE_TIMES",details:Zt({},this.getDataForLogs(),{data:e})})})}));this.addDestroyHandler(this.onFetchBidsStart.add(o))}))}getDataForLogs(){const{adBreakType:e,adFoxParameters:t}=this.params;return{adBreakType:e,adFoxParameters:t,postMessageRequestId:this.postMessageRequestId}}}const Lp=function(e){return void 0===e&&(e=window),e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1},xp=function(e){return void 0===e&&(e=window),"BackCompat"===e.document.compatMode};var Bp,Mp;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ETHERNET=1]="ETHERNET",e[e.WIFI=2]="WIFI",e[e.CELL_2G=3]="CELL_2G",e[e.CELL_3G=4]="CELL_3G"}(Bp||(Bp={})),function(e){e.BLUETOOTH="bluetooth",e.CELLULAR="cellular",e.ETHERNET="ethernet",e.MIXED="mixed",e.NONE="none",e.OTHER="other",e.UNKNOWN="unknown",e.WIFI="wifi",e.WIMAX="wimax"}(Mp||(Mp={}));const Up=e=>Math.max(0,Math.round(e));class Fp{constructor(){this.config=function(){const e={width:window.innerWidth,height:window.innerHeight},t=xp(),i={win_width:Up(e.width),win_height:Up(e.height),pixel_ratio:Lp(),bandwidth:$t()};return t&&(i.quirks=t),i}()}set(e,t){this.config[e]=t}get(e){return this.config[e]}toString(){return JSON.stringify(this.config)}}const Hp=["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru","yandexsport.ru"],zp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";si();const Wp=()=>0,jp=(e,t)=>{const i=e.toString();return"0000".substr(0,t-i.length)+i},Yp=e=>{const t=e.getFullYear(),i=jp(e.getMonth()+1,2),o=jp(e.getDate(),2),n=jp(e.getHours(),2),r=jp(e.getMinutes(),2),a=jp(e.getSeconds(),2),s=jp(e.getMilliseconds(),3),l=(e=>{const t=-e.getTimezoneOffset();return(t>=0?"+":"-")+jp(Math.floor(Math.abs(t)/60),2)+":"+jp(Math.abs(t)%60,2)})(e);return t+"-"+i+"-"+o+"T"+n+":"+r+":"+a+"."+s+l},Gp=()=>function(e,t){let i=1+4294967295*md();return i=Math.floor(i),i}();let Xp=0;const Kp=[/avito/],qp=["slide","visibleAfterInit","stick","stickTo","stickyColorScheme","replayMode","preload"],Qp=["ya","ndex.ru/ads/adf","ox"].join("");class Jp extends Hc{constructor(e){super(),this.params=e;const{promise:t,clear:i}=Qu(3e3,e.win);this.loadingTimeoutPromise=t,this.addDestroyHandler(i),this.loadVastPromise=this.processAdFoxVastLoading().catch((e=>{throw Wc.error({error:e}),this.destroy(),e}))}async processAdFoxVastLoading(){var e;const{adConfig:t,adPlacementOptions:i}=this.params;let{adFoxParameters:o}=t;const{bids:n,containerId:r}=o;if(!n&&r){const e=new Vp({adBreakType:this.params.adBreakType,adFoxParameters:yi({},o,{containerId:r}),win:window});this.addDestroyHandler((()=>{e.destroy(Np)}));const i=await Promise.race([e.requestPromise,this.loadingTimeoutPromise.then((()=>{throw new Ml({code:"HB_VAST_LOAD_TIMEOUT",details:{adConfig:t,timeout:3e3}})}))]);o=yi({},o,i)}const a={},s=await Promise.race([_i({adFoxParameters:o,adPlacementOptions:i,secureMode:t.secureMode,__requestInfoForLogs:a}),this.loadingTimeoutPromise.then((()=>{throw new Ml({code:"ADFOX_AD_DATA_LOADING_TIMEOUT",details:{adConfig:t,adFoxParameters:o}})}))]),{vastBase64:l}=s;if(l){const e=await this.processBase64Vast(l).catch((e=>{throw new Ml({code:"ADFOX_VAST_BASE64_LOAD_ERROR",details:{adConfig:t,vastBase64:l,error:e,adFoxUrl:a.adFoxUrl,responseText:a.responseText,responseHeaders:a.responseHeaders}})}));return Wc.log({name:"AdFoxVastLoadedUsingHB",data:{adConfig:t}}),this.destroy(),e}const d=await this.processLoadingHBCreativeUsingCampaignId(o,s),c=Vc(null!=(e=o.bids)?e:[],(e=>""+(e.campaign_id||"")===s.campaignId));return Jl(c,(e=>{let{win_notice:t}=e;t&&Jl(d.ads,(e=>{e.trackingEvents.creativeView||(e.trackingEvents.creativeView=[]),e.trackingEvents.creativeView.push(t)}))})),Wc.log({name:"AdFoxVastLoaded",data:{adConfig:t}}),this.destroy(),d}processLoadingHBCreativeUsingCampaignId(e,t){let{campaignId:i}=t;const{adConfig:o}=this.params,{creatives:n={},creativeUrls:r={}}=e,{wrapperMaxCount:a}=o,s=n[i],l=r[i];if(!s&&!l)throw new Ml({code:"HB_CREATIVE_IS_NOT_FOUND",details:{adConfig:o,adFoxParameters:e,campaignId:i}});return s?this.processBase64Vast(s).catch((e=>{throw new Ml({code:"HB_VAST_BASE64_LOAD_ERROR",details:{adConfig:o,vastBase64:s,error:e}})})):Ip({url:l,loadParameters:ze({adConfig:o,adBreakType:this.params.adBreakType,remainingLoadWrapperVastCount:a,isAdFox:!0,adPlacementOptions:$c})}).catch((e=>{throw new Ml({code:"HB_VAST_URL_LOAD_ERROR",details:{adConfig:o,vastUrl:l,error:e}})}))}processBase64Vast(e){let t;try{t=He(e)}catch(Mw){const t=Ul(Mw);throw new Ml({code:"ADFOX_VAST_BASE64_PARSING_ERROR",details:{error:t}})}return Dp({xmlString:t,loadParameters:ze({adConfig:this.params.adConfig,adBreakType:this.params.adBreakType,remainingLoadWrapperVastCount:this.params.adConfig.wrapperMaxCount,isAdFox:!0,adPlacementOptions:$c}),vastUrl:void 0})}}const Zp=function e(t){return fd(t,((t,i)=>t.concat($l(i)?e(i):i)),[])},$p=e=>{const t=e.match(/(.*?)[?#]/);return null===t?e:t[1]},em=e=>{const{protocol:t}=I(e);return"blob:"===t?e:fe(e)?a(kc(window))?e:R(e,{[eu]:ic}):e},tm=e=>fi({},e,{url:em(e.url)}),im="ad-creative-animation/javascript",om={MotionTailor:"motion_ad_creative",InteractiveElementsAdCreative:"interactive_elements_ad_creative",SurveyOldDesignAdCreative:"survey_old_design_ad_creative"},nm=Ci({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"},om),rm=ve(om,(e=>e+".js")),am=(bi(rm),ve(rm,(e=>"https://"+Zd+"/"+th+"/"+e))),sm=bi(am),lm=Pi({},Jh,{url:am.InteractiveElementsAdCreative,type:im}),dm=wi({},Jh,{url:am.MotionTailor,type:im}),cm=Oi({},Jh,{url:am.SurveyOldDesignAdCreative,type:im}),um=["tickerData","interactiveElements","mediaFiles","adTitle","adTune"],hm=["AUCTION_DC_PARAMS","HAS_BUTTON","HAS_AGE","HAS_LEGAL","LEGAL_TEXT"],pm=["https://"+Zd+"/pcode/media/vpaid-pythia-survey-embed.js"],mm=e=>{const{mediaFiles:t}=e;return Array.isArray(t)&&Gc(t,(e=>V(uh,e.url)))},Am="about:blank",gm=e=>{let{additionalParams:t,videoContentId:i,videoContentName:o,videoPublisherId:n,videoPublisherName:r,videoGenreId:a,videoGenreName:s,musicArtistId:l,musicGenreId:d,musicGenreName:c,preferableAdSize:u}=e;const{ICOOKIE:h,TEST_IDS:p,AB_FLAGS:m}=tc,A="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_REMOVE_OLD_SIZE_PARAMS_FROM_VMAP_REQUEST");return Gi({},Yi(t),{"video-content-id":i,"video-content-name":o,"video-publisher-id":n,"video-publisher-name":r,"video-genre-id":ji(a),"video-genre-name":ji(s),"meta-request-index":void 0,"meta-impid-request-index":void 0,music_artist_id:l,"music-genre":d,"music-genre-name":c,"ad-session-id":Su(),[kd]:tc.hardcodedParams["aim-banner-id"],[Dd]:tc.hardcodedParams["aim-design-id"],[Nd]:tc.hardcodedParams["aim-design-name"],[Rd]:tc.hardcodedParams["aim-subdesign-id"],"pcode-icookie":h,"pcode-test-ids":p,"pcode-flags":JSON.stringify(m)},!A&&{"preferable-ad-size-width":u?String(Math.round(u.width)):void 0,"preferable-ad-size-height":u?String(Math.round(u.height)):void 0},{"pcode-version":void 0,"widget-version":void 0,uniformat:"true"})},vm=e=>{let{adConfig:t,win:i,repeatNumber:o,sessionId:n}=e;const{targetRef:r,width:a,height:s,tagsList:l,extParam:d,distrId:c,metaRequestIndex:u,metaImpIdRequestIndex:h}=t,p=i.document.referrer,m=C(i);let A;return r?(A=r,Wc.log({name:"UsingTargetRefApiParameter",data:{adConfig:t}})):m===Am?(A=p,Wc.log({name:"UsingTargetRefAboutBlankFallback",data:{adConfig:t}})):A=m,Xi({},gm(t),{"meta-request-index":void 0===u?void 0:String(u),"meta-impid-request-index":void 0===h?void 0:String(h),"repeat-number":Bt(o)?String(o):void 0,"target-ref":A,"page-ref":p,"video-width":a,"video-height":s,"tags-list":ji(l),"ext-param":d,"video-session-id":n,"distr-id":c,"enable-page-options":"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_REMOVE_ENABLE_PAGE_OPTIONS_PARAM_FROM_LINK")?void 0:"65536"})},_m="Yabs Ad Server",ym=[_m,"AWAPS","Yandex Ad Server","Yandex Advertising Partner"],fm=["AdFox.Ru","ADFOX"],Sm={text:"",textColor:"#FFFFFF",isVisible:!1},Tm=document.createElement("video"),Em="function"===typeof Tm.load?function(e,t){return void 0===t&&(t=Tm),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1,bm=["application/vnd.apple.mpegurl","application/x-mpegurl"];var Cm,Pm;const wm=null!=(Cm=null!=(Pm=window.URL)?Pm:window.webkitURL)?Cm:{},Om=a(wm.createObjectURL)&&a(wm.revokeObjectURL)?wm:void 0,Im=Kd({propertyName:"YANDEX_VIDEO_PRELOADER_GLOBAL_CALLBACK_PROPERTY_NAME"});class km{constructor(e,t){this.mediaAd=e,this.adMediaFile=t}preload(){const{firstFrameImages:e}=this.mediaAd.vastAd,t=oo(e,this.adMediaFile);t&&no(t.url);const o=tm(this.adMediaFile),{type:n}=o;return(e=>!!i(e)&&!!Em(e)&&(e=>Boolean(Om)&&!ro(e))(e))(n)?(Im.call({callbackArguments:[{mediaFile:o,videoPreloader:this}]}),this.preloadToBlob(o).then((e=>({firstFrameImage:t,mediaFile:null!=e?e:o})))):Promise.reject(new Error(n+" cannot be preloaded"))}cancel(){void 0!==this.xhr&&(this.xhr.abort(),this.xhr=void 0)}destroy(){this.cancel(),t(this.blobUrl)&&(null==Om||Om.revokeObjectURL(this.blobUrl))}async preloadToBlob(e){const{response:t}=await(i={method:"GET",url:e.url,responseType:"blob",onBeforeSend:e=>this.xhr=e},new Promise(((e,t)=>{oe(eo({},i,{onSuccess:e,onError:t}))})));var i;return this.blobUrl=null==Om?void 0:Om.createObjectURL(t),ao({},e,{url:this.blobUrl})}}const Dm=e=>!(!(e=>{const t=e.document;return"documentMode"in t&&"undefined"!==typeof t.documentMode})(e)&&!(e=>{const t=e.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0})(e)),Nm=(e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e)&&fc(e))(window),Rm=Nm?"ES2017":"ES5",Vm="utf-8",Lm={onBeforeLoad:e=>{((e,t)=>{e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__=t})(e,co({},qe(tc,Uc)))}},xm=e=>{(e=>{e.crossOrigin="anonymous"})(e),null==Lm.onBeforeLoad||Lm.onBeforeLoad(e)},Bm="YS Text, -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif",Mm=1e3;class Um extends Hc{constructor(){super(),this.isStarted=!1,this.spent=0,this.callbacks=[],this.timeoutId=0,this.recalculateTimeAndDispatchCallbacks=()=>{if(!this.isStarted)return;const e=Date.now();if(this.spent+=e-this.lastStartTime,this.lastStartTime=e,this.dispatchCallbacksByTime(),this.callbacks.length<=0)return;const{time:t}=this.callbacks[0];window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(this.recalculateTimeAndDispatchCallbacks,t-this.spent)},this.addDestroyHandler((()=>{this.stop()}))}start(){this.isStarted||this.isDestroyed||(this.isStarted=!0,this.lastStartTime=Date.now(),this.recalculateTimeAndDispatchCallbacks())}stop(){this.isStarted&&(window.clearTimeout(this.timeoutId),this.isStarted=!1,this.spent+=Date.now()-this.lastStartTime)}getTime(){return this.isStarted?Date.now()-this.lastStartTime+this.spent:this.spent}addCallback(e,t){e<=this.getTime()&&this.isStarted?t():(this.addCallbackToArray(e,t),this.recalculateTimeAndDispatchCallbacks())}waitForTime(e){return new Promise((t=>{this.addCallback(e,t)}))}addCallbackToArray(e,t){const i={time:e,callback:t};for(let o=0;o<this.callbacks.length;o++){const{time:t}=this.callbacks[o];if(t>=e)return void this.callbacks.splice(o,0,i)}this.callbacks.push(i)}dispatchCallbacksByTime(){const[e,t]=Qi(this.callbacks,(e=>{let{time:t}=e;return t<=this.spent}));this.callbacks=t,Jl(e,(e=>{let{callback:t}=e;t()}))}}const Fm=po({},Sh,{display:"flex",flexDirection:"column",justifyContent:"center",fontFamily:Bm,padding:"14px",backgroundColor:"#f4f6fb",fontSize:"14px",color:"#a3acbf",boxSizing:"border-box"}),Hm={fontWeight:"600",fontSize:"16px",color:"#3a3d40",textAlign:"center"},zm={listStyle:"none",margin:"0px",padding:"0px",alignSelf:"flex-start",width:"100%"},Wm=mo({},Sh,{display:"flex",justifyContent:"center",alignItems:"center",fontFamily:Bm,backgroundColor:"#fff",fontSize:"14px",color:"#000",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' version='1.1'%3E%3Crect width='50' height='50' fill='rgba(0, 0, 0, 0.2)'/%3E%3Crect width='50' height='50' y='50' x='50' fill='rgba(0, 0, 0, 0.2)'/%3E%3C/svg%3E \")",backgroundSize:"20% 20%",backgroundRepeat:"repeat",backgroundPosition:"0 0"}),jm="https://"+Zd+"/"+eh+"/1_0/test-ad-creative.js",Ym=(e,t)=>e+"_"+t;var Gm=e(9233);class Xm extends Hc{constructor(e){let{win:t,onReport:i}=e;super();const o=t;if(void 0===o.ReportingObserver)return;const n=new o.ReportingObserver((e=>{i({reportSourceEvent:"callback",reports:e,records:n.takeRecords()})}),{buffered:!0});n.observe();const r=n.takeRecords();r.length&&i({reportSourceEvent:"buffered",reports:[],records:r}),this.addDestroyHandler(q({element:t,eventName:"beforeunload",listener:()=>{const e=n.takeRecords();e.length>0&&i({reportSourceEvent:"beforeunload",reports:[],records:e})}})),this.addDestroyHandler((()=>{const e=n.takeRecords();e.length>0&&i({reportSourceEvent:"destroy",reports:[],records:e}),n.disconnect()}))}}const Km=I(Tc).hostname,qm=250;let Qm=0;const Jm=[],Zm=(e,t)=>{const i=e.contentDocument.body;return _o((()=>{var e;(null==(e=i.ownerDocument)||!e.defaultView)&&t()}))};class $m extends Hc{static create(e){const{parentElement:t,attributes:i,scope:o}=e,n=yo(t,i);if(!n)throw go({scope:o,errorType:"NOT_CREATED",error:new Error,details:void 0});return new $m(So({},e,{iframe:n}))}static createHidden(e){const{parentElement:t,attributes:i,scope:o}=e,n=fo(t,i);if(!n)throw go({scope:o,errorType:"NOT_CREATED",error:new Error,details:void 0});return new $m(So({},e,{iframe:n}))}constructor(e){super();const{scope:t,iframe:i}=e;this.iframe=i,this.window=this.iframe.contentWindow,this.addDestroyHandler((()=>{l(i)})),this.addDestroyHandler(Zm(this.iframe,(()=>{this.destroy(go({scope:t,errorType:"WAS_UNLOADED",error:new Error,details:void 0}))}))),this.addDestroyHandler(vo(this.window,((i,o,n)=>{const r="PRELOADING_IFRAME"===e.scope?void 0:e.provideLogDetails?e.provideLogDetails():void 0;Wc.error({error:go({scope:t,errorType:o,error:i,details:So({},r,{error:i,data:n})})})})))}}Kd({propertyName:"AD_CREATIVE_PRELOADER_GLOBAL_CALLBACK_NAME"});class eA extends Hc{constructor(e){super(),this.animationMediaFile=e,this.addDestroyHandler((()=>{this.cancel()}))}preload(){const e=this.createHiddenIframeForPreloading().contentWindow,{promise:t,teardown:i}=Ao({animationMediaFile:this.animationMediaFile,win:e});return this.loadAdCreativeMediaFileTeardown=i,t.then((e=>({initAdCreative:e})))}cancel(){void 0!==this.loadAdCreativeMediaFileTeardown&&this.loadAdCreativeMediaFileTeardown(),void 0!==this.friendlyIFrame&&this.friendlyIFrame.destroy(void 0)}createHiddenIframeForPreloading(){const e=$m.createHidden({parentElement:document.body,scope:"PRELOADING_IFRAME"});return this.friendlyIFrame=e,e.iframe}}const tA=e=>{let{src:t,win:i}=e;const{promise:o,teardown:n}=ho({src:t,win:i,onBeforeLoad:d});return{promise:o.then((()=>i.getVPAIDAd)),teardown:n}},iA=["preloadTimeout"];class oA extends Hc{constructor(e,t,i){super(),this.parsedPreloadParams=e,this.jsMediaFile=t,this.vastAd=i,this.addDestroyHandler((()=>{this.cancel()}))}async preload(){var e;const t=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(this.parsedPreloadParams,iA),i=this.jsMediaFile,o=this.createHiddenIframeForPreloading().contentWindow,{promise:n,teardown:r}=tA({src:i.url,win:o});this.loadVPAIDCreativeModuleTeardown=r;try{await n}catch(Mw){throw new Ml(Mw,{code:"CANNOT_PRELOAD_VPAID_CREATIVE_MODULE"})}return"function"!==typeof(null==(e=o.Ya)?void 0:e.preloadVPAIDAd)?{vpaidWindow:o}:o.Ya.preloadVPAIDAd(To({},t,{creativeData:{AdParameters:this.vastAd.adParameters}})).readyPromise.then((e=>({creativeData:e,vpaidWindow:o}))).catch((e=>({vpaidWindow:o,vpaidPreloadError:e})))}cancel(){void 0!==this.loadVPAIDCreativeModuleTeardown&&this.loadVPAIDCreativeModuleTeardown(),void 0!==this.preloadingIframe&&this.preloadingIframe.destroy(void 0)}createHiddenIframeForPreloading(){const e=$m.createHidden({parentElement:document.body,scope:"PRELOADING_IFRAME"});return this.preloadingIframe=e,e.iframe}}const nA="TRUE"===Uc.getFlagValueAndActivateTestId("DISABLE_144P_QUALITY"),rA=(bo({},tc.AB_FLAGS),bo({},tc.AB_FLAGS)),aA=e=>rA[e],sA="TRUE"===aA("DISABLE_VP9_CODECS"),lA="TRUE"===aA("ENABLE_H265_CODECS")||void 0,dA="video/webm",cA=e=>{let{type:t,codec:i}=e;return i?t+'; codecs="'+i+'"':t},uA={},hA=e=>{uA[e]||(uA[e]=!0,Wc.log({name:"WrongRequestMediaFileCodec",sensors:{codec:e}}))},pA=A((()=>{Wc.log({name:"MediaFileStringSize"})})),mA=(e=>{const t=Oo(window);return!!t&&Boolean(Le((()=>t.isTypeSupported('video/webm; codecs="vorbis,vp8"'))))})(),AA=Oo(),gA=!Gl&&Em("video/webm"),vA=mA&&gA,_A=AA&&n(AA),yA=void 0!==window.AbortController&&void 0!==window.fetch&&n(AbortController)&&n(fetch),fA=_A&&yA,SA=Uc.getNumberFlagValueAndActivateTestId("VAS_BITRATE_CAP_VALUE"),TA=he(SA)?SA:1e4,EA=A((e=>{Wc.log({name:"InvalidMediaFileBitrate",data:{mediaFile:e}})})),bA=A((e=>{Wc.log({name:"InvalidMediaFileCodec",data:{mediaFile:e}})})),CA=A((e=>{Wc.log({name:"InvalidMediaFileHasAudio",data:{mediaFile:e}})})),PA=A((e=>{Wc.log({name:"InvalidMediaFileWidthHeight",data:{mediaFile:e}})})),wA=A((e=>{Wc.log({name:"InvalidMediaFileVmafAvg",data:{mediaFile:e}})})),OA=A((e=>{Wc.log({name:"InvalidMediaFileTypeEmpty",data:{mediaFile:e}})})),IA=Uc.getNumberFlagValueAndActivateTestId("VAS_BITRATE_CAPPING_SOLUTION_MULTIPLIER"),kA=he(IA)?IA:10,DA=e=>{const t=Number(aA(e));return me(t)?t:void 0},NA=DA("MEDIA_FILE_BITRATE_PRIORITY_FACTOR"),RA=Bt(NA)?ko(NA,0,1):1e-6,VA=Uc.getFlagValueAndActivateTestId("PERFECT_VPR"),LA=Number(VA),xA=he(LA)?LA:1.3,BA=DA("VAS_LONG_EXP_FLAG_MEDIA_FILE_TYPE_PRIORITY_FOR_HLS"),MA=Bt(BA)?BA:void 0,UA=DA("VAS_LONG_EXP_FLAG_MEDIA_FILE_TYPE_PRIORITY_FOR_MP4"),FA=Bt(UA)?UA:void 0,HA=DA("VAS_LONG_EXP_FLAG_MEDIA_FILE_TYPE_PRIORITY_FOR_UNKNOWN_TYPE"),zA=Bt(HA)?HA:void 0,WA=DA("VAS_LONG_EXP_FLAG_MEDIA_FILE_TYPE_PRIORITY_FOR_UNSET_TYPE"),jA=Bt(WA)?WA:void 0,YA=DA("VAS_LONG_EXP_FLAG_MEDIA_FILE_TYPE_PRIORITY_FOR_WEBM"),GA=Bt(YA)?YA:void 0,XA={bitratePriorityFactor:RA,mediaFileTypePriorities:{webm:null!=GA?GA:1,mp4:null!=FA?FA:2,unknown:null!=zA?zA:3,unset:null!=jA?jA:4,hls:null!=MA?MA:1e4},canPlayType:Em,perfectVpr:xA};class KA extends Hc{constructor(e){super(),this.isCancelled=!1,this._isPreloaded=!1,this.preloaders=[];const{params:t,contentType:i,options:o,mediaAd:n,stats:r}=e;this.parsedParams=function(e){const{videoSlot:t,viewMode:i="normal",preloadJS:o=!0,preloadVideo:n=!0}=e,{width:r=t.clientWidth,height:a=t.clientHeight}=e,s=wt(e.desiredBitrate);let{preloadTimeout:l}=e;return("number"!==typeof l||l>dp)&&(l=dp),{preloadTimeout:l,width:r,height:a,desiredBitrate:s,viewMode:i,videoSlot:t,preloadJS:o,preloadVideo:n}}(t),this.contentType=i,this.getMediaFiles=o.getMediaFiles,this.getJSMediaFile=o.getJSMediaFile,this.getVastAd=o.getVastAd,this.mediaAd=n,this.stats=r}get isPreloaded(){return this._isPreloaded}get promise(){return this._promise?this._promise:Promise.resolve()}get vpaidWindow(){return this._vpaidWindow}get preloadedVideoFile(){return this._preloadedVideoFile}get preloadedAdCreativeInitFunction(){return this._preloadedAdCreativeInitFunction}get preloadedVpaidAdParameters(){return this._preloadedVpaidAdParameters}get preloadedFirstFramePicture(){return this._preloadedFirstFramePicture}cancelPreloading(e){this.isCancelled||(this.isCancelled=!0,this.isPreloaded||(this._promise&&this.stats.log({name:"PreloadCancelled",data:{reason:e}}),this._promise=void 0,this._vpaidWindow=void 0,this._preloadedVpaidAdParameters=void 0,this._preloadedFirstFramePicture=void 0,this._preloadedAdCreativeInitFunction=void 0,Jl(this.preloaders,(e=>e.cancel()))))}destroy(e){super.destroy(e),this.isCancelled||this.cancelPreloading("Destroy"),Jl(this.preloaders,(e=>e.destroy())),this.preloaders.length=0}async preload(){const e=Qu(this.parsedParams.preloadTimeout,window),t=e.promise.then((()=>this.cancelPreloading("Timeout")));this._promise=this._preload().then((()=>{e.clear()})),await Promise.race([this._promise,t]),this._isPreloaded=!0}async _preload(){try{const{preloadJS:t,preloadVideo:i}=this.parsedParams,o=this.getVastAd();if(Fi(o)){var e;const{parsed:{videoMediaFiles:n,animationMediaFile:r}}=$i(null!=(e=o.adParametersObject)?e:o.adParameters),a=[];if(i&&n.length>0){const e=this._preloadVideoFile(n,this.parsedParams);a.push(e)}if(t&&r){const e=this._preloadAdCreative(r);a.push(e)}return void(await Promise.all(a))}if(i&&"video"===this.contentType)return await this._preloadVideoFile(this.getMediaFiles(),this.parsedParams);if(t&&"js"===this.contentType)return await this._preloadVpaidCreative(this.parsedParams)}catch(Mw){if(this.isCancelled)return;const t=ne(Mw)?Mw:new Ml(Mw,{code:"CANNOT_PRELOAD"});this.stats.error({error:t}),Ki(Mw),this.destroy("Error")}}async _preloadAdCreative(e){const t=new eA(e);this.preloaders.push(t);try{const e=await t.preload();this._preloadedAdCreativeInitFunction=e.initAdCreative}catch(Mw){if(ne(Mw))throw Mw;throw new Ml(Mw,{code:"CANNOT_PRELOAD_AD_CREATIVE"})}}async _preloadVpaidCreative(e){var t,i;const o=this.getJSMediaFile();if(!o)return;const n=new oA(e,o,this.getVastAd());let r;this.preloaders.push(n);try{r=await n.preload()}catch(Mw){const t=ne(Mw)?Mw:new Ml(Mw,{code:"CANNOT_PRELOAD_VPAID_CREATIVE"});return this.stats.error({error:t}),void Ki(Mw)}void 0!==(null==(t=r)?void 0:t.vpaidPreloadError)&&this.stats.error({error:new Ml(r.vpaidPreloadError,{code:"CANNOT_PRELOAD_VPAID_CREATIVE"})}),this._vpaidWindow=r.vpaidWindow,this._preloadedVpaidAdParameters=null==(i=r.creativeData)?void 0:i.AdParameters}async _preloadVideoFile(e,t){const{adBreak:i}=this.mediaAd,o=this.mediaAd.getAdPodId(),{width:n,height:r,desiredBitrate:s}=t,{prioritisedMediaFile:l}=Vo(e,Lo({container:{width:n,height:r},desiredBitrate:s,isVideoADB:a(kc(window))},XA),{adBreak:i,adPodId:o,initiator:"PreloadingController"});if(!l)return;const d=new km(this.mediaAd,l);let c;this.preloaders.push(d),this.preloaders.push(d);try{const e=await d.preload();c=e.mediaFile,this._preloadedFirstFramePicture=e.firstFrameImage}catch(Mw){if(ne(Mw))throw Mw;throw new Ml(Mw,{code:"CANNOT_PRELOAD_VIDEO_FILE"})}this._preloadedVideoFile=c}}const qA={width:void 0,height:void 0};class QA{constructor(){this.x=NaN,this.y=NaN,this.width=NaN,this.height=NaN}static fromVastIcon(e){const t=new QA;return t.src=e.src,t.type=e.program,t.x=e.xPosition,t.y=e.yPosition,t.width=e.width,t.height=e.height,t}}class JA{get contentType(){return this.getIsConvertedFromVideoVast()?"video":this.getJSMediaFile()?"js":"video"}constructor(e,t,i,o){this.duration=0,this.getMediaFiles=()=>Ti(this.vastAd.mediaFiles,this.adConfig.secureMode),this.getAdContentDimensions=()=>function(e){let{vastAd:t,secureMode:i}=e;const{mediaFiles:o,adParameters:n,adParametersObject:r}=t;if(Fi(t)){const{parsed:{videoMediaFiles:e}}=$i(null!=r?r:n);return 0===e.length?qA:xo(e)}const a=Bo(o,i);return xo(a?[a]:Ti(o,i))}({vastAd:this.vastAd,secureMode:this.adConfig.secureMode}),this.getJSMediaFile=()=>Bo(this.vastAd.mediaFiles,this.adConfig.secureMode),this.getIsConvertedFromVideoVast=()=>{const{vastAd:{originallyConvertedFromVast:e}}=this;return void 0!==e&&Ei({secureMode:this.adConfig.secureMode,vastAd:e})},this.getPreloadedAdCreativeInitFunction=()=>{var e;return null==(e=this.preloadingController)?void 0:e.preloadedAdCreativeInitFunction},this.adBreak=e,this.vastAd=t,this.adConfig=i,this.stats=o,this.icons=sc(this.vastAd.icons,(e=>QA.fromVastIcon(e))),isNaN(this.vastAd.duration)||(this.duration=this.vastAd.duration)}getAdPodId(){return(this.vastAd.adId||"")+";"+(this.vastAd.creativeId||"")+";"+this.vastAd.parseIndex+";"+this.vastAd.randomHexString+";"+(this.vastAd.bidreqid||"")+";"+(this.vastAd.campaignid||"")+";"+(this.vastAd.pageId||"")+";"+(this.vastAd.impId||"")+";"+(this.vastAd.vmapRequestId||"")}trackError(e){Re(e,this.vastAd.trackingEvents.error)}hasMediaFiles(){var e;return(null==(e=this.getMediaFiles())?void 0:e.length)>0}cancelPreloading(e){if(this.preloadingController){if("Destroy"===e)return this.preloadingController.destroy("AdStoreDestroy"),void(this.preloadingController=void 0);this.preloadingController.isPreloaded||(this.preloadingController.cancelPreloading(e),this.preloadingController.destroy("CancelPreloading"),this.preloadingController=void 0)}}async preload(e){this.preloadingController||(this.preloadingController=new KA({params:e,contentType:this.contentType,options:{getMediaFiles:this.getMediaFiles,getJSMediaFile:this.getJSMediaFile,getVastAd:()=>this.vastAd},mediaAd:this,stats:this.stats}),await this.preloadingController.preload()),void 0!==this.preloadingController&&null!==this.preloadingController&&await this.preloadingController.promise}getIfIsRequiredHtmlControls(){return this.vastAd.adSystem===_m}getIsIndependentOnVideoElement(){return!!function(e){let{adParametersObject:t}=e;const i=null==t?void 0:t.mediaFiles,n=Array.isArray(i)?i[0]:void 0;return o(n)&&n.url===dm.url}(this.vastAd)||(this.getJSMediaFile(),!1)}getIsYandexCreative(){return e=this.vastAd,V(ym,e.adSystem);var e}getIsAdFoxStraightforwardSell(){return e=this.vastAd,V(fm,e.adSystem);var e}getPreloadVpaidWindow(){var e;return null==(e=this.preloadingController)?void 0:e.vpaidWindow}getPreloadedVideoFile(){var e;return null==(e=this.preloadingController)?void 0:e.preloadedVideoFile}getPreloadedFirstFramePicture(){var e;return null==(e=this.preloadingController)?void 0:e.preloadedFirstFramePicture}getPreloadedVpaidAdParameters(){var e;return null==(e=this.preloadingController)?void 0:e.preloadedVpaidAdParameters}getDuration(){return this.duration}actualizeDuration(e){this.duration!==e&&(oc("MediaAd: actualize duration previous=["+this.duration+"] next=["+e+"]"),this.duration=e)}isCreativeWithOwnControls(){const e=this.getJSMediaFile();return!!e&&!this.vastAd.imhoParams&&!Fi(this.vastAd)&&!fe(e.url)}}const ZA=()=>Ql.__VAS_TEST_UTILS_CONTEXT__,$A={impId:0,sessionId:"",vastTimeout:3e3},eg={adTagURI:"",adFoxParameters:void 0,inlineVast:void 0},tg=jo({adType:"inpage",replayMode:null,stick:!1},eg,$A),ig={bufferEmptyLimit:5,bufferFullTimeout:5e3,videoTimeout:5e3,vpaidTimeout:5e3},og=Yo({adType:"midroll",broadcastReplace:!1},eg,{repeatAfter:0,maxRepeatCount:0,repeatNumber:0,timeOffset:10},$A,ig),ng=Go({adType:"postroll"},eg,$A,ig),rg=Xo({adType:"preroll"},eg,$A,ig),ag={inpage:tg,preroll:rg,midroll:og,postroll:ng},sg=v(ag),lg=e=>{try{const t=function(e,t){return void 0===t&&(t=window),("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}(e);return"display"in t}catch(Bv){return!1}},dg="TRUE"===aA("DISABLE_SUBTITLES")||void 0,cg="DISABLE"===aA("UNMUTE_TEXT_VARIANT")?"DISABLE":void 0,ug=1,hg=0,pg=2,mg=0,Ag={notInterestedAd:{reason:3,action:2},alreadyPurchasedAd:{reason:14,action:2},seenTooOftenAd:{reason:22,action:2},overlapContentAd:{reason:9,action:1},anotherReasonAd:{reason:23,action:0}},gg={unpleasantContentAd:{reason:24,action:2},politicalAd:{reason:31,action:4},scammersAd:{reason:26,action:2},illegalGoodsOrServiceAd:{reason:27,action:2},anotherReasonAd:{reason:23,action:0}},vg={politicalSocialAd:{reason:16,action:4},shockingContentSocialAd:{reason:17,action:4},falseInfoSocialAd:{reason:18,action:4}},_g=en({},{hide:{reason:21,action:4},complaint:{reason:5,action:4},about:{reason:19,action:0},advertiserInfo:{reason:20,action:0}},Ag,gg,vg),yg={abuseUrl:"",legalText:void 0},fg="https://"+Jd+"/secure-ads",Sg="https://"+Jd+"/ads/advertiser_info",Tg={isAvailable:!1},Eg=!1,bg={handshakeVersion:"2.0",getAdDuration:-2,getAdRemainingTime:-2,getAdVolume:0,getAdIcons:!1,getAdExpanded:!1,getAdHeight:0,getAdWidth:0,getAdLinear:!0,getAdSkippableState:Eg},Cg=tn({},{startAd:void 0,stopAd:void 0,skipAd:void 0,resizeAd:void 0,pauseAd:void 0,resumeAd:void 0,expandAd:void 0,collapseAd:void 0,subscribe:void 0,unsubscribe:void 0,setAdVolume:void 0},{initAd:void 0}),Pg=tn({},bg,Cg),wg={adLinear:0,adWidth:0,adHeight:0,adExpanded:0,adSkippableState:0,adRemainingTime:0,adDuration:0,adVolume:0,adIcons:0},Og={adLinear:"getAdLinear",adWidth:"getAdWidth",adHeight:"getAdHeight",adExpanded:"getAdExpanded",adSkippableState:"getAdSkippableState",adRemainingTime:"getAdRemainingTime",adDuration:"getAdDuration",adVolume:"getAdVolume",adIcons:"getAdIcons"},Ig={adVolume:"setAdVolume"},kg=null!==Tm.onwaiting||Gl?(e,t)=>{let i=0,o=!1;return _o((()=>{var n;const r=e.currentTime,a=e.duration,{currentTime:s}=e,l=1===(null==(n=e.buffered)?void 0:n.length)&&s>e.buffered.end(0);if(l&&!o)return o=!0,void t(o);if(!l||!o){if(!e.paused){const e=i+.004;o?r>e&&(t(!1),o=!1):r<e&&r!==a&&(t(!0),o=!0)}i=r}}))}:(e,t)=>{let i=!1;const o=q({element:e,eventName:"pause",listener:()=>{i&&(i=!1,t(!1))},options:{passive:!0}}),n=q({element:e,eventName:"waiting",listener:()=>{i||(i=!0,t(!0))},options:{passive:!0}}),r=q({element:e,eventName:"playing",listener:()=>{i&&(i=!1,t(!1))},options:{passive:!0}}),a=q({element:e,eventName:"canplay",listener:()=>{i&&(i=!1,t(!1))},options:{passive:!0}});return()=>{o(),n(),r(),a()}};class Dg extends Hc{constructor(){super(),this.isPlaying=new hh(!1),this.isBuffering=new hh(!1),this.bufferingTimeCount=new Um,this.addDestroyHandler((()=>{this.bufferingTimeCount.destroy()}))}start(e){this.isPlaying.dispatch(!0),this.addDestroyHandler(kg(e,(e=>{this.isBuffering.dispatch(e)}))),this.addDestroyHandler(on([this.isPlaying,this.isBuffering],((e,t)=>e&&t),(e=>{e?this.bufferingTimeCount.start():this.bufferingTimeCount.stop()})))}pause(){this.isPlaying.dispatch(!1)}resume(){this.isPlaying.dispatch(!0)}getBufferingTime(){return this.bufferingTimeCount.getTime()/Mm}}const Ng={AdStarted:"creativeView",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdUserAcceptInvitation:"acceptInvitation",AdUserMinimize:"collapse",AdPaused:"pause",AdPlaying:"resume"},Rg={adloox:"AdCreativeInitMeasurer_adloox",adriver:"AdCreativeInitMeasurer_adriver",moat:"AdCreativeInitMeasurer_moat",weborama:"AdCreativeInitMeasurer_weborama"},Vg=["impression"],Lg={adloox:{impression:"TrackingEventWithMeasurer_impression_adloox"},yandexTestMeasurer:{impression:"TrackingEventWithMeasurer_impression_yandexTestMeasurer"},weborama:{impression:"TrackingEventWithMeasurer_impression_weborama"},moat:{impression:"TrackingEventWithMeasurer_impression_moat"},adriver:{impression:"TrackingEventWithMeasurer_impression_adriver"}},xg=v({AdLoaded:0,AdStarted:0,AdStopped:0,AdSkipped:0,AdSkippableStateChange:0,AdSizeChange:0,AdLinearChange:0,AdDurationChange:0,AdExpandedChange:0,AdRemainingTimeChange:0,AdPodDurationChange:0,AdVolumeChange:0,AdImpression:0,AdVideoStart:0,AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoBeforeComplete:0,AdVideoComplete:0,AdClickThru:0,AdInteraction:0,AdUserAcceptInvitation:0,AdUserMinimize:0,AdUserClose:0,AdPaused:0,AdPlaying:0,AdLog:0,AdError:0}),Bg=180,Mg=Boolean(Nc);class Ug{setTimeout(e,t){const i=window.setTimeout(e,t);return()=>window.clearTimeout(i)}now(){return Date.now()}}class Fg{constructor(e){this.stopped=!0,this.lastNow=0,this.lastKnockTime=0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0,this.distributionFunction=e,this.clock=new Ug}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.cancel=this.clock.setTimeout((()=>{this.knock(this.lastNow+this.lastTimeout)}),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}reset(){this.setDefaultParams()}setDefaultParams(){this.stopped=!0,this.lastNow=0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.lastKnockTime=0,this.count=0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||(this.cancel=this.clock.setTimeout((()=>{this.knock(e+t)}),t))}cancelTimeout(){this.cancel&&this.cancel(),this.cancel=void 0}}const Hg={height:0,width:0},zg=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Wg=1,jg=2,Yg=3,Gg=4,Xg=e=>{const t=e.currentTime,i=function(e){const t=[];if(!Boolean(e))return t;if(!Boolean(e.buffered))return t;if(!me(e.buffered.length)||!a(e.buffered.start)||!a(e.buffered.end))return t;for(let i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});return function(e){if(e.length<=1)return e;const t=sc(e,(e=>{let{start:t,end:i}=e;return{start:t,end:i}})).sort(((e,t)=>e.start-t.start)),i=[t[0]];for(let o=1;o<t.length;o++){const e=t[o],n=i[i.length-1];n.end<e.start?i.push(e):n.end<e.end&&(n.end=e.end)}return i}(t)}(e),o=(n=t,Nl(i,(e=>{let{start:t,end:i}=e;return t<=n&&n<=i})));var n;return o?o.end-t:0},Kg=function(e){return void 0===e&&(e=window),/Mobi|Android/i.test(e.navigator.userAgent)},qg=Kg(),Qg={PAGEURL:encodeURIComponent($(document).location),Y_DEVICE_TYPE:qg?"mobile":"desktop",Y_AD_SESSION_ID:fu()},Jg=.5;class Zg{constructor(){var e=this;this.events={},this.subscribe=(e,t,i)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");let o=this.events[t];void 0===o&&(o=this.events[t]=[]),o.push({callback:e,context:i})},this.unsubscribe=(e,t)=>{if("string"!==typeof t)throw new Error("Event name MUST be a string");if("function"!==typeof e)throw new Error("Event listener MUST be a function");const i=this.events[t];i&&(this.events[t]=Vc(i,(t=>{let{callback:i}=t;return e!==i})))},this.dispatch=function(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];if("string"!==typeof t)throw new Error("Event name MUST be a string");const r=e.events[t];r&&Jl(r,(e=>{let{callback:i,context:n}=e;try{i.apply(n,o)}catch(Bv){Wc.error({error:new Ml(Bv,{code:"VpaidEventBusCallbackError",details:{vpaidEventName:t,params:o}})})}}))}}}const $g="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ADLOOX_INIT_RU")?"https://pixel.adlooxtracking.ru/ads/ic.php":"https://pixel.adlooxtracking.com/ads/ic.php",ev={id1:"",id2:"",id5:"",id7:"",id9:""},tv="https://verify.yandex.ru/verify_adloox?platformid=3&platform=206&plat=206",iv=vc.split("/"),ov=iv[iv.length-1],{initMoatTracking:nv}=e(7176),rv={AdStopped:0,AdVideoStart:0,AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoComplete:0,AdPaused:0,AdPlaying:0,AdVolumeChange:0},av="yandexhostedvideo786420153684",sv={adriver:async e=>{let{vpaidCreative:t,slot:i,measurerParameters:o,yastaticVersion:n}=e;const r=i.ownerDocument.defaultView,a=(e=>"https://"+Zd+"/pcode-static/measurers/"+e+"/video/adriver.js")(n);await lo({win:r,src:a}).promise,new r.AdriverViewabilityYandexVPAID(An({},o,{ya_custom:"ADSID="+ic}),i,t),oc("adriver measurer loaded")},moat:async function(e){let{vpaidCreative:t,slot:i,measurerParameters:o,onMeasurerError:n,yastaticVersion:r,verifyLogAdditionalData:a=""}=e;const s=nv(i,gn({},o,{zMoatADID:a,slicer1:ov,partnerCode:av}),t.getAdDuration(),av,r);Jl(v(rv),(e=>{t.subscribe((()=>{try{s.dispatchEvent({type:e,adVolume:t.getAdVolume()})}catch(Mw){n(new Ml({code:"MOAT_DISPATCH_EVENT_ERROR",details:{error:Mw,eventName:e}}))}}),e)}))},adloox:async function(e){let{vpaidCreative:t,slot:i,measurerParameters:o,onMeasurerError:n,yastaticVersion:r,verifyLogAdditionalData:a=""}=e;var s;const l=mn({},o,{targetelt:((s=i).id||(s.id=S(8)),s.id),urli:tv,urlv:tv,urle:tv},{id8:a}),d=fd(le(l),((e,t,i)=>{let[o,n]=t;return"string"!==typeof n?e:e+(0===i?"#":"&")+o+"="+encodeURIComponent(n)}),"");t.subscribe((()=>{const e=""+(e=>"https://"+Zd+"/pcode-static/measurers/"+e+"/video/adloox.js")(r)+d;var t;Te((t=mn({},ev,l),R($g,(e=>{let{id1:t,id2:i,id5:o,id7:n,id9:r}=e;return{_:String(Math.random()),type:"pixel",plat:"206",tag_id:"1251",client:"yandex",id1:t,id2:i,id3:"",id4:"",id5:o,id7:n,id9:r,id11:"$ADLOOX_WEBSITE",id12:"video-pixel"}})(t)))),lo({win:i.ownerDocument.defaultView,src:e}).promise.catch((e=>{n(new Ml({code:"ADLOOX_SCRIPT_LOADING_ERROR",details:{error:e}}))}))}),"AdStarted")},weborama:async e=>{let{vpaidCreative:t,slot:i,measurerParameters:o,yastaticVersion:n,verifyLogAdditionalData:r=""}=e;const a=i.ownerDocument.defaultView,s=(e=>"https://"+Zd+"/pcode-static/measurers/"+e+"/video/weborama.js")(n);await lo({win:a,src:s}).promise,new a.WBMeasurerV(i,t,JSON.stringify(vn({},o,{siteid:r}))),oc("weborama measurer loaded")},yandexTestMeasurer:async e=>{let{vpaidCreative:t}=e;oc("start YandexTestMeasurer initialization"),Jl(xg,(e=>{const i=A((()=>{var t;Wc.log({name:(t=e,"YandexTestMeasurerVpaidEvent_"+t),data:{},sensors:{},values:{}})}));t.subscribe((function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];oc("YandexTestMeasurer received VPAID event=["+e+"], args=["+ai(o)+"]"),i()}),e)})),oc("complete YandexTestMeasurer initialization")}},lv={moat:{actual:"71",unstable:"71"},adloox:{actual:"35",unstable:"35"},weborama:{actual:"79",unstable:"88"},adriver:{actual:"28",unstable:"28"},yandexTestMeasurer:{actual:"1",unstable:"2"}},dv=v(sv),cv="omid",uv={1:[],2:[],3:[],5:[]},hv=["use_unstable_script"];class pv extends Hc{constructor(e,t,i){var n;super(),n=this,this.userInteractionDispatchers={AdClickThru:e=>{let{url:t,clickSource:i,playerHandles:o}=e;this.trackEvent("clickThrough",this.getTrackingUrlsByTrackingEventName("clickThrough"),{dailySensors:{clickSource:i}}),this.trackEncounters("click"),this.trackTrueView("click"),this.vpaidCreativeProxyForMeasurersEventBus.dispatch("AdClickThru",t,void 0,o)},AdSkipped:()=>{this.onSkipped.dispatch(void 0)},AdStopped:()=>{this.onStopped.dispatch(void 0)},AdVideoComplete:()=>{this.onVideoComplete.dispatch(void 0)},AdUserClose:()=>{this.onUserClose.dispatch(void 0)},AdTimeToSkipChange:d},this.playingStateValueSignal=new hh(!1),this.shouldPlayTimeCounter=new Um,this.vpaidEventBus=new Zg,this.vpaidCreativeProxyForMeasurersEventBus=new Zg,this.isVisibilityConfirmed=!1,this.initializedMeasurers=void 0,this.initMeasurableParameters=A((e=>{const t=e[4];if(!o(t))throw new Ml({code:"VPAID_MEASURER_INVALID_CREATIVE_DATA",details:void 0});const{AdParameters:i}=t,n=e[5];if(!o(n)||!o(n.slot))throw new Ml({code:"VPAID_MEASURER_INVALID_ENVIRONMENT_VARS",details:void 0});const{videoSlot:r}=n;this.bufferingTimeManager.start(r);const{parameters:a,errors:s}=function(e){if(!e)return{parameters:void 0,errors:[new Ml({code:"AD_PARAMETERS_ABSENT_IN_MEASURER",details:{adParametersString:e}})],events:[]};let t={};try{t=JSON.parse(e)}catch(Mw){return{parameters:void 0,errors:[new Ml({code:"INVALID_AD_PARAMETERS_JSON_IN_MEASURER",details:{adParametersString:e}})],events:[]}}const{viewability:i,encounters:o,dwell:n,start:r,trackingEvents:a,viewedComplete:s}=t,{measurers:l,errors:d,events:c}=function(e){const t=[],i=[],{rootField:o,bannerParametersField:n,unmoderatedBannerParametersField:r}=yn(e,"measurers");Boolean(r)&&t.push(new Ml({code:"AUCTION_DC_PARAMS_UNMODERATED_MEASURERS_ARE_USED",details:{rawAdParameters:e}}));const{measurers:a,errors:s,events:l}=fn(r),{measurers:d,errors:c,events:u}=fn(n),{measurers:h,errors:p,events:m}=fn(o);return t.push(...s,...c,...p),i.push(...l,...u,...m),fd([a,d,h],((e,t)=>{const i=v(t).length>0;return e+Number(i)}),0)>1&&t.push(new Ml({code:"USING_MULTIPLE_MEASURERS_OBJECTS",details:{rawAdParameters:e}})),{measurers:Sn({},a,d,h),errors:t,events:i}}(t);return{parameters:{measurers:l,viewability:Tn(i),dwell:Tn(n),trackingEvents:Pt(Ct(a),{encounters:_n(o),viewedComplete:_n(s),start:_n(r)}),skipAdSdkDetect:En(t)},errors:d,events:c}}(i);if(Jl(s,this.callbacks.onExecutionError),!a)throw new Ml({code:"VPAID_MEASURER_AD_PARAMETERS_ERROR",details:{adParameters:i}});this.vpaidInitParameters={videoSlot:r,adParameters:a},this.initMeasurers()})),this.initMeasurers=A((()=>{const{vpaidInitParameters:e,vpaidCreativeProxyForMeasurers:t,parameters:i}=this;if(!e)return this.callbacks.onExecutionError(new Ml({code:"ATTEMPT_TO_INIT_MEASURERS_WITHOUT_PARAMETERS",details:{measurableVpaidExists:Boolean(t),vpaidInitParametersExist:Boolean(e)}})),Promise.resolve();const{adParameters:{measurers:n}}=e,r=Pn({},n,{yandexTestMeasurer:{}});this.initializedMeasurers=r;const{slotsParameters:a}=i,{visibilitySlotParameters:s}=a,{element:l}=s;return Promise.all(sc(v(r),(async e=>{const i=r[e],n=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(i,hv),a=sv[e],s=((e,t)=>{const i=lv[e],n=t;return o(n)&&"use_unstable_script"in n&&Boolean(n.use_unstable_script)?i.unstable:i.actual})(e,i);try{await a({vpaidCreative:t,slot:l,measurerParameters:n,onMeasurerError:e=>{this.callbacks.onExecutionError(e)},yastaticVersion:s,verifyLogAdditionalData:this.parameters.verifyLogAdditionalData}),"yandexTestMeasurer"!==e&&this.callbacks.onInitMeasurer({measurerName:e,measurableVpaidCreative:t,slot:l,measurerParameters:n})}catch(Mw){this.callbacks.onExecutionError(new Ml({code:"MEASURER_INIT_ERROR",details:{measurerName:e,measurerParameters:n,error:new Ml(Mw)}}))}})))})),this.trackRenderUndetermined=A((()=>{this.trackEvent("renderUndetermined",this.getTrackingUrlsByTrackingEventName("renderUndetermined"),{})})),this.trackEncounters=A((e=>{this.isVisibilityConfirmed=!0,this.trackEvent("encounters",this.getTrackingUrlsByTrackingEventName("encounters"),{dailySensors:{reason:e}}),this.trackImpression()})),this.trackImpression=A((()=>{this.vpaidEventBus.dispatch("AdImpression"),this.trackEvent("impression",this.getTrackingUrlsByTrackingEventName("impression"),{}),this.trackImpressionWithVisibility()})),this.trackTrueView=A((e=>{this.trackEvent("trueView",this.getTrackingUrlsByTrackingEventName("trueView"),{dailySensors:{reason:e}})})),this.startMeasurement=A((()=>{const{vpaidInitParameters:e}=this;if(!e)return void this.destroy({error:new Ml({code:"VPAID_MEASURER_NO_PARAMS_ON_START",details:void 0})});const{adParameters:t}=e,{viewability:i,dwell:o}=t,{valueSignal:n,teardown:r}=Cn([this.parameters.slotsParameters.visibilitySlotParameters.size],(e=>nn(e,Mg)));this.addDestroyHandler(r);const a=new Fg((e=>{let{count:t}=e;return 1===t&&(a.destroy(),this.trackTrueView("progress")),3e4})),s=new Set,l="DISABLE_AT_ALL"===Uc.getFlagValueAndActivateTestId("VAS_DISABLE_VIEWABILITY_AND_DWELL_TRACKING_MODE")?void 0:new Fg((e=>{let{count:t}=e;const o=(n=t)>3?{eventName:"viewability5",intervalId:5}:1===n?{eventName:"viewability1",intervalId:1}:2===n?{eventName:"viewability2",intervalId:2}:3===n?{eventName:"viewability3",intervalId:3}:void 0;var n;return void 0!==o&&("SEND_ONLY_UNIQUE"!==Uc.getFlagValueAndActivateTestId("VAS_DISABLE_VIEWABILITY_AND_DWELL_TRACKING_MODE")||!s.has(o.eventName))&&(s.add(o.eventName),this.trackEvent(o.eventName,i[o.intervalId],{})),bn(t)})),d=new Set,c="DISABLE_AT_ALL"===Uc.getFlagValueAndActivateTestId("VAS_DISABLE_VIEWABILITY_AND_DWELL_TRACKING_MODE")?void 0:new Fg((e=>{let{count:t}=e;const i=(n=t)>3?{eventName:"dwell5",intervalId:5}:1===n?{eventName:"dwell1",intervalId:1}:2===n?{eventName:"dwell2",intervalId:2}:3===n?{eventName:"dwell3",intervalId:3}:void 0;var n;return void 0!==i&&("SEND_ONLY_UNIQUE"!==Uc.getFlagValueAndActivateTestId("VAS_DISABLE_VIEWABILITY_AND_DWELL_TRACKING_MODE")||!d.has(i.eventName))&&(d.add(i.eventName),this.trackEvent(i.eventName,o[i.intervalId],{})),bn(t)})),u=new Fg((e=>{let{count:t}=e;return 2===t&&(this.trackEncounters("viewability"),u.destroy()),bn(t)}));this.addDestroyHandler((()=>{a.destroy(),null==l||l.destroy(),null==c||c.destroy(),u.destroy()})),this.addDestroyHandler(this.playingStateValueSignal.add((e=>{a.setEnabled(e)}))),this.addDestroyHandler(on([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,n],((e,t,i)=>e&&t&&i),(e=>{e&&u.reset(),null==l||l.setEnabled(e),u.setEnabled(e)}))),this.addDestroyHandler(on([this.playingStateValueSignal,this.slotVisibilityStateValueSignal,this.parameters.slotsParameters.slotParameters.isHovered,n],((e,t,i,o)=>e&&t&&i&&o),(e=>{null==c||c.setEnabled(e)})))})),this.methodInterceptors={subscribe:this.vpaidEventBus.subscribe,unsubscribe:this.vpaidEventBus.unsubscribe},this.onSkipped=new Bc,this.onStopped=new Bc,this.onVideoComplete=new Bc,this.onUserClose=new Bc,this.eventInterceptors={AdLoaded:()=>{this.initMeasurers().then((()=>{this.vpaidEventBus.dispatch("AdLoaded")})).catch(J)},AdVideoStart:()=>{this.vpaidEventBus.dispatch("AdVideoStart"),"video"===this.parameters.intrinsicAdCreativeType&&this.trackImpression()},AdSkipped:()=>{var e;this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_SKIPPED_EVENT",details:{adParameters:null==(e=this.vpaidInitParameters)?void 0:e.adParameters}})),this.onSkipped.dispatch(void 0),this.vpaidEventBus.dispatch("AdSkipped")},AdUserClose:()=>{var e;this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_USER_CLOSE_EVENT",details:{adParameters:null==(e=this.vpaidInitParameters)?void 0:e.adParameters}})),this.onUserClose.dispatch(void 0),this.vpaidEventBus.dispatch("AdUserClose")},AdStopped:()=>{var e;this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_STOPPED_EVENT",details:{adParameters:null==(e=this.vpaidInitParameters)?void 0:e.adParameters}})),this.onStopped.dispatch(void 0),this.vpaidEventBus.dispatch("AdStopped")},AdVideoComplete:()=>{var e;this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_VIDEO_COMPLETE_EVENT",details:{adParameters:null==(e=this.vpaidInitParameters)?void 0:e.adParameters}})),this.onVideoComplete.dispatch(void 0),this.vpaidEventBus.dispatch("AdVideoComplete")}},this.vpaidWillSetProperty=(e,t)=>{this.vpaidCreative[e]=t},this.vpaidWillCallMethod=(e,t)=>{if(this.updatePlayTimeCounter(e),"initAd"===e)try{this.initMeasurableParameters(t)}catch(Mw){return this.vpaidEventBus.dispatch("AdError",Mw),void this.destroy({error:Mw})}switch(e){case"startAd":this.startMeasurement();break;case"stopAd":this.destroy({reason:e})}const i=this.methodInterceptors[e];return i?i(...t):this.vpaidCreative[e].apply(this.vpaidCreative,t)},this.trackImpressionWithVisibility=()=>{const e=Iu()?"impressionUndetermined":"impressionDetermined";this.trackEvent(e,this.getTrackingUrlsByTrackingEventName(e),{})},this.updatePlayTimeCounter=e=>{switch(e){case"startAd":case"resumeAd":return this.shouldPlayTimeCounter.start();case"pauseAd":return this.shouldPlayTimeCounter.stop();default:return}},this.trackEvent=function(e,t,i){if(void 0===t&&(t=[]),oc("Track VPAIDMeasurer event=["+e+"]"),!n.vpaidInitParameters)return void n.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_CANNOT_TRACK_EVENT_BEFORE_START",details:{eventName:e}}));const{slotsParameters:o}=n.parameters,{visibilitySlotParameters:r,slotParameters:{size:a}}=o,{visibilityRatio:s}=r,l=bu(a.getValue()),d={eventName:e,trackingEventDetails:i,trackingUrls:t,options:cn({win:window,slotSize:l,slotVisibilityRatio:s.getValue(),videoNode:n.vpaidInitParameters.videoSlot,bufferingTime:n.bufferingTimeManager.getBufferingTime()}),pixelsSource:"adParameters"};hn(d),n.callbacks.onTrackEvent(d),function(e,t){if(!t)return;if(!function(e){return V(Vg,e)}(e))return;const i=v(t);for(const o of i){const t=Lg[o][e];Wc.log({name:t,data:void 0})}}(e,n.initializedMeasurers)},this.vpaidCreative=e,this.parameters=t,this.callbacks=i;const{visibilityRatio:r}=t.slotsParameters.visibilitySlotParameters;this.vpaidCreativeProxyForMeasurers=this.createVpaidCreativeProxyForMeasurers(e),this.addDestroyHandler(this.onSkipped.add((()=>{this.trackEvent("skip",this.getTrackingUrlsByTrackingEventName("skip"),{}),this.destroy({reason:"AdSkipped"}),this.vpaidCreativeProxyForMeasurersEventBus.dispatch("AdSkipped")}))),this.addDestroyHandler(this.onUserClose.add((()=>{this.trackEvent("close",this.getTrackingUrlsByTrackingEventName("close"),{}),this.vpaidCreativeProxyForMeasurersEventBus.dispatch("AdUserClose")}))),this.onStopped.addOne((()=>{this.destroy({reason:"AdStopped"}),this.vpaidCreativeProxyForMeasurersEventBus.dispatch("AdStopped")})),this.addDestroyHandler(this.onVideoComplete.add((()=>{this.trackEvent("complete",this.getTrackingUrlsByTrackingEventName("complete"),{}),this.isVisibilityConfirmed&&this.trackEvent("viewedComplete",this.getTrackingUrlsByTrackingEventName("viewedComplete"),{}),this.trackTrueView("complete"),this.vpaidCreativeProxyForMeasurersEventBus.dispatch("AdVideoComplete")}))),this.playingStateValueSignal.add(i.onPlayingStateChange);const{valueSignal:a,teardown:s}=Cn([r],(e=>e>=Jg));this.addDestroyHandler(s),this.slotVisibilityStateValueSignal=a,this.bufferingTimeManager=new Dg,this.addDestroyHandler((()=>this.bufferingTimeManager.destroy())),this.addDestroyHandler((e=>{i.onStop(e),this.playingStateValueSignal.dispatch(!1),this.playingStateValueSignal.removeAll()})),this.addDestroyHandler((()=>{this.shouldPlayTimeCounter.destroy()})),this.subscribeVPAIDEvents()}createVpaidCreativeProxyForMeasurers(e){var t=this;const i=ve(Cg,((e,t)=>()=>{oc("Measurer called VPAID action method=["+t+"]"),Wc.log({name:"Measurer_VPAIDActionMethodCalled",data:{methodName:t},probability:1})})),o=ve(bg,((t,i)=>function(){const t=e[i];for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return t.apply(e,n)}));return Jl(xg,(e=>{this.vpaidEventBus.subscribe((function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t.vpaidCreativeProxyForMeasurersEventBus.dispatch(e,...o)}),e)})),pn(Pn({},i,o,{subscribe:(e,t,i)=>this.vpaidCreativeProxyForMeasurersEventBus.subscribe(e,t,i),unsubscribe:(e,t)=>this.vpaidCreativeProxyForMeasurersEventBus.unsubscribe(e,t)}))}subscribeVPAIDEvents(){var e=this;Jl(xg,(t=>{this.vpaidCreative.subscribe((function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];e.vpaidDidDispatchEvent(t,o)}),t)}))}vpaidDidDispatchEvent(e,t){const i=Ng[e];if(i&&this.trackEvent(i,this.getTrackingUrlsByTrackingEventName(i),{}),"AdVideoStart"===e&&this.onAdVideoStart(),"AdError"===e){const e=this.getTrackingUrlsByTrackingEventName("error"),i={error:new Ml({code:"VPAID_MEASURER_AD_ERROR",details:{args:t}}),trackingUrls:e};oc("Track VPAIDMeasurer event=[error]"),Ne(i),this.callbacks.onAdError(i)}var o,n,r;if("AdStarted"===e&&(this.lastVolume=this.vpaidCreative.getAdVolume()),"AdImpression"===e&&this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_IMPRESSION_EVENT",details:{adParameters:null==(o=this.vpaidInitParameters)?void 0:o.adParameters}})),"AdUserAcceptInvitation"===e&&this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_USER_ACCEPT_INVITATION_EVENT",details:{adParameters:null==(n=this.vpaidInitParameters)?void 0:n.adParameters}})),"AdUserMinimize"===e&&this.callbacks.onExecutionError(new Ml({code:"VPAID_MEASURER_RECEIVED_AD_USER_MINIMIZE_EVENT",details:{adParameters:null==(r=this.vpaidInitParameters)?void 0:r.adParameters}})),"AdVolumeChange"===e&&"number"===typeof this.lastVolume){const e=this.vpaidCreative.getAdVolume();0===e&&this.lastVolume>0&&this.trackEvent("mute",this.getTrackingUrlsByTrackingEventName("mute"),{}),e>0&&0===this.lastVolume&&this.trackEvent("unmute",this.getTrackingUrlsByTrackingEventName("unmute"),{}),this.lastVolume=e}switch(e){case"AdStarted":case"AdPlaying":this.playingStateValueSignal.dispatch(!0),this.bufferingTimeManager.resume();break;case"AdPaused":this.playingStateValueSignal.dispatch(!1),this.bufferingTimeManager.pause();break;case"AdError":this.destroy({reason:e})}const a=this.eventInterceptors[e];void 0===a?this.vpaidEventBus.dispatch(e,...t):a(...t)}getTrackingUrlsByTrackingEventName(e){if(!this.vpaidInitParameters)return[];const{adParameters:{trackingEvents:t}}=this.vpaidInitParameters,i=t[e];return $l(i)?i:[]}onAdVideoStart(){this.trackEvent("start",this.getTrackingUrlsByTrackingEventName("start"),{values:{timeToStart:this.shouldPlayTimeCounter.getTime()}}),Iu()&&this.trackRenderUndetermined()}}const mv=["clickThrough","close","impression","mute","skip","unmute"],Av={},gv=()=>0,vv=()=>!1,_v=()=>!1,yv=()=>"2.0";class fv{constructor(e){this.dispatch=A((e=>{this.value=e,this._isDispatched=!0,j(this.callbacks,e),this.callbacks.length=0})),this.callbacks=[],this._isDispatched=!1,a(e)&&this.callbacks.push(e)}subscribe(e){return this._isDispatched?(e(this.value),d):(this.callbacks.push(e),()=>{this.callbacks=Vc(this.callbacks,(t=>t!==e))})}getDispatched(){return this._isDispatched}getValue(){return this.value}wait(){return new Promise((e=>{this.subscribe(e)}))}}class Sv extends Hc{constructor(e){super(),this.params=e,this.promise=this.loadAdCreative().catch((e=>{throw this.destroy(),e}))}async loadAdCreative(){const{adParametersString:e,surveyAdCreativeInitParameters:t,slot:i,externalLiveCycle:n,initAdCreative:r,stats:s}=this.params;if(!a(r))throw new Ml({code:"AD_CREATIVE_ANIMATION_INIT_IS_NOT_A_FUNCTION",details:this.getAdCreativeErrorDetails()});let l;try{l=r({adParametersString:e,surveyAdCreativeInitParameters:t,slot:i,externalLiveCycle:n,stats:s})}catch(Bv){throw new Ml(Bv,{code:"AD_CREATIVE_ANIMATION_INIT_CALL_ERROR",details:this.getAdCreativeErrorDetails()})}if(!o(l))throw new Ml({code:"AD_CREATIVE_ANIMATION_INIT_RETURNS_NON_OBJECT",details:this.getAdCreativeErrorDetails()});const{promise:d,teardown:c}=l;if(!Du(d))throw new Ml({code:"AD_CREATIVE_ANIMATION_INIT_RETURNS_NON_PROMISE_RESULT",details:this.getAdCreativeErrorDetails()});if(!a(c))throw new Ml({code:"AD_CREATIVE_ANIMATION_INIT_RETURNS_NON_FUNCTION_TEARDOWN",details:this.getAdCreativeErrorDetails()});const u=()=>{c()};let h;this.addDestroyHandler(u);try{h=await d}catch(Bv){if(u(),ne(Bv))throw Bv;throw new Ml(Bv,{code:"AD_CREATIVE_ANIMATION_INIT_ERROR",details:this.getAdCreativeErrorDetails()})}return h}getAdCreativeErrorDetails(){const{adParametersString:e}=this.params;return{adParametersString:e}}}const Tv={startAd:()=>new Promise(d),stopAd:d};class Ev extends Hc{constructor(e){super(),this.vpaidEventBus=new Zg,this.handshakeVersion=yv,this.subscribe=this.vpaidEventBus.subscribe,this.unsubscribe=this.vpaidEventBus.unsubscribe,this.resizeAd=d,this.expandAd=d,this.collapseAd=d,this.getAdIcons=_v,this.getAdExpanded=vv,this.setAdVolume=d,this.getAdVolume=gv,this.initAd=A((()=>{this.vpaidEventBus.dispatch("AdLoaded")})),this.videoStartedLatch=new fv,this.adCreativeLatch=new fv,this.completeLatch=new fv,this.isPackshotStarted=new fv,this.remainingTime=new hh(-2),this.shouldPlay=new hh(!1),this.isPlaying=new hh(!1),this.shouldPlayTimeCounter=new Um,this.lifeCycleLatches=ve({AdVideoFirstQuartile:0,AdVideoMidpoint:0,AdVideoThirdQuartile:0,AdVideoBeforeComplete:0},((e,t)=>new fv(this.ignoreAfterDestroy((()=>{this.vpaidEventBus.dispatch(t)}),"AdCreativeWrapper.LatchVpaidEventBusDispatch")))),this.stopAnimation=d,this.completeOrDestroyLatch=new fv,this.packshotCurrentTime=0,this.destroyReasonSniffers={complete:()=>{this.params.adCreativeUserInteractionCallbacks.AdVideoComplete()},skip:()=>{this.params.adCreativeUserInteractionCallbacks.AdSkipped()},close:()=>{this.params.adCreativeUserInteractionCallbacks.AdUserClose()},stopAd:d},this.pauseAd=()=>{this.shouldPlay.dispatch(!1)},this.resumeAd=()=>{this.shouldPlay.dispatch(!0)},this.getAdHeight=()=>{var e;return null!=(e=this.params.videoNodeController.videoNode.videoHeight)?e:0},this.getAdWidth=()=>{var e;return null!=(e=this.params.videoNodeController.videoNode.videoWidth)?e:0},this.getAdLinear=()=>!1,this.getAdDuration=()=>this.getVideoDuration()||-1,this.getAdRemainingTime=()=>{const{videoParameters:e,videoNodeController:t}=this.params;if(e){const e=this.getVideoDuration(),{currentTime:i}=t.getCurrentPosition();if(he(e)&&Bt(i)){if(this.isPackshotStarted.getValue()){const e=this.getPackshotBgVideoDuration();return Math.max(e-this.packshotCurrentTime,0)}return Math.max(e-i,0)}}return-1},this.getAdSkippableState=()=>!0,this.dispatchAdStartedOrPlaying=Kt((()=>{this.vpaidEventBus.dispatch("AdStarted"),this.vpaidEventBus.dispatch("AdVideoStart")}),(()=>{this.vpaidEventBus.dispatch("AdPlaying")})),this.params=e,this.addDestroyHandler((()=>{this.completeOrDestroyLatch.dispatch(void 0)})),this.completeLatch.subscribe((()=>{this.completeOrDestroyLatch.dispatch(void 0)}));const{videoParameters:t,firstFrameParameters:i,videoNodeController:o,slot:n,slotSize:r,packshotParameters:s,adCreativeUserInteractionCallbacks:l,slotsParameters:c,stats:u}=e;if(t&&i){const{posterImage:e,isPreloaded:t}=i,{videoNode:n}=o,r=function(e,t){return Qo(e,{backgroundImage:'url("'+t.url+'")',backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"})}(n,e),a=Date.now();this.videoStartedLatch.subscribe((()=>{t&&u.log({name:"TimeBetweenFirstFrameImageAndVideoStart",values:{time:Date.now()-a}}),r()})),this.addDestroyHandler(r)}if(this.vpaidEventBus.subscribe((e=>{u.errorToStats(e)}),"AdError"),this.addDestroyHandler(A(l.AdStopped)),this.addDestroyHandler((()=>{this.shouldPlayTimeCounter.destroy()})),this.shouldPlay.add((e=>{e?this.shouldPlayTimeCounter.start():this.shouldPlayTimeCounter.stop()})),this.remainingTime.add((()=>{this.vpaidEventBus.dispatch("AdRemainingTimeChange")})),this.addDestroyHandler((()=>{this.remainingTime.removeAll()})),t){this.getAdVolume=()=>o.getVolume(),this.setAdVolume=e=>{0===e?o.setMuted(!0):o.setVolume(e)};const e=()=>{const e="play"===o.playingState.getValue();this.isPlaying.dispatch(e)};this.completeOrDestroyLatch.subscribe(o.playingState.add(e)),e()}else this.shouldPlay.add(this.isPlaying),this.isPlaying.dispatch(this.shouldPlay.getValue());if(o.pause(),t&&(this.attachToVideoNode(t,o),this.addDestroyHandler(this.adCreativeLatch.subscribe((()=>{this.shouldPlay.getValue()&&o.play();const e=this.shouldPlay.add((e=>{e?o.play():o.pause()}));this.isPackshotStarted.subscribe(e),this.completeOrDestroyLatch.subscribe(e)})))),this.params.videoParameters&&this.videoStartedLatch.subscribe(this.dispatchAdStartedOrPlaying),this.adCreativeLatch.subscribe((e=>{const{getAdDuration:i,getAdRemainingTime:o,resizeAd:n}=e;this.startAdCreative(e),this.isPlaying.getValue()||this.pauseAdCreative(e),this.isPlaying.add((t=>{t?this.resumeAdCreative(e):this.pauseAdCreative(e)})),t||(a(i)&&(this.getAdDuration=()=>i.call(e)),a(o)&&(this.getAdRemainingTime=()=>o.call(e),this.addDestroyHandler(_o((()=>{this.remainingTime.dispatch(this.getAdRemainingTime())}))))),this.stopAnimation=A((()=>{e.stopAd()})),this.addDestroyHandler(this.stopAnimation),this.completeOrDestroyLatch.subscribe(r.add((t=>{a(n)&&n.call(e,t)})))})),s){const e=n.ownerDocument.defaultView;if(e){const e="packshot"===s.type?s.packshotImageUrl:void 0;e&&this.lifeCycleLatches.AdVideoThirdQuartile.subscribe((()=>{Se(e)})),this.completeLatch.subscribe(this.ignoreAfterDestroy((()=>{if(c.visibilitySlotParameters.visibilityRatio.getValue()>=Jg||"honeypot"===s.type)return this.destroyReasonSniffers.complete(),void this.isPackshotStarted.dispatch(s);this.stopAdAndDestroyWrapper("complete")}),"AdCreativeWrapper.completeLatchSubscribeForNotPlayPackshot"))}else u.error({error:new Ml({code:"AD_CREATIVE_PACKSHOT_WINDOW_NULL",details:{win:String(e)}})})}else this.completeLatch.subscribe(this.ignoreAfterDestroy((()=>{this.params.destroyAfterComplete?this.stopAdAndDestroyWrapper("complete"):this.destroyReasonSniffers.complete()}),"AdCreativeWrapper.completeLatchSubscribeForNoPackshot"));this.isPackshotStarted.subscribe((e=>{this.stopAnimation();const t="packshot"===e.type?e.renderLayoutComponent(e):e.renderLayoutComponent();this.shouldPlay.add((e=>{t.setPlaying(e)})),t.progress.add((t=>{"packshot"===e.type&&(this.packshotCurrentTime=Math.min(e.packshotDuration,e.packshotDuration*t))})),t.addDestroyHandler((t=>{let{reason:i,details:o}=t;"complete"!==i?("firstRenderError"!==i&&"runtimeError"!==i||(u.error({error:new Ml({code:"firstRenderError"===i?"AD_CREATIVE_PACKSHOT_FIRST_RENDER_ERROR":"AD_CREATIVE_PACKSHOT_RUNTIME_ERROR",details:{type:e.type,error:o}})}),this.vpaidEventBus.dispatch("AdError",o)),this.destroy()):this.destroy()})),this.addDestroyHandler((()=>{t.destroy({reason:"stopAd",details:void 0})}))})),this.loadAndRenderAnimation().catch(this.ignoreAfterDestroy((e=>{this.vpaidEventBus.dispatch("AdError",e),this.destroy()}),"AdCreativeWrapper.vpaidEventBusDispatchAdError"))}startAd(){var e;const t=Boolean(this.params.videoParameters),i=null==(e=this.params.videoParameters)?void 0:e.getStartStrategy();t&&"startPlaying"!==i?(oc("AdCreativeWrapper: CANNOT start playing"),this.shouldPlay.dispatch(!1),this.params.stats.log({name:"AdCreativeWrapperCannotAutoplayOnStart",data:{hasVideoParameters:t,startStrategy:i}})):(oc("AdCreativeWrapper: start playing"),this.shouldPlay.dispatch(!0)),this.addDestroyHandler(this.shouldPlay.add((e=>{t&&!this.isPackshotStarted.getDispatched()||(e?this.dispatchAdStartedOrPlaying():this.vpaidEventBus.dispatch("AdPaused"))}))),this.addDestroyHandler((()=>{this.shouldPlay.dispatch(!1),this.shouldPlay.removeAll()}))}stopAd(){this.destroy()}skipAd(){this.stopAdAndDestroyWrapper("skip")}stopAdAndDestroyWrapper(e){this.destroyReasonSniffers[e](),this.destroy()}getVideoDuration(){const{videoParameters:e,videoNodeController:t}=this.params;if(e){const{duration:e}=t.getCurrentPosition(),i=he(e)?e:void 0;if(i)return i+this.getPackshotBgVideoDuration()}}async loadAndRenderAnimation(){const{animationParameters:e,adCreativeWindow:t,slot:i,videoParameters:o,stats:n}=this.params;if(!e)return void this.adCreativeLatch.dispatch(Tv);const{animationMediaFile:r,getPreloadedAdCreativeInitFunction:s,adCreativeParameters:l,surveyAdCreativeParameters:d}=e;let c=s();try{if(a(c));else{const{promise:e,teardown:i}=Ao({animationMediaFile:r,win:t});this.completeOrDestroyLatch.subscribe(i),c=await e}}catch(Mw){if(ne(Mw))throw Mw;throw new Ml(Mw,{code:"CANNOT_LOAD_AD_CREATIVE_ANIMATION_MEDIA_FILE",details:{adParametersString:l}})}if(this.isDestroyed)return;const u=new Sv({slot:i,adParametersString:l,surveyAdCreativeInitParameters:d,externalLiveCycle:Boolean(o),initAdCreative:c,stats:n});this.addDestroyHandler((()=>{u.destroy()}));const h=await u.promise;this.isDestroyed||this.adCreativeLatch.dispatch(h)}attachToVideoNode(e,t){const{videoContentSize:o,videoMediaFile:n,videoMediaFiles:r,videoTimeout:s,bufferEmptyLimit:l,bufferFullTimeout:c,durationFallback:u,onVideoBufferingStateChange:h}=e,{videoNode:p}=t,{videoSlotClickUrl:m,animationParameters:g,slot:v}=this.params;t.onVolumeChange.add((()=>this.vpaidEventBus.dispatch("AdVolumeChange")));const _=Date.now();this.addDestroyHandler(t.onCanPlay.addOne((()=>{this.params.stats.log({name:"MediaFileLoadingTime",values:{loadingTime:Date.now()-_}})}))),t.setSrc(n),i(m)&&this.completeOrDestroyLatch.subscribe(this.videoStartedLatch.subscribe((()=>{const e=e=>{this.params.adCreativeUserInteractionCallbacks.AdClickThru({url:m,playerHandles:!0,clickSource:e})};this.completeOrDestroyLatch.subscribe(t.onClick.add((()=>{Dn({control:"AdCreativeWrapperVideoElement",purpose:"clickThru"}),e("AdCreativeWrapperVideoElement")}))),In(p)&&!Mg&&this.completeOrDestroyLatch.subscribe(Qo(p,{cursor:"pointer"})),void 0===g&&(this.completeOrDestroyLatch.subscribe(q({element:v,eventName:"click",listener:()=>{e("AdCreativeWrapperSlotElement")},ignoreBubbling:!0})),Mg||this.completeOrDestroyLatch.subscribe(Qo(v,{cursor:"pointer"})))}))),this.addDestroyHandler(t.onVolumeChange.add((()=>{this.vpaidEventBus.dispatch("AdVolumeChange")}))),this.addDestroyHandler(this.videoStartedLatch.subscribe((()=>{const e=t.onPlayAfterPause.add((()=>{this.videoStartedLatch.getDispatched()&&this.dispatchAdStartedOrPlaying()})),i=t.playingState.add((e=>{"pause"===e&&this.vpaidEventBus.dispatch("AdPaused")}));this.completeOrDestroyLatch.subscribe(e),this.completeOrDestroyLatch.subscribe(i),this.isPackshotStarted.subscribe(e),this.isPackshotStarted.subscribe(i)})));const y=()=>{const e=this.adCreativeLatch.getValue();if(!e||!a(e.adjustAdPosition))return;const t=this.getAdDuration(),i=this.getAdRemainingTime();he(t)&&Bt(i)&&e.adjustAdPosition({adDuration:t,adRemainingTime:i})};this.completeOrDestroyLatch.subscribe(function(e){function t(){let{duration:e}=i.getCurrentPosition();return he(e)||(e=o()),e}let{videoNodeController:i,durationFallback:o,callbacks:{AdStarted:n,AdVideoFirstQuartile:r,AdVideoMidpoint:a,AdVideoThirdQuartile:s,AdVideoBeforeComplete:l,AdVideoComplete:d}}=e;const c=A(r),u=A(a),h=A(s),p=A(l);let m=0;const g=()=>{const e=t();if(!he(e))return;const{currentTime:o}=i.getCurrentPosition(),n=(o-m)/e;n>=.25&&c(),n>=.5&&u(),n>=.75&&h()},v=A((()=>{g(),d()})),_=[kn(i.videoNode,(()=>{m=i.getCurrentPosition().currentTime,n()})),i.currentPosition.add((e=>{let{currentTime:i}=e;const o=function(e){let{currentTime:t,duration:i}=e;return!(t>=i)&&t+.5>=i}({currentTime:i,duration:t()});o&&p()})),i.currentPosition.add(g),i.onEnd.add(v)];return()=>j(_)}({durationFallback:u,videoNodeController:t,callbacks:Nn({},ve(this.lifeCycleLatches,(e=>()=>{e.dispatch(void 0)})),{AdStarted:()=>{this.videoStartedLatch.dispatch(void 0),y()},AdVideoComplete:()=>{this.completeLatch.dispatch(void 0)}})}));const f=new Error;this.shouldPlayTimeCounter.addCallback(s,(()=>{if(this.videoStartedLatch.getDispatched())return;const e=new Ml(f,{code:"video"===this.params.intrinsicAdCreativeType?"VIDEO_TIMEOUT":"AD_CREATIVE_VIDEO_TIMEOUT",details:{timeout:s,mediaFile:n,networkState:p.networkState,readyState:p.readyState}});this.vpaidEventBus.dispatch("AdError",e),this.stopAdAndDestroyWrapper("stopAd")})),this.completeOrDestroyLatch.subscribe(this.videoStartedLatch.subscribe((()=>{t.isBuffering.getValue()&&h(!0),this.addDestroyHandler(t.isBuffering.add((e=>{h(e)})))}))),this.completeOrDestroyLatch.subscribe(this.videoStartedLatch.subscribe((()=>{this.completeOrDestroyLatch.subscribe(function(e){let{videoNodeController:t,bufferEmptyLimit:i,callback:o}=e;if(!he(i))return d;let n=0;const r=t.onBufferingAfterPlay.add((()=>{n++,oc("bufferEmptyCount=["+n+"] limit=["+i+"]"),n<=i||(r(),o())}));return r}({videoNodeController:t,bufferEmptyLimit:l,callback:()=>{const e=new Ml({code:"video"===this.params.intrinsicAdCreativeType?"BUFFER_EMPTY_LIMIT":"AD_CREATIVE_BUFFER_EMPTY_LIMIT",details:{bufferEmptyLimit:l,mediaFile:n,networkState:p.networkState,readyState:p.readyState}});this.vpaidEventBus.dispatch("AdError",e),this.stopAdAndDestroyWrapper("stopAd")}})),this.completeOrDestroyLatch.subscribe(function(e){let{videoNodeController:t,bufferFullTimeout:i,callback:o}=e,n=d;const r=t.isBuffering.add((async e=>{if(n(),!e)return;const{promise:a,clear:s}=Qu(i,t.win);n=s,await a,n(),r(),o()}));return()=>{n(),r()}}({videoNodeController:t,bufferFullTimeout:c,callback:()=>{const e=new Ml({code:"video"===this.params.intrinsicAdCreativeType?"BUFFER_FULL_TIMEOUT":"AD_CREATIVE_BUFFER_FULL_TIMEOUT",details:{bufferFullTimeout:c,mediaFile:n,networkState:p.networkState,readyState:p.readyState}});this.vpaidEventBus.dispatch("AdError",e),this.stopAdAndDestroyWrapper("stopAd")}}))}))),this.completeOrDestroyLatch.subscribe(t.onError.add((e=>{e=new Ml(e,{details:Nn({},e.details,{selectedMediaFile:n,mediaFiles:r})}),this.vpaidEventBus.dispatch("AdError",e),this.stopAdAndDestroyWrapper("stopAd")}))),this.addDestroyHandler(t.currentPosition.add((()=>{y(),this.remainingTime.dispatch(this.getAdRemainingTime())}))),this.completeOrDestroyLatch.subscribe(o.add((e=>{const t=this.adCreativeLatch.getValue();t&&a(t.resizeVideoContent)&&t.resizeVideoContent(e)})))}startAdCreative(e){const{videoParameters:t,slotSize:n,shouldHideSkipButton:r,playerEnvironment:a}=this.params,s=n.getValue(),l=ve(this.lifeCycleLatches,(e=>t?d:()=>e.dispatch(void 0))),c=e.startAd({callbacks:Nn({AdClickThru:this.ignoreAfterDestroy((e=>{let{url:t,playerHandles:o,clickSource:n}=e;const r=i(t)?t:this.params.videoSlotClickUrl;this.params.adCreativeUserInteractionCallbacks.AdClickThru({url:r,playerHandles:o,clickSource:n})}),"AdCreativeWrapper.startAdCallbackOnAdClickThru")},l,{AdVideoComplete:()=>{this.completeLatch.dispatch(void 0)}}),requestPause:()=>{this.pauseAd()},requestPlay:()=>{this.resumeAd()},requestTimeToSkipChange:e=>{this.params.adCreativeUserInteractionCallbacks.AdTimeToSkipChange(e)},dispatchAdStarted:this.dispatchAdStartedOrPlaying,size:s,videoContentSize:null==t?void 0:t.videoContentSize.getValue(),playerEnvironment:a,shouldHideSkipButton:r,destroyAfterComplete:this.params.destroyAfterComplete});if(!Du(c))throw new Ml({code:"AD_CREATIVE_START_AD_RETURNS_NON_PROMISE_RESULT",details:void 0});c.then(this.ignoreAfterDestroy((e=>{if(t)return;let n="complete";if(o(e)){const t=e.reason;i(t)&&Boolean(this.destroyReasonSniffers[t])&&(n=t)}"complete"===n?this.completeLatch.dispatch(void 0):this.stopAdAndDestroyWrapper(n)}),"AdCreativeWrapper.awaitResolveOfStartAdPromise")).catch(this.ignoreAfterDestroy((e=>{this.vpaidEventBus.dispatch("AdError",e),this.destroy()}),"AdCreativeWrapper.awaitRejectOfStartAdPromise"))}pauseAdCreative(e){null==e.pauseAd||e.pauseAd()}resumeAdCreative(e){null==e.resumeAd||e.resumeAd()}getPackshotBgVideoDuration(){var e,t;return"packshot"!==(null==(e=this.params.packshotParameters)?void 0:e.type)?0:null!=(t=this.params.packshotParameters.packshotDuration)?t:0}}const bv=A((e=>{Wc.log({name:"IntersectionObserverMocked",data:{functionCode:y((()=>e.IntersectionObserver.toString()))},probability:1})})),Cv=A((()=>{Wc.log({name:"DocumentHiddenMocked",probability:1})})),Pv=A((e=>{Wc.log({name:"IframeIntersectionObserverMocked",data:{functionCode:y((()=>e.IntersectionObserver.toString()))},probability:1})})),wv=A((()=>{Wc.log({name:"IframeDocumentHiddenMocked",probability:1})})),Ov=["mousemove","mousedown","mouseup","contextmenu","touchstart","touchmove","touchend"];class Iv{constructor(e,t){this.time=0,this.startTime=0,this.id=0,this.started=!1,this.loop=()=>{this.clearTimeouts();const e=Date.now(),t=e-this.startTime;this.startTime=e,this.time+=t,this.callback({time:this.time,diff:t}),this.started&&this.startDelay()},this.callback=t,this.animationFrameFunctions=xn(e)}start(){this.started||(this.started=!0,this.startTime=Date.now(),this.startDelay())}stop(){this.started&&(this.started=!1,this.clearTimeouts(),this.time+=Date.now()-this.startTime)}startDelay(){this.id=this.animationFrameFunctions.requestAnimationFrame(this.loop)}clearTimeouts(){this.animationFrameFunctions.cancelAnimationFrame(this.id)}}var kv,Dv,Nv,Rv,Vv,Lv,xv,Bv={},Mv=[],Uv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;kv=Mv.slice,Dv={__e:function(e,t){for(var i,o,n;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),n=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e),n=i.__d),n)return i.__E=i}catch(t){e=t}throw e}},Nv=0,zn.prototype.setState=function(e,t){var i;i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Bn({},this.state),"function"==typeof e&&(e=e(Bn({},i),this.props)),e&&Bn(i,e),null!=e&&this.__v&&(t&&this.__h.push(t),Yn(this))},zn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Yn(this))},zn.prototype.render=Hn,Rv=[],Vv="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gn.__r=0,xv=0;var Fv,Hv,zv,Wv=0,jv=[],Yv=Dv.__b,Gv=Dv.__r,Xv=Dv.diffed,Kv=Dv.__c,qv=Dv.unmount;Dv.__b=function(e){Hv=null,Yv&&Yv(e)},Dv.__r=function(e){Gv&&Gv(e),Fv=0;var t=(Hv=e.__c).__H;t&&(t.__h.forEach(vr),t.__h.forEach(_r),t.__h=[])},Dv.diffed=function(e){Xv&&Xv(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==jv.push(t)&&zv===Dv.requestAnimationFrame||((zv=Dv.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(o),Qv&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(i,100);Qv&&(t=requestAnimationFrame(i))})(gr)),Hv=void 0},Dv.__c=function(e,t){t.some((function(e){try{e.__h.forEach(vr),e.__h=e.__h.filter((function(e){return!e.__||_r(e)}))}catch(Lv){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Dv.__e(Lv,e.__v)}})),Kv&&Kv(e,t)},Dv.unmount=function(e){qv&&qv(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(vr)}catch(e){Dv.__e(e,t.__v)}};var Qv="function"==typeof requestAnimationFrame;const Jv=e=>ne(e)?e:new Ml(e,{code:"PREACT_ERROR",details:{error:e}}),Zv=e=>{const[t]=dr(new hh({status:"initial"}));ur((()=>{const i=t.getValue();return"initial"!==i.status?(e.onFirstRender(i),d):t.addOne((t=>{"initial"!==t.status&&e.onFirstRender(t)}))}),[t]),cr((()=>{"initial"===t.getValue().status&&t.dispatch({status:"success"})}),[t]);const[i]=function(i){var o=lr(Fv++,10),n=dr();return o.__=function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];const r=$l(o)&&1===o.length&&Ol(o[0])?o[0]:void 0,a=null!=r?r:new Error("Preact error boundary error"),s=Jv(a);Wc.error({error:s});const{status:l}=t.getValue();"initial"===l?t.dispatch({status:"error",error:s}):e.onRuntimeError(s)},Hv.componentDidCatch||(Hv.componentDidCatch=function(e){o.__&&o.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}();return i||"error"===t.getValue().status?null:Un(Hn,null,e.children)},$v=e=>Un(Hn,null,fd(e.components,((t,i)=>i(Sr({},e.componentsProps,{children:t}))),e.children)),e_=sr(Zc);e_.Provider.displayName="SlotSizeContext";const t_=e=>br(e),i_=()=>Ar(e_),o_=sr(document.body);o_.Provider.displayName="SlotContext",Number(new Date);class n_{constructor(){this.usingStylesByContainersMap=new WeakMap}addStyleUsing(e,t){const i=this.usingStylesByContainersMap.get(e);if(!i)return this.usingStylesByContainersMap.set(e,new Map([[t,1]])),!0;const o=i.get(t);return o?(i.set(t,o+1),!1):(i.set(t,1),!0)}removeStyleUsing(e,t){const i=this.usingStylesByContainersMap.get(e);if(!i)return!0;const o=i.get(t);return!o||(i.set(t,o-1),!(o>1)&&(i.delete(t),0===i.size&&this.usingStylesByContainersMap.delete(e),!0))}}class r_{constructor(){this.stylesUsingCounter=new n_,this.styleElementsMap=new WeakMap}useStyleModule(e,t){const i=t,o=[];for(let n=0;n<i.length;n++){const[t,r]=i[n];if(r){if(this.stylesUsingCounter.addStyleUsing(e,t)){const i=Cr(e,r),o=this.styleElementsMap.get(e);o?o.set(t,i):this.styleElementsMap.set(e,new Map([[t,i]]))}o.push(t)}}return o.length?A((()=>{Jl(o,(t=>{const i=this.stylesUsingCounter.removeStyleUsing(e,t),o=this.styleElementsMap.get(e);i&&o&&(l(o.get(t)),o.delete(t),0===o.size&&this.styleElementsMap.delete(e))}))})):d}}const a_=new r_,s_=sr({buttonText:"",openClickThroughUrl:d});s_.Provider.displayName="HoneypotContext";var l_=e(1256),d_=e.n(l_);const c_=e=>{let{children:t,onClick:i}=e;return Pr(d_()),Un("div",{className:l_.locals.HoneypotButton,onClick:i},Un("div",{className:l_.locals.HoneypotButton__content},t))};var u_=e(6383),h_=e.n(u_);const p_=e=>{let{width:t,height:i}=e;return Pr(h_()),Un("div",{className:u_.locals.HoneypotOverlay,style:{width:t+"px",height:i+"px"}})};var m_=e(5046),A_=e.n(m_);const g_=()=>{Pr(A_());const{width:e,height:t}=i_(),{buttonText:i,openClickThroughUrl:o}=Ar(s_);return Un("div",{onClick:i?void 0:o,className:Er(m_.locals.HoneypotScreen,{[m_.locals.HoneypotScreen_clickable]:!i}),style:{width:e+"px",height:t+"px"}},Un("div",{className:m_.locals.HoneypotScreen__honeypotOverlayWrapper},Un(p_,{width:e,height:t})),i&&Un("div",{className:m_.locals.HoneypotScreen__buttonWrapper},Un(c_,{onClick:o},i)))},v_=sr((e=>{Wc.log({name:"StatsDefaultContextLog",data:{initialLog:e}})}));v_.Provider.displayName="StatsLogContext";const __=[e=>Un(o_.Provider,{value:e.container,children:e.children}),e=>Un(e_.Provider,{value:t_(e.containerSize),children:e.children}),e=>Un(e_.Provider,{value:t_(e.containerSize),children:e.children}),e=>Un(v_.Provider,{value:e.logStatsEvent,children:e.children}),e=>Un(s_.Provider,{value:wr(e),children:e.children})];class y_ extends Hc{constructor(e){super(),this.honeypotProgress=new hh(0),this.shouldPlay=new hh(!0),this.progress=new hh(0),this.props=e;const{win:t,onClick:i,videoNodeController:o,parent:n}=this.props;this.addDestroyHandler((t=>{oc("Honeypot: destroy honeypot reason=["+t.reason+"]"),e.logStatsEvent({name:"HoneypotDestroyed",data:{reason:t},probability:1})}));const r=t.document.createElement("div");n.appendChild(r);const a=function(e){const{container:t,onRuntimeError:i,onFirstRenderError:o}=e;return ar(Un(Zv,{onRuntimeError:i,onFirstRender:e=>{"error"===e.status&&o(e.error)}},Un($v,{components:__,componentsProps:e},Un(g_,null))),t),()=>{ar(null,t)}}(Or({},this.props,{container:r,containerSize:e.parentSize,onClick:()=>{e.logStatsEvent({name:"HoneypotButtonClicked",probability:1}),i()},onFirstRenderError:e=>{this.destroy({reason:"firstRenderError",details:e})},onRuntimeError:e=>{this.destroy({reason:"runtimeError",details:e})}}));this.addDestroyHandler((()=>{a(),l(r)})),e.logStatsEvent({name:"HoneypotRendered",probability:1});const s=new Iv(t,(e=>{let{time:t}=e;const i=Math.atan(t/1e4)/(.5*Math.PI);this.honeypotProgress.dispatch(i)}));if(this.addDestroyHandler((()=>{s.stop()})),s.start(),void 0!==o){const t=o.getMuted();if(!t){let e;o.setMuted(!0),this.addDestroyHandler(o.onVolumeChange.add((()=>{e=void 0!==e}))),this.addDestroyHandler((()=>{e||(o.setMuted(t),o.videoNode.dispatchEvent(new Event("volumechange",{bubbles:!1,cancelable:!0,composed:!1})))}))}o.setLoop(!0),o.play(),this.addDestroyHandler((()=>o.setLoop(!1))),e.logStatsEvent({name:"HoneypotBackgroundLoopedVideo"})}this.shouldPlay.add((e=>{e?s.start():s.stop(),void 0!==o&&(e?o.play():o.pause())}))}setPlaying(e){this.shouldPlay.dispatch(e)}}const f_="https://"+Zd+"/pcode-static/measurers/75/omweb-js",S_=f_+"/Session-Client/omid-session-client-v1.js",T_=f_+"/Service/omweb-v1.js",E_=f_+"/Compliance-Script/omid-compliance-verification-script-v1.js",b_=async e=>{const t=fo(e.document.body,{sandbox:"allow-scripts allow-same-origin"});if(!t)throw new Ml({code:"OMSDK_ERROR",details:{reason:"Could not init IFrame for OM SDK script"}});const i=C_(t,S_),o=C_(t,T_),n=Promise.all([i,o]),r=Promise.race([n.then((()=>t)),Qu(3e3,window).promise.then((()=>{throw new Error("OMID scripts loading timeout")}))]);return t.setAttribute("data-vas-omsdk",""),r},C_=(e,t)=>{const{promise:i}=lo({src:t,win:e.contentWindow});return i},P_=new Set;let w_,O_;const I_="0.0."+gd;class k_ extends Hc{get videoNode(){return this.adPodViewer.adDisplayController.videoNode}get videoNodeController(){return this.adPodViewer.adDisplayController.videoNodeController}constructor(e,t){super(),this.omsdkServiceScriptIframe=new fv,this.omidSessionClient=new fv,this.onSessionFinish=new Bc,this.onDestroy=new fv,this.addDestroyHandler((()=>this.onDestroy.dispatch(void 0))),this.adPodViewer=e,this.verificationScriptParametersList=t,(async e=>{void 0===w_&&(void 0===O_&&(O_=b_(e)),w_=await O_);const t=()=>{if(P_.has(t)&&(P_.delete(t),0===P_.size)){const t=w_;e.setTimeout((()=>{l(t)}),3e3),w_=void 0,O_=void 0}};return P_.add(t),{omsdkFriendlyIFrame:w_,release:t}})(window).then((e=>{let{omsdkFriendlyIFrame:i,release:o}=e;this.omsdkServiceScriptIframe.dispatch(i),this.addDestroyHandler(o),Wc.log({name:"OmidVerifiersHasBeenSuccessfullyLoaded",data:{parameters:JSON.stringify(t)},probability:1})})).catch((e=>(oc("[OMSDK]: Could not register OMSDK on page"),this.destroy({reason:"Could not register OMSDK on page: "+e.message,isError:!0})))),this.addDestroyHandler(this.omsdkServiceScriptIframe.subscribe((e=>{const t=Pc(e.contentWindow,"OmidSessionClient.default");t?(oc("OmidSessionClient initialized, "+t),this.omidSessionClient.dispatch(t)):this.destroy({reason:"OmidSessionClient was not initialized",isError:!0})}))),this.addDestroyHandler((e=>{let{reason:t,isError:i}=e;oc("[OMSDKController]: destroy "+t),i&&Wc.error({error:new Ml({code:"OMSDK_ERROR",details:{reason:t}})})}))}async initSession(e){let{impressionType:t="unspecified",startStrategy:i}=e;if(this.isDestroyed)return;const o=await Promise.race([this.omidSessionClient.wait(),this.onDestroy.wait()]);if(void 0!==o)try{var n;const{Partner:e,VerificationScriptResource:r,Context:a,AdSession:s,AdEvents:l,MediaEvents:d,VastProperties:c}=o,u=function(e){return void 0===e&&(e=window),String(e.location)}(window).split("?").shift(),h=new a(new e("Yandex",I_),sc(this.verificationScriptParametersList,(e=>{let{javaScriptResource:t,vendorKey:i,verificationParameters:o,accessMode:n}=e;return new r(t,i,o,n)})),u);h.setVideoElement(this.videoNode),tc.isDebugEnabled&&(h.underEvaluation=!0);const p=null==(n=this.omsdkServiceScriptIframe.getValue())?void 0:n.contentWindow;if(!p)throw new Error("OMSDK service script IFrame is unloaded");h.setServiceWindow(p);const m=new s(h);if(!m.isSupported())throw new Error("AdSession is not supported");m.setCreativeType("video"),m.setImpressionType(t);const A=new l(m),g=new d(m);m.start(),this.addDestroyHandler((e=>{let{reason:t}=e;"complete"===t&&g.complete(),"skip"===t&&g.skipped(),m.finish(),this.onSessionFinish.dispatch()}));const v=me(this.adPodViewer.adPodViewerPlaybackParams.skipDelay),_=new c(v,this.adPodViewer.adPodViewerPlaybackParams.skipDelay,"startPlaying"===i,function(e){switch(e.mediaAd.adBreak.adType){case"midroll":case"inroll":case"pauseroll":return"midroll";case"preroll":return"preroll";case"postroll":return"postroll";default:return"standalone"}}(this.adPodViewer));this.adPodViewer.addDestroyHandler((e=>{let{reason:t,details:i}=e;"error"===t&&void 0!==i&&m.error("generic",i.message)})),this.videoNodeController.onError.add((e=>m.error("video",e.message))),this.videoNodeController.onLoadedData.add((()=>{A.loaded(_)})),this.videoNodeController.isBuffering.add((e=>{e?g.bufferStart():g.bufferFinish()})),this.adPodViewer.isStarted.add((()=>{const{duration:e}=this.videoNodeController.getCurrentPosition(),t=this.videoNodeController.getVolume();g.start(e,t)})),this.adPodViewer.onImpression.add((()=>{A.impressionOccurred()})),this.adPodViewer.onFirstQuartile.add((()=>g.firstQuartile())),this.adPodViewer.onMidpoint.add((()=>g.midpoint())),this.adPodViewer.onThirdQuartile.add((()=>g.thirdQuartile())),this.adPodViewer.onClickThrough.add((()=>g.adUserInteraction("click"))),this.adPodViewer.onPause.add((()=>g.pause())),this.adPodViewer.onResume.add((()=>g.resume())),this.videoNodeController.onVolumeChange.add((()=>{g.volumeChange(this.adPodViewer.adDisplayController.getVolume())})),this.adPodViewer.adDisplayController.isFullscreen.add((e=>{g.playerStateChange(e?"fullscreen":"normal")}))}catch(Bv){this.destroy({reason:"Session initialization failed: "+Bv.message,isError:!0})}}}const D_=[$d,Zd],N_=new Set;Jl([...D_,"static.adsafeprotected.com","z.moatads.com"],(e=>{N_.add(e)}));class R_{constructor(e){this.position=0,this.offset=0,this.onAnimationFrame=e=>{let{diff:t}=e;const i=t/this.duration,o=1500/this.duration;if(Math.abs(this.offset)>=o){const e=this.position+i+this.offset;return void this.setPosition(e)}const n=i*(1+this.offset/o);this.position=ko(this.position+n,0,1),this.position>=1&&this.onFinishOnce(),this.offset+=i-n,this.params.callback(this.position)},this.params=e,this.duration=e.duration,this.onFinishOnce=A(e.onFinish),this.animationFramesController=new Iv(e.win,this.onAnimationFrame)}start(){this.animationFramesController.start()}stop(){this.animationFramesController.stop()}adjustPosition(e){this.offset=e-this.position}setDuration(e){this.duration=e}setPosition(e){e>=1&&this.onFinishOnce(),this.position!==e&&(this.position=ko(e,0,1),this.offset=0,this.params.callback(e))}}const V_=new RegExp(["box-flex","box-flex-group","column-count","fill-opacity","flex","flex-grow","flex-positive","flex-shrink","flex-negative","font-weight","line-height","opacity","order","z-index","zoom"].join("|"),"i"),L_=(e,t,i,o)=>{u(t)?(o=Boolean(i),b(t,((t,i)=>{Vr(e,i,t,o)}))):Vr(e,t,i,o)},x_=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));class B_ extends Hc{constructor(e){var t;super(),this.progress=new hh(0),this.shouldPlay=new hh(!0),this.props=e;const{duration:i,win:o}=e;this.isInfiniteDuration=!he(i),this.destroyAfterComplete=null==(t=e.destroyAfterComplete)||t,this.isInfiniteDuration?this.animationController=new Iv(o,(e=>{let{time:t}=e;const i=Math.atan(t/1e4)/(.5*Math.PI);this.progress.dispatch(i)})):this.animationController=new R_({win:o,duration:i*Mm,callback:e=>{this.progress.dispatch(e)},onFinish:()=>{this.destroyAfterComplete&&this.destroy({reason:"complete",details:void 0})}})}setPlaying(e){this.shouldPlay.dispatch(e)}show(){const{win:e,imageUrl:t,videoNodeController:i,parent:o,logStatsEvent:n}=this.props,r=!t||"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_VIDEO_AS_PACKSHOT_BACKGROUND_IN_FIRST_PRIORITY");if(t&&Lr(o,xr({},Sh,{backgroundImage:"url("+t+")",backgroundPosition:"center",backgroundSize:"cover"})),this.addDestroyHandler((()=>{this.animationController.stop(),this.progress.removeAll(),this.shouldPlay.removeAll()})),this.progress.add((e=>{e>=1&&this.animationController.stop()})),this.animationController.start(),r&&void 0!==i){const e=i.getMuted();if(!e){let t;i.setMuted(!0),this.addDestroyHandler(i.onVolumeChange.add((()=>{t=void 0!==t}))),this.addDestroyHandler((()=>{t||(i.setMuted(e),i.videoNode.dispatchEvent(new Event("volumechange",{bubbles:!1,cancelable:!0,composed:!1})))}))}i.setLoop(!0),i.play(),this.addDestroyHandler((()=>i.setLoop(!1))),n({name:"PackshotBackgroundLoopedVideo",probability:bc})}this.shouldPlay.add((e=>{e?this.animationController.start():this.animationController.stop(),r&&void 0!==i&&(e?i.play():i.pause())}));const a=e.document.createElement("div");o.appendChild(a);const s=this.renderPackshotContent(xr({},this.props,{parent:a}));this.addDestroyHandler((()=>{s(),l(a)}))}setProgress(e){this.animationController instanceof R_&&this.animationController.setPosition(e)}}var M_=e(5432),U_=e.n(M_);const F_=e=>{const{url:t,children:i,onClick:o,pointerEvents:n}=e;return Pr(U_()),Un("a",{onClick:e=>{e.preventDefault(),a(o)&&o()},className:M_.locals.ClickThroughLink,"data-pointer-events":n,href:t,target:"_blank",rel:"nofollow noreferrer"},i)},H_=e=>{const{isClickDisabled:t,children:i,clickThruUrl:o,onClickThru:n}=e;return t?Un(Hn,null,i):Un(F_,{onClick:n,url:o},i)},z_=sr(Fu);z_.Provider.displayName="I18NContext";const W_=e=>{let{lang:t}=e;return t},j_=()=>{const e=Ar(z_);return t=>Wu(t,e)},Y_=()=>Ar(z_),G_=e=>{const{width:t="1em",height:i="1em",style:o={}}=e;return Un("svg",{width:t,height:i,style:Br({margin:"0 -0.1em",fontSize:"0.6em",width:"0.87em",height:"1em"},o),viewBox:"14 14 38 38"},Un("g",{"fill-rule":"nonzero",fill:"currentcolor"},Un("path",{d:"M16.002 31.832c-.003.051-.003.102 0 .133a1.51 1.51 0 0 0 .453 1.096 1.55 1.55 0 0 0 1.104.444h24.216l-9.081 8.833a1.51 1.51 0 0 0-.478 1.497 1.53 1.53 0 0 0 1.113 1.117 1.55 1.55 0 0 0 1.509-.432l11.779-11.45a1.51 1.51 0 0 0 0-2.171L34.841 19.452c-.441-.44-1.108-.573-1.687-.336a1.52 1.52 0 0 0-.951 1.423 1.51 1.51 0 0 0 .479 1.081l9.093 8.844H17.561a1.54 1.54 0 0 0-1.559 1.369z"})))};var X_=e(2563),K_=e.n(X_);const q_=e=>{let{size:t,children:i}=e;return Pr(K_()),Un("div",{className:Er(X_.locals.ActionButton,{[X_.locals.ActionButton__content_middle]:"middle"===t,[X_.locals.ActionButton__content_small]:"small"===t})},Un("div",{className:X_.locals.ActionButton__textWrapper},i),Un(G_,{style:{width:"2em",height:"2em",padding:"0 0.2em",marginLeft:Boolean(i)?"0.3em":"0px",flexShrink:"0"}}))};var Q_=e(6246),J_=e.n(Q_);const Z_=e=>{let{title:t,greenUrl:i}=e;return Pr(J_()),Un("div",{className:Q_.locals.InfoBlock},Un("div",{className:Q_.locals.InfoBlock__title},t),i?Un("div",{className:Q_.locals.InfoBlock__greenUrl},i):null)};var $_=e(9461),ey=e.n($_);const ty=e=>{Pr(ey());const t=j_(),o=t("THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE"),n=t("THEME_EMPTY_ACTION_BUTTON_LABEL"),{title:r,greenUrl:a,onClickThrough:s,buttonLabel:l=n,faviconSrc:d,targetUrl:c,useDefaultButtonLabel:u=!1}=e;return Un("div",{className:$_.locals.ActionPanel__clickableLayer},Un("div",{className:$_.locals.ActionPanel},Un("div",{className:$_.locals.ActionPanel__content},Un(F_,{url:c,onClick:()=>{s({clickSource:"ActionPanel",playerHandles:!0,url:void 0})}},Un("div",{className:$_.locals.ActionPanel__mask},Un("div",{className:Er($_.locals.ActionPanel__wrapper,!d&&$_.locals.ActionPanel__wrapper_wide)},Un(Z_,{greenUrl:a,title:i(r)?r:o}),Un(q_,{size:"big"},u?n:l)))),d?Un("div",{className:$_.locals.ActionPanel__favicon},Un("img",{onClick:()=>{s({playerHandles:!0,url:void 0,clickSource:"ActionPanelFaviconImage"})},src:d,alt:"favicon"})):null)))},iy=sr({});iy.Provider.displayName="ControlsVisibilityContext";const oy=e=>br(e),ny=()=>Ar(iy),ry=sr(void 0);ry.Provider.displayName="FaviconSrcContext";const ay=e=>br(e),sy=()=>Ar(ry),ly=-1,dy=sr({timeToSkip:ly,skipCallback:d});dy.Provider.displayName="SkipContext";const cy=e=>{let{timeToSkipSignal:t,skipCallback:i}=e;return{timeToSkip:br(t),skipCallback:i}},uy=()=>Ar(dy),hy=sr({themeEmptyParameters:void 0,clickThrough:d});hy.Provider.displayName="ThemeEmptyContext";const py=e=>{let{themeEmptyParameters:t,clickThrough:i}=e;return{themeEmptyParameters:br(t),clickThrough:i}},my=()=>Ar(hy);var Ay=e(7480),gy=e.n(Ay);const vy=e=>{let{children:t}=e;return Pr(gy()),Un("div",{className:Ay.locals.PackshotButton},Un("div",{className:Ay.locals.PackshotButton__content},t))};var _y=e(4368),yy=e.n(_y);const fy=e=>{let{width:t,height:i}=e;return Pr(yy()),Un("div",{className:_y.locals.PackshotOverlay,style:{width:t+"px",height:i+"px"}})};var Sy=e(3162),Ty=e.n(Sy);const Ey=e=>{Pr(Ty());const t=j_(),o=i_(),{timeToSkip:n}=uy(),{skip:r}=ny(),a=function(e){let t;const{width:i}=e;let o;return t=i<360?14:i>=1024?32:Math.max(16,Math.min(14+2*Math.floor((i-240)/80),30)),o=i<560?13:i<720?14:16,{title:{fontSize:t,lineHeight:t+4},body:{fontSize:t-2,lineHeight:t+4},textBlock:{fontSize:o},ctaButton:{fontSize:Ur(e)}}}(o),s=function(e){const{width:t}=e;return t<640?.1*t:t<960?.15*t:.2*t}(o),{descriptionText:l,openClickThroughUrl:c,disableOverlay:u=!1,disableTitle:h=!1,disableButton:p=!1,clickUrl:m,title:A,packshotNewDesignMode:g}=e,v=j_(),{themeEmptyParameters:_}=my(),y=void 0===_&&!0!==h&&!0!==p,f=void 0!==_&&!0!==p,S=Er(Sy.locals.PackshotScreen,{[Sy.locals.PackshotScreen_clickable]:y}),T=!0===h?void 0:null!=A?A:v("LEARN_MORE_ON_ADVERTISERS_WEBSITE"),{greenUrl:E,label:b,targetUrl:C}=null!=_?_:{},P=sy(),w="OFF"!==g,O=!1!==r&&n>=0,I=o.width<=400&&w&&O&&o.width>o.height,k=w?Un("div",{className:Sy.locals.PackshotScreen__content},Un(H_,{isClickDisabled:y,clickThruUrl:m,onClickThru:()=>{c({clickSource:"PackshotTitle",playerHandles:!0,url:void 0})}},T&&Un("div",{className:Sy.locals.PackshotScreen__title,style:{fontSize:a.title.fontSize+"px",lineHeight:a.title.lineHeight+"px",padding:"0 "+s+"px"}},T)),f&&Un("div",{className:Er(Sy.locals.PackshotScreen__buttonWrapper_newDesign,{[Sy.locals.PackshotScreen__buttonWrapper_newDesign_float_left]:I}),style:{fontSize:a.ctaButton.fontSize+"px"}},Un(ty,{useDefaultButtonLabel:I,title:void 0,greenUrl:E,buttonLabel:b,targetUrl:C,onClickThrough:y?d:c,faviconSrc:I?void 0:P}))):_&&Un("div",{className:Sy.locals.PackshotScreen__buttonWrapper},Un(F_,{url:m,onClick:()=>{c({url:void 0,playerHandles:!0,clickSource:"PackshotButton"})}},Un(vy,null,b||t("LEARN_MORE")))),{width:D,height:N}=o,R=Un("div",{className:S,style:{width:D+"px",height:N+"px"}},!u&&Un("div",{className:Sy.locals.PackshotScreen__packshotOverlayWrapper},Un(fy,{width:D,height:N})),k,i(l)&&Un("div",{className:w?Sy.locals.PackshotScreen__textBlock_newDesgin:Sy.locals.PackshotScreen__textBlock,style:{fontSize:a.textBlock.fontSize+"px"}},l));return y?(e=>Un(F_,{url:m,onClick:()=>{c({clickSource:"PackshotContainer",url:void 0,playerHandles:!0})}},e))(R):R},by=sr({clickThrough:d,clickUrl:void 0,videoSlotClickUrl:void 0});by.Provider.displayName="ClickUrlDataContext";const Cy=e=>{const t=br(e.currentVastAd),i=br(e.videoSlotClickUrl);return pr((()=>({clickThrough:e.clickThrough,clickUrl:null==t?void 0:t.clickUrlData.tgaOfferClickUrl,videoSlotClickUrl:i})),[t])},Py=()=>Ar(by);class wy extends B_{constructor(e){super(e),this.addDestroyHandler((t=>{oc("Packshot: destroy Packshot reason=["+t.reason+"]"),e.logStatsEvent({name:"PackshotDestroyed",data:{isInfiniteDuration:this.isInfiniteDuration,reason:t},probability:bc})}))}renderPackshotContent(e){const{title:t,descriptionText:i,openClickThroughUrl:o,disableOverlay:n,disableTitle:r,disableButton:a,clickUrl:s,packshotNewDesignMode:l}=e;return ar(Un(Zv,{onRuntimeError:e=>{this.destroy({reason:"runtimeError",details:e})},onFirstRender:e=>{"error"===e.status&&this.destroy({reason:"firstRenderError",details:e.error})}},Un($v,{components:Oy,componentsProps:e},Un(Ey,{title:t,descriptionText:i,openClickThroughUrl:t=>{e.logStatsEvent({name:"PackshotButtonClicked",probability:1}),o(t)},disableOverlay:n,disableTitle:r,disableButton:a,clickUrl:s,packshotNewDesignMode:l}))),e.parent),e.logStatsEvent({name:"PackshotRendered",data:{isInfiniteDuration:this.isInfiniteDuration},probability:bc}),()=>{ar(null,e.parent)}}}const Oy=[e=>Un(o_.Provider,{value:e.parent,children:e.children}),e=>Un(e_.Provider,{value:t_(e.parentSize),children:e.children}),e=>Un(v_.Provider,{value:e.logStatsEvent,children:e.children}),e=>Un(z_.Provider,{value:W_(e),children:e.children}),e=>Un(hy.Provider,{value:{themeEmptyParameters:e.themeEmptyParameters,clickThrough:e.openClickThroughUrl},children:e.children}),e=>Un(by.Provider,{value:{clickThrough:e.openClickThroughUrl,clickUrl:e.clickUrl,videoSlotClickUrl:e.clickUrl},children:e.children}),e=>Un(dy.Provider,{value:cy({timeToSkipSignal:e.timeToSkip,skipCallback:d}),children:e.children}),e=>Un(iy.Provider,{value:oy(e.controlsVisibility),children:e.children}),e=>Un(ry.Provider,{value:ay(e.faviconSrc),children:e.children})],Iy={duration:NaN,remainingTime:0};let ky;const Dy=v({portion:"portion",seconds:"seconds"});class Ny{constructor(e){this.trackingUrls={portion:[],seconds:[]},Jl(e,(e=>{let{urls:t,offset:{unit:i,value:o}}=e;this.trackingUrls[i].push({urls:[...t],offset:o})}))}getTrackingUrlsByPosition(e){let{duration:t,remainingTime:i}=e;if(!t||!Bt(i))return[];const o=t-i,n={portion:o/t,seconds:o},r=[];return Jl(Dy,(e=>{const t=this.getTrackingUrlsByUnitAndOffset(e,n[e]);r.push(...t)})),r}getTrackingUrlsByUnitAndOffset(e,t){const[i,o]=Qi(this.trackingUrls[e],(e=>{let{offset:i}=e;return t>=i}));return this.trackingUrls[e]=o,lt(sc(i,(e=>{let{urls:t}=e;return t})))}}const Ry="2.0",Vy=v({getAdLinear:0,getAdHeight:0,getAdWidth:0,getAdExpanded:0,getAdRemainingTime:0,getAdDuration:0,getAdVolume:0,getAdSkippableState:0}),Ly=["slot","videoSlot"];class xy extends Hc{static getVpaidAd(e){return pn(new xy({outsideApi:e}))}handshakeVersion(){return Ry}stopAd(){oc("[RemoteVPAID]: call remote stopAd()"),this.destroy({reason:"manual",details:"stopAd"}),qr(this.params.outsideApi.callVpaidMethod("stopAd",[]))}initAd(e,t,i,o,n,r){if(this.isDestroyed)return void Wc.error({error:new Ml({code:"VF_VPAID_INIT_CALLED_AFTER_DESTROY",details:{width:e,height:t,viewMode:i,desiredBitrate:o,creativeData:n,environmentVars:r}})});const a=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(r,Ly);this.params.outsideApi.initCreative([{width:e,height:t,viewMode:i,desiredBitrate:o,creativeData:n,environmentVars:Qr({},a,{videoSlot:void 0,slot:void 0})}]).then(d).catch((e=>{this.destroy({reason:"fatal",details:e})}))}startAd(){this.callRemoteMethod("startAd",[])}skipAd(){this.callRemoteMethod("skipAd",[])}resizeAd(e,t,i){this.callRemoteMethod("resizeAd",[e,t,i])}pauseAd(){this.callRemoteMethod("pauseAd",[])}resumeAd(){this.callRemoteMethod("resumeAd",[])}expandAd(){this.callRemoteMethod("expandAd",[])}collapseAd(){this.callRemoteMethod("collapseAd",[])}setAdVolume(e){this.callRemoteMethod("setAdVolume",[e])}getAdDuration(){return this.getterValues.getAdDuration}getAdRemainingTime(){return this.getterValues.getAdRemainingTime}getAdVolume(){return this.getterValues.getAdVolume}getAdExpanded(){return this.getterValues.getAdExpanded}getAdHeight(){return this.getterValues.getAdHeight}getAdWidth(){return this.getterValues.getAdWidth}getAdLinear(){return this.getterValues.getAdLinear}getAdSkippableState(){return this.getterValues.getAdSkippableState}constructor(e){super(),this.unsubscribe=d,this.getAdIcons=_v,this.getterValues=it(sc(Vy,(e=>[e,bg[e]]))),this.subscribe=(e,t,i)=>{this.params.outsideApi.listenRemoteVpaidEvents(t,((t,o)=>{e.apply(i,o)}))},this.params=e;const{outsideApi:t}=e;this.addDestroyHandler(t.listenRemoteVpaidGetterValueChange(this.ignoreAfterDestroy(((e,t)=>{this.getterValues[e]=t}),"OutsideApiRemoteVpaid.listenRemoteVpaidGetterValueChangeOnDestroy"))),this.addDestroyHandler((e=>{"fatal"===e.reason&&Wc.error({error:new Ml({code:"VF_REMOTE_VPAID_FATAL_DESTROY",details:{error:e.details}})})}))}callRemoteMethod(e,t){this.isDestroyed?Wc.error({error:new Ml({code:"VF_VPAID_METHOD_CALLED_AFTER_DESTROY",details:{methodName:e,args:t}})}):this.params.outsideApi.callVpaidMethod(e,t).then(d).catch((e=>{this.destroy({reason:"fatal",details:e})}))}}const By=(e,t,i,o,n,r)=>{const a=e?o:t,s=e?i:n;return{width:a,height:s,top:(r.height-s)/2,left:(r.width-a)/2}},My=e=>{const{image:t,boundingRectangle:{width:i,height:o},scaleForHorizontal:n=1,scaleForVertical:r=1,pixelRatio:a,stretch:s}=e,l=t.width,d=t.height,c=l/d,u=c>i/o,h=c>1?n:r,p=h*(i<l||s?i:l),m=h*(o<d||s?o:d),A=l*(m/d),g=d*(p/l);return{width:u?p:A,height:u?g:m,url:t.url,size:t.size,imageWidth:t.width,imageHeight:t.height,box:By(u,p,m,A,g,{width:i,height:o}),coeff:l*d/(i*o*a),isHorizontal:c>1,smartCenters:t.smartCenters}},Uy=["idle","load","init","start","play"],Fy=e=>fe(e)||!ei(e),Hy=e=>{var t;const{adConfig:{secureMode:i}}=e,o=null!=(t=tc.hardcodedParams.adsdksecuremode)?t:i;if(!o)return!1;const n=e.getJSMediaFile();if(!n)return!1;switch(o){case"ForceSafe":return!0;case"Safe":return!Fy(n.url);default:return!1}},zy=A((()=>{Wc.log({name:"AdCreativeVideoBannerVastUnmoderatedInsideText"})})),Wy=A((()=>{Wc.log({name:"AdCreativeVideoBannerVastHasBooleanFields"})})),jy=e=>{const t=Ue(e);return Boolean(t)},Yy=e=>{if(!o(e))return[];const{sitelinks:t,addInfo:n,telNum:r,workingTime:a,metro:s,region:l}=e;if(Xy(t)){const e=Vc(t,(e=>i(e.title)&&i(e.url)));if(e.length)return sc(e,(e=>({type:"sitelink",text:e.title,url:e.url})))}const d=null==n?void 0:n.callouts_list;if(Gy(d)){const e=Vc(d,i);if(e.length)return sc(e,(e=>({type:"callout",text:e})))}const c=Vc([r,a,s,l],i);return sc(c,(e=>({type:"contact",text:e})))},Gy=e=>Array.isArray(e)&&Rp(e,t),Xy=e=>Array.isArray(e)&&Rp(e,o),Ky=e=>i(e)?e:void 0,qy=e=>"boolean"===typeof e?e:void 0,Qy=new Map([["1","ru"],["2","uk"],["3","en"],["4","be"],["5","kk"],["6","tr"],["ru","ru"],["uk","uk"],["en","en"],["by","be"],["kz","kk"],["tr","tr"]]),Jy=e=>{var t;return null!=(t=Qy.get(e))?t:"ru"},Zy=e=>{var t;const{adParametersObject:n}=e;if(!o(n))return;return{parsedParameters:(e=>{if(!jy(e))return;const{AGE_BACKGROUND_COLOR:t,AGE_TEXT_COLOR:n,BODY_BACKGROUND_COLOR:r,BODY_TEXT_COLOR:a,BUTTON_BORDER_COLOR:s,BUTTON_COLOR:l,BUTTON_TEXT_COLOR:d,DISCLAIMER_BACKGROUND_COLOR:c,DISCLAIMER_TEXT_COLOR:u,DOMAIN_BACKGROUND_COLOR:h,DOMAIN_TEXT_COLOR:p,HAS_AGE:m,HAS_DISCLAIMER:A,HAS_LEGAL:g,LEGAL_BACKGROUND_COLOR:v,LEGAL_TEXT:_,LEGAL_TEXT_COLOR:y,TITLE_BACKGROUND_COLOR:f,TITLE_TEXT_COLOR:S,BUTTON_POSITION:T,BUTTON_LABELS:E}=e;("HAS_TITLE"in e||"HAS_LEGAL"in e||"HAS_DISCLAIMER"in e||"HAS_BODY"in e||"HAS_BUTTON"in e||"HAS_AGE"in e)&&Wy();const b=Ue(e);if(!b)return;const{domain:C,green_url_text_prefix:P,green_url_text_suffix:w,age:O,lang:I,iconUrl:k}=b,D=Ut({domain:C,greenUrlTextPrefix:P,greenUrlTextSuffix:w}),N=Ht(e)||{},{punyDomain:R}=N,V=bt(e);N===b.unmoderated&&zy();const L=(e=>{if(void 0!==(null==e?void 0:e.secondTitle)&&i(null==e?void 0:e.secondTitle))return e.secondTitle})(N),{title:x,body:B,hasTitle:M,hasBody:U}=Fe(e);return{title:x,body:B,titleExtension:Ky(L),domain:Ky(C),greenUrl:D,punyDomain:Ky(R),iconUrl:k,domainBackgroundColor:Ky(h),domainTextColor:Ky(p),ageRestriction:Ky(O),hasAgeRestriction:qy(m),extraLinks:Yy(N),images:Zr(e),clickThruUrl:jt(e),ageBackgroundColor:Ky(t),ageTextColor:Ky(n),bodyBackgroundColor:Ky(r),bodyTextColor:Ky(a),buttonBorderColor:Ky(s),buttonColor:Ky(l),buttonTextColor:Ky(d),hasDisclaimer:qy(A),disclaimerBackgroundColor:Ky(c),disclaimerTextColor:Ky(u),hasBody:U,hasLegal:qy(g),hasTitle:M,legalBackgroundColor:Ky(v),legalText:Ky(_),legalTextColor:Ky(y),titleBackgroundColor:Ky(f),titleTextColor:Ky(S),buttonPosition:Ky(T),buttonLabels:(F=E,o(F)&&Rp(Qt(F),(e=>"string"===typeof e))?F:void 0),assets:fp(e),targetUrl:We(e),productType:V,lang:Jy(I)};var F})(null!=(t=n.adParameters)?t:n),adParametersObject:n}};var $y,ef=e(7262),tf=e.n(ef);!function(e){e.TEST="TEST",e.MOEVIDEO="MOEVIDEO",e.VIDEONOW="VIDEONOW",e.ADLOOK="ADLOOK",e.BUZZOOLA="BUZZOOLA",e.PUNCHMEDIA="PUNCHMEDIA",e.BETWEENDIGITAL="BETWEENDIGITAL",e.ADHIGH="ADHIGH",e.ADRIVER="ADRIVER",e.MRADX="MRADX",e.RUTARGET="RUTARGET",e.DSSERVING="DSSERVING",e.SAPE="SAPE"}($y||($y={}));const of=le({TEST:"test_vpaid",MOEVIDEO:"moevideo.biz",VIDEONOW:"videonow.ru",ADLOOK:"adlook.me",BUZZOOLA:"buzzoola.com",PUNCHMEDIA:"punchmedia.ru",BETWEENDIGITAL:"betweendigital.com",ADHIGH:"adhigh.net",ADRIVER:"adriver.ru",MRADX:"mradx.net",RUTARGET:"rutarget.ru",DSSERVING:"ds.serving-sys.ru",SAPE:"sape.ru"});var nf=e(4873),rf=e.n(nf);class af extends Hc{constructor(e){var t;super(),this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:i}}]=e;this.onResize.dispatch({width:t,height:i})},this.getElementWindow=e=>{var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||null};const i=ph(e);this.onResize=new hh({width:i.width,height:i.height},((e,t)=>{let{width:i,height:o}=t;return e.width===i&&e.height===o})),this.addDestroyHandler((()=>{this.onResize.removeAll()}));const o=this.getElementWindow(e),r=null!=(t=null==o?void 0:o.ResizeObserver)?t:window.ResizeObserver;if("undefined"!==typeof r&&n(ResizeObserver))try{const t=new r(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler((()=>{t.disconnect()}))}catch(Mw){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return aa({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const t=this.getElementWindow(e);if(!t)return;const i=()=>{const t=ph(e);this.onResize.dispatch({width:t.width,height:t.height})};this.addDestroyHandler(q({element:t,eventName:"resize",listener:i,options:{passive:!0}})),this.addDestroyHandler(_o(i))}}let sf=!0;var lf=e(3857),df=e.n(lf);const cf=e=>{Pr(df());const{product:t,isHorizontalFormat:i,onProductClick:o}=e,n=hr(null),r=Er(lf.locals.EcomProductCard,{[lf.locals.EcomProductCard_horizontal]:i}),{priceInfo:a}=t,s=Er(lf.locals.EcomProductCard__price,{[lf.locals.EcomProductCard__price_withOldPrice]:void 0!==(null==a?void 0:a.oldPrice)}),l=Y_(),d=sa(n),c=pr((()=>{const e=i?4:2;if(null===n.current||void 0===d)return{linesCount:e,fontSize:void 0};const t=Number.parseFloat(getComputedStyle(n.current).fontSize),o=i?1.6:1.2,r=Math.min(t*o,17),a=Math.round(d.height/(1.2*r));return a>=e?{linesCount:a,fontSize:r+"px"}:{linesCount:e,fontSize:Math.min(d.height/(1.2*e),r)+"px"}}),[n.current,t.text,d,i]);return Un("div",{style:{"--pc-line-height":1.2,"--pc-lines-count":c.linesCount,"--pc-description-font-size":c.fontSize},className:r},Un("img",{className:lf.locals.EcomProductCard__Image,src:t.imageUrl}),Un("div",{className:lf.locals.EcomProductCard__Details},a&&Un("div",{className:lf.locals.EcomProductCard__pricesContainer},Un("span",{className:s},la(a.price,a.currency,l,0)),a.oldPrice&&Un("span",{className:lf.locals.EcomProductCard__oldPrice},la(a.oldPrice,a.currency,l,0))),Un("div",{className:lf.locals.EcomProductCard__textContainer,ref:n},Un("div",{className:lf.locals.EcomProductCard__text},t.text))),Un(F_,{onClick:o,url:t.link},Un("span",null)))};var uf,hf=e(9759),pf=e.n(hf);const mf=null!=(uf=Uc.getNumberFlagValueAndActivateTestId("VAS_ECOM_PRODUCTS_CAROUSEL_AUTO_SCROLL_DURATION"))?uf:3,Af=150,gf=3,vf=e=>{var t,i,o;Pr(pf());const{products:n,maxItemsPerView:r=gf,onProductClick:s}=e,l=hr(null),d=sa(l),{itemsPerView:c,carouselItemWidth:u,carouselItemContainerWidth:h,isHorizontalCardsFormat:p}=function(e,t){if(void 0===e)return{itemsPerView:1,carouselItemWidth:Af,carouselItemContainerWidth:Af,isHorizontalCardsFormat:!1};const i=e.width<e.height;if(Math.min(5*e.height/7,e.width)>=Af||i){const o=Math.max(Math.min(Math.floor(e.width/Af),t),1);return{itemsPerView:o,carouselItemWidth:Math.floor(e.width/o),carouselItemContainerWidth:Math.floor(e.width/o),isHorizontalCardsFormat:1===o&&!i}}return{itemsPerView:1,carouselItemWidth:Math.floor(e.width),carouselItemContainerWidth:Math.floor(e.width),isHorizontalCardsFormat:!0}}(d,r),m=n.length>c,A=n.length,g=n.length,[v,_]=dr(A),y=pr((()=>{if(!m)return sc(n,((e,t)=>ha({},e,{key:t,originIndex:t})));const e=n.length+A+g,t=new Array(e);for(let i=-A,o=0;i<n.length+g;i++,o++){let e=i%n.length;e<0&&(e+=n.length);const r=n[e];t[o]=ha({},r,{key:i,originIndex:e})}return t}),[n,m,A,g]),f=(e,t)=>{if(null===t)return;const i=y[e];if(void 0===i)return;const o=Math.round((A+i.originIndex)*u);Math.abs(o-t.scrollLeft)<=1||(t.style.scrollBehavior="auto",t.scrollLeft=o,t.style.scrollBehavior="smooth")},S=e=>{f(A,e)},[T,E]=dr(null!=(t=e.autoScrollDelay)?t:0),b=t=>{a(e.onUserAction)&&e.onUserAction(t),e.autoScrollDelay&&E(0)};cr((()=>{if(!e.autoScrollDelay||null===l.current)return;if(e.autoScrollDelay!==T){const t=setTimeout((()=>{var t;E(null!=(t=e.autoScrollDelay)?t:0)}),1e3*e.autoScrollDelay);return()=>{clearTimeout(t)}}const t=setInterval((()=>{C("forward")}),1e3*T);return()=>{clearInterval(t)}}),[e.autoScrollDelay,T,l.current,h]);const C=e=>{if(null===l.current||void 0===h)return;const t="forward"===e?1:-1,i=l.current.scrollLeft+h*t;a(l.current.scroll)?l.current.scroll({behavior:"smooth",left:i}):l.current.scrollLeft=i},P=e=>()=>{C(e),b(0)},w={"--pc-card-width":u+"px","--pc-card-container-width":h+"px"},O=mr(Ve((e=>{0!==e.deltaX&&b(0)}),200),[b]);cr((()=>{null!==l.current&&S(l.current)}),[l.current]);const I=j_(),k=Er(hf.locals.EcomProductsCarousel__productCardContainer,{[hf.locals.EcomProductsCarousel__productCardContainer_verticalCards]:!p,[hf.locals.EcomProductsCarousel__productCardContainer_horizontalCards]:p}),D=Er(hf.locals.EcomProductsCarousel__productCards,{[hf.locals.EcomProductsCarousel__productCards_noScroll]:!m});return 0===n.length?null:Un("div",{className:hf.locals.EcomProductsCarousel,style:w},Un("div",{className:hf.locals.EcomProductsCarousel__slideToLeftContainer},m&&Un("button",{type:"button",onClick:P("backward"),className:hf.locals.EcomProductsCarousel__slideToLeft,title:I("PREV_ECOM_PRODUCT")},0===(null==(i=y[v])?void 0:i.originIndex)?Un(ua,{className:hf.locals.EcomProductsCarousel__slideToLeftIcon}):Un(da,{className:hf.locals.EcomProductsCarousel__slideToLeftIcon}))),Un("div",{className:D,ref:l,onScroll:e=>{const t=e.target,i=Math.round(t.scrollLeft/u);_(i);const{scrollLeft:o,scrollWidth:n,clientWidth:r}=t;if(o<1&&o>=0)return void S(t);const a=o+r;n-a<1&&a<=n&&f(i,t)},onWheel:O,onMouseMove:e=>{null!==e.target&&"onpointermove"in e.target||b(2)},onPointerMove:()=>{b(2)}},void 0!==d&&sc(y,(e=>Un("div",{className:k,key:e.key,"data-key":e.key},Un(cf,{product:e,isHorizontalFormat:p,onProductClick:()=>{b(1),s(e)}}))))),Un("div",{className:hf.locals.EcomProductsCarousel__slideToRightContainer},m&&Un("button",{type:"button",onClick:P("forward"),className:hf.locals.EcomProductsCarousel__slideToRight,title:I("NEXT_ECOM_PRODUCT")},(null==(o=y[v+c-1])?void 0:o.originIndex)===n.length-1?Un(ua,{className:hf.locals.EcomProductsCarousel__slideToRightIcon}):Un(ca,{className:hf.locals.EcomProductsCarousel__slideToRightIcon}))))},_f=e=>{Pr(rf());const t=i_(),i={fontSize:Ur(t)},o=t.height>t.width,{products:n,openClickThroughUrl:r,isProductsVisible:a,onUserAction:s,showCloseButton:l,onCloseClick:d}=e,c=o?1:3,u=Er(nf.locals.EcomProductsPackshotScreen,{[nf.locals.EcomProductsPackshotScreen_singleVisibleItem]:1===c||1===e.products.length,[nf.locals.EcomProductsPackshotScreen_vertical]:o}),h=Er(nf.locals.EcomProductsPackshotScreen__closeButton,{[nf.locals.EcomProductsPackshotScreen__closeButton_hidden]:!l});return Un(Hn,null,a&&Un("div",{className:u,style:i},Un("div",{className:nf.locals.EcomProductsPackshotScreen__closeButtonContainer},Un("button",{type:"button",className:h,onClick:d},Un(pa,{className:nf.locals.EcomProductsPackshotScreen__closeIcon}))),Un(vf,{products:n,maxItemsPerView:c,autoScrollDelay:mf,onProductClick:e=>{r(e.clickThruUrl)},onUserAction:s})),!a&&Un(Ey,e.classicPackshotProps))};class yf extends B_{constructor(e){super(e),this.isProductsVisible=new hh(!1),this.addDestroyHandler((e=>{oc("ProductsPackshot: destroy Productspackshot reason=["+e.reason+"]"),Wc.log({name:"EcomProductsPackshotDestroyed",data:{isInfiniteDuration:this.isInfiniteDuration,reason:e},probability:bc})}))}setProductsVisibility(e){this.isProductsVisible.dispatch(e)}renderPackshotContent(e){var t;const i=e=>{"error"===e.status&&this.destroy({reason:"firstRenderError",details:e.error})},o=e=>{this.destroy({reason:"runtimeError",details:e})},n=t=>{Wc.log({name:"EcomProductsPackshotButtonClicked",probability:1}),e.openClickThroughUrl(t)},r={clickUrl:null==(t=e.themeEmptyParameters)?void 0:t.clickUrl,descriptionText:void 0,openClickThroughUrl:()=>{void 0!==e.themeEmptyParameters&&e.openClickThroughUrl(e.themeEmptyParameters.clickUrl)},packshotNewDesignMode:"ONLY_ELEMENTS_CLICKABLE",title:e.title,disableOverlay:e.disableOverlay,disableTitle:e.disableTitle,disableButton:e.disableButton},a=()=>{const{duration:t,userActionIncreaseDuration:i}=e,o=ko(this.progress.getValue()-i/t,0,1);this.setProgress(o)},s=()=>{this.destroy({reason:"complete",details:void 0})};return ar(Un((()=>{const t=br(this.isProductsVisible),l=br(e.abuseDisplayStatus),d=br(e.controlsVisibility),c=br(e.timeToSkip),u=!(!1!==d.skip&&c>=0)&&"hidden"===l&&this.destroyAfterComplete;return Un(Zv,{onRuntimeError:o,onFirstRender:i},Un($v,{components:ff,componentsProps:e},Un(_f,{classicPackshotProps:r,products:e.ecomShop.products,openClickThroughUrl:n,isProductsVisible:t,showCloseButton:u,onUserAction:a,onCloseClick:s})))}),null),e.parent),Wc.log({name:"EcomProductsPackshotRendered",data:{isInfiniteDuration:this.isInfiniteDuration},probability:bc}),()=>{ar(null,e.parent)}}}const ff=[e=>Un(o_.Provider,{value:e.parent,children:e.children}),e=>Un(e_.Provider,{value:t_(e.parentSize),children:e.children}),e=>Un(v_.Provider,{value:e.logStatsEvent,children:e.children}),e=>Un(hy.Provider,{value:{themeEmptyParameters:e.themeEmptyParameters,clickThrough:()=>{void 0!==e.themeEmptyParameters&&e.openClickThroughUrl(e.themeEmptyParameters.clickUrl)}},children:e.children}),e=>Un(iy.Provider,{value:oy(e.controlsVisibility),children:e.children}),e=>Un(ry.Provider,{value:ay(e.faviconSrc),children:e.children})],Sf=A((e=>{e({name:"UsingInteractiveViewerThemeAsFullyClickableCreativeIndicator",probability:Cc})}));class Tf extends Hc{constructor(e){super(),this.onAdSkippableStateChange=new Bc,this.vpaidCreativeAdStartedSignal=new Bc,this.vpaidCreativeAdErrorSignal=new Bc,this.adSkippableState=!1,this.canUseMediaAfterPlayback=!1,this.isInfinityPackshotEnabled=!1,this.styleModulesManager=new r_,this.lifeCycleStage=new hh("idle",((e,t)=>{const i=Uy.indexOf(e);return Uy.indexOf(t)-i!==1&&this.stats.error({error:new Ml({code:"CREATIVE_STAGES_SEQUENCE_VIOLATED",details:ga({},this.getVPAIDLogDetails(),{currentStage:e,nextStage:t})})}),!1})),this.startVpaidCreative=A((e=>{this.isCreativeStartRequested.dispatch(!0),this.lifeCycleStage.dispatch("start"),oc("VPAID.startAd() called in startVpaidCreative method"),e.startAd();const t=this.shouldPlayTimeCounter.getTime();this.vpaidCreativeAdStartedSignal.addOne((()=>{oc("VPAID dispatched AdStarted");const e=this.shouldPlayTimeCounter.getTime();this.lifeCycleStage.dispatch("play"),this.stats.log({name:"VpaidCreativeStarted",data:this.getVPAIDLogDetails(),values:{timeBeforeStart:t,timeToStart:e-t,fullTime:e}})}))})),this.creativeAdStartedCallback=Kt((()=>{if(this.isDestroyed)return void this.stats.error({error:new Ml({code:"VPAID_STARTED_AFTER_AD_DESTROY",details:this.getVPAIDLogDetails()})});this.isCreativeStartRequested.getValue()||this.stats.error({error:new Ml({code:"VPAID_STARTED_BEFORE_START_AD_CALL",details:this.getVPAIDLogDetails()})});const e=A((()=>{this.isStarted.dispatch(!0)})),t=this.playingState.getValue();oc("VPAID dispatched AdStarted event with playingState=["+t+"]"),"play"===t?e():this.playingState.subscribeValueConditionOnce((e=>"play"===e),e)}),(()=>{this.stats.error({error:new Ml({code:"VPAID_STARTED_MORE_THAN_ONCE",details:this.getVPAIDLogDetails()})})})),this.createContainerNode=A((()=>{const{creativesLayoutContainer:e,slotParameters:t}=this.adDisplayController,i=t.document.createElement("div");this.addDestroyHandler(q({element:i,eventName:"click",listener:()=>{Dn({control:"AdCreativeWrapperSlotElement",purpose:"unknown"})}})),i.classList.add(ef.locals.AdPodContainer),this.styleModulesManager.useStyleModule(i,tf()),this.isCreativeStartRequested.addOne((()=>{Qe(i,{visibility:"visible"})})),this.addDestroyHandler((()=>{l(i)})),e.appendChild(i);const o=Hr(i);return o&&Qe(o,Sh),o||i})),this.prepareVpaidCreative=A((async e=>{let{startStrategy:t}=e;this.addDestroyHandler(this.adDisplayController.videoNodeController.onVolumeChange.add((()=>{this.onVolumeChange.dispatch(void 0)}))),this.omsdkController&&await this.omsdkController.initSession({impressionType:"viewable",startStrategy:t});const i=await this.initCreative();if(!i||this.isDestroyed)throw new Ml({code:"VPAID_WAS_DESTROYED_DURING_INIT",details:this.getVPAIDLogDetails()});this.vpaidCreativeAdErrorSignal.add((e=>{this.destroy({reason:"error",details:this.parseVpaidError(e,"VPAIDPlayingError")})})),this.creative=i,this.addDestroyHandler((()=>{this.creative=void 0})),this.onReady.dispatch(void 0),"play"===this.playingState.getValue()?this.startVpaidCreative(i):this.startAndPauseVpaidCreative(i),this.updateAdSkippableState()})),this.updatePosition=this.ignoreAfterDestroy((()=>{var e,t,i,o;this.playbackPosition.dispatch({duration:this.getDuration(),remainingTime:null!=(e=null==(t=this.creative)?void 0:t.getAdRemainingTime())?e:-1}),oc("[AdPodViewer]: updated position [duration = ["+this.getDuration()+"], adRemainingTime = ["+(null!=(i=null==(o=this.creative)?void 0:o.getAdRemainingTime())?i:-1)+"]]")}),"AdPodViewer.updatePosition"),this.isAdPlayingCalled=!1,this.sentTrackings={impression:0,creativeView:0,firstQuartile:0,midpoint:0,thirdQuartile:0,beforeComplete:0,complete:0,clickThrough:0},this.getVPAIDLogDetails=()=>({adPodId:this.mediaAd.getAdPodId(),mediaFile:this.getCurrentSource(),viewerPlaybackParams:this.adPodViewerPlaybackParams,isViewerDestroyed:this.isDestroyed,hasCreativeInstance:Boolean(this.creative),isSlotInDom:$o(this.adDisplayController.slotParameters.element),lifeCycleStage:this.lifeCycleStage.getValue()}),this.playbackPosition=new hh(Iy,zr),this.packshotStartLatch=new fv,this.adVideoIsBuffering=new hh(!1),this.playingState=new hh("idle",((e,t)=>"idle"===t?(this.stats.error({error:new Ml({code:"ATTEMPT_TO_CHANGE_PLAYING_STATE_TO_IDLE",details:void 0})}),!0):"end"===e?("end"!==t&&this.stats.error({error:new Ml({code:"ATTEMPT_TO_CHANGE_PLAYING_STATE_AFTER_END",details:void 0})}),!0):e===t)),this.isCreativeStartRequested=new hh(!1),this.onReady=new Bc,this.onBeforeDestroy=new Bc,this.isStarted=new hh(!1),this.onResume=new Bc,this.onPause=new Bc,this.onVolumeChange=new Bc,this.onImpression=new Bc,this.onFirstQuartile=new Bc,this.onMidpoint=new Bc,this.onThirdQuartile=new Bc,this.onComplete=new Bc,this.onBeforeComplete=new Bc,this.completeLatch=new fv((e=>{let{isInfinityPackshotEnabled:t}=e;this.trackVastEvent("complete",{}),this.onComplete.dispatch({isInfinityPackshotEnabled:t})})),this.onClickThrough=new Bc,this.onAdInteraction=new Bc,this.playingTimeCounter=new Um,this.shouldPlayTimeCounter=new Um,this.getAdParametersTrackingUrls=e=>{var t,i;return null==(t=this.mediaAd.vastAd.adParametersObject)||null==(i=t.trackingEvents)?void 0:i[e]},this.subscribeFullscreenForLogs=()=>{const{videoNodeController:e}=this.adDisplayController,t=A((()=>{this.stats.error({error:new Ml({code:"VIDEOTAG_FULLSCREEN",details:void 0})})}));e.isFullscreen()?t():this.onBeforeComplete.addOne((()=>{e.isFullscreen()&&t()}))};const{adDisplayController:t,mediaAd:i,adPodViewerPlaybackParams:o,enableInfinityPackshot:n,stats:r,ecomShopState:a}=e;this.isStarted.add(Kt((()=>{this.isDestroyed&&r.log({name:"AdPodViewerStartedAfterDestroy"})}),(()=>{r.log({name:"AdPodViewerStartedTwice"})}))),this.userInteractionDispatchers=(e=>({AdClickThru:t=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_CLICK_THRU_WITHOUT_AD_CREATIVE",details:t})})},AdSkipped:()=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_SKIPPED_WITHOUT_AD_CREATIVE",details:void 0})})},AdStopped:()=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_STOPPED_WITHOUT_AD_CREATIVE",details:void 0})})},AdUserClose:()=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_USER_CLOSE_WITHOUT_AD_CREATIVE",details:void 0})})},AdVideoComplete:()=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_VIDEO_COMPLETE_WITHOUT_AD_CREATIVE",details:void 0})})},AdTimeToSkipChange:()=>{e.error({error:new Ml({code:"CALL_USER_INTERACTION_DISPATCHER_AD_TIME_TO_SKIP_CHANGE_WITHOUT_AD_CREATIVE",details:void 0})})}}))(r),this.stats=r,this.ecomShopState=a;const s=Rr(i.vastAd,i.adConfig);if(s){oc("[OMSDK] Initializing OMSDKController with parameters: "+JSON.stringify(s));const e=new k_(this,s);this.addDestroyHandler((t=>{let{reason:i}=t;e.destroy({reason:i,isError:!1})})),this.omsdkController=e}this.addDestroyHandler((e=>{const i=Math.round(this.shouldPlayTimeCounter.getTime()),o=Math.round(this.playingTimeCounter.getTime()),n=Math.round(i-o),a=Math.round(this.bufferingTimeManager.getBufferingTime()*Mm),s=Math.round(this.getDuration()*Mm),l=Math.round(this.getAdRemainingTime()*Mm),d=Math.round(s-l),c=Math.round(a/d*1e6),{droppedVideoFrames:u,corruptedVideoFrames:h,totalVideoFrames:p,droppedVideoFramesRatio:m}=be(this.adDisplayController.videoNode),A=t.getAdPlacementOptions(),{videoToDevicePixelRatio:g,videoPixelRatio:v}=A,_=Boolean(this.getVideoSlotClickUrl()),y=re(this.adDisplayController.slotParameters.window),{adBreakType:f,adFormatType:S}=A,{sentTrackings:T}=this;r.log({name:"ViewerDestroy",data:{destroyReason:e,adBreakType:f,adFormatType:S,wasViewerStarted:this.isStarted.getValue(),sentTrackings:T},values:{shouldPlayTime:i,playingTime:o,notPlayingTime:n,bufferingTime:a,duration:s,remainingTime:l,currentTime:d,bufferingTimeRatio:c,videoToDevicePixelRatio:g,videoPixelRatio:v,droppedVideoFrames:Math.round(u),corruptedVideoFrames:Math.round(h),totalVideoFrames:Math.round(p),droppedVideoFramesRatio:Math.round(1e6*m)},sensors:{reason:e.reason},dailySensors:ga({},ve(T,(e=>Number(e)>0)),{videoSlotIsClickable:_,touchScreen:y,skinVariant:this.adDisplayController.skinVariant,reason:e.reason})}),this.playingTimeCounter.destroy(),this.shouldPlayTimeCounter.destroy(),this.onBeforeDestroy.dispatch(e)})),this.adDisplayController=t,this.mediaAd=i,this.adPodViewerPlaybackParams=o,this.enableInfinityPackshot=null!=n&&n,this.isStarted.add((()=>{this.trackVastEvent("creativeView",{})})),this.onResume.add((()=>{this.trackVastEvent("resume",{})})),this.onPause.add((()=>{this.trackVastEvent("pause",{})})),this.packshotStartLatch.subscribe((()=>{this.trackVastEvent("packshotStart",{})}));let d=0===this.getVolume();this.onVolumeChange.add((()=>{const e=0===this.getVolume();d!==e&&(this.trackVastEvent(e?"mute":"unmute",{}),d=e)})),this.onImpression.addOne((()=>{this.trackVastEvent("impression",{})}));const c=new Ny(i.vastAd.progressTrackings);this.playbackPosition.add((e=>{let{remainingTime:t,duration:i}=e;const o=c.getTrackingUrlsByPosition({duration:i,remainingTime:t});o.length&&Yr({eventName:"progress",trackingEventDetails:{},trackingUrls:o,options:this.adDisplayController.getAdPlacementOptions(),pixelsSource:"vast"})})),this.onFirstQuartile.add((()=>{this.trackVastEvent("firstQuartile",{})})),this.onMidpoint.add((()=>{this.trackVastEvent("midpoint",{})})),this.onThirdQuartile.add((()=>{this.trackVastEvent("thirdQuartile",{})})),this.bufferingTimeManager=new Dg,this.addDestroyHandler((()=>this.bufferingTimeManager.destroy())),this.playingState.subscribeValueConditionOnce((e=>"play"===e),(()=>{this.shouldPlayTimeCounter.start(),this.bufferingTimeManager.start(t.videoNode),this.playingState.add((e=>{"play"===e?(this.shouldPlayTimeCounter.start(),this.bufferingTimeManager.resume()):(this.shouldPlayTimeCounter.stop(),this.bufferingTimeManager.pause())}))})),this.isStarted.addOne((()=>{const e=(this.getDuration()+20)*Mm;this.playingTimeCounter.addCallback(e,(()=>{r.log({name:"TooLongPlaying",data:{mediaFile:this.mediaAd.getJSMediaFile(),adFormatType:Wr(this.mediaAd),adParameters:this.mediaAd.vastAd.adParametersObject}})})),this.playingTimeCounter.start(),this.onPause.add((()=>{this.playingTimeCounter.stop()})),this.onResume.add((()=>{this.playingTimeCounter.start()})),this.addDestroyHandler((()=>{this.playingTimeCounter.stop()}))})),this.onPause.add((()=>{this.playingState.dispatch("pause")})),this.onResume.add((()=>{this.playingState.dispatch("play")})),this.addDestroyHandler((()=>{this.playingState.dispatch("end")})),this.onBeforeComplete.add((()=>{this.trackVastEvent("beforeComplete",{})})),this.addDestroyHandler((e=>{let{reason:t}=e;"skip"!==t&&"close"!==t||this.trackVastEvent(t,{})})),this.vpaidCreativeAdStartedSignal.add((()=>{this.creativeAdStartedCallback()})),this.addDestroyHandler((()=>{this.onResume.removeAll(),this.onPause.removeAll(),this.playingState.removeAll(),this.playbackPosition.removeAll(),this.onFirstQuartile.removeAll(),this.onMidpoint.removeAll(),this.onThirdQuartile.removeAll(),this.onBeforeComplete.removeAll(),this.onComplete.removeAll(),this.onVolumeChange.removeAll(),this.adVideoIsBuffering.removeAll(),this.vpaidCreativeAdStartedSignal.removeAll(),this.vpaidCreativeAdErrorSignal.removeAll()})),this.addDestroyHandler(q({element:window,eventName:"unload",listener:()=>{this.destroy({reason:"unload",details:void 0})}})),this.isStarted.addOne(this.subscribeFullscreenForLogs);const u=new Error,{vpaidTimeout:h}=o;this.shouldPlayTimeCounter.addCallback(h,(()=>{const e=this.getScriptSrc(),t=this.lifeCycleStage.getValue(),{videoNodeController:i}=this.adDisplayController,{videoNode:n}=i,a={adPodId:this.mediaAd.getAdPodId(),timeout:h,src:e,config:this.adDisplayController.playbackParameters,viewerPlaybackParams:o,liveCycleStage:t,videoNodeSrc:n.src,adMediaState:this.adDisplayController.adMediaState.getValue(),networkState:n.networkState,readyState:n.readyState,downlink:this.adDisplayController.getAdPlacementOptions().downlink};this.isDestroyed?r.error({error:new Ml({code:"SHOULD_PLAY_TIMER_IS_STARTED_AFTER_VIEWER_DESTROY",details:a})}):(this.isAdPlayingCalled&&!this.isStarted.getValue()&&r.error({error:new Ml({code:"VPAID_TIMEOUT_PREVENTED_BY_AD_PLAYING_EVENT",details:a})}),this.isStarted.getValue()||this.isAdPlayingCalled||this.destroy({reason:"error",details:new Ml(u,{code:ia({creativeLifeCycleStage:t,isYandexCreative:Fy(this.getScriptSrc()),adCreativeWrapper:this.adCreativeWrapper}),details:a})}))})),this.completeLatch.subscribe((()=>{this.playingTimeCounter.stop()})),this.addDestroyHandler((()=>{this.onAdSkippableStateChange.removeAll()}))}startCreative(e){let{startStrategy:t}=e;this.isDestroyed&&this.stats.error({error:new Ml({code:"PLAY_VPAID_VIEWER_AFTER_DESTROY",details:void 0})});const i="startPlaying"===t?"play":"pause";this.playingState.dispatch(i),this.creative?this.resume():this.prepareVpaidCreative({startStrategy:t}).catch((e=>{this.destroy({reason:"error",details:e})}))}getCurrentTime(){if(!this.creative)return 0;const e=this.creative.getAdRemainingTime()||0;return me(e)?this.getDuration()-e:0}getAdRemainingTime(){if(this.isDestroyed)return 0;if(!this.creative)return this.mediaAd.getDuration();const e=this.creative.getAdRemainingTime();return me(e)?e<0?this.isStarted.getValue()?e:this.getDuration():e:this.isStarted.getValue()?-2:this.getDuration()}pause(){this.playingState.dispatch("pause"),this.creative&&(oc("VPAID.pauseAd() called in pause method"),this.creative.pauseAd())}resume(){const{creative:e}=this;return e?this.isCreativeStartRequested.getValue()?(this.playingState.dispatch("play"),oc("VPAID.resumeAd() called in resume method"),void e.resumeAd()):void this.startVpaidCreative(e):(oc("AdPodViewer dispatch playingState=play without creative"),void this.playingState.dispatch("play"))}skipAd(){this.creative&&this.creative.skipAd()}getAdSkippableState(){return this.creative&&"function"===typeof this.creative.getAdSkippableState?this.creative.getAdSkippableState():Eg}getDuration(){if(this.creative){const e=this.creative.getAdDuration();if(e>0)return e}return this.mediaAd.getDuration()||0}getAdWidth(){if(this.creative){const{adWidth:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdWidth)return this.creative.getAdWidth()}return 0}getAdHeight(){if(this.creative){const{adHeight:e}=this.creative;if("number"===typeof e)return e;if("function"===typeof this.creative.getAdHeight)return this.creative.getAdHeight()}return 0}resizeAd(e,t,i){var o;void 0===i&&(i="normal"),null==(o=this.creative)||o.resizeAd(e,t,i)}setMuted(e){const t=this.adDisplayController.videoNodeController.videoNode.volume,i=t>0?t:.5;this.setVolume(e?0:i)}getVolume(){var e,t;return null!=(e=null==(t=this.creative)?void 0:t.getAdVolume())?e:this.adDisplayController.videoNodeController.getVolume()}setVolume(e){if(!this.isDestroyed)if(this.creative){const t=this.getVolume()!==e&&!Hy(this.mediaAd),{videoNode:i}=this.adDisplayController.videoNodeController,o=i.volume,n=i.muted;this.creative.setAdVolume(e);const r=i.volume,a=i.muted;!t||this.adCreativeWrapper||this.mediaAd.getIsIndependentOnVideoElement()||o!==r||n!==a||this.stats.log({name:"VpaidCreativeDidNotChangeVideoSlotVolume",data:this.getVPAIDLogDetails()})}else this.adDisplayController.videoNodeController.setVolume(e)}startAndPauseVpaidCreative(e){Fy(this.getScriptSrc())&&(oc("preload VPAID creative by start and pause"),this.startVpaidCreative(e),this.stats.log({name:"PreloadVPAIDCreativeByStartAndPause",data:{vpaidSrc:this.getScriptSrc()}}),oc("VPAID.pauseAd() called for start and pause"),e.pauseAd())}async initCreative(){let e,t;const i=Date.now();this.lifeCycleStage.dispatch("load");const{vastAd:o}=this.mediaAd,n=Fi(o),r=this.createContainerNode();let a;if(n){oc("[AdPodViewer]: play creative as AdCreative"),a=r;const{creative:i,wrapper:o}=this.wrapAdCreative({creativeSlot:a});e=i,this.adCreativeWrapper=o,t=A((()=>{try{oc("[AdPodViewer]: call adCreative stopAd method"),e.stopAd()}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"AD_CREATIVE_STOP_AD_ERROR",details:this.getVPAIDLogDetails()})})}}))}else if(Hy(this.mediaAd)){oc("[AdPodViewer]: play creative via VASFrame"),a=r;const i=Fh({container:a,initTimeout:5e3});this.addDestroyHandler(i.abortInit);const o=await i.initPromise;if(this.isDestroyed)return void o.destroy(void 0);if(o.addDestroyHandler((()=>{this.destroy({reason:"error",details:new Ml({code:"VPAID_AD_POD_VIEWER_FRAME_DESTROYED",details:{adPodId:this.mediaAd.getAdPodId()}})})})),this.addDestroyHandler((()=>{o.destroy(void 0)})),this.isDestroyed)return;if(o.assignVideoTag({videoElement:this.adDisplayController.videoNodeController.videoNode}),await o.loadCreative(this.getScriptSrc()),this.isDestroyed)return;const n=()=>xy.getVpaidAd(o),s=this.getStandardVpaidCreative(n);e=s.creative,t=A((()=>{oc("[AdPodViewer]: call VPAID stopAd method"),s.stopAd()})),this.addDestroyHandler(t),o.changeFrameVisibility(!0)}else{oc("[AdPodViewer]: play creative with Friendly Iframe");const i=$m.create({parentElement:r,scope:"VPAID_FRIENDLY_IFRAME",provideLogDetails:this.getVPAIDLogDetails}),o=i.iframe;Qe(o,Sh),a=o.contentDocument.body;const n=o.contentWindow;Vn(n)&&wv(),Ln(n)&&Pv(n),Jl(Ov,(e=>{this.addDestroyHandler(q({element:a,eventName:e,listener:()=>{this.onAdInteraction.dispatch(void 0)},options:{passive:!0}}))})),this.addDestroyHandler((()=>{i.destroy(void 0)})),i.addDestroyHandler((e=>{e&&this.destroy({reason:"error",details:e})}));const s=await this.loadVpaidMediaFile(n);if(this.isDestroyed)return;const l=this.getStandardVpaidCreative(s);e=l.creative,t=l.stopAd}if(this.setCanUseMediaAfterPlaybackForPcodeVpaidCreatives(),this.onBeforeDestroy.addOne((()=>{oc("[AdPodViewer]: call stopAd in onBeforeDestroy callback"),t()})),this.stats.log({name:"VpaidCreativeLoaded",data:this.getVPAIDLogDetails(),values:{timeSpent:Date.now()-i}}),this.isDestroyed)throw new Ml({code:"VPAID_WAS_DESTROYED_DURING_LOAD",details:this.getVPAIDLogDetails()});const{adDisplayController:s}=this,{videoNodeController:l,playbackParameters:d}=s,{clientWidth:c,clientHeight:u}=l.videoNode,h=this.getDesiredBitrate(),p={AdParameters:this.getAdParameters()},m=s.autoplayAbilityResult.getValue();let g;g=void 0!==m&&(l.videoNode.muted?"restricted"!==m.autoplayAbility:"allowed"===m.autoplayAbility);const v={slot:a,videoSlot:l.videoNode,videoSlotCanAutoPlay:g,isYandexAdPlayer:!0,yandexAdPlaybackParams:{lang:d.lang,controlsSettings:{controlsVisibility:pp},pauseOnClickThrough:!1,description:this.mediaAd.vastAd.description}},_=function(e){let{creative:t,isYandexCreative:i,getLogDetails:o,logStatsEvent:n}=e;return function(e,t){let{methodCallError:i,methodAbsent:o,getterError:n,setterError:r,onSubscribeEventMoreThanOnce:a}=t;const s=ve(Pg,((t,n)=>function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if("function"===typeof e[n])try{return e[n].apply(e,r)}catch(Mw){i({methodName:n,args:r,error:Mw})}else o({methodName:n,args:r})})),l=s.subscribe,d=new Set;return s.subscribe=(e,t,i)=>{d.has(t)&&a({eventName:t}),d.add(t),l(e,t,i)},ce(wg,((t,i)=>{Object.defineProperty(s,i,{configurable:!0,enumerable:!0,get:()=>{try{return e[i]}catch(Mw){n({propertyName:i,error:Mw})}},set:t=>{try{e[i]=t}catch(Mw){r({propertyName:i,error:Mw,value:t})}}})})),s}(t,{methodCallError:e=>{let{methodName:t,args:r,error:a}=e;n({name:i?"YandexVpaidMethodCallError":"VpaidMethodCallError",data:Kr({methodName:t,args:r,stack:a.stack,message:a.message},o()),probability:1})},methodAbsent:e=>{let{methodName:t,args:r}=e;n({name:i?"YandexVpaidMethodAbsent":"VpaidMethodAbsent",data:Kr({methodName:t,args:r},o()),probability:1})},getterError:e=>{let{propertyName:t,error:r}=e;n({name:i?"YandexVpaidGetterError":"VpaidGetterError",data:Kr({propertyName:t,stack:r.stack,message:r.message},o()),probability:1}),J(r)},setterError:e=>{let{propertyName:t,value:r,error:a}=e;n({name:i?"YandexVpaidSetterError":"VpaidSetterError",data:Kr({propertyName:t,value:r,stack:a.stack,message:a.message},o()),probability:1}),J(a)},onSubscribeEventMoreThanOnce:e=>{let{eventName:t}=e;n({name:"VpaidSubscribeEventMoreThanOnce",data:Kr({eventName:t},o()),probability:1})}})}({creative:e,isYandexCreative:Fy(this.getScriptSrc()),getLogDetails:this.getVPAIDLogDetails,logStatsEvent:this.stats.log});this.subscribeCreativeEvents(_,a.ownerDocument.defaultView),this.addDestroyHandler(function(e){let{rootElement:t,logStatsEvent:i,adPlacementOptions:o}=e;return q({element:t,eventName:"click",listener:e=>{const n=t.getBoundingClientRect(),r=function(e){let t,i,{win:o,event:n,adPlacementOptions:r,rootClientRect:a}=e,s=!1,l=!0,d=!1,c=!1;const{__vasClickRegistration:u}=o;if(u){const{duplicates:e,details:o}=u;t=o.control,i=o.purpose,s=e.length>0,l=!1}const{clientX:h,clientY:p}=n,{top:m,left:A,width:g,height:v}=a,_=h-A,y=p-m,f=_/g,S=y/v;return(f<0||f>1||S<0||S>1)&&(d=!0),me(f)&&me(S)||(c=!0),{data:{vasClickRegistration:u,clientX:h,clientY:p,rootClientRect:a,adPlacementOptions:r},dailySensors:{control:t,purpose:i,hasDuplicates:s,isUnknown:l,isOutside:d,isInvalid:c},values:{x:_,y,relativeX:f,relativeY:S}}}({win:Ql,event:e,adPlacementOptions:o,rootClientRect:n});i(Aa({name:"VasClick",probability:1},r))}})}({rootElement:this.adDisplayController.slotParameters.element,logStatsEvent:this.stats.log,adPlacementOptions:this.adDisplayController.getAdPlacementOptions()}));const y=Date.now();return await new Promise(((i,o)=>{_.subscribe((()=>{oc("VPAID dispatched AdLoaded event"),i(_)}),"AdLoaded"),this.vpaidCreativeAdErrorSignal.add((e=>{oc("VPAID dispatched AdError event"),o(this.parseVpaidError(e,"VPAIDLoadingError"))})),this.lifeCycleStage.dispatch("init");try{e.initAd(c,u,"normal",h,p,v)}catch(Mw){throw oc("[AdPodViewer]: creative.initAd() error, call stopAd"),t(),new Ml(Mw,{code:"INIT_AD_ERROR",details:this.getVPAIDLogDetails()})}})),this.stats.log({name:"VpaidCreativeInitialized",data:this.getVPAIDLogDetails(),values:{timeSpent:Date.now()-y}}),_}wrapAdCreative(e){let{creativeSlot:t}=e;const i=this.getAdParameters(),{adParametersObject:o}=this.mediaAd.vastAd,{parsed:{videoMediaFiles:n,animationMediaFile:r,adParameters:s},errors:l}=$i(null!=o?o:i);let d;if("survey"===this.adDisplayController.getAdPlacementOptions().adFormatType&&this.mediaAd.vastAd.surveyParameters){const{disableSurveyCompleteScreen:e,disableSurveyStartTimeout:t}=this.adDisplayController.playbackParameters;d=ga({},this.mediaAd.vastAd.surveyParameters,{disableSurveyCompleteScreen:void 0!==e&&e,disableSurveyStartTimeout:void 0!==t&&t})}Xt(l);const{playbackParameters:c,videoContentSize:u,slotParameters:h,videoNodeController:p}=this.adDisplayController,{videoTimeout:m,bufferFullTimeout:A,bufferEmptyLimit:g}=this.adPodViewerPlaybackParams,v=n.length>0&&!zi(this.mediaAd.vastAd)&&!Hi(this.mediaAd.vastAd),_=this.mediaAd.getIsConvertedFromVideoVast();let y,f,S;if(v){let e=this.mediaAd.getPreloadedVideoFile();const{adBreak:t}=this.mediaAd,i=this.mediaAd.getAdPodId(),o=ga({container:h.size.getValue(),desiredBitrate:this.getDesiredBitrate(),isVideoADB:a(kc(h.window))},XA);e||(e=Vo(n,o,{adBreak:t,adPodId:i,initiator:"AdPodViewer"}).prioritisedMediaFile);const r=_?1===n.length?"CANNOT_PLAY_SINGLE_VIDEO_MEDIA_FILE":"NO_APPROPRIATE_VIDEO_SOURCE":"NO_APPROPRIATE_VIDEO_SOURCE_FOR_AD_CREATIVE";if(!e)throw new Ml({code:r,details:{mediaFiles:n,adPodId:this.mediaAd.getAdPodId(),mediaFilePriorityOptions:o}});if(v){const{firstFrameImages:t}=this.mediaAd.vastAd,i=this.mediaAd.getPreloadedFirstFramePicture(),o=null!=i?i:oo(t,e);void 0!==o&&(f={posterImage:o,isPreloaded:void 0!==i})}y={videoContentSize:u,videoMediaFile:ga({},e,{url:em(e.url)}),videoMediaFiles:n,videoTimeout:m,bufferFullTimeout:A,bufferEmptyLimit:g,durationFallback:()=>this.mediaAd.getDuration(),getStartStrategy:()=>"play"===this.playingState.getValue()?"startPlaying":"warmupOnly",onVideoBufferingStateChange:e=>{this.adVideoIsBuffering.dispatch(e)}},this.canUseMediaAfterPlayback=!0}S=r&&"InteractiveElementsAdCreative"===sm[r.url]?"IV":"AD_CREATIVE_FRIENDLY_IFRAME";let T,E=t.ownerDocument.defaultView;if(r){T={animationMediaFile:r,getPreloadedAdCreativeInitFunction:this.mediaAd.getPreloadedAdCreativeInitFunction,adCreativeParameters:s,surveyAdCreativeParameters:d};const e=$m.createHidden({parentElement:t,scope:S,provideLogDetails:this.getVPAIDLogDetails});E=e.window,this.addDestroyHandler((()=>{e.destroy(void 0)})),e.addDestroyHandler((e=>{e&&this.destroy({reason:"error",details:e})}))}let b=this.adPodViewerPlaybackParams.packshotParameters;var C;b=!1===this.adPodViewerPlaybackParams.packshotSettings.isEnabled?void 0:null!=(C=b)?C:this.getAutogeneratedPackshotParameters(v);const P=this.getVideoSlotClickUrl(),w=this.mediaAd.getIsConvertedFromVideoVast();this.isInfinityPackshotEnabled=this.enableInfinityPackshot&&(!v||void 0!==b),this.enableInfinityPackshot&&this.stats.log({name:"InfinityPackshotEnabled",sensors:{isPossible:this.isInfinityPackshotEnabled}});const O=E,I={AdClickThru:e=>{this.stats.log({name:"AdCreativeUserInteractionCallbackClickThruCall",data:{vpaidLogDetails:this.getVPAIDLogDetails(),clickThruParams:e}}),this.userInteractionDispatchers.AdClickThru(e),this.clickThrough(e)},AdSkipped:()=>{this.userInteractionDispatchers.AdSkipped(),this.destroy({reason:"skip",details:void 0})},AdStopped:()=>{var e,t;this.userInteractionDispatchers.AdStopped();const i=this.completeLatch.getValue();this.destroy({reason:"complete",details:{canUseMediaAfterPlayback:null!=(e=null==i?void 0:i.canUseMediaAfterPlayback)&&e,isInfinityPackshotEnabled:null!=(t=null==i?void 0:i.isInfinityPackshotEnabled)&&t}})},AdUserClose:()=>{this.userInteractionDispatchers.AdUserClose(),this.destroy({reason:"close",details:void 0})},AdTimeToSkipChange:e=>{this.adDisplayController.timeToSkipAdCreative.dispatch(e)},AdVideoComplete:()=>{this.userInteractionDispatchers.AdVideoComplete(),oc("VPAID dispatched AdVideoComplete event"),this.completeLatch.dispatch({canUseMediaAfterPlayback:this.canUseMediaAfterPlayback,isInfinityPackshotEnabled:this.isInfinityPackshotEnabled})}},k={adCreativeWindow:O,slot:t,slotsParameters:{visibilitySlotParameters:this.adDisplayController.visibilitySlotParameters,slotParameters:this.adDisplayController.slotParameters},animationParameters:T,videoParameters:y,firstFrameParameters:f,videoNodeController:p,slotSize:h.size,videoSlotClickUrl:P,intrinsicAdCreativeType:w?"video":"vpaid",getVPAIDLogDetails:this.getVPAIDLogDetails,packshotParameters:this.getCreativePackshotParameters({win:O,slot:t,packshotParameters:b,packshotSettings:this.adPodViewerPlaybackParams.packshotSettings,slotSize:h.size,videoNodeController:p,adCreativeUserInteractionCallbacks:I,themeEmptyParameters:na(this.mediaAd.vastAd)}),lang:c.lang,adCreativeUserInteractionCallbacks:I,verifyLogAdditionalData:Ir(this.mediaAd.vastAd),shouldHideSkipButton:!1===this.adDisplayController.playbackParameters.controlsSettings.controlsVisibility.skip,playerEnvironment:this.adDisplayController.playerEnvironment,destroyAfterComplete:!this.isInfinityPackshotEnabled,stats:this.stats},{creative:D,wrapper:N,userInteractionDispatchers:R}=Rn(k);return this.userInteractionDispatchers=R,{creative:D,wrapper:N}}setCanUseMediaAfterPlaybackForPcodeVpaidCreatives(){const e=this.mediaAd.vastAd;mm(e)&&(this.canUseMediaAfterPlayback=!0)}async loadVpaidMediaFile(e){const t=Fy(this.getScriptSrc())?"YANDEX_VPAID_FRIENDLY_IFRAME":"VPAID_FRIENDLY_IFRAME";this.addDestroyHandler(vo(e,((e,i,o)=>{this.stats.error({error:go({scope:t,errorType:i,error:e,details:ga({},this.getVPAIDLogDetails(),{error:e,data:o})})})})));const i=this.mediaAd.getPreloadVpaidWindow();if(i){const{frameElement:e,getVPAIDAd:t}=i;if(null!==e&&void 0!==e)return this.addDestroyHandler(Zm(e,(()=>{this.destroy({reason:"error",details:new Ml({code:"PRELOAD_IFRAME_WAS_UNLOADED",details:{adPodId:this.mediaAd.getAdPodId()}})})}))),t;this.stats.log({name:"VpaidAdPodViewer_PreloadFriendlyIframeDestroyed",data:{getVPAIDAdIsAcquired:"function"===typeof t},probability:1})}try{const{promise:t,teardown:i}=tA({src:this.getScriptSrc(),win:e});return this.addDestroyHandler(i),await t}catch(Mw){throw new Ml(Mw,{code:"CANNOT_LOAD_VPAID_MEDIA_FILE",details:{adPodId:this.mediaAd.getAdPodId()}})}}getStandardVpaidCreative(e){const t=Fy(this.getScriptSrc());if("function"!==typeof e)throw new Ml({code:t?"YANDEX_NO_GET_VPAID_AD_FUNC":"NO_GET_VPAID_AD_FUNC",details:ga({},this.getVPAIDLogDetails(),{typeOfGetVPAIDAd:typeof e})});let i;try{i=e()}catch(Mw){throw new Ml(Mw,{code:"GET_VPAID_AD_ERROR",details:this.getVPAIDLogDetails()})}const n=A((()=>{oc("[AdPodViewer]: call stopAd wrap method");try{i.stopAd()}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"STOP_AD_ERROR",details:this.getVPAIDLogDetails()})})}}));if(!(e=>o(e)&&"function"===typeof e.handshakeVersion&&"function"===typeof e.initAd&&"function"===typeof e.startAd&&"function"===typeof e.stopAd&&"function"===typeof e.skipAd&&"function"===typeof e.resizeAd&&"function"===typeof e.pauseAd&&"function"===typeof e.resumeAd&&"function"===typeof e.expandAd&&"function"===typeof e.collapseAd&&"function"===typeof e.subscribe&&"function"===typeof e.unsubscribe)(i))throw new Ml({code:"INVALID_VPAID_API",details:this.getVPAIDLogDetails()});const r=i.handshakeVersion(Ry);if(!(e=>{let{versionSupported:t,versionToCheck:i}=e;const o=sc(t.split("."),(e=>parseInt(e,10))),n=sc(i.split("."),(e=>parseInt(e,10)));for(let r=0;r<n.length;r++){const e=n[r],t=o[r],i="undefined"===typeof t?0:t;if(e>i)return!1;if(e<i)return!0}return!0})({versionSupported:Ry,versionToCheck:r}))throw oc("[AdPodViewer]: vpaid version is NOT supported, call stopAd method"),n(),new Ml({code:"VPAID_VERSION_ERROR",details:ga({},this.getVPAIDLogDetails(),{playerSupportedVersion:Ry,creativeVersion:r})});return{creative:i,stopAd:n}}getScriptSrc(){return this.getCurrentSource().url}getCurrentSource(){return this.mediaAd.getJSMediaFile()}setUpdatePositionInterval(e){const t=e.setInterval(this.updatePosition,250),i=()=>{a(e.clearInterval)&&e.clearInterval(t)};return this.addDestroyHandler((()=>{i()})),()=>{i()}}subscribeCreativeEvents(e,t){e.subscribe((()=>{var e,t;this.destroy({reason:"complete",details:{canUseMediaAfterPlayback:null!=(e=null==(t=this.completeLatch.getValue())?void 0:t.canUseMediaAfterPlayback)&&e,isInfinityPackshotEnabled:this.isInfinityPackshotEnabled}})}),"AdStopped"),e.subscribe(((e,t,i)=>{this.clickThrough({url:e,clickSource:"VpaidAdClickThruEvent",playerHandles:Boolean(i)})}),"AdClickThru"),e.subscribe((()=>{this.updateAdSkippableState()}),"AdSkippableStateChange");const i=()=>{const t=e.getAdDuration();t>0&&this.mediaAd.actualizeDuration(t)};let o;e.subscribe((()=>{oc("VPAID dispatched AdDurationChange event"),i()}),"AdDurationChange"),e.subscribe((e=>{this.vpaidCreativeAdErrorSignal.dispatch(e)}),"AdError"),e.subscribe((()=>{this.vpaidCreativeAdStartedSignal.dispatch(void 0),i(),a(o)&&o(),o=this.setUpdatePositionInterval(t)}),"AdStarted"),e.subscribe((()=>{oc("VPAID dispatched AdPlaying event"),this.isAdPlayingCalled=!0,this.updatePosition(),a(o)&&o(),o=this.setUpdatePositionInterval(t),this.onResume.dispatch(void 0)}),"AdPlaying"),e.subscribe((()=>{oc("VPAID dispatched AdPaused event"),this.updatePosition(),a(o)&&o(),this.onPause.dispatch(void 0)}),"AdPaused"),e.subscribe((()=>{this.trackStartEvent()}),"AdVideoStart"),e.subscribe((()=>{this.onImpression.dispatch(void 0)}),"AdImpression"),e.subscribe((()=>{this.onFirstQuartile.dispatch(void 0)}),"AdVideoFirstQuartile"),e.subscribe((()=>{this.onMidpoint.dispatch(void 0)}),"AdVideoMidpoint"),e.subscribe((()=>{this.onThirdQuartile.dispatch(void 0)}),"AdVideoThirdQuartile");const n=A((()=>this.onBeforeComplete.dispatch(void 0)));e.subscribe((()=>{n()}),"AdVideoBeforeComplete"),e.subscribe((()=>{this.onVolumeChange.dispatch(void 0)}),"AdVolumeChange"),e.subscribe((()=>{this.destroy({reason:"skip",details:void 0})}),"AdSkipped");const r=A((()=>{this.completeLatch.dispatch({canUseMediaAfterPlayback:this.canUseMediaAfterPlayback,isInfinityPackshotEnabled:this.isInfinityPackshotEnabled})}));e.subscribe((()=>{oc("VPAID dispatched AdVideoComplete event"),r()}),"AdVideoComplete"),e.subscribe((()=>{this.destroy({reason:"close",details:void 0})}),"AdUserClose")}parseVpaidError(e,t){const i=this.getVPAIDLogDetails();if("string"===typeof e){const o=((e,t,i)=>{const o=Nl(of,(e=>{let[,i]=e;return-1!==t.indexOf(i)}));if(!o)return;const[n]=o;return new Ml({code:"EXTERNAL_VPAID_NO_AD_"+n,details:ra({},i,{error:e})})})(e,this.getCurrentSource().url,this.getVPAIDLogDetails());return o||new Ml({code:t,message:"String error from vpaid ["+e+"]",details:i})}return ne(e)?e:e?new Ml(e,{code:t,details:i}):new Ml({code:t,message:"unknown error from VPAID creative",details:i})}updateAdSkippableState(){const e=this.getAdSkippableState();this.adSkippableState!==e&&(this.adSkippableState=e,this.onAdSkippableStateChange.dispatch(e))}getAutogeneratedPackshotParameters(e){var t;if(!this.enableInfinityPackshot)return;const o=null!=(t=Uc.getNumberFlagValueAndActivateTestId("VAS_AUTOGENERATED_PACKSHOT_DURATION"))?t:3;if(!o||!e)return;const{vastAd:n}=this.mediaAd,{slotParameters:r}=this.adDisplayController,a=ea(n,r.size.getValue()),s=this.adPodViewerPlaybackParams.clickThroughUrl||n.clickUrlData.serializablePlaybackParametersClickUrl;if(!i(s))return void this.stats.log({name:"AutogeneratedPackshot_NoClickThroughLink"});const{title:l}=Fe(this.mediaAd.vastAd.adParametersObject);return{packshotImageUrl:a,packshotActionButtonClickUrl:s,packshotDuration:o,packshotTitle:l,packshotButtonText:void 0}}get contentType(){return this.mediaAd.contentType}trackOnCreativeInit(){this.trackVastEvent("onCreativeInit",{})}trackVastEvent(e,t){var i;const o=null!=(i=this.mediaAd.vastAd.trackingEvents[e])?i:[];e in this.sentTrackings||(this.sentTrackings[e]=0),this.sentTrackings[e]+=1,Yr({eventName:e,options:this.adDisplayController.getAdPlacementOptions(),trackingEventDetails:t,trackingUrls:o,pixelsSource:"vast"})}trackStartEvent(){this.isCreativeStartRequested.getValue()||this.stats.error({error:new Ml({code:"TRACK_START_BEFORE_PLAY",details:{isVPAID:"js"===this.mediaAd.contentType}})});let e=this.shouldPlayTimeCounter.getTime();e<0&&(e=qc),this.trackVastEvent("start",{values:{timeToStart:e}})}trackError(e){this.mediaAd.trackError(e)}clickThrough(e){var t=this;const{playerHandles:i,clickSource:o}=e,{clickThroughUrl:n}=this.adPodViewerPlaybackParams;let r;this.isDestroyed&&this.stats.error({error:new Ml({code:"CALL_AD_POD_VIEWER_CLICK_THROUGH_AFTER_DESTROY",details:{clickThroughParams:e,adPodId:this.mediaAd.getAdPodId()}})}),e.url?r=e.url:n&&(this.stats.log({name:"UsingPresetClickThroughUrl",data:{clickThroughUrl:n,adPodId:this.mediaAd.getAdPodId()},probability:1}),r=n),Xg(this.adDisplayController.videoNode)<=.1&&this.stats.log({name:"ClickOnTinyBufferedTime",probability:1});const{pauseOnClickThrough:a,clickThroughConfirmation:s,clickThroughCallback:l}=this.adDisplayController.playbackParameters,d=Boolean(l||r);if(!d||!i)return this.trackVastEvent("clickThrough",{dailySensors:{clickSource:o}}),void this.stats.log({name:"PhantomClickThrough",data:{canHandleClickThrough:d,playerHandles:i,hasClickThroughCallback:Boolean(l),clickThroughUrl:r,clickThroughParams:e,adPodId:this.mediaAd.getAdPodId()}});r&&(r=De({url:ma(r),options:this.adDisplayController.getAdPlacementOptions(),win:window}));const c=A((function(i){void 0===i&&(i=!1);const n=Date.now(),s=t.adDisplayController.getPaused(),d=a&&!s&&!t.completeLatch.getValue();if(d&&t.pause(),i){const e=Xr(window.document,(i=>{var o;if(!i)return;d&&t.resume();const r=Date.now()-n;Yr({eventName:"returnAfterClickThrough",trackingEventDetails:{values:{timeSpentBeforeReturn:r}},trackingUrls:null!=(o=t.getAdParametersTrackingUrls("returnAfterClickThrough"))?o:[],options:t.adDisplayController.getAdPlacementOptions(),pixelsSource:"adParameters"});const a=(e=>{switch(!0){case e<=Number(Mm):return"ReturnBackAfterClickThroughIn1Sec";case e<=2e3:return"ReturnBackAfterClickThroughIn2Sec";case e<=1e4:return"ReturnBackAfterClickThroughIn10Sec";case e<=6e4:return"ReturnBackAfterClickThroughIn1Min";default:return"ReturnBackAfterClickThroughAfter1Min"}})(r);t.stats.log({name:a,data:{timeSpentBeforeReturn:r,adPodId:t.mediaAd.getAdPodId()},probability:1}),e()}));t.addDestroyHandler(e)}t.trackVastEvent("clickThrough",{dailySensors:{clickSource:o}}),t.onClickThrough.dispatch({adWasPaused:Boolean(a)}),l&&t.stats.log({name:"ClickThroughCallbackHandle",data:{clickThroughParams:e,url:r,pauseOnClickThrough:a,adPodId:t.mediaAd.getAdPodId()}})}));if(l){s||c();const t=this.isDestroyed;l({url:r,onHandle:c}),!t&&this.isDestroyed&&this.stats.error({error:new Ml({code:"DESTROY_DURING_CLICK_THROUGH_CALLBACK_CALL",details:{clickThroughParams:e,adPodId:this.mediaAd.getAdPodId()}})}),this.stats.log({name:"ClickThroughCallbackCall",data:{clickThroughParams:e,url:r,pauseOnClickThrough:a,adPodId:this.mediaAd.getAdPodId()}})}else null!==window.open(r,"_blank")&&c(!0)}getBufferingTime(){return this.bufferingTimeManager.getBufferingTime()}isVpaidAdPodViewer(){return void 0!==this.mediaAd.getJSMediaFile()}isAdaptive(){return!!this.isVpaidAdPodViewer()&&this.mediaAd.getIsIndependentOnVideoElement()}getAdContentSize(){if(this.isAdaptive())return qA;const e={width:this.getAdWidth(),height:this.getAdHeight()};return 0!==e.height&&0!==e.width?e:void 0}getVideoSlotClickUrl(){var e;const{mediaAd:t}=this;if("video"===t.contentType)return this.adPodViewerPlaybackParams.clickThroughUrl;const{vastAd:i}=t;return i.clickUrlData.serializablePlaybackParametersClickUrl||((null==(e=i.adParametersObject)?void 0:e.theme)===$u.INTERACTIVE_VIEWER?(Sf(this.stats.log),i.clickUrlData.tgaOfferClickUrl):void 0)}getDesiredBitrate(){const{desiredBitrate:e=cp}=this.adDisplayController;return e}getAdParameters(){return this.mediaAd.getPreloadedVpaidAdParameters()||this.mediaAd.vastAd.adParameters}trackHoneypotShowEvent(){var e;Yr({eventName:"showHp",trackingEventDetails:{},trackingUrls:null!=(e=this.getAdParametersTrackingUrls("showHp"))?e:[],options:this.adDisplayController.getAdPlacementOptions(),pixelsSource:"adParameters"})}trackHoneypotClickEvent(){var e;Yr({eventName:"clickHp",trackingEventDetails:{},trackingUrls:null!=(e=this.getAdParametersTrackingUrls("clickHp"))?e:[],options:this.adDisplayController.getAdPlacementOptions(),pixelsSource:"adParameters"})}isHoneypotEnabledForCurrentCreative(){return"TRUE"!==Uc.getFlagValueAndActivateTestId("VAS_DISABLE_HONEYPOT")&&!!tc.hardcodedParams.adsdkhoneypotforced}areHoneypotTrackingUrlsDefined(){return Boolean(this.getAdParametersTrackingUrls("showHp")&&this.getAdParametersTrackingUrls("clickHp"))}getCreativePackshotParameters(e){let{win:t,slot:i,packshotParameters:o,packshotSettings:n,slotSize:r,videoNodeController:a,adCreativeUserInteractionCallbacks:s,themeEmptyParameters:l}=e;const d=()=>{this.packshotStartLatch.dispatch(void 0)};if(this.isHoneypotEnabledForCurrentCreative())return{type:"honeypot",renderLayoutComponent:()=>{this.trackHoneypotShowEvent(),this.stats.log({name:"AdCreativeWrapperHoneypotRender",probability:1}),d();const e=new y_({win:t,parent:i,parentSize:r,videoNodeController:a,onClick:()=>{oc("Honeypot clicked"),this.trackHoneypotClickEvent(),this.stats.log({name:"AdCreativeWrapperHoneypotContinueClicked",probability:1}),e.destroy({reason:"complete",details:void 0})},buttonText:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",logStatsEvent:this.stats.log});return e}};const c=this.adDisplayController.playbackParameters.lang,u=this.ecomShopState.getValue();if(void 0!==u.ecomShop){var h,p;const e=u.ecomShop,c=null!=(h=Uc.getNumberFlagValueAndActivateTestId("VAS_ECOM_PRODUCTS_PACKSHOT_DURATION"))?h:5,m=null!=(p=Uc.getNumberFlagValueAndActivateTestId("VAS_ECOM_PACKSHOT_INCREASE_DURATION"))?p:c/2,{title:A}=Fe(this.mediaAd.vastAd.adParametersObject);return{type:"ecom-packshot",renderLayoutComponent:()=>{var u;d(),this.adDisplayController.abuseDisplayStatus;const h=new yf({win:t,parent:i,parentSize:r,videoNodeController:a,duration:c,userActionIncreaseDuration:m,destroyAfterComplete:!this.enableInfinityPackshot,openClickThroughUrl:e=>{s.AdClickThru({url:e,clickSource:"EcomProductsCarousel",playerHandles:!0})},ecomShop:e,themeEmptyParameters:l,disableOverlay:Boolean(n.disableOverlay),disableTitle:Boolean(n.disableTitle),disableButton:Boolean(n.disableButton),title:null!=(u=null==o?void 0:o.packshotTitle)?u:A,abuseDisplayStatus:this.adDisplayController.abuseDisplayStatus,timeToSkip:this.adDisplayController.timeToSkip,controlsVisibility:this.adDisplayController.combinedSkinControlsVisibility,logStatsEvent:this.stats.log,faviconSrc:this.adDisplayController.faviconSrc});return h.addDestroyHandler(this.ecomShopState.add((e=>{h.setProductsVisibility(e.isVisible)}))),this.ecomShopState.dispatch(ga({},this.ecomShopState.getValue(),{isVisible:!0})),h.show(),h}}}if(void 0===o)return;const m=null!=l?l:{ageRestriction:void 0,body:void 0,clickUrl:o.packshotActionButtonClickUrl,greenUrl:void 0,label:o.packshotButtonText||Wu("LEARN_MORE",c),title:void 0,targetUrl:o.packshotActionButtonClickUrl};return ga({},o,{type:"packshot",renderLayoutComponent:()=>{d();const e=new wy({win:t,parent:i,parentSize:r,packshotNewDesignMode:"ONLY_ELEMENTS_CLICKABLE",videoNodeController:a,lang:c,destroyAfterComplete:!this.enableInfinityPackshot,title:o.packshotTitle,imageUrl:o.packshotImageUrl,duration:o.packshotDuration,clickUrl:o.packshotActionButtonClickUrl,openClickThroughUrl:e=>{let{clickSource:t}=e;s.AdClickThru({url:o.packshotActionButtonClickUrl,playerHandles:!0,clickSource:t})},themeEmptyParameters:m,descriptionText:void 0,disableOverlay:Boolean(n.disableOverlay),disableTitle:Boolean(n.disableTitle),disableButton:Boolean(n.disableButton),timeToSkip:this.adDisplayController.timeToSkip,controlsVisibility:this.adDisplayController.combinedSkinControlsVisibility,logStatsEvent:this.stats.log,faviconSrc:this.adDisplayController.faviconSrc});return e.show(),e}})}}const Ef=hp,bf=1e4,Cf=1e4,Pf=["3000","4000","5000","6000","7000"],wf=["2","3","4","5","6"],Of=Ta("TIMEOUT_NON_PREROLL_MULTIROLL_BUFFER_EMPTY_LIMIT",wf),If=Ta("TIMEOUT_NON_PREROLL_MULTIROLL_BUFFER_FULL_TIMEOUT",Pf),kf=Ta("TIMEOUT_NON_PREROLL_MULTIROLL_VIDEO_TIMEOUT",Pf),Df=Ta("TIMEOUT_NON_PREROLL_MULTIROLL_VPAID_TIMEOUT",Pf),Nf=Ta("TIMEOUT_PREROLL_MULTIROLL_BUFFER_EMPTY_LIMIT",wf),Rf=Ta("TIMEOUT_PREROLL_MULTIROLL_BUFFER_FULL_TIMEOUT",Pf),Vf=Ta("TIMEOUT_PREROLL_MULTIROLL_VIDEO_TIMEOUT",Pf),Lf=Ta("TIMEOUT_PREROLL_MULTIROLL_VPAID_TIMEOUT",Pf),xf={preroll:Ot({bufferEmptyLimit:parseInt(null!=Nf?Nf:"",10),bufferFullTimeout:parseInt(null!=Rf?Rf:"",10),videoTimeout:parseInt(null!=Vf?Vf:"",10),vpaidTimeout:parseInt(null!=Lf?Lf:"",10)},(e=>he(e))),non_preroll:Ot({bufferEmptyLimit:parseInt(null!=Of?Of:"",10),bufferFullTimeout:parseInt(null!=If?If:"",10),videoTimeout:parseInt(null!=kf?kf:"",10),vpaidTimeout:parseInt(null!=Df?Df:"",10)},(e=>he(e)))},Bf=450,Mf=!(ka(window)>=15),Uf=xn(window),Ff=Uf.requestAnimationFrame,Hf=Uf.cancelAnimationFrame,zf=A((e=>{let{input:t,statsLogFunction:i}=e;i({name:"BackgroundBlurShow",dailySensors:{input:t}})}));class Wf extends Hc{constructor(e){var t,i;super(),this.isPlaying=new hh(!1),this.framesInterval=100,this.slowFramesCounter=0,this.slowDevice=!1,this.repaintTimeoutId=0,this.rafId=0,this.repaint=()=>{const{duration:e,currentTime:t}=this.params.videoNode,i=e-t<=.3;if(!this.isPlaying.getValue()&&i)return this.clearRepaintTimeout(),void this.setVisibility(!1);const o=dn(this.params.videoNode);if(!o)return void this.setRepaintTimeout();const{clientWidth:n,clientHeight:r}=this.params.container,a=n/r,s=o.width/o.height,l=s-a;this.prepareBlurCanvas(s,l),this.setVisibility(!0);const{context:d}=this,{videoNode:c}=this.params,{width:u,height:h}=this.canvas;if(this.slowDevice){const e=2;d.drawImage(c,0,0,o.width,o.height,0,0,e,e),d.drawImage(this.canvas,0,0,e,e,0,0,u,h)}else d.drawImage(c,0,0,o.width,o.height,0,0,u,h);d.globalAlpha=.1,this.handleSlowDevices(),this.setRepaintTimeout()},this.params=e,this.blurWrapper=document.createElement("div"),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.blurWrapper.appendChild(this.canvas),t=this.params.container,i=this.blurWrapper,t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),this.appendStyles(),this.isPlaying.add((t=>{t?(this.repaint(),this.canvas.style.display="",zf({input:e.input,statsLogFunction:e.statsLogFunction})):(this.clearRepaintTimeout(),this.setVisibility(!1))})),this.addDestroyHandler((()=>{this.setPlaying(!1),l(this.blurWrapper)}))}setPlaying(e){this.isPlaying.dispatch(e)}appendBlurScale(e,t){const i=[1.6,Math.max(e,1.6)];t&&i.reverse(),this.slowDevice||L_(this.canvas,{transform:"translate(-50%,-50%) scaleX("+i[0]+") scaleY("+i[1]+")"})}setCanvasOpacity(e){L_(this.canvas,{opacity:e})}simplifyBlur(){const{clientWidth:e,clientHeight:t}=this.params.container;this.setCanvasSize(e+10,t+10);const i="-5px";L_(this.canvas,{left:i,top:i,transform:"",filter:"blur(5px)",width:100*(1+10/e)+"%",height:100*(1+10/t)+"%"})}appendStyles(){const e={position:"absolute",margin:0,padding:0,top:0,bottom:0,left:0,right:0,overflow:"hidden"},t=r(this.params.videoNode).position;-1===["fixed","absolute"].indexOf(t)&&(e["z-index"]="-1"),L_(this.blurWrapper,e),L_(this.canvas,{position:"absolute",margin:0,padding:0,left:"50%",top:"50%",transform:"translate(-50%,-50%) scaleX(1.2) scaleY(1.2)",filter:"blur(50px)",opacity:0,transition:"opacity 1s"})}setRepaintTimeout(){this.clearRepaintTimeout(),this.repaintTimeoutId=window.setTimeout((()=>this.rafId=Ff(this.repaint)),this.framesInterval)}clearRepaintTimeout(){clearTimeout(this.repaintTimeoutId),Hf(this.rafId)}handleSlowDevices(){const e=Date.now();if(this.lastTime){const t=e-this.lastTime;t>1.8*this.framesInterval?(this.slowFramesCounter++,this.slowFramesCounter>=3&&(this.framesInterval+=t,this.slowFramesCounter=0,this.slowDevice||(this.slowDevice=!0,this.simplifyBlur()))):this.slowFramesCounter=0}this.lastTime=e}prepareBlurCanvas(e,t){const{container:i,videoNode:o}=this.params,n=t<0,r=n?o.offsetHeight*e:o.offsetWidth/e,a=n?r:o.offsetWidth,s=n?o.offsetHeight:r,l=(n?i.offsetWidth:i.offsetHeight)/r*.8;this.setCanvasSize(a,s),this.appendBlurScale(.8*l,n)}setCanvasSize(e,t){const{canvas:i}=this;i.width=e,i.height=t}setVisibility(e){this.setCanvasOpacity(e?1:0)}}var jf;!function(e){e.inline="inline",e.pictureInPicture="picture-in-picture"}(jf||(jf={}));const Yf=new Map,Gf=/([0-9]{1,2})?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;class Xf{constructor(e){const{cues:t}=function(e,t){void 0===t&&(t={meta:!1,strict:!0});const{meta:i=!1,strict:o=!1}=t,n=e.trim().replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n\n"),r=n.shift();if(null==r||!r.startsWith("WEBVTT"))throw new Error('Must start with "WEBVTT"');const a=r.split("\n"),s=a[0].replace("WEBVTT","");if(s.length>0&&" "!==s[0]&&"\t"!==s[0])throw new Error("Header comment must start with space or tab");if(0===n.length&&1===a.length)return{valid:!0,strict:o,cues:[],errors:[]};if(!i&&a.length>1&&""!==a[1])throw new Error("Missing blank line after signature");const{cues:l,errors:d}=function(e,t){const i=[],o=Vc(sc(e,((e,o)=>{try{return function(e,t,i){let o="",n=0,r=.01,a="",s="";const l=Vc(e.split("\n"),Boolean);if(l.length>0&&l[0].trim().startsWith("NOTE"))return;if(1===l.length&&!Ma(l[0]))throw new Error("Cue identifier cannot be standalone (cue #"+t+")");if(l.length>1&&!Ma(l[0])&&!Ma(l[1]))throw new Error("Cue identifier needs to be followed by timestamp (cue #"+t+")");if(l.length>1&&Ma(l[1])&&(o=l.shift()),"string"!==typeof l[0])throw new Error("Invalid cue timestamp (cue #"+t+")");const d=l[0].split(" --\x3e ");if(2!==d.length||!xa(d[0])||!xa(d[1]))throw new Error("Invalid cue timestamp (cue #"+t+")");if(n=Ba(d[0]),r=Ba(d[1]),i){if(n>r)throw new Error("Start timestamp greater than end (cue #"+t+")");if(r<=n)throw new Error("End must be greater than start (cue #"+t+")")}if(!i&&r<n)throw new Error("End must be greater or equal to start when not strict (cue #"+t+")");return s=d[1].replace(Gf,"").trim(),l.shift(),a=l.join("\n"),a?{identifier:o,start:n,end:r,text:a,styles:s}:void 0}(e,o,t)}catch(Bv){return void i.push(Bv)}})),Boolean);return{cues:o,errors:i}}(n,o);if(o&&d.length>0)throw d[0];const c=i?function(e){const t={};return Jl(e.slice(1),(e=>{const i=e.indexOf(":"),o=e.slice(0,i).trim(),n=e.slice(i+1).trim();t[o]=n})),v(t).length>0?t:void 0}(a):void 0,u={valid:0===d.length,strict:o,cues:l,errors:d};return i&&(u.meta=c),u}(e);this.cues=t.sort(((e,t)=>e.start-t.start))}findCuesByCurrentTime(e){return Vc(this.cues,(t=>this.isCueApplicable(t,e)))}isCueApplicable(e,t){const{start:i,end:o}=e;return t>=i&&t<=o}}const Kf=e=>{const t=Na(e,{crossorigin:null,loop:null,preload:"auto",autoplay:null}),i=Qo(e,{objectFit:""});return A((()=>{t(),i()}))},qf="Fullscreen is not supported";class Qf{constructor(e,t){void 0===e&&(e=window),this.handlers=[],this.onDestroy=new Bc,this.fullscreenElement=null,this.setFullScreenElementFromAPI=()=>{const e=an(this.win,this.video);this.setFullscreenElement(e)},this.win=e,this.video=t,t&&Ia(e)&&(this.onDestroy.addOne(q({element:t,eventName:"webkitbeginfullscreen",listener:()=>{this.setFullscreenElement(t)}})),this.onDestroy.addOne(q({element:t,eventName:"webkitendfullscreen",listener:()=>{this.setFullscreenElement(null)}}))),this.names=rn(e,t),this.names&&(this.onDestroy.addOne(q({element:this.win.document,eventName:this.names.events.change,listener:this.setFullScreenElementFromAPI})),this.setFullScreenElementFromAPI())}requestFullscreenForElement(e,t){if(void 0===this.names)throw new this.win.Error(qf);{const{request:i}=this.names;if(!(i in e))throw new this.win.Error(qf);e[i](t)}}isFullscreen(){return null!==this.fullscreenElement}exit(){if(void 0===this.names)throw new Error(qf);this.video&&this.fullscreenElement===this.video?this.video[this.names.exit]():this.win.document[this.names.exit]()}getFullscreenElement(){return this.fullscreenElement}addHandler(e){if("function"!==typeof e)throw new this.win.Error("Fullscreen handler must be a function");this.handlers.push(e)}removeHandler(e){this.handlers=Vc(this.handlers,(t=>t!==e))}destroy(){this.handlers.length=0,this.onDestroy.dispatch(void 0)}setFullscreenElement(e){this.fullscreenElement=e,Jl(this.handlers,(t=>t(e)))}}class Jf{constructor(e){this.violatedSources=[],this.securityPolicyViolationCallback=e=>{let{blockedURI:t,violatedDirective:i,originalPolicy:o}=e;if("media-src"!==i)return;const n={blockedURI:t,violatedDirective:i,originalPolicy:o};this.violatedSources.push(n)},this.unsubscribeEvent=q({element:e,eventName:"securitypolicyviolation",listener:this.securityPolicyViolationCallback})}getViolatedSourceBySrc(e){return Nl(this.violatedSources,(t=>{let{blockedURI:i}=t;return 0===e.indexOf(i)}))}destroy(){this.violatedSources=[],this.unsubscribeEvent()}}const Zf=function(e){return void 0===e&&(e=window),/firefox/.test(e.navigator.userAgent.toLowerCase())}(window);class $f extends Hc{constructor(e){super(),this.params=e,this.mediaSource=new e.MediaSourceConstructor,oc("MSEController: attach BLOB URL"),this.params.videoSlot.src=URL.createObjectURL(this.mediaSource),this.init().then((()=>{oc("MSEController: MSE successfully attached"),Wc.log({name:"MSEControllerAttachSuccess"})})).catch((e=>{oc("MSEController: init error"),"AbortError"===e.name?Wc.log({name:"MSEControllerFetchWasAborted",data:{message:e.message}}):Wc.error({error:new Ml(e,{code:"MSE_CONTROLLER_UNHANDLED_INIT_ERROR"})})}))}async init(){const[e,t]=await Promise.all([this.getVideoReader(),this.getSourceBuffer()]);await this.doReadCycle(e,t),await this.finalize(t)}async getVideoReader(){const e=new AbortController;this.addDestroyHandler((()=>{if(e.signal.aborted)return oc("MSEController#reader: abort controller was already aborted"),void Wc.error({error:new Ml({code:"MSE_CONTROLLER_FETCH_ALREADY_ABORTED",details:{}})});oc("MSEController#reader: abort controller"),e.abort()}));const t=await fetch(this.params.mediaFile.url,{signal:e.signal});if(!t.body)throw new Ml({code:"MSE_CONTROLLER_FETCH_EMPTY_RESPONSE_BODY",details:{}});const i=t.body.getReader();return this.addDestroyHandler((()=>{oc("MSEController#reader: cancel reader"),qr(i.cancel())})),oc("MSEController#reader: got reader"),i}async getSourceBuffer(){"open"!==this.mediaSource.readyState&&await new Promise((e=>q({element:this.mediaSource,eventName:"sourceopen",listener:e})));const{mediaFile:e}=this.params,{type:t,codec:i}=e;let o;t&&i?o=cA({type:t,codec:i}):(Wc.log({name:"MSEControllerSourceBufferUsesDefaultWebmContentType",data:{mediaFile:e}}),o='video/webm; codecs="vorbis,vp8"');const n=this.mediaSource.addSourceBuffer(o);return q({element:n,eventName:"error",listener:this.ignoreAfterDestroy((e=>{oc("MSEController: got an error inside of sourceBuffer");const t=e.error;this.destroy(new Ml(t,{code:"MSE_CONTROLLER_SOURCE_BUFFER_ERROR",details:{}}))}),"MSEController.ElementEventListener")}),this.addDestroyHandler((()=>{"open"===this.mediaSource.readyState&&(oc("MSEController#abort source buffer"),Wc.log({name:"MSEControllerSourceBufferAbortOnDestroy"}),n.abort())})),oc("MSEController: got source buffer"),n}async doReadCycle(e,t){oc("MSEController: start read cycle, MSE_CONTROLLER_USES_INTERMEDIATE_BUFFER="+Zf);let i=await e.read(),o=new Uint8Array;do{for(;t.updating;)await new Promise((e=>q({element:t,eventName:"updateend",listener:e})));if(!i.value)break;if(this.isDestroyed)return;if(Zf){const e=new Uint8Array(o.length+i.value.length);e.set(o),e.set(i.value,o.length),o=e}else t.appendBuffer(i.value);for(;t.updating;)await new Promise((e=>q({element:t,eventName:"updateend",listener:e})));i=await e.read()}while(i.value);for(Zf&&(oc("MSEController: buffer read complete, length=["+o.length+"]"),t.appendBuffer(o));t.updating;)await new Promise((e=>q({element:t,eventName:"updateend",listener:e})));oc("MSEController: read cycle complete")}async finalize(e){for(oc("MSEController#close streams");e.updating;)await new Promise((t=>q({element:e,eventName:"updateend",listener:t})));"open"===this.mediaSource.readyState?(oc("MSEController#finalize: close stream"),this.mediaSource.endOfStream(),this.destroy(void 0)):oc("MSEController#finalize: media source is closed")}}const eS=Math.ceil(8),tS=Gl;class iS extends Hc{constructor(e,t){super(),this.onClick=new Bc,this.currentPosition=new hh({currentTime:0,duration:0},zr),this.onError=new Bc,this.onEnd=new Bc,this.onVolumeChange=new Bc,this.onPlay=new Bc,this.onPlayAfterPause=new Bc,this.onBufferingAfterPlay=new Bc,this.isBuffering=new hh(!1),this.onPlaying=new Bc,this.onCanPlay=new Bc,this.onLoadedData=new Bc,this.pauseRequest=new hh(-1),this.videoNode=e;const i=this.videoNode.paused?"pause":"play";this.playingState=new hh(i),this.win=In(e)?e.ownerDocument.defaultView:t,this.fullscreenApi=new Qf(this.win,e),this.cspErrorHandler=new Jf(this.win);let o=this.playingState.getValue();this.playingState.add((e=>{const{currentTime:t,duration:i,paused:n,ended:r}=this.videoNode;switch(oc("VideoNodeController.playingStateChange=["+JSON.stringify({previousPlayingState:o,nextPlayingState:e,currentTime:t,duration:i,paused:n,ended:r})+"]"),e){case"play":"pause"===o&&this.onPlayAfterPause.dispatch(void 0),this.onPlay.dispatch(void 0);break;case"end":this.onEnd.dispatch(void 0);break;case"buffering":"play"===o&&this.onBufferingAfterPlay.dispatch(void 0)}this.isBuffering.dispatch("buffering"===e),o=e}));const n={error:()=>{const{src:e}=this.videoNode,t=()=>{const t=this.cspErrorHandler.getViolatedSourceBySrc(e);return t?new Ml({code:"MEDIA_SRC_VIOLATES_CSP_POLICY",details:{violatedSource:t}}):void 0},i=()=>{const e=t();e&&Wc.error({error:e})};let o=t();if(!o){o=this.getVideoNodeError();const{promise:e,clear:t}=Qu(1e3,this.win);this.addDestroyHandler((()=>{t(),i()})),e.then(i).catch(J)}this.onError.dispatch(o)},play:()=>{this.playingState.dispatch("play")},playing:()=>{this.currentPosition.dispatch(this.getCurrentPosition()),this.onPlaying.dispatch(void 0),this.playingState.dispatch("play")}};this.subscribeClick(),this.subscribeUpdatePositionInterval(),this.subscribePause(),this.subscribeEnded(),this.subscribeBuffering(),this.subscribeVolumeChange(),this.subscribeLoadedData();for(const r in n)n.hasOwnProperty(r)&&e.addEventListener(r,n[r]);this.addDestroyHandler((()=>{for(const t in n)n.hasOwnProperty(t)&&e.removeEventListener(t,n[t]);this.fullscreenApi.destroy(),this.cspErrorHandler.destroy(),this.onCanPlay.removeAll()}))}play(){oc("VideoNodeController.play");const e=this.videoNode.play();Du(e)&&e.catch((e=>{this.shouldIgnorePlayRejection(e)||Wc.error({error:new Ml(e,{code:"VIDEO_PLAY_REJECTED",details:{errorCode:e.code,errorName:e.name,errorMessage:e.message}})})}))}pause(){oc("VideoNodeController.pause"),this.pauseRequest.dispatch(this.win.Date.now()),this.currentPosition.dispatch(this.getCurrentPosition()),this.videoNode.pause(),"end"!==this.playingState.getValue()&&this.playingState.dispatch("pause")}setSrc(e){const t=this.prepareSrcUrl(e),{videoNode:i}=this;let o;this.activeMSEController&&(this.activeMSEController.destroy(void 0),this.activeMSEController=void 0);const n=kc(this.win);o=!(!a(n)||void 0!==Io(e)),oc("VideoNodeController.setSrc shouldPlayWithMSE=["+o+"] url=["+t+"]"),Ua(i,(()=>{if(!o)return i.src=t,void i.load();const n=(e=>{if(!fA||!AA)throw new Ml({code:"MSE_CONTROLLER_ENVIRONMENT_IS_NOT_SUPPORTED",details:{}});return new $f(Ha({},e,{MediaSourceConstructor:AA}))})({mediaFile:e,videoSlot:i});this.activeMSEController=n,n.addDestroyHandler(this.ignoreAfterDestroy((e=>{this.activeMSEController=void 0,e&&this.onError.dispatch(e)}),"VideoNodeController.mseControllerOnDestroy")),this.addDestroyHandler((()=>{n.destroy(void 0)}))}))}getWidth(){return this.videoNode.clientWidth}getHeight(){return this.videoNode.clientHeight}getCurrentPosition(){return function(e){const t=e.duration||0;let i=(o=e.currentTime,.001*Math.round(o/.001)||0);var o;return t-i<.001&&(i=t),{currentTime:Math.max(0,i),duration:Math.max(0,t)}}(this.videoNode)}setCurrentTime(e){this.videoNode.currentTime=e}setVisibleControls(e){this.videoNode.controls=e}isFullscreen(){return an(this.win,this.videoNode)===this.videoNode}getPaused(){return this.videoNode.paused}getMuted(){return 0===this.getVolume()}setMuted(e){!function(e,t){Ua(e,(()=>{e.muted=t;const i=e.volume;if(!t&&0===i){const t=i>0?i:.5;e.volume=t}}))}(this.videoNode,e)}getVolume(){return za(this.videoNode)}setVolume(e){!function(e,t){Ua(e,(()=>{e.volume=t,e.muted=0===t}))}(this.videoNode,e)}setLoop(e){this.videoNode.loop=e}getLoop(){return this.videoNode.loop}prepareSrcUrl(e){const{url:t}=e;return ro(e.type)?R(e.url,{video_height:String(this.getHeight()),video_width:String(this.getWidth())}):t}getVideoNodeError(){const{videoNode:e}=this,{src:t,currentSrc:i,currentTime:o,duration:n,error:r,networkState:a,readyState:s}=e,l=r&&r.code,d={code:l,message:r&&r.message||"",src:t,currentSrc:i,currentTime:o,duration:n,networkState:a,readyState:s,selectedMediaFile:void 0,mediaFiles:void 0};if(!r||"undefined"===typeof MediaError)return new Ml({code:"VIDEO_ERROR",details:d});switch(l){case MediaError.MEDIA_ERR_ABORTED:return new Ml({code:"MEDIA_ERR_ABORTED",details:d});case MediaError.MEDIA_ERR_NETWORK:return new Ml({code:"MEDIA_ERR_NETWORK",details:d});case MediaError.MEDIA_ERR_DECODE:return new Ml({code:o>0?"MEDIA_ERR_DECODE_DURING_PLAYBACK":"MEDIA_ERR_DECODE_ON_START",details:d});case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return me(a)&&me(s)&&s===e.HAVE_NOTHING&&a===e.NETWORK_NO_SOURCE?new Ml({code:"MEDIA_ERR_NETWORK_FIRST_CHUNK_FAIL",details:d}):new Ml({code:"MEDIA_ERR_SRC_NOT_SUPPORTED",details:d});default:return new Ml({code:"MEDIA_ERROR_UNRECOGNIZED",details:d})}}subscribeClick(){const e=()=>{this.onClick.dispatch(void 0)},t=ka(this.win)>=11?function(e,t,i){function n(){0!==r&&(clearTimeout(r),r=0)}let r=0,a=0,s=0;const l=q({element:e,eventName:"click",listener:function(e){0!==r&&(n(),t(e))},options:{passive:!0}}),d=q({element:e,eventName:"touchstart",listener:function(e){1===e.touches.length&&(a=e.changedTouches[0].screenX,s=e.changedTouches[0].screenY,n(),r=i.setTimeout(n,1e3))},options:{passive:!0}}),c=q({element:e,eventName:"touchend",listener:function(e){0!==r&&(n(),t(e))},options:{passive:!0}}),u=q({element:e,eventName:"touchmove",listener:function(e){if(0===r||!o(e.touches)||1!==e.touches.length)return void n();const{screenX:t,screenY:i}=e.changedTouches[0];(function(e,t){return Math.abs(a-e)>15||Math.abs(s-t)>15})(t,i)&&n()},options:{passive:!0}});return()=>{l(),d(),c(),u()}}(this.videoNode,e,this.win):q({element:this.videoNode,eventName:"click",listener:e});this.addDestroyHandler(t)}subscribeUpdatePositionInterval(){let e;const{videoNode:t}=this,i=()=>{this.currentPosition.dispatch(this.getCurrentPosition());const{currentTime:e,duration:t}=this.getCurrentPosition();oc("[VideoNodeController]: updated position [currentTime = ["+e+"], duration = ["+t+"]]")},o=q({element:t,eventName:"playing",listener:()=>{this.win.clearInterval(e),e=this.win.setInterval(i,250)},options:{passive:!0}}),n=q({element:t,eventName:"pause",listener:()=>{this.win.clearInterval(e)},options:{passive:!0}}),r=q({element:t,eventName:"ended",listener:()=>{this.win.clearInterval(e)},options:{passive:!0}}),a=q({element:t,eventName:"canplay",listener:()=>{this.onCanPlay.dispatch(void 0)}});this.addDestroyHandler(o),this.addDestroyHandler(n),this.addDestroyHandler(r),this.addDestroyHandler(a),this.addDestroyHandler((()=>{this.win.clearInterval(e)}))}subscribePause(){const{videoNode:e}=this,t=q({element:e,eventName:"pause",listener:()=>{const{currentTime:e,duration:t}=this.getCurrentPosition();e>=t||this.playingState.dispatch("pause")},options:{passive:!0}}),i=_o((()=>{const{paused:t,ended:i}=e;if("play"===this.playingState.getValue()&&t&&!i){const{currentTime:t,duration:i}=e;oc("DetectVideoPauseByPausedProperty currentTime=["+t+"] duration=["+i+"]"),Wc.log({name:"DetectVideoPauseByPausedProperty",data:{currentTime:t,duration:i}}),this.playingState.dispatch("pause")}}));this.addDestroyHandler(t),this.addDestroyHandler(i)}subscribeEnded(){const e=q({element:this.videoNode,eventName:"ended",listener:()=>{const{currentTime:e,duration:t}=this.getCurrentPosition();e+.25>=t?this.playingState.dispatch("end"):oc("video ended ignored with currentTime=["+e+"] duration=["+t+"]")},options:{passive:!0}});let t=0,i=NaN;const o=_o((()=>{const{currentTime:e,duration:o}=this.getCurrentPosition(),{paused:n}=this.videoNode,r=this.playingState.getValue();if(o>0&&e>=o)return void("end"!==r&&(Wc.log({name:"DetectVideoEndByCurrentTime"}),this.playingState.dispatch("end")));const a=!n&&o>0&&e===i&&o-e<1&&"play"===this.playingState.getValue();i=e,a?t>=eS?(t=0,"end"!==r&&(Wc.log({name:"DetectVideoEndByStalledOffset",probability:1}),this.playingState.dispatch("end"))):t++:t=0}));this.addDestroyHandler(e),this.addDestroyHandler(o)}subscribeBuffering(){let e=d;const t=kg(this.videoNode,(t=>{let i;if(i=t?"buffering":this.videoNode.paused?"pause":"play",e(),this.playingState.dispatch(i),t&&tS){const{clear:t,promise:i}=Qu(1e3,this.win);e=t,this.addDestroyHandler(t),i.then((()=>{if("buffering"!==this.playingState.getValue())return;const{currentTime:e,duration:t}=this.getCurrentPosition(),i=e+.1;this.setCurrentTime(i);const{currentSrc:o,src:n}=this.videoNode;Wc.log({name:"RecoverSafariPlayingHangup",data:{currentSrc:o,src:n,currentTime:e,duration:t},probability:1})})).catch(J)}}));this.addDestroyHandler(t)}subscribeVolumeChange(){this.addDestroyHandler(q({element:this.videoNode,eventName:"volumechange",listener:()=>{this.onVolumeChange.dispatch(void 0)}}))}subscribeLoadedData(){this.addDestroyHandler(q({element:this.videoNode,eventName:"loadeddata",listener:()=>this.onLoadedData.dispatch(void 0)}))}shouldIgnorePlayRejection(e){return!!this.isDestroyed||(20===e.code||"AbortError"===e.name)&&(!!this.isDestroyed||Date.now()-this.pauseRequest.getValue()<=1e3)}}const oS=e=>!1!==e.abuse,nS={isCloseAvailable:!1,isCloseDialogActive:!1},rS={clickableVideo:!0,video:!0,interactiveViewer:!0,external:void 0,motion:void 0,survey:void 0,themeEmpty:void 0,vpaidCreative:void 0},aS=(e,t)=>t>=Jg&&("play"===e||"pause"===e),sS=[{type:"video/x-flv",codec:void 0},{type:"video/webm",codec:"vp8, vorbis"},{type:"video/webm",codec:"vp8"},{type:"video/webm",codec:"vp9, vorbis"},{type:"video/webm",codec:"vp9"},{type:"video/webm",codec:"av1"},{type:"video/webm",codec:void 0},{type:"video/ogg",codec:void 0},{type:"video/mp4",codec:"avc1.640033, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640033"},{type:"video/mp4",codec:"avc1.640034, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640034"},{type:"video/mp4",codec:"avc1.64082A, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64082A"},{type:"video/mp4",codec:"avc1.640828, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640828"},{type:"video/mp4",codec:"avc1.640820, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640820"},{type:"video/mp4",codec:"avc1.64081F, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64081F"},{type:"video/mp4",codec:"avc1.64081E, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64081E"},{type:"video/mp4",codec:"avc1.64002A,mp4a.40.2"},{type:"video/mp4",codec:"avc1.64002A, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64002A"},{type:"video/mp4",codec:"avc1.640028,mp4a.40.2"},{type:"video/mp4",codec:"avc1.640028, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640028"},{type:"video/mp4",codec:"avc1.640020,mp4a.40.2"},{type:"video/mp4",codec:"avc1.640020, mp4a.40.2"},{type:"video/mp4",codec:"avc1.640020"},{type:"video/mp4",codec:"avc1.64001F,mp4a.40.2"},{type:"video/mp4",codec:"avc1.64001F, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64001F"},{type:"video/mp4",codec:"avc1.64001E,mp4a.40.2"},{type:"video/mp4",codec:"avc1.64001E, mp4a.40.2"},{type:"video/mp4",codec:"avc1.64001E"},{type:"video/mp4",codec:"avc1.4D481E, mp4a.40.2"},{type:"video/mp4",codec:"avc1.4D481E"},{type:"video/mp4",codec:"avc1.4D401E,mp4a.40.2"},{type:"video/mp4",codec:"avc1.4D401E, mp4a.40.2"},{type:"video/mp4",codec:"avc1.4D401E"},{type:"video/mp4",codec:"h264"},{type:"video/mp4",codec:"h265"},{type:"video/mp4",codec:"hev1.1.6.L60.90"},{type:"video/mp4",codec:"hev1.1.6.L63.90"},{type:"video/mp4",codec:"hev1.1.6.L63.90"},{type:"video/mp4",codec:"hev1.1.6.L90.90"},{type:"video/mp4",codec:"hev1.1.6.L120.90"},{type:"video/mp4",codec:"av1"},{type:"video/mp4",codec:void 0},{type:"video/3gpp",codec:"av1"},{type:"video/3gpp",codec:void 0},{type:"application/x-mpegURL",codec:void 0},{type:"application/vnd.apple.mpegurl",codec:void 0},{type:"video/x-ms-wmv",codec:void 0},{type:"application/x-shockwave-flash",codec:void 0},{type:"video/3gp",codec:"av1"},{type:"video/3gp",codec:void 0},{type:"video/mpeg",codec:void 0},{type:"video/mpeg",codec:"av1"}];var lS=e(6416),dS=e.n(lS);const cS=gA?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=",uS=e=>{const t=(e=>{const{muted:t}=e;return()=>{e.muted=t}})(e),i=(e=>{const{volume:t}=e;return()=>{e.volume=t}})(e),o=(e=>{const{paused:t}=e;return()=>{t&&e.pause(),!t&&e.paused&&qr(e.play())}})(e);return()=>{t(),i(),o()}},hS={once:!0,passive:!0};class pS{constructor(e,t){let{checkSoundEnabled:i}=t;this.stop=d,this.isStopped=!1,this.revertVideoState=d,this.video=e;const o=document.createElement("div");o.style.display="none";const n=uS(e),r=Ua(e,(()=>Na(e,{src:cS})));let a;this.revertVideoState=A((()=>{r(),e.load(),n(),l(o)})),this.promise=new Promise((async(e,t)=>{let o;if(a=t,i){if(o=await this.requestAutoplayAbilityByMuted(!1),this.isStopped)return;if(o.autoplayAbility)return this.revertVideoState(),void e({autoplayAbility:"allowed",detectionMethod:o.detectionMethod,detectionDetails:o.detectionDetails})}const n=await this.requestAutoplayAbilityByMuted(!0);if(this.isStopped)return;let r;r=o&&o.detectionMethod!==n.detectionMethod?"DifferentDetectionMethods":n.detectionMethod,this.revertVideoState(),this.isStopped=!0,e({autoplayAbility:n.autoplayAbility?"muted":"restricted",detectionMethod:r||"NotRecognized",detectionDetails:{soundDisabled:n,soundEnabled:o}})})),this.stop=()=>{this.isStopped||(this.isStopped=!0,a(new Error("requestAutoplayAbility has been stopped")),this.revertVideoState())}}async requestAutoplayAbilityByMuted(e){const{video:t}=this;if(Ua(t,(()=>{t.load()})),await Xh(0),this.isStopped)return{autoplayAbility:!1,detectionMethod:"RAAStopped"};t.muted=e,t.volume=e?0:1;const i=await new Promise((e=>{(function(e){let t=0;const i=[],o=(o,n)=>{i.push(q({element:e,eventName:o,listener:n,options:hS})),clearTimeout(t)},n=new Promise((i=>{const n=t=>{e.paused&&i({detectionMethod:t,autoplayAbility:!1})},r=e.play();n("VideoTagPaused"),o("durationchange",(()=>n("PauseAfterDurationChange"))),o("error",(()=>n("VideoTagPausedAfterError"))),o("pause",(()=>i({detectionMethod:"PauseEvent",autoplayAbility:!1}))),o("playing",(()=>{i({detectionMethod:"PlayingEvent",autoplayAbility:!0})})),Boolean(r)?(o("progress",(()=>{i({detectionMethod:"ProgressEvent",autoplayAbility:!0})})),r.then((()=>{i({detectionMethod:"PromiseResolve",autoplayAbility:!0})})).catch((e=>{i({detectionMethod:"PromiseReject",autoplayAbility:!1,detectionDetails:e?{code:e.code,name:e.name,message:e.message}:"not_error"})}))):t=window.setTimeout((()=>{i({detectionMethod:"Timeout",autoplayAbility:!1})}),500)}));return n.then((()=>j(i))),n})(t).then((t=>{e(t)})).catch((t=>{e({autoplayAbility:!1,detectionMethod:"PlayRejected",detectionDetails:{code:t.code,name:t.name,message:t.message}})}))}));return this.isStopped?{autoplayAbility:!1,detectionMethod:"RAAStopped"}:i}}const mS="2147483647",AS=e=>{const t=e.createElement("div");return Lr(t,{pointerEvents:"none",width:"4px",height:"4px",position:"absolute",top:"50%",left:"50%",marginTop:"-1px",marginLeft:"-1px",zIndex:mS},!0),tc.isDebugEnabled&&(t.dataset.isVisible="undefined"),t},gS=e=>{let{element:t,win:i}=e;const o=new hh(!0),n=t.ownerDocument,r=AS(n);t.appendChild(r);const a=new i.IntersectionObserver((e=>{const t=e[e.length-1],{isVisible:i=!0}=t;o.dispatch(i),tc.isDebugEnabled&&(r.dataset.isVisible=String(i))}),{trackVisibility:!0,delay:100});return a.observe(r),{teardown:()=>{a.disconnect(),o.removeAll(),l(r)},visualVisibilitySignal:o}},vS=e=>!!Ou&&"IntersectionObserverEntry"in e&&"isVisible"in e.IntersectionObserverEntry.prototype;class _S extends Hc{constructor(e){super(),this.currentFramesCount=0,this.startTime=Date.now()/1e3;const t=()=>{this.isDestroyed||e.requestAnimationFrame(t),this.currentFramesCount+=1};e.requestAnimationFrame(t)}getCurrentAvgFps(){const e=Date.now()/1e3;return this.currentFramesCount/(e-this.startTime)}}const yS=e=>{const t=new fv;return{promise:new Promise(((i,o)=>{e({resolve:i,reject:o,subscribeForTeardown:e=>{t.subscribe(e)}})})),teardown:()=>t.dispatch(void 0)}},fS=e=>yS((t=>{let{resolve:i,subscribeForTeardown:o}=t;const n=e.ownerDocument,r=n.defaultView,a=AS(n);e.appendChild(a);const s=new r.IntersectionObserver((e=>{const t=e[e.length-1],{isVisible:o}=t;tc.isDebugEnabled&&(a.dataset.isVisible=String(o)),i(o)}),{trackVisibility:!0,delay:100});s.observe(a),o((()=>{s.disconnect(),l(a)}))})),SS=e=>yS((t=>{let{resolve:i,subscribeForTeardown:o}=t;const n=new e.ownerDocument.defaultView.IntersectionObserver((e=>{const t=e[e.length-1].intersectionRatio>=.5;i(t)}),{threshold:1});n.observe(e),o((()=>{n.unobserve(e),n.disconnect()}))}));let TS=0;class ES extends Hc{constructor(e){var t,n;let{config:r,videoNode:s,layoutSlot:c,skinParameters:u,backgroundSlot:h,visibilitySlotParameters:p,retainLastMediaAfterPlayback:m,stats:g}=e;super(),t=this,this.volumeButtonCollapseProgress=new hh(void 0),this.volumeStatus=new hh("unknown"),this.videoSlotClickUrl=new hh(void 0),this.ecomShopState=new hh({isVisible:!1,ecomShop:void 0}),this.onReady=new Bc,this.onBeforeDestroy=new Bc,this.onDestroy_PUBLIC_DO_NOT_USE=new Bc,this.onBeforeAdStart=new Bc,this.onAdStart=new Bc,this.adSlowStart=new hh(!1),this.onAdMediaStart=new Bc,this.onAdMediaEnd=new Bc,this.onAdEnd=new Bc,this.onAdSkipped=new Bc,this.onClickThrough=new Bc,this.playerEnvironment=void 0,this.autoplayAbilityResult=new hh({autoplayAbility:"restricted",detectionMethod:"AutomaticallyGenerated"},zr),this.tooltipParameters={container:{containerElement:new hh(void 0),setContainerElement:e=>{this.tooltipParameters.container.containerElement.dispatch(e)}},content:{tooltipContent:new hh(void 0),setTooltipContent:e=>{this.tooltipParameters.content.tooltipContent.dispatch(e)}}},this.onAdStartRejected=new Bc,this.adContentSize=new hh(void 0,zr),this.onAdStop=new Bc,this.onAdPodPlayAdMedia=new Bc,this.onAdPodStartRequest=new Bc,this.onAdPodStart=new Bc,this.onAdPodImpression=new Bc,this.onAdPodFirstQuartile=new Bc,this.onAdPodMidpoint=new Bc,this.onAdPodThirdQuartile=new Bc,this.onAdPodPause=new Bc,this.onAdPodResume=new Bc,this.onAdPodError=new Bc,this.onAdPodComplete=new Bc,this.onAdPodClose=new Bc,this.onAdInteraction=new Bc,this.adMediaState=new hh({name:"idle"},zr),this.isPackshotPlaying=new hh(!1),this.themeEmptyParameters=new hh(void 0,zr),this.faviconSrc=new hh(void 0),this.showTitleAndBody=new hh(void 0),this.currentVastAd=new hh(void 0),this.bannerFlags=new hh(void 0,zr),this.abuseParameters=new hh(yg,zr),this.adPodDuration=new hh(NaN),this.adVolumeAvailability=new hh(!1),this.adPodRemainingTime=new hh(-2),this.skinAnimationProgress=new hh(0),this.timeToSkipComputed=new hh(ly),this.timeToSkipAdCreative=new hh(void 0),this.timeToSkip=Cn([this.timeToSkipComputed,this.timeToSkipAdCreative],((e,t)=>null!=t?t:e)).valueSignal,this.adSkippableState=new hh(Eg),this.playingState=new hh("idle",((e,t)=>"idle"===t?(this.stats.error({error:new Ml({code:"ATTEMPT_TO_CHANGE_ADC_PLAYING_STATE_TO_IDLE",details:void 0})}),!0):e===t)),this.adPodCloseState=new hh(nS,zr),this.adTuneState=new hh(Tg,zr),this.combinedSkinControlsVisibility=new hh({},zr),this.creativeType=new hh(void 0),this.adSystemType=new hh(void 0),this.contentAfterAdPod=new hh(op,zr),this.socialAdvertising=new hh(!1),this.abuseDisplayStatus=new hh("hidden"),this.pauseByOpenAbuseScreen=new hh(!1),this.adPodsCount=new hh(0),this.playingAdPodIndex=new hh(0),this.adPodCurrentSubtitles=new hh([]),this.isFullscreen=new hh(!1),this.displayAdSequence=new hh(void 0,zr),this.shouldShowSkipButton=new hh({shouldShowSkipButton:!1}),this.logAbuseOpenFirstTime=A((()=>{this.stats.log({name:"AbuseScreenOpenFirstTime",probability:1})})),this.onAllAdPodComplete=new Bc,this.lastMediaRetained=new hh(void 0),this.adBlockIdentification=new hh({adType:void 0,partnerId:void 0,impId:void 0}),this.adTitleParameters=new hh(void 0),this.adFoxAdTuneParameters=new hh(void 0),this.isNewSkinEnabled=A((()=>!0===this.playbackParameters.enableNewSkin?{reason:"enabledByApi",isEnabled:!0}:"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_NEW_SKIN_EVERYWHERE")?{reason:"enabledByEverywhereExperiment",isEnabled:!0}:"multiroll"===this.playerEnvironment?{reason:"disabledInMultiroll",isEnabled:!1}:"videoInCombo"===this.skinVariant?{reason:"enabledForVideoInCombo",isEnabled:!0}:Nc&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_NEW_SKIN_IN_NANPU")?{reason:"enableInNanpu",isEnabled:!0}:"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_USE_NEW_SKIN_IN_THIRD_PARTY_ENVIRONMENT")?{reason:"enableInThirdPartyEnv",isEnabled:!0}:{reason:"disabledByDefault",isEnabled:!1})),this.skinControlsHideReasons=new hh(it(sc(hp,(e=>[e,[]])))),this.publicApiControlsVisibility=new hh({}),this.isCreativeWithOwnControls=new hh(!1),this.vastAdControlsSettings=new hh(void 0),this.shouldHandleResize=!0,this.viewersList=[],this.showAdCounter=0,this.shouldBlurBeVisibleByApiLogic=new hh(!0),this.adPodBackground=new hh(void 0),this.adPodDestroyReasonObjects=[],this.destroyBlur=d,this.adVideoIsBuffering=new hh(!1),this.onAdInteractionWrapper=((e,t)=>{let i=0;return()=>{const t=Date.now();t-i>=500&&(e(),i=t)}})((()=>{this.onAdInteraction.dispatch(void 0)})),this.documentVisibility=new hh(!1),this.currentViewerProductType=new hh(void 0),this.styleModulesManager=new r_,this.isSurveyCreative=new hh(!1),this.isBrandliftSurveyCreative=new hh(!1),this.prepareSkin=A((()=>{const e=this.skinContainer;e.classList.add(lS.locals.AdDisplayControllerSkinContainer),this.styleModulesManager.useStyleModule(e,dS());const t=Hr(e);t||this.stats.log({name:"CouldNotCreateSkinShadowRoot",probability:1});const{firstRenderPromise:i,runtimeErrorPromise:o,clear:n}=this.skinParameters.renderSkinFunction(null!=t?t:e,this);i.then((()=>{const{isEnabled:e,reason:t}=this.isNewSkinEnabled();this.stats.log({name:"SkinRendered",sensors:{isNewSkin:e?"1":"0",reason:t}})})).catch((e=>{this.stats.error({error:new Ml(e,{code:"PREACT_SKIN_FIRST_RENDER_ERROR",details:e})}),this.destroy(e)})),o.catch((e=>{this.stats.error({error:new Ml(e,{code:"PREACT_SKIN_RUNTIME_ERROR",details:void 0})}),this.destroy(e)})),this.addDestroyHandler((()=>{n(),l(e)}))})),this.openAdSystemWebsite=()=>{const e=this.socialAdvertising.getValue(),t=e?"https://yandex.ru/socialads-transparency-report":Wu("YANDEX_DIRECT_LINK",this.playbackParameters.lang),i=!this.getPaused(),o=Date.now();if(this.stats.log({name:"OpenAdSystemWebsite",data:{adSystemType:this.adSystemType.getValue(),pauseByOpenWebsite:i,adSystemWebsiteUrl:t,socialAdvertising:e},probability:1}),i&&this.pause(),null===window.open(t,"_blank"))return;const n=Xr(window.document,(r=>{r&&(this.stats.log({name:"ReturnBackAfterOpenAdSystemWebsite",data:{timeSpentBeforeReturn:Date.now()-o,adSystemType:this.adSystemType.getValue(),adSystemWebsiteUrl:t,pauseByOpenWebsite:i,socialAdvertising:e},probability:1}),n(),i&&this.resume())}));this.addDestroyHandler(n)},this.isYandexCreative=new hh(void 0),this.clickThrough=e=>{Dn({control:e.clickSource,purpose:"clickThru"});const{clickSource:t}=e;this.currentViewer?(this.stats.log({name:"AdDisplayControllerClickThrough",data:{clickSource:t,playbackParameters:this.playbackParameters},probability:1}),this.viewerClickThrough(this.currentViewer,e)):this.stats.error({error:new Ml({code:"CALL_CLICK_THROUGH_METHOD_WITHOUT_VIEWER",details:{clickSource:t,playbackParameters:this.playbackParameters}})})},this.onSkinSkipButtonClick=()=>{const e=this.timeToSkip.getValue();0===e?this.skipCurrentViewer():this.stats.log({name:"ClickToInactiveSkipButton",data:{timeToSkipValue:e},probability:1})},this.setEcomShopState=function(e,i){void 0===i&&(i=!1);const o=t.ecomShopState.getValue();if(!Gc(v(e),(t=>e[t]!==o[t])))return;const n=Ka({},o,e);if(n.isVisible=n.isVisible&&void 0!==n.ecomShop&&n.ecomShop.products.length>0,t.ecomShopState.dispatch(n),!i||t.isPackshotPlaying.getValue())return;const r=t.playingState.getValue();n.isVisible&&"play"===r&&t.pause(),n.isVisible||"pause"!==r||t.play()},this.destroyCurrentViewer=()=>{this.currentViewer&&(this.currentViewer.destroy({reason:"close",details:void 0}),this.closeAbuseScreen(),this.showCreativesContainer())},this.logAbuseEventToStats=e=>{this.stats.log({name:"AbuseVariantChoose",data:{pauseByOpenAbuseScreen:this.pauseByOpenAbuseScreen.getValue(),variant:e},probability:1});const t="AbuseVariantChoose_"+e;this.stats.log({name:t,probability:1})},this.showCreativesContainer=()=>{try{this.creativesLayoutContainer.style.display=""}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"CREATIVES_CONTAINER_VISIBILITY_CHANGE_FAILED",details:void 0})})}},this.hideCreativesContainer=()=>{try{this.creativesLayoutContainer.style.display="none"}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"CREATIVES_CONTAINER_VISIBILITY_CHANGE_FAILED",details:void 0})})}},this.abuseVariantChooseHandler=(e,t)=>{if(!this.currentViewer)return void this.stats.error({error:new Ml({code:"ABUSE_CALLED_WITHOUT_VIEWER",details:void 0})});null!=t&&t.needToHideCreativesContiner&&this.hideCreativesContainer();const{reason:i,action:o}=_g[e];this.sendAdTuneTracking({actionId:o,reasonId:i,options:t}),this.logAbuseEventToStats(e),(null==t?void 0:t.noDestroyOnClick)||this.destroyCurrentViewer()},this.onAbuseCopyLinkToClipboardClick=e=>{e?(this.stats.log({name:"AbuseScreenCopiedCountLink",probability:1}),Da(e)):this.stats.error({error:new Ml({code:"ABUSE_COPY_COUNT_LINK_WITHOUT_URL",details:void 0})})},this.getSendBeaconParams=e=>{const t=null==e?void 0:e.UserResponse;if(!t)return;const i=JSON.stringify({UserResponse:t});return new Blob([i],{type:"application/json"})},this.abuseButtonClickHandler=()=>{const e=!("pause"===this.playingState.getValue());e&&this.pause(),this.stats.log({name:"AbuseScreenOpen",data:{pauseByOpenAbuseScreen:e},probability:1}),this.logAbuseOpenFirstTime(),this.pauseByOpenAbuseScreen.dispatch(e),this.abuseDisplayStatus.dispatch("selection"),this.sendAdTuneTracking({actionId:hg,reasonId:ug})},this.abuseScreenCloseHandler=()=>{this.stats.log({name:"AbuseScreenClose",data:{pauseByOpenAbuseScreen:this.pauseByOpenAbuseScreen.getValue()},probability:1}),this.closeAbuseScreen(),this.sendAdTuneTracking({actionId:mg,reasonId:pg})},this.handleAbuseScreenCloseByResumeError=()=>{this.stats.error({error:new Ml({code:"ABUSE_SCREEN_CLOSE_BY_RESUME",details:void 0})}),this.abuseDisplayStatus.dispatch("hidden")},this.getCurrentViewerAssets=()=>{const e=this.currentViewer;if(!e)return void this.stats.log({name:"GetCurrentViewerAssetsCalledWithoutViewer"});const{adParametersObject:t,assets:i,creativeParameters:o}=e.mediaAd.vastAd,n=null==i?void 0:i.button,r=this.getAdPlacementOptions(),{adFormatType:a}=r,s="survey"===a?"survey":void 0,l=this.getEcomAsAsset();if(!jy(t))return this.stats.log({name:"GetCurrentViewerAssetsReturnedEmpty"}),{logo:void 0,domain:void 0,greenUrl:void 0,punyDomain:void 0,title:void 0,body:void 0,age:void 0,buttonCaption:void 0,lang:void 0,targetUrl:void 0,socialAdvertising:void 0,app:void 0,icon:void 0,images:void 0,adFormatType:s,isFullyClickable:ja(a,e.getVideoSlotClickUrl()),sendAdTuneTracking:void 0,clickThrough:void 0,clickThroughButtonAsset:void 0,ecomShop:l};const{abuseUrl:d}=this.abuseParameters.getValue(),c={logo:null==i?void 0:i.logo,domain:null==o?void 0:o.domain,greenUrl:null==o?void 0:o.greenUrl,punyDomain:null==o?void 0:o.punyDomain,title:null==o?void 0:o.title,body:null==o?void 0:o.body,age:null==o?void 0:o.ageRestriction,buttonCaption:null==n?void 0:n.caption,lang:this.playbackParameters.lang,targetUrl:We(t),socialAdvertising:this.socialAdvertising.getValue(),app:null==i?void 0:i.app,icon:null==i?void 0:i.icon,images:null==i?void 0:i.images,adFormatType:s,isFullyClickable:ja(a,e.getVideoSlotClickUrl()),sendAdTuneTracking:d?e=>{this.stats.log({name:"GetCurrentViewerAssetsAdTuneTracking"}),this.sendAdTuneTracking(e)}:void 0,clickThrough:Boolean(e.adPodViewerPlaybackParams.clickThroughUrl)?()=>{this.viewerClickThrough(e,{clickSource:"ApiClickThrough",url:void 0,playerHandles:!0})}:void 0,clickThroughButtonAsset:n?()=>{this.viewerClickThrough(e,{clickSource:"ApiClickThroughButtonAsset",url:n.href,playerHandles:!0})}:void 0,ecomShop:l};return this.stats.log({name:"GetCurrentViewerAssetsReturnAssets",data:c}),c},this.subscribeInteractionHandlers=()=>{if(!Rl(this.slotParameters.element))return d;const e=[],t=In(this.videoNode);return Jl(Ov,(i=>{e.push(q({element:this.slotParameters.element,eventName:i,listener:this.onAdInteractionWrapper,options:{passive:!0}})),t&&e.push(q({element:this.slotParameters.element,eventName:i,listener:this.onAdInteractionWrapper,options:{passive:!0}}))})),()=>j(e)},this.viewerClickThrough=(e,t)=>{e.userInteractionDispatchers.AdClickThru(t),e.clickThrough(t)},this.saveCurrentInstanceToRegistry=()=>{if(!tc.isDebugEnabled)return;const e=La(window),{stats:t}=this;if(!e.adDisplayControllerRegistry){const i=new Map,o=new Set;Object.defineProperty(e,"adDisplayControllerRegistry",{get:()=>(B("You are using debug code ad display controller registry getter, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeAdDisplayControllerRegistryGetter"}),o)}),Object.defineProperty(e,"blockRegistry",{get:()=>(B("You are using debug code block registry getter, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeBlockRegistryGetter"}),i)});const n=()=>(B("You are using debug code ad display controllers getter, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeAdDisplayControllersGetter"}),Array.from(e.adDisplayControllerRegistry.values()));e.getAdDisplayControllers=n;const r=()=>(B("You are using debug code get blocks info, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeGetBlocksInfo"}),Array.from(e.blockRegistry.values()));e.getBlocksInfo=r}const i=e.adDisplayControllerRegistry,o=e.blockRegistry;i.add(this),this.addDestroyHandler(this.adBlockIdentification.add((e=>{if(!Boolean(e)||void 0===e.impId||void 0===e.partnerId)return;const t=e.partnerId+"-"+e.impId;if(o.has(t))return;const i=(e=>{const t=e.adBlockIdentification.getValue();return{visibilityTrackingElement:e.visibilitySlotParameters.element,adType:null==t?void 0:t.adType,bundleName:jd,VSID:ic,partnerId:null==t?void 0:t.partnerId,impId:null==t?void 0:t.impId}})(this);o.set(t,i)}))),this.addDestroyHandler((()=>{i.delete(this)}))},this.setupTrackVisibilityReporting=()=>{const e=this.slotParameters.window;if(!vS(e))return void this.stats.log({name:"IntersectionObserverTrackVisibilityNotSupported"});const t=this.visibilitySlotParameters.element,{teardown:o,visualVisibilitySignal:n}=gS({element:t,win:e});this.addDestroyHandler(o),this.addDestroyHandler(this.onAdPodImpression.add((()=>{const e=this.visibilitySlotParameters.visibilityRatio.getValue()>=Jg,o=this.documentVisibility.getValue(),r=n.getValue();if(o&&e&&!r&&(this.stats.log({name:"IntersectionObserverTrackVisibilityDiffers",data:{isRectInViewport:e,isTabVisible:o,isVisuallyVisible:r}}),"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ENABLE_INTERSECTION_OBSERVER_TRACK_VISIBILITY_HEAVY_REPORT"))){const{promise:e,teardown:o}=(e=>yS((t=>{let{resolve:o,reject:n,subscribeForTeardown:r}=t;const{promise:s,teardown:l}=(e=>{const t=[];return yS((i=>{let{resolve:o,reject:n,subscribeForTeardown:r}=i,s=e;const l=s.ownerDocument.body;let c=!1;r((()=>{c=!0}));let u=0;(async()=>{for(;u<10;){var e,i;if(u+=1,s===l)return void o({iov1:void 0,iov2:void 0,elementChain:t,reason:"body tag reached"});if(s=s.parentNode,11===(null==(e=s)?void 0:e.nodeType)&&a(null==(i=s)?void 0:i.getRootNode)){const e=s.getRootNode(),i=null==e?void 0:e.host;i||o({iov1:void 0,iov2:void 0,elementChain:t,reason:"cannot overpass shadow root"}),s=i}if(!s)return void o({iov1:void 0,iov2:void 0,elementChain:t,reason:"no parent element"});t.push(s);const d={iov2:fS(s),iov1:SS(s)};d.iov1.promise.catch(n),d.iov2.promise.catch(n),r(d.iov1.teardown),r(d.iov2.teardown);const[h,p]=await Promise.all([d.iov1.promise,d.iov2.promise]);if(d.iov1.teardown(),d.iov2.teardown(),c)return;p&&o({iov1:h,iov2:p,elementChain:t,reason:"got visible by iov2"})}})().then(d).catch((e=>{n(e)}))}))})(e);r(l),s.then((e=>{let{iov1:t,iov2:n,reason:r,elementChain:a}=e;l();const s=sc(a,(e=>(e=>{var t;let o="";return o+=e.tagName.toLowerCase(),i(e.id)&&(o+="#"+e.id),null!=(t=e.classList)&&t.length&&(o+="."+W(e.classList).join(".")),o+=""+sc(le(e.dataset),(e=>{let[t,i]=e;return"[data-"+t+'="'+i+'"]'})),o})(e))).join(" ");o({iov1:t,iov2:n,reason:r,selectorChain:s})})).catch(n)})))(t);this.addDestroyHandler(o),e.then((e=>{o(),this.stats.log({name:"IntersectionObserverTrackVisibilityHeavyReport",data:e})})).catch((e=>{o(),this.stats.log({name:"IntersectionObserverTrackVisibilityHeavyReportError",data:{error:e}})}))}})))},this.stats=g,this.retainLastMediaAfterPlayback=Boolean(m),this.addDestroyHandler((e=>{this.onBeforeDestroy.dispatch(e)})),tc.isDebugEnabled&&this.saveCurrentInstanceToRegistry(),this.backgroundSlot=h,this.visibilitySlotParameters=p,function(e){Vn(e)&&Cv(),Ln(e)&&bv(e)}(window);const _=void 0===s.volume||void 0===s.muted;_&&this.stats.error({error:new Ml({code:"FAKE_VIDEO_ELEMENT_WITHOUT_VOLUME_CHANGE_SUPPORT",details:void 0})});const{config:y,errors:f}=Pa(r);this.playbackParameters=y,void 0!==this.playbackParameters.skipDelayForNonYandexCreatives&&this.stats.log({name:"UseOfPublicApiSkipDelayForNonYandexCreativesParameter",data:{config:r}}),this.adVolume=new hh(za(s)),this.adHasBeenUnmuted=new hh(this.adVolume.getValue()>0),this.isFakeVideoElementWithoutVolumeChangeSupport=_;const S=new af(c),T=S.onResize;T.add((e=>{this.shouldHandleResize&&this.resizeAd(e.width,e.height)})),T.add((()=>{this.isNeedToShowVolumeButtonText()||0!==this.volumeButtonCollapseProgress.getValue()||this.startVolumeButtonProgress()})),this.addDestroyHandler((()=>{S.destroy()}));const E=new hh(!1);this.slotParameters={element:c,document:c.ownerDocument,window:c.ownerDocument.defaultView,size:T,isHovered:E},this.skinParameters=u,this.skinVariant=null!=(n=y.controlsSettings.skinVariant)?n:u.skinVariant,this.addDestroyHandler(function(e,t,i){if(void 0===t)return d;const o=re(t);let n=function(e){if(!Boolean(e))return!1;const{parentElement:t}=e;return!(!t||!a(t.querySelector))&&t.querySelector(":hover")===e}(e),r=!1;n&&i(!0);const s=q({element:e,eventName:o?"touchstart":"mouseenter",listener:()=>{if(o)!1===r&&(r=!0);else{if(n)return;n=!0,i(!0)}}}),l=q({element:e,eventName:o?"touchend":"mouseleave",listener:()=>{if(o)!0===r&&(r=!1,n=!n,i(n));else{if(!n)return;n=!1,i(!1)}}});return()=>{s(),l()}}(c,this.slotParameters.window,(e=>{E.dispatch(e)}))),this.addDestroyHandler(((e,t)=>{const i=_o((()=>{$o(e)||(i(),t())}));return i})(c,(()=>{this.destroy({reason:"error",details:new Ml({code:"VIDEO_WRAPPER_NODE_NOT_IN_DOM",details:void 0})})}))),this.videoContentSize=new hh(void 0,zr);const b=new hh(aS(this.playingState.getValue(),this.visibilitySlotParameters.visibilityRatio.getValue()));this.addDestroyHandler(on([this.playingState,this.visibilitySlotParameters.visibilityRatio],aS,(e=>b.dispatch(e)))),this.addDestroyHandler((e=>{let{valueSignal:t,time:i,callback:o,win:n}=e,r=0;const s=()=>{if(a(null==n?void 0:n.clearTimeout))return n.clearTimeout(r)},l=t.add((e=>{e?r=n.setTimeout((()=>{o(),l()}),i):s()}));return()=>{s(),l()}})({valueSignal:b,time:2e3,callback:()=>{0===this.volumeButtonCollapseProgress.getValue()&&this.startVolumeButtonProgress()},win:this.slotParameters.window})),this.onAdStart.addOne((()=>{this.addDestroyHandler(Fa(s,(e=>{this.videoContentSize.dispatch(e)}))),this.videoContentSize.dispatch(dn(s))})),this.adHasBeenUnmuted.addOne((e=>{e&&0===this.volumeButtonCollapseProgress.getValue()&&this.startVolumeButtonProgress()})),this.volumeStatus.addOne((()=>{this.isNeedToShowVolumeButtonText()&&"mutedStart"===this.volumeStatus.getValue()?this.volumeButtonCollapseProgress.dispatch(0):this.volumeButtonCollapseProgress.dispatch(1)})),this.addDestroyHandler((()=>{S.destroy()})),Xt(f),this.videoNode=s,function(e){if(tc.VAS_USER_SESSION_RANDOM<=Cc){const t=function(e,t){try{const i={hasMediaSourceConstructor:Boolean(AA),result:[]};return Jl(e,(e=>{const{type:o,codec:n}=e,r=cA(e);i.result.push({method:"video.canPlayType",type:o,codec:n,result:Em(r,t)}),AA&&i.result.push({method:"MediaSource.isTypeSupported",type:o,codec:n,result:AA.isTypeSupported(r)})})),i}catch(Mw){return void Wc.error({error:new Ml({code:"CODEC_PLAYABILITY_CHECK_ERROR",details:{error:Mw}})})}}(sS,e);t&&Wc.log({name:"CodecPlayabilityCheck",data:t,probability:1})}}(this.videoNode),this.timeToSkip.add((e=>{this.adSkippableState.dispatch(0===e)}));const C=this.adVolume.add((e=>{0!==e&&(this.adHasBeenUnmuted.dispatch(!0),C())}));this.addDestroyHandler(on([this.adVolume,this.adVolumeAvailability,this.adHasBeenUnmuted],((e,t,i)=>function(e){let{adVolume:t,adVolumeAvailability:i,adHasBeenUnmuted:o}=e;return i?0!==t?"unmuted":o?"muted":"mutedStart":"unknown"}({adVolume:e,adVolumeAvailability:t,adHasBeenUnmuted:i})),(e=>this.volumeStatus.dispatch(e)))),TS++,100===TS&&this.stats.error({error:new Ml({code:"TOO_MANY_CREATE_AD_DISPLAY_CONTROLLER_REQUESTS",details:void 0})}),this.stats.log({name:"CreateAdDisplayController",data:{config:this.playbackParameters}}),this.desiredBitrate=r.desiredBitrate,this.videoNodeController=new iS(s,this.slotParameters.window),this.onAdEnd.add((()=>this.setVisibleNativeControls(!0))),this.onReady.add((()=>this.setVisibleNativeControls(!1))),this.addDestroyHandler(function(e,t){let{controlsSettingsFromConfig:i,isFakeVideoElementWithoutVolumeChangeSupport:o,playingState:n,slotSize:r,skinControlsHideReasons:a,isCreativeWithOwnControls:s,vastAdControlsSettings:l,publicApiControlsVisibility:d,productType:c,isSurveyCreative:u,isBrandliftSurveyCreative:h,playerEnvironment:p,adSystemType:m,adTitleParameters:A}=e,g={};return on([n,r,a,s,l,d,c,u,h,m,A],((e,t,n,r,a,s,l,d,c,u,h)=>{let{width:m}=t;if("idle"===e||!(m>=140)||r)return pp;const A={controlsVisibility:ve(n,(e=>!(e.length>0)&&void 0))};return _a(void 0===u?{controlsVisibility:{adLabel:!1}}:void 0,"boolean"===typeof(null==h?void 0:h.show)?{controlsVisibility:{adLabel:h.show}}:void 0,a,i,{controlsVisibility:s},A,o?{controlsVisibility:{mute:!1}}:void 0,l&&dt(l)?{controlsVisibility:{disclaimers:!1,ageLabel:!1}}:void 0,d&&"multiroll"!==p?{controlsVisibility:{timeline:!1}}:void 0,c?{controlsVisibility:{skip:!1}}:void 0).controlsVisibility}),Kt((e=>{g=e,t(g)}),(e=>{for(const i of hp)if(e[i]!==g[i])return g=e,void t(g)})))}({controlsSettingsFromConfig:this.playbackParameters.controlsSettings,publicApiControlsVisibility:this.publicApiControlsVisibility,isFakeVideoElementWithoutVolumeChangeSupport:this.isFakeVideoElementWithoutVolumeChangeSupport,playingState:this.playingState,slotSize:this.slotParameters.size,skinControlsHideReasons:this.skinControlsHideReasons,isCreativeWithOwnControls:this.isCreativeWithOwnControls,vastAdControlsSettings:this.vastAdControlsSettings,productType:this.currentViewerProductType,isSurveyCreative:this.isSurveyCreative,isBrandliftSurveyCreative:this.isBrandliftSurveyCreative,playerEnvironment:this.playerEnvironment,adSystemType:this.adSystemType,adTitleParameters:this.adTitleParameters},(e=>{this.combinedSkinControlsVisibility.dispatch(e)}))),this.addDestroyHandler(this.playingState.add((e=>{if("play"===e){if(this.isPackshotPlaying.getValue())return;this.setEcomShopState({isVisible:!1})}}))),this.onAdPodPlayAdMedia.add((e=>{let{viewer:t,nextViewer:i}=e;const n=void 0===i?this.playbackParameters.contentAfterAd:ip;Jl(n.poster,(e=>{let{url:t}=e;no(t)}));const{mediaAd:r}=t;this.isCreativeWithOwnControls.dispatch(r.isCreativeWithOwnControls()),this.adSystemType.dispatch(r.getIsYandexCreative()?"yandex":"external"),this.isYandexCreative.dispatch(Fy(t.getScriptSrc())),this.contentAfterAdPod.dispatch(n);const a=Sa(r.vastAd);this.vastAdControlsSettings.dispatch(a),this.currentVastAd.dispatch(r.vastAd),this.ecomShopState.dispatch({isVisible:!1,ecomShop:r.vastAd.ecomShop});const s=na(r.vastAd);if(this.themeEmptyParameters.dispatch(s),s){const e=(e=>{const t=(e=>{const t=Zy(e);if(!t)return;const{parsedParameters:i}=t;return i?i.iconUrl:void 0})(e);if(t)return{url:t,source:"bk"};const i=function(e){if(!oa(e))return;const t=Zy(e);if(!o(t))return;const{adParametersObject:i,parsedParameters:n}=t;if(!o(i)||!o(n))return;const{domain:r,punyDomain:a}=n;return null!=a?a:r}(e);return i?{url:"https://favicon.yandex.net/favicon/"+i+"?size=32&stub=1",source:"domain"}:void 0})(r.vastAd);if(e){const{url:i,source:o}=e;"bk"===o&&this.stats.log({name:"UsedFaviconFromBK",data:{src:i}}),this.faviconSrc.dispatch(i);const n=new Image;t.addDestroyHandler(q({element:n,eventName:"load",listener:()=>{clearTimeout(a)}}));const r=e=>{var t;clearTimeout(a),this.stats.log({name:"FaviconIsNotLoaded",data:{reason:null!=(t=null==e?void 0:e.message)?t:"timeout",src:i}}),this.faviconSrc.dispatch(void 0)};t.addDestroyHandler(q({element:n,eventName:"error",listener:r})),n.src=i;const a=setTimeout(r,3e3)}}var l;this.showTitleAndBody.dispatch(Xa(r.vastAd)),this.bannerFlags.dispatch(r.vastAd.bannerFlags),t.packshotStartLatch.subscribe((()=>{this.isPackshotPlaying.dispatch(!0)})),this.currentViewerProductType.dispatch(r.vastAd.productType),this.isSurveyCreative.dispatch(Hi(r.vastAd)),this.isBrandliftSurveyCreative.dispatch(!!Hi(l=r.vastAd)&&Yt(l.adParametersObject)),this.adTitleParameters.dispatch(r.vastAd.adTitleParameters),this.adFoxAdTuneParameters.dispatch(r.vastAd.adTune),this.initCreativeType(t),this.shouldShowSkipButton.dispatch({shouldShowSkipButton:!this.isSurveyCreative.getValue()})})),this.onAdMediaEnd.add((()=>{this.isCreativeWithOwnControls.dispatch(!1),this.adSystemType.dispatch(void 0),this.contentAfterAdPod.dispatch(op),this.vastAdControlsSettings.dispatch(void 0),this.themeEmptyParameters.dispatch(void 0),this.showTitleAndBody.dispatch(void 0),this.bannerFlags.dispatch(void 0),this.isPackshotPlaying.dispatch(!1),this.adVideoIsBuffering.dispatch(!1),this.currentViewerProductType.dispatch(void 0),this.isSurveyCreative.dispatch(!1),this.isBrandliftSurveyCreative.dispatch(!1),this.adTitleParameters.dispatch(void 0),this.adFoxAdTuneParameters.dispatch(void 0),this.shouldShowSkipButton.dispatch({shouldShowSkipButton:!1})})),this.onAdPodStartRequest.add((e=>{const{mediaAd:t}=e,{vastAd:i}=t;this.socialAdvertising.dispatch(function(e){var t;return!0===(null==(t=e.adParametersObject)?void 0:t.socialAdvertising)}(i));const{abuseUrl:o}=i;o&&this.abuseParameters.dispatch({abuseUrl:o,legalText:i.legalText})})),this.onBeforeAdStart.add((()=>{this.slotParameters.element.appendChild(this.creativesLayoutContainer),this.slotParameters.element.appendChild(this.skinContainer),this.addDestroyHandler((()=>{l(this.creativesLayoutContainer),l(this.skinContainer)}))})),"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ENABLE_INTERSECTION_OBSERVER_TRACK_VISIBILITY_REPORTS")&&this.onBeforeAdStart.addOne(this.setupTrackVisibilityReporting),this.onBeforeAdStart.addOne((()=>{const e=Date.now();let t;const i=()=>{void 0!==t&&(oc("cancel slow start timeout"),clearTimeout(t),t=void 0)};t=setTimeout((()=>{const t=Date.now()-e;oc("mark slow start, actual passed time=["+t+"]ms"),this.stats.log({name:"AdSlowStart",data:{actualTime:t}}),this.adSlowStart.dispatch(!0)}),1e3),this.onAdStart.addOne((()=>{i()})),this.addDestroyHandler((()=>{i()})),this.autoplayAbilityResult.add((e=>{let{autoplayAbility:t}=e;"restricted"===t&&this.onAdStartRejected.dispatch(void 0),"muted"===t&&this.videoNodeController.setMuted(!0)}))})),this.onAdMediaStart.add((e=>{let{viewer:t}=e;this.adPodBackground.dispatch(t.adPodViewerPlaybackParams.background)})),this.onAdMediaEnd.add((()=>{this.adPodBackground.dispatch(void 0)})),this.addDestroyHandler((e=>{if(this.isFinished=!0,this.playingState.dispatch("end"),Jl(this.viewersList,((t,i)=>{if("unload"===e.reason)return void t.destroy({reason:"unload",details:void 0});const o=this.adPodDestroyReasonObjects[i];void 0===o?t.destroy({reason:"destroy",details:void 0}):t.destroy(o)})),this.viewersList.length=0,this.adBlockIdentification.removeAll(),this.adVolume.removeAll(),this.volumeButtonCollapseProgress.removeAll(),this.volumeStatus.removeAll(),b.removeAll(),this.slotParameters.size.removeAll(),this.visibilitySlotParameters.visibilityRatio.removeAll(),this.visibilitySlotParameters.size.removeAll(),this.videoContentSize.removeAll(),this.timeToSkip.removeAll(),this.skinControlsHideReasons.removeAll(),this.abuseParameters.removeAll(),this.playingState.removeAll(),this.onAdStop.removeAll(),this.onAdPodPlayAdMedia.removeAll(),this.onAdPodStart.removeAll(),this.onAdPodPause.removeAll(),this.onAdPodResume.removeAll(),this.onAdPodComplete.removeAll(),this.onAdPodClose.removeAll(),this.onAdInteraction.removeAll(),this.adPodDuration.removeAll(),this.adPodRemainingTime.removeAll(),this.adHasBeenUnmuted.removeAll(),this.onBeforeAdStart.removeAll(),this.onAdStart.removeAll(),this.onAdMediaStart.removeAll(),this.onAdMediaEnd.removeAll(),this.onAdEnd.removeAll(),this.onReady.removeAll(),this.adContentSize.removeAll(),this.adSlowStart.removeAll(),this.adMediaState.removeAll(),this.adTitleParameters.removeAll(),this.adFoxAdTuneParameters.removeAll(),this.adVolume.removeAll(),this.autoplayAbilityResult.removeAll(),this.currentViewer){if(this.currentViewer.isCreativeStartRequested.getValue()){const e=this.currentViewer.mediaAd.adBreak.adType;this.onAdMediaEnd.dispatch({adType:e})}this.currentViewer.destroy({reason:"destroy",details:void 0}),this.currentViewer=void 0}this.videoNodeController.destroy(),l(this.nativeControlsHideStyle)})),this.addDestroyHandler(on([this.vastAdControlsSettings,this.abuseParameters,this.abuseDisplayStatus],Wa,(e=>this.adPodCloseState.dispatch(e)))),this.adPodCloseState.add((e=>{let{isCloseAvailable:t}=e;return this.adTuneState.dispatch({isAvailable:t})})),this.onAdPodPlayAdMedia.add((e=>{let{viewer:t}=e;this.adPodCurrentSubtitles.dispatch([]);const n=(e=>{const{adParametersObject:t}=e;if(!o(t))return;if(!o(t.subtitles))return;const{vtt:n}=t.subtitles;return i(n)?n:void 0})(t.mediaAd.vastAd);let r;if(n)try{r=new Xf(n)}catch(Bv){this.stats.log({name:"SubtitleProviderInitializationError",data:{message:Bv.message}})}dg||t.addDestroyHandler(on([this.adPodRemainingTime,this.adPodDuration,this.isPackshotPlaying],((e,t,i)=>({remainingTime:e,duration:t,isPackshotPlaying:i})),(e=>{let{remainingTime:t,duration:i,isPackshotPlaying:o}=e;const n=Math.max(0,i-t);if(o)this.adPodCurrentSubtitles.dispatch([]);else if(r){const e=r.findCuesByCurrentTime(n);this.adPodCurrentSubtitles.dispatch(e)}})))}));const{skinContainer:P,creativesLayoutContainer:w}=this.prepareContainersToAppend();this.skinContainer=P,this.creativesLayoutContainer=w,this.prepareSkin(),this.addDestroyHandler(Q((()=>{this.destroy({reason:"unload",details:void 0})}),Ql)),this.addDestroyHandler((()=>{this.areAllAdPodsCompleted()&&this.onAllAdPodComplete.dispatch(void 0),this.lastMediaRetained.dispatch(this.isLastAdPodRetainedMedia())})),this.addDestroyHandler((e=>{this.onDestroy_PUBLIC_DO_NOT_USE.dispatch(e),this.onDestroy_PUBLIC_DO_NOT_USE.removeAll()})),this.isFullscreen.dispatch(sn(window,s)),this.addDestroyHandler(((e,t)=>{if(Yf.has(t)){const i=Yf.get(t);null==i||i.tasks.push(e)}else{const i=()=>{const e=Yf.get(t);e&&(j(e.tasks),e.timeoutId=window.setTimeout(i,t))};Yf.set(t,{timeoutId:window.setTimeout(i,t),tasks:[e]})}return()=>{const i=Yf.get(t);if(!i)return;const{timeoutId:o,tasks:n}=i,r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&(window.clearTimeout(o),Yf.delete(t))}})((()=>{const e=sn(window,s);this.isFullscreen.dispatch(e)}),1e3)),this.watchDocumentVisibility(),this.onAdPodStartRequest.add((e=>{const t=e.getVideoSlotClickUrl();this.videoSlotClickUrl.dispatch(t)})),this.addDestroyHandler((()=>{this.videoSlotClickUrl.dispatch(void 0)})),this.initAdSequence()}prepareContainersToAppend(){return{skinContainer:this.slotParameters.document.createElement("div"),creativesLayoutContainer:this.slotParameters.document.createElement("div")}}async prepareToPlayAd(e){const t=this.onReady.promise(),i=this.onAdEnd.promise();this.pause(),this.showAd(e),await Promise.race([t,i.then((()=>{throw new Ml({code:"AD_STOPPED_BEFORE_READY_TO_PLAY",details:void 0})}))])}showAd(e){var t;const i=Date.now(),o=In(this.videoNode)?$o(this.videoNode):void 0;if(!1===o){const e=this.slotParameters.element,t=Rl(e)?$o(e):void 0;return this.stats.error({error:new Ml({code:"WRAPPER_OR_VIDEO_NODE_NOT_IN_DOM",details:{videoNodeInDom:o,wrapperInDom:t}})}),Promise.resolve()}if(!e.length)return this.stats.error({error:new Ml({code:"NO_AD_PODS_TO_PLAY_IN_SHOW_AD_METHOD",details:{config:this.playbackParameters}})}),Promise.resolve();this.showAdCounter++,this.showAdCounter>1&&this.stats.log({name:"CallShowAdMultipleTimes"});const{adBreak:n,adConfig:r}=e[0];this.adBlockIdentification.dispatch({partnerId:r.partnerId,impId:null!=(t=r.impId)?t:n.impId,adType:n.adType}),this.isFinished=!1;const a=new _S(this.slotParameters.window);let s=-1,l=-1;return new Promise(((t,o)=>{this.viewersList=sc(e,((t,i)=>{let o;t.vastAd.trackingEvents=Pt(t.vastAd.trackingEvents,this.playbackParameters.trackingEvents);const n=t.getJSMediaFile();o=!!n&&Fy(n.url);const r={adDisplayController:this,mediaAd:t,adPodViewerPlaybackParams:Ea({playbackParameters:this.playbackParameters,vastAd:t.vastAd,adBreakType:t.adBreak.adType,isYandexAdCreative:o}),enableInfinityPackshot:!0===this.playbackParameters.enableInfinityPackshot&&i===e.length-1,stats:this.stats,ecomShopState:this.ecomShopState},a=new Tf(r);return a.adVideoIsBuffering.add((e=>this.adVideoIsBuffering.dispatch(e))),a.onImpression.add(this.onAdPodImpression),a.onFirstQuartile.add(this.onAdPodFirstQuartile),a.onMidpoint.add(this.onAdPodMidpoint),a.onThirdQuartile.add(this.onAdPodThirdQuartile),a.onAdInteraction.add(this.onAdInteractionWrapper),a})),this.adPodsCount.dispatch(this.viewersList.length),this.initBackground(this.viewersList),this.emitAdEnd=t,this.onBeforeAdStart.dispatch({adType:n.adType}),this.onAdPodStart.addOne((()=>{this.stats.log({name:"AdStarted",data:{config:this.playbackParameters},values:{startTime:Date.now()-i}}),s=a.getCurrentAvgFps()})),this.onAdPodImpression.add(A((()=>{l=a.getCurrentAvgFps()}))),this.viewersList[0].addDestroyHandler((()=>{this.stats.log({name:"FirstAdPodAvgFps",values:{startFps:s,impressionFps:l,stopFps:a.getCurrentAvgFps()}}),a.destroy()})),this.startAdPlayback(n.adType).then((()=>t())).catch((e=>{this.isFinished=!0,this.playingState.dispatch("end"),this.onAdMediaEnd.dispatch({adType:n.adType}),o(e)})),this.addDestroyHandler(this.subscribeInteractionHandlers())})).catch((e=>{Ki(e),this.stats.errorToStats(e)})).then((()=>{this.isFinished=!0,this.playingState.dispatch("end"),this.onAdEnd.dispatch({adType:n.adType}),this.destroyBlur()}))}getAdPlacementOptions(){const{videoNode:e,currentViewer:t}=this;let i;t&&(i=t.mediaAd.getAdPodId());let o,n,r,a=0;return t&&(a=t.getBufferingTime()),t&&(o=t.mediaAd.adBreak.adType),t&&(n=Wr(t.mediaAd)),t&&(r=t.mediaAd.vastAd.productType),cn({win:this.slotParameters.window,slotSize:this.slotParameters.size.getValue(),slotVisibilityRatio:this.visibilitySlotParameters.visibilityRatio.getValue(),adPodId:i,videoNode:e,bufferingTime:a,adBreakType:o,adFormatType:n,productType:r})}setMuted(e){this.currentViewer?this.currentViewer.setMuted(e):this.videoNodeController.setMuted(e)}resizeAd(e,t,i){var o;void 0===i&&(i="normal"),null==(o=this.currentViewer)||o.resizeAd(e,t,i)}async play(){const{currentViewer:e}=this;return e?(e.startCreative({startStrategy:this.getAutoplay()?"startPlaying":"warmupOnly"}),new Promise(((t,i)=>{e.addDestroyHandler((e=>{const o=ba(e);o?i(o):t()}))}))):Promise.reject(new Error("VAS Error: play request without AdMedia"))}pause(){this.currentViewer?this.currentViewer.pause():this.isFinished||this.playingState.dispatch("pause")}resume(){this.currentViewer?this.currentViewer.resume():this.isFinished||this.playingState.dispatch("play")}destroyCurrentViewerIfneeded(e){this.currentViewer&&this.currentViewer.destroy({reason:e,details:void 0})}close(){this.destroyNextViewers("close"),this.destroyCurrentViewerIfneeded("close")}skipAllViewers(){this.destroyNextViewers("skip"),this.skipCurrentViewer(),this.destroyCurrentViewerIfneeded("skip")}skipCurrentViewer(){if(!this.currentViewer)return this.stop(),void this.stats.error({error:new Ml({code:"NO_AD_POD_TO_SKIP",details:void 0})});if(this.currentViewer.isDestroyed)this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_POD_AFTER_DESTROY",details:void 0})});else if(this.currentViewer.isStarted.getValue()){if(!this.isFinished)return this.currentViewer.getAdSkippableState()?void this.currentViewer.skipAd():((this.getCurrentViewerSkipDelay()||this.timeToSkip.getValue()>0)&&this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_POD_BEFORE_SKIPPABLE_STATE_CHANGE",details:void 0})}),void this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_NON_SKIPPABLE_AD_POD",details:void 0})}));this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_POD_AFTER_FINISH",details:void 0})})}else this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_POD_BEFORE_START",details:void 0})})}sendAdTuneTracking(e){let{actionId:t,reasonId:i,options:o}=e;const{abuseUrl:n}=this.abuseParameters.getValue();n||this.stats.error({error:new Ml({code:"ABUSE_CALLED_WITHOUT_URL",details:void 0})}),Yr({eventName:"close",trackingEventDetails:{},trackingUrls:[R(n,{"reason-id":""+i,"action-id":""+t},{override:!0})],options:this.getAdPlacementOptions(),sendBeaconParams:this.getSendBeaconParams(o),pixelsSource:"adParameters"})}stop(){this.isFinished=!0,this.playingState.dispatch("end"),this.onAdStop.dispatch(void 0),this.emitAdEnd&&this.emitAdEnd()}getAdWidth(){var e,t;return null!=(e=null==(t=this.currentViewer)?void 0:t.getAdWidth())?e:0}getAdHeight(){var e,t;return null!=(e=null==(t=this.currentViewer)?void 0:t.getAdHeight())?e:0}getCurrentContentType(){return this.currentViewer?this.currentViewer.contentType:void 0}getCurrentViewerSkipDelay(){return this.currentViewer?this.currentViewer.adPodViewerPlaybackParams.skipDelay:void 0}usesVideoNode(){if(this.currentViewer)return!this.currentViewer.mediaAd.getIsIndependentOnVideoElement()}getAdRemainingTime(){if(this.isFinished)return 0;if(this.currentViewer){let e=this.currentViewer.getAdRemainingTime();for(let t=this.getCurrentViewerIndex()+1;t<this.viewersList.length;t++)e+=this.viewersList[t].mediaAd.getDuration();return e}return this.getDuration()}getAdPodRemainingTime(){var e;if(this.isFinished)return 0;if(this.currentViewer)return this.currentViewer.getAdRemainingTime();const[t]=this.viewersList;return null!=(e=null==t?void 0:t.mediaAd.getDuration())?e:0}getCurrentTime(){return this.currentViewer?this.getCurrentViewerStartTime()+this.currentViewer.getCurrentTime():0}getAdPodDuration(){if(this.currentViewer){const e=this.currentViewer.getDuration();if(e>0)return e}return 0}getDuration(){let e=0;return Jl(this.viewersList,(t=>{const i=t.getDuration();i>0&&(e+=i)})),e}getPaused(){return this.currentViewer?"play"!==this.currentViewer.playingState.getValue():!!this.isFinished||"pause"===this.playingState.getValue()}getVolume(){return this.adVolume.getValue()}setVolume(e){this.adVolume.dispatch(e);const{currentViewer:t}=this;t?t.setVolume(e):this.videoNodeController.setVolume(e)}getMuted(){const{currentViewer:e}=this;return e?0===e.getVolume():this.videoNodeController.getMuted()}getAdVolumeAvailability(){return this.adVolumeAvailability.getValue()}setBlurDisplay(e){this.shouldBlurBeVisibleByApiLogic.dispatch(e)}getCurrentViewerIndex(){return this.currentViewer?Math.max(this.viewersList.indexOf(this.currentViewer),0):0}getViewersWithVideoCountBeforeCurrent(){let e=0;if(this.currentViewer)for(let t=0;t<this.viewersList.length;t++){const i=this.viewersList[t];if(i===this.currentViewer)break;i.mediaAd.getIsIndependentOnVideoElement()||e++}return e}getViewerLength(){return this.viewersList.length}disableResizeHandling(){this.shouldHandleResize=!1}enableResizeHandling(){const{width:e,height:t}=this.slotParameters.element.getBoundingClientRect();this.resizeAd(e,t),this.shouldHandleResize=!0}setSkinControlHideReason(e,t,i){this.skinControlsHideReasons.dispatch(((e,t,i,o)=>{const n=e[t];let r=n;return i?r=Vc(n,(e=>e!==o)):i||V(n,o)||(r=[...n],r.push(o)),Ya({},e,{[t]:r})})(this.skinControlsHideReasons.getValue(),e,t,i))}setPublicApiControlsSettings(e){if(!o(e)&&!1!==e&&void 0!==e){const t=new Ml({code:"INVALID_ARGUMENT_IN_SET_PUBLIC_API_CONTROLS",details:{argument:e}});throw this.stats.error({error:t}),B("setPublicApiControlsSettings: invalid input data, please check VAS documentation"),t}const t=this.publicApiControlsVisibility.getValue();let i;i=o(e)?_a({controlsVisibility:t},{controlsVisibility:e}).controlsVisibility:!1===e?pp:{},this.stats.log({name:"PublicSetControlVisibilityIsUsed",data:{previous:t,next:i}}),oc("AdDisplayController#setPublicApiControlsSettings: before=["+JSON.stringify(t)+"], after=["+i+"]"),this.publicApiControlsVisibility.dispatch(i)}areAllAdPodsCompleted(){return Rp(this.adPodDestroyReasonObjects,(e=>{let{reason:t}=e;return"complete"===t}))}isLastAdPodRetainedMedia(){const e=this.adPodDestroyReasonObjects[this.adPodDestroyReasonObjects.length-1];return!!Boolean(e)&&!!this.retainLastMediaAfterPlayback&&"complete"===e.reason&&e.details.canUseMediaAfterPlayback}getEcomAsAsset(){const e=this.ecomShopState.getValue();if(void 0===e.ecomShop)return;const t={ecomShopState:e,setEcomShopState:e=>{"boolean"===typeof e.isVisible&&this.ecomShopState.getValue().isVisible!==e.isVisible&&this.stats.log({name:"EcomProductsVisibilityChangedWithAssetsApi",data:{isVisible:e.isVisible}}),this.setEcomShopState(e,!0)},onEcomShopStateChange:d};return this.addDestroyHandler(this.ecomShopState.add((e=>{t.onEcomShopStateChange(e)}))),t}getAutoplay(){if(this.getViewersWithVideoCountBeforeCurrent()>0)return oc("autoplay=true due to subsequent viewer"),!0;if("restricted"===this.autoplayAbilityResult.getValue().autoplayAbility)return oc("autoplay=false due to requireUserGesture"),!1;const e=this.playingState.getValue();if("idle"!==e){const t="pause"!==e;return oc("autoplay=["+t+"] due to playingStateValue"),t}return oc("autoplay=true due to default"),!0}setVisibleNativeControls(e){e?l(this.nativeControlsHideStyle):(this.videoNode.controls=!1,this.nativeControlsHideStyle||(this.nativeControlsHideStyle=Cr(this.slotParameters.element,"\n                        #"+this.videoNode.id+"::-webkit-media-controls{\n                            display: none !important;\n                        }\n                    ")),document.head.appendChild(this.nativeControlsHideStyle))}closeAbuseScreen(){var e;this.pauseByOpenAbuseScreen.getValue()&&"inpage"!==(null==(e=this.adBlockIdentification.getValue())?void 0:e.adType)&&this.resume(),this.abuseDisplayStatus.dispatch("hidden")}trackError(e){this.currentViewer&&this.currentViewer.trackError(e)}initBackgroundColor(e){let t=d;this.addDestroyHandler((()=>t())),this.addDestroyHandler(this.adPodBackground.add((n=>{o(n)&&i(n.color)?t=Qo(e,{backgroundColor:n.color}):t()})))}initBackground(e){let{backgroundSlot:t}=this.playbackParameters;const i=Boolean(t);if(this.backgroundSlot?t=this.backgroundSlot:i||(t=function(e){if(!In(e))return;const{parentElement:t}=e;if(t)return t;Wc.error({error:new Ml({code:"NO_PARENT_ELEMENT_FOR_BACKGROUND",details:void 0})})}(this.videoNode)),!t)return void oc("BackgroundBlur container cannot be created");if(this.initBackgroundColor(t),!Gc(e,(e=>{let{adPodViewerPlaybackParams:t}=e;return"blur"===t.background})))return;if(oc("BackgroundBlur is presented in AdBreak"),!Mf)return void oc("BackgroundBlur is NOT supported");const o=new Wf({container:t,videoNode:this.videoNode,input:"AdDisplayController",statsLogFunction:this.stats.log});this.destroyBlur=()=>{o.destroy()},this.stats.log({name:"InitBackgroundBlur",data:{isBackgroundSlotFromConfig:i}}),this.addDestroyHandler(on([this.shouldBlurBeVisibleByApiLogic,this.adPodBackground,this.videoContentSize,this.slotParameters.size],((e,t,o,n)=>{if(!e)return!1;if(void 0===o)return!1;if("blur"!==t)return!1;if(i)return!0;const r=n.width/n.height,a=o.width/o.height-r;return Math.abs(a)>.1}),(e=>{o.setPlaying(e)}))),this.addDestroyHandler((()=>null==o?void 0:o.destroy()))}playAdMedia(e){let{adType:t,viewer:i,viewerIndex:o,nextViewer:n,completeCallback:r}=e;this.currentViewer=i,this.onAdPodStartRequest.dispatch(i),i.trackOnCreativeInit();let a=NaN;i.playingState.subscribeValueConditionOnce((e=>"play"===e),(()=>{a=Date.now()})),this.adContentSize.dispatch(i.mediaAd.getAdContentDimensions()),i.isStarted.addOne((()=>{this.adContentSize.dispatch(i.getAdContentSize())})),i.addDestroyHandler((()=>{this.adContentSize.dispatch(void 0)})),i.isStarted.add((()=>{if(isNaN(a))this.stats.error({error:new Ml({code:"AdPodStartWithoutPlayRequest",details:void 0})});else{const e=void 0!==i.mediaAd.vastAd.ecomShop;this.stats.log({name:"AdPodStart",values:{startTime:Date.now()-a},data:{src:i.getScriptSrc(),config:this.playbackParameters,playRequestTime:String(a),adPodId:i.mediaAd.getAdPodId(),position:i.mediaAd.vastAd.parseIndex,bidreqid:i.mediaAd.vastAd.bidreqid,campaignid:i.mediaAd.vastAd.campaignid,pageId:i.mediaAd.vastAd.pageId,impId:i.mediaAd.vastAd.impId,vmapRequestId:i.mediaAd.vastAd.vmapRequestId,hasEcomProducts:e},sensors:{showTitleAndBody:String(Xa(i.mediaAd.vastAd)),hasEcomProducts:e}})}})),this.onAdPodPlayAdMedia.dispatch({adType:t,viewer:i,viewerIndex:o,nextViewer:n});const s=i.playingState.getValue();"idle"!==s&&this.stats.error({error:new Ml({code:"VIEWER_PLAYING_STATE_INITIALIZED_BEFORE_START",details:{playingState:s}})}),i.playingState.subscribeValueCondition((e=>"end"!==e),(e=>{this.currentViewer===i?this.playingState.dispatch(e):this.stats.error({error:new Ml({code:"VIEWER_PLAYING_STATE_DISPATCHED_OUT_OF_LIFECYCLE",details:{playingState:e}})})})),i.addDestroyHandler((e=>{const o=ba(e);o&&(this.trackError(o),this.stats.error({error:o}),Ki("AdPod playing error",o),this.onAdPodError.dispatch({error:o,adPodId:i.mediaAd.getAdPodId()})),this.currentViewer=void 0,this.adPodDestroyReasonObjects.push(e),this.onAdMediaEnd.dispatch({adType:t}),r()})),i.startCreative({startStrategy:this.getAutoplay()?"startPlaying":"warmupOnly"})}getCurrentViewerStartTime(){const e=this.getCurrentViewerIndex();let t=0;for(let i=0;i<e;i++)t+=this.viewersList[i].getDuration();return t}async startAdPlayback(e){const{videoNode:t}=this;if(In(t)){const e=function(e){const{controls:t}=e,i=e.getAttribute("poster"),o={loop:e.getAttribute("loop"),autoplay:e.getAttribute("autoplay"),controls:e.getAttribute("controls"),height:e.getAttribute("height"),poster:""===i?null:i,preload:e.getAttribute("preload"),width:e.getAttribute("width"),style:e.getAttribute("style")},n=Kf(e),{parentElement:r}=e;return A((()=>{e.controls=t,function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),n(),Ze(e,o),r&&r!==e.parentElement&&Wc.error({error:new Ml({code:"VIDEO_NODE_DOM_POSITION_CHANGED",details:{hasParentAfterChange:Boolean(e.parentElement)}})})}))}(t);this.onBeforeDestroy.addOne((t=>{let{reason:i}=t;"unload"!==i&&e()}));const i=function(e){const{ownerDocument:t}=e;return Boolean(t)?"false"===e.getAttribute("pip")||function(e,t){const{pictureInPictureElement:i}=e;if(i)return i;if(t){if(t.webkitPresentationMode===jf.pictureInPicture)return t;if(t.broughtOut)return t}return null}(t,e)===e?d:Na(e,{pip:"false"}):d}(t);this.onBeforeDestroy.addOne(i);const o=function(e){if(!In(e))return d;const t=e.getAttribute("src")||e.src||null,i=sc(W(e.getElementsByTagName("source")),(e=>({src:e.getAttribute("src"),type:e.getAttribute("type")})));return A((()=>{t?e.setAttribute("src",t):e.removeAttribute("src"),Jl(i,(t=>{const i=e.ownerDocument.createElement("source");e.appendChild(i),b(t,((e,t)=>{i.setAttribute(t,String(e))}))})),Ua(e,(()=>{e.load()}))}))}(t);this.onBeforeDestroy.addOne((e=>{let{reason:t}=e;this.isLastAdPodRetainedMedia()||"unload"!==t&&o()})),this.onBeforeDestroy.addOne(this.onAdPodStartRequest.add((()=>{Kf(t)})))}const i=Date.now();let o,n;const r=this.checkAutoplayAbility();if(this.videoNode,r?(o="sync",n=r):(o="async",n=await this.requestAutoplayAbility()),this.isFinished)throw new Ml({code:"AD_FINISHED_DURING_RAA",details:void 0});this.stats.log({name:"RequestAutoplayAbility",values:{duration:Date.now()-i},sensors:{strategy:o,method:n.detectionMethod,result:n.autoplayAbility},data:{config:this.playbackParameters,autoplayAbility:n,saveData:y((()=>{var e;return null==(e=navigator.connection)?void 0:e.saveData}))}}),this.autoplayAbilityResult.dispatch(n);const a=A((()=>{this.onReady.dispatch(void 0)})),s=A((()=>{this.onAdStart.dispatch({adType:e})}));return Jl(this.viewersList,((t,i)=>{t.onComplete.addOne((t=>{let{isInfinityPackshotEnabled:i}=t;this.onAdPodComplete.dispatch({adType:e}),i&&this.onAdMediaEnd.dispatch({adType:e})})),t.addDestroyHandler((t=>{let{reason:i}=t;"skip"===i?this.onAdSkipped.dispatch({adType:e}):"close"===i&&this.onAdPodClose.dispatch(void 0)})),t.onReady.addOne(a),t.isStarted.addOne(s),t.isStarted.add((()=>{this.onAdPodStart.dispatch(void 0)})),t.onPause.add((()=>{this.onAdPodPause.dispatch(void 0)})),t.onResume.add((()=>{this.onAdPodResume.dispatch(void 0)})),t.onVolumeChange.add((()=>{this.adVolume.dispatch(t.getVolume())})),t.isStarted.addOne((()=>{this.adVolume.dispatch(t.getVolume())}));const{skipDelay:o}=t.adPodViewerPlaybackParams;var n;t.isStarted.addOne((()=>{this.onAdMediaStart.dispatch({viewer:t,adType:e}),this.adPodDuration.dispatch(t.getDuration()),this.updateTimeToSkip(t,o,i)})),t.addDestroyHandler(function(e){let{win:t,adPodDuration:i,adPodRemainingTime:o,playingState:n,isStarted:r,isBuffering:a,callback:s}=e;const l=new fv,c=new hh(-1);return l.subscribe((()=>c.removeAll)),r.addOne((()=>{const e=new R_({win:t,duration:i.getValue()*Mm,callback:e=>{const t=ko(e,0,1);s(t)},onFinish:d});c.add((t=>{Bt(t)&&e.adjustPosition(t)})),l.subscribe((()=>{e.stop()})),l.subscribe(on([o,i],((e,t)=>Bt(e)&&he(t)?(t-e)/t:-1),(e=>{c.dispatch(e)}))),l.subscribe(on([c,n,a],((e,t,i)=>Bt(e)&&"play"===t&&!i),(t=>{t?e.start():e.stop()})))})),()=>{l.dispatch(void 0)}}({win:this.slotParameters.window,adPodDuration:this.adPodDuration,adPodRemainingTime:this.adPodRemainingTime,playingState:this.playingState,isStarted:t.isStarted,isBuffering:this.adVideoIsBuffering,callback:e=>{this.skinAnimationProgress.dispatch(e)}})),t.isStarted.add((()=>{t.addDestroyHandler(this.videoNodeController.onBufferingAfterPlay.add((()=>{this.isPackshotPlaying.getValue()||this.adMediaState.dispatch({name:"stalled"})}))),t.addDestroyHandler(this.videoNodeController.playingState.add((e=>{"play"===e&&this.adMediaState.dispatch({name:"playing"})})))})),t.addDestroyHandler((()=>{this.adMediaState.dispatch({name:"idle"})})),t.addDestroyHandler((()=>{this.adPodRemainingTime.dispatch(-2),this.skinAnimationProgress.dispatch(0)})),t.playbackPosition.add((e=>{let{duration:t,remainingTime:i}=e;this.adPodRemainingTime.dispatch(i),this.adPodDuration.dispatch(t)})),t.onClickThrough.add((e=>this.onClickThrough.dispatch(e))),!(n=t).isVpaidAdPodViewer()||n.mediaAd.vastAd.imhoParams||n.mediaAd.getIsYandexCreative()||Fi(n.mediaAd.vastAd)?t.isStarted.addOne((()=>{t.playbackPosition.add((()=>{this.updateTimeToSkip(t,o,i)}))})):t.onAdSkippableStateChange.add((e=>{this.timeToSkipComputed.dispatch(e?0:ly)}))})),new Promise((t=>{this.playAdViewers(e,(()=>{t([])}))}))}playAdViewers(e,t){this.adPodDestroyReasonObjects=[];const i=sc(this.viewersList,((t,i)=>{const o=this.viewersList[i+1];return n=>{if(this.timeToSkipComputed.dispatch(ly),this.timeToSkipAdCreative.dispatch(void 0),this.isFinished){const e=new Ml({code:"AD_BREAK_IS_STOPPED",details:void 0});return t.mediaAd.trackError(e),this.adPodDestroyReasonObjects.push({reason:"error",details:e}),n()}const r=this.getAdPodContainerSizeError(t);if(r)return t.mediaAd.trackError(r),this.onAdPodError.dispatch({error:r,adPodId:t.mediaAd.getAdPodId()}),this.adPodDestroyReasonObjects.push({reason:"error",details:r}),B('You are using unplayable "slot" sizes, check passed element dimensions.'),n();this.adVolume.dispatch(this.videoNodeController.getVolume()),this.adVolumeAvailability.dispatch(ya(t.mediaAd.vastAd)),this.playingAdPodIndex.dispatch(i),this.playAdMedia({adType:e,viewer:t,viewerIndex:i,nextViewer:o,completeCallback:n})}}));let o=-1;!function e(){o++;const n=i[o];void 0===n?t():n(e)}()}getAdPodContainerSizeError(e){if(!e.mediaAd.getIsYandexCreative())return;const{size:t,element:i}=this.visibilitySlotParameters;if(nn(t.getValue(),Mg))return;const o=i.getBoundingClientRect();if(nn(o,Mg))return;const n=o.width<.1||o.height<.1,a="none"===r(i).display;let s;s=n?a?"SLOT_DISPLAY_NONE":"SLOT_ZERO_SIZE":"SLOT_SMALL_SIZE";const l=e.mediaAd.getAdContentDimensions();return new Ml({code:s,details:{adPodId:e.mediaAd.getAdPodId(),slotSize:{width:o.width,height:o.height},adContentDimensions:l,usesVisibilitySlot:Boolean(this.visibilitySlotParameters)}})}checkAutoplayAbility(){if(Rp(this.viewersList,(e=>e.mediaAd.getIsIndependentOnVideoElement())))return oc("autoplayAbility=positive for independentOnVideoElement ad"),{autoplayAbility:"allowed",detectionMethod:"IndependentOnVideo"};const{videoSlotCanAutoPlay:e}=this.playbackParameters;if("boolean"===typeof e)return oc("autoplayAbility=["+e+"] due to videoSlotCanAutoPlay"),e?{autoplayAbility:"allowed",detectionMethod:"PositiveVideoSlotCanAutoplay"}:{autoplayAbility:"restricted",detectionMethod:"NegativeVideoSlotCanAutoplay"};re(this.slotParameters.window)&&!this.videoNode.hasAttribute("playsinline")&&(this.stats.log({name:"NoPlaysinlineOnVideoTagInTouchScreenDeviceForRAA"}),B('Attribute "playsinline" is NOT set on the <video/> element, this may cause the inability to autoplay'));const t=function(e){if(!In(e))return{autoplayAbility:"allowed",detectionMethod:"FakeVideoElement"};const t=function(e){const{ownerDocument:t}=e;if(!Boolean(t))return;const{defaultView:i}=t;return i||void 0}(e);if(!t)return{autoplayAbility:"allowed",detectionMethod:"NoWinForVideoElement"};const i=function(e){const t=e.navigator;if(!t)return;const{userActivation:i}=t;if(!o(i))return;const{isActive:n,hasBeenActive:r}=i;return{isActive:n,hasBeenActive:r}}(t);return i&&i.hasBeenActive?{autoplayAbility:"allowed",detectionMethod:"WindowHasBeenActive"}:"boolean"===typeof e.allowedToPlay?{autoplayAbility:Ga(e),detectionMethod:"YaBroAllowedToPlay"}:(e=>Oa(e).toLowerCase().indexOf("web0s")>-1)(t)?{autoplayAbility:"allowed",detectionMethod:"WebOSSmartTV"}:(e=>{const t=Oa(e).toLowerCase();return t.indexOf("maple2012")>-1&&t.indexOf("smarttv")>-1})(t)?{autoplayAbility:"allowed",detectionMethod:"OrsaySmartTV"}:(e=>{const t=Oa(e).toLowerCase();return t.indexOf("playstation")>-1&&t.indexOf("webmaf")>-1})(t)?{autoplayAbility:"allowed",detectionMethod:"PlayStationSmartTV"}:e.isAVPlay?{autoplayAbility:"allowed",detectionMethod:"TizenAVPlay"}:(e=>Oa(e).toLowerCase().indexOf("tizen")>-1)(t)?(e=>{const t=function(e){const t=Oa(e).match(/Tizen ([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,i,o]=t;return{major:parseInt(i,10),minor:parseInt(o,10)}}(e);return 2===t.major&&3===t.minor})(t)?{autoplayAbility:"restricted",detectionMethod:"Tizen23SmartTV"}:{autoplayAbility:"allowed",detectionMethod:"TizenSmartTVModern"}:Ia(t)&&ka(t)<=9?{autoplayAbility:"restricted",detectionMethod:"IOS9OrLess"}:void 0}(this.videoNode);return t?(oc("autoplayAbility=["+t.autoplayAbility+"] by sync detect method=["+t.detectionMethod+"]"),t):void 0}requestAutoplayAbility(){oc("start autoplay ability request");const e=Date.now(),{promise:t,stop:i}=function(e,t){const i=new pS(e,t);return{promise:i.promise,stop:i.stop}}(this.videoNode,{checkSoundEnabled:!this.getMuted()});this.addDestroyHandler(i);let o=!1;return new Promise((n=>{t.then((e=>{o=!0,oc("autoplayAbility=["+JSON.stringify(e)+"]"),n(e)})).catch((()=>{o=!0})),"idle"===this.playingState.getValue()&&this.playingState.addOne((t=>{o||(this.stats.log({name:"RequestAutoplayAbilityStoppedByPlayingState",values:{duration:Date.now()-e},data:{config:this.playbackParameters,nextState:t}}),oc("RAA stopped by playingState=["+t+"]"),i(),n({autoplayAbility:"allowed",detectionMethod:"ExternalMethodCall",detectionDetails:{nextState:t}}))}))}))}destroyNextViewers(e){const{viewersList:t,currentViewer:i}=this;if(i)for(let o=this.getCurrentViewerIndex()+1;o<t.length;o++)t[o].trackVastEvent(e,{});this.stop()}startVolumeButtonProgress(){(e=>{let{win:t,callback:i,addDestroyHandler:o}=e;const n=new R_({win:t,duration:250,callback:e=>{const t=ko(e,0,1);i(t),1===t&&n.stop()},onFinish:d});o((()=>n.stop())),n.start()})({win:this.slotParameters.window,callback:e=>{this.volumeButtonCollapseProgress.dispatch(e)},addDestroyHandler:e=>this.addDestroyHandler(e)})}isNeedToShowVolumeButtonText(){return"DISABLE"!==cg&&"small"!==wa(this.slotParameters.size.getValue())}updateTimeToSkip(e,t,i){const o=function(e){let{remainingTime:t,duration:i,skipDelay:o}=e;if(0===o)return ly;if(o>i-2)return ly;if(!Bt(t))return ly;const n=i-t;return o<=n?0:o-n}({remainingTime:e.getAdRemainingTime(),duration:e.getDuration(),skipDelay:t});this.timeToSkipComputed.dispatch(o)}watchDocumentVisibility(){const e=this.visibilitySlotParameters.element.ownerDocument;this.documentVisibility.dispatch(de(e)),this.addDestroyHandler(Xr(e,(e=>this.documentVisibility.dispatch(e)))),this.addDestroyHandler((()=>{this.documentVisibility.removeAll()}))}initAdSequence(){const{adSequence:e}=this.playbackParameters;e?this.displayAdSequence.dispatch(e):this.addDestroyHandler(on([this.playingAdPodIndex,this.adPodsCount],((e,t)=>({index:e,count:t})),this.displayAdSequence.dispatch.bind(this.displayAdSequence)))}initCreativeType(e){const{mediaAd:t}=e,i=Wr(t);let o;"survey"===i?o="survey":ja(i,e.getVideoSlotClickUrl())?o="fullyClickable":oa(t.vastAd)&&(o="themeEmpty"),this.creativeType.dispatch(o)}}const bS=Gc([/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i],(e=>null!==navigator.userAgent.match(e))),CS=2;class PS extends Hc{constructor(e,t){let{considerDocumentVisibility:i=!0,numberOfMeasurementSteps:o=CS,enableTrackVisibility:n=!1}=void 0===t?{}:t;super(),this.totalVisibilityValueSignal=new hh(!1),this.documentVisibilityValueSignal=new hh(!0),this.isElementReachableByTrackVisibilityValueSignal=new hh(!0),this.recalculateVisibility=()=>{if(this.isDestroyed||!$o(this.element))return;const e=$a(this.element);this.elementVisibilityRatioValueSignal.dispatch(e)},this.element=e;const r=Math.max(o,CS),a=e.ownerDocument.defaultView;this.elementVisibilityRatioValueSignal=new hh(0);const s=a.IntersectionObserver;Boolean(s)?this.startIntersectionObserver(s,r):this.startVisibilityCheckInterval(a),n&&Boolean(s)&&vS(a)&&this.startCheckVisibilityWithTrackVisibility(a),i&&this.startObservingDocumentVisibility(a);const{valueSignal:l,teardown:d}=Cn([this.elementVisibilityRatioValueSignal,this.documentVisibilityValueSignal,this.isElementReachableByTrackVisibilityValueSignal],((e,t,i)=>i&&t?e:0));l.add((e=>{this.totalVisibilityValueSignal.dispatch(e>=Jg)})),this.totalVisibilityRatioValueSignal=l,this.addDestroyHandler((()=>{this.totalVisibilityValueSignal.removeAll(),d(),this.elementVisibilityRatioValueSignal.removeAll(),this.documentVisibilityValueSignal.removeAll(),this.isElementReachableByTrackVisibilityValueSignal.removeAll()}))}startIntersectionObserver(e,t){const i=[Jg],o=1/t;for(let r=1;r<t;r++)i.push(r*o);const n=new e((e=>{const t=e[e.length-1],{intersectionRatio:i}=t;this.elementVisibilityRatioValueSignal.dispatch(i)}),{threshold:i});n.observe(this.element),this.addDestroyHandler((()=>{n.disconnect()}))}startVisibilityCheckInterval(e){const t=_o(this.recalculateVisibility);this.addDestroyHandler(t);const i=e.setTimeout(this.recalculateVisibility,0);this.addDestroyHandler((()=>{e.clearTimeout(i)}))}startCheckVisibilityWithTrackVisibility(e){const{element:t}=this,{teardown:i,visualVisibilitySignal:o}=gS({element:t,win:e});this.addDestroyHandler(i),o.add(this.isElementReachableByTrackVisibilityValueSignal)}startObservingDocumentVisibility(e){const t=e.setTimeout((()=>{const t=e.document,i=de(t);this.documentVisibilityValueSignal.dispatch(i);const o=Xr(t,(e=>{this.documentVisibilityValueSignal.dispatch(e)}));this.addDestroyHandler(o)}),0);this.addDestroyHandler((()=>{e.clearTimeout(t)}))}}class wS extends Hc{constructor(e){var t;let{videoSlot:i,layoutSlot:o,mediaAds:n,playbackParameters:r,skinParameters:a,stats:s}=e;if(super(),this.pauseAd=this.createPlaybackMethod("pauseAd",(()=>{oc("[AdPlaybackController]: method pauseAd() is called"),this.adDisplayController.pause()})),this.resumeAd=this.createPlaybackMethod("resumeAd",(()=>{oc("[AdPlaybackController]: method resumeAd() is called"),this.adDisplayController.resume()})),this.isPlayAdCalled=new fv,this.getPublicInstance=()=>({playAd:this.playAd,warmupAd:this.warmupAd,stopAd:this.stopAd,pauseAd:this.pauseAd,getAdPlayingState:this.getAdPlayingState,resumeAd:this.resumeAd,subscribe:this.subscribe,skipAd:this.skipAd,getAdSkippableState:this.getAdSkippableState,getAdPodTimeToSkip:this.getAdPodTimeToSkip,getAdPodCloseState:this.getAdPodCloseState,getAdVolume:this.getAdVolume,setAdVolume:this.setAdVolume,getAdVolumeAvailabilityState:this.getAdVolumeAvailabilityState,getAdRemainingTime:this.getAdRemainingTime,getAdPodRemainingTime:this.getAdPodRemainingTime,getAdDuration:this.getAdDuration,getAdPodDuration:this.getAdPodDuration,getAdContentSize:this.getAdContentSize,getAdMediaState:this.getAdMediaState,getMediaElementStatusAfterAdStopped:this.getMediaElementStatusAfterAdStopped,getAdPodAdTuneState:this.getAdPodAdTuneState,getCurrentViewerAssets:this.getCurrentViewerAssets,setControlsVisibility:this.setControlsVisibility}),this.getAdMediaState=()=>this.adDisplayController.adMediaState.getValue(),this.getAdContentSize=()=>this.adDisplayController.adContentSize.getValue(),this.setControlsVisibility=e=>this.adDisplayController.setPublicApiControlsSettings(e),this.getMediaElementStatusAfterAdStopped=()=>{if(this.isDestroyed)return{lastMediaRetained:Boolean(this.adDisplayController.lastMediaRetained.getValue())}},this.playAd=()=>{oc("[AdPlaybackController]: method playAd() is called"),this.isPlayAdCalled.getDispatched()?Re(new Ml({code:"ATTEMPT_TO_PLAY_AD_SECOND_TIME",details:void 0})):(this.isPlayAdCalled.dispatch(void 0),this.adDisplayController.showAd(this.mediaAds).then((()=>{this.destroy("adComplete")})).catch(J))},this.warmupAd=()=>{this.playAd(),this.pauseAd()},this.stopAd=()=>{oc("[AdPlaybackController]: method stopAd() is called"),this.destroy("stopAd")},this.getAdPlayingState=()=>this.isPlayAdCalled.getDispatched()?this.adDisplayController.isFinished?"end":this.adDisplayController.playingState.getValue():"idle",this.getAdSkippableState=()=>this.adDisplayController.adSkippableState.getValue(),this.getAdPodTimeToSkip=()=>!this.isPlayAdCalled.getDispatched()||this.isDestroyed?ly:this.adDisplayController.timeToSkip.getValue(),this.getAdPodCloseState=()=>this.adDisplayController.adPodCloseState.getValue(),this.getAdPodAdTuneState=()=>this.adDisplayController.adTuneState.getValue(),this.getAdVolume=()=>!this.isPlayAdCalled.getDispatched()||this.isDestroyed?0:this.adDisplayController.getVolume(),this.setAdVolume=e=>{this.isPlayAdCalled.getDispatched()&&!this.isDestroyed&&(e<0||e>1?this.stats.error({error:new Ml({code:"VOLUME_IS_OUT_OF_RANGE",details:{volume:e}})}):0===e?this.adDisplayController.setMuted(!0):this.adDisplayController.setVolume(e))},this.getAdVolumeAvailabilityState=()=>!(!this.isPlayAdCalled.getDispatched()||this.isDestroyed)&&this.adDisplayController.getAdVolumeAvailability(),this.getAdRemainingTime=()=>this.isPlayAdCalled.getDispatched()?this.adDisplayController.getAdRemainingTime():this.getAdDuration(),this.getAdPodRemainingTime=()=>this.isPlayAdCalled.getDispatched()?this.adDisplayController.getAdPodRemainingTime():this.getAdPodDuration(),this.getAdDuration=()=>this.isPlayAdCalled.getDispatched()?this.adDisplayController.getDuration():qa(this.mediaAds),this.getAdPodDuration=()=>{var e;if(this.isPlayAdCalled.getDispatched())return this.adDisplayController.getAdPodDuration();const[t]=this.mediaAds;return null!=(e=null==t?void 0:t.getDuration())?e:0},this.skipAd=()=>{if(this.getAdSkippableState())this.adDisplayController.skipAllViewers();else if(this.isDestroyed)this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_AFTER_DESTROY",details:void 0})});else if(Boolean(this.isPlayAdCalled)){if(this.adDisplayController.getCurrentViewerSkipDelay()||this.getAdPodTimeToSkip()>0)return void this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_BEFORE_SKIPPABLE_STATE_CHANGE",details:void 0})});this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_NON_SKIPPABLE_AD",details:void 0})})}else this.stats.error({error:new Ml({code:"ATTEMPT_TO_SKIP_AD_BEFORE_START",details:void 0})})},this.getCurrentViewerAssets=()=>this.adDisplayController.getCurrentViewerAssets(),this.subscribe=(e,t)=>{if("function"!==typeof t)return d;const i=i=>{try{t(i)}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"APC_CALLBACK_ERROR",details:{eventName:e,data:i}})}),J(Mw)}},o=()=>{i({})};switch(e){case"AdMediaStateChange":return this.adDisplayController.adMediaState.add(o);case"AdContentSizeChange":return this.adDisplayController.adContentSize.add(o);case"AdStartRequest":return this.isPlayAdCalled.getDispatched()?d:this.isPlayAdCalled.subscribe(o);case"AdStarted":return this.adDisplayController.onAdStart.add(o);case"AdPodStartRequest":return this.adDisplayController.onAdPodStartRequest.add(o);case"AdPodStarted":return this.adDisplayController.onAdMediaStart.add(o);case"AdPodImpression":return this.adDisplayController.onAdPodImpression.add(o);case"AdPodVideoFirstQuartile":return this.adDisplayController.onAdPodFirstQuartile.add(o);case"AdPodVideoMidpoint":return this.adDisplayController.onAdPodMidpoint.add(o);case"AdPodVideoThirdQuartile":return this.adDisplayController.onAdPodThirdQuartile.add(o);case"AdRemainingTimeChange":return this.adDisplayController.adPodRemainingTime.add((()=>{i({})}));case"AdPodDurationChange":return this.adDisplayController.adPodDuration.add(o);case"AdPodSkipped":return this.adDisplayController.onAdSkipped.add(o);case"AdClickThru":return this.adDisplayController.onClickThrough.add(o);case"AdPodError":return this.adDisplayController.onAdPodError.add((e=>{let t,{error:o,adPodId:n}=e;"string"===typeof o.code?t=o.code:(t="AD_POD_UNRECOGNIZED_ERROR_CODE",this.stats.error({error:new Ml({code:t,details:{error:o,adPodId:n}})})),i({code:t,adPodId:n})}));case"AdPodStopped":return this.adDisplayController.onAdMediaEnd.add(o);case"AdPodComplete":return this.adDisplayController.onAdPodComplete.add(o);case"AdPodClose":return this.adDisplayController.onAdPodClose.add(o);case"AllAdPodVideoComplete":return this.adDisplayController.onAllAdPodComplete.add(o);case"AdStopped":return this.adDisplayController.onDestroy_PUBLIC_DO_NOT_USE.add((e=>{let{reason:t}=e;"unload"!==t&&o()}));case"AdSkippableStateChange":return this.adDisplayController.adSkippableState.add((e=>{i({skippableState:e})}));case"AdVolumeChange":return this.adDisplayController.adVolume.add((()=>{i({})}));case"AdVolumeAvailabilityStateChange":return this.adDisplayController.adVolumeAvailability.add((()=>{i({})}));case"AdPlayingStateChange":return this.adDisplayController.playingState.add((e=>{i({playingState:e})}));case"AdStartRejected":return this.adDisplayController.onAdStartRejected.add(o);case"AdPodCloseStateChange":return this.adDisplayController.adPodCloseState.add(o);case"AdTuneStateChange":return this.adDisplayController.adTuneState.add(o);case"AdInteraction":return this.adDisplayController.onAdInteraction.add(o);default:return d}},this.saveCurrentInstanceToRegistry=()=>{if(!tc.isDebugEnabled)return;const e=La(window),{stats:t}=this;if(!e.adPlaybackControllerRegistry){const i=new Set;Object.defineProperty(e,"adPlaybackControllerRegistry",{get:()=>(B("You are using debug code ad display controller registry getter, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeAdPlaybackControllerRegistryGetter"}),i)});const o=()=>(B("You are using debug code ad display controllers getter, WE DON'T PROVIDE SUPPORT FOR THIS CODE."),t.log({name:"UsingDebugCodeAdPlaybackControllersGetter"}),Array.from(e.adPlaybackControllerRegistry.values()));e.getAdPlaybackControllers=o}const i=e.adPlaybackControllerRegistry;i.add(this),this.addDestroyHandler((()=>{i.delete(this)}))},this.stats=s,!Boolean(o)){const e=new Ml({code:"APC_SLOT_IS_NOT_SET",details:{slotString:String(o)}});throw s.error({error:e}),e}s.log({name:"CreatePlaybackController",data:{config:r,adBreakType:null==(t=n[0])?void 0:t.adBreak.adType}}),this.videoSlot=i,this.layoutSlot=o,this.mediaAds=n,this.playbackParameters=r;const l=new af(o);let c,u;if(this.addDestroyHandler((()=>{l.destroy()})),r.visibilitySlot){c=r.visibilitySlot;const e=new af(c);u=e.onResize,this.addDestroyHandler((()=>{e.destroy()}))}else c=o,u=l.onResize;const h=Rp(this.mediaAds,(e=>e.getIsYandexCreative())),p=new PS(c,{numberOfMeasurementSteps:10,enableTrackVisibility:vS(window)&&h&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_IMPRESSIONS_CONSIDER_TRACK_VISIBILITY")});this.addDestroyHandler((()=>{p.destroy(void 0)}));const m={element:c,size:u,visibilityRatio:p.totalVisibilityRatioValueSignal};this.adDisplayController=new ES({config:this.playbackParameters,videoNode:this.videoSlot,layoutSlot:this.layoutSlot,skinParameters:a,visibilitySlotParameters:m,retainLastMediaAfterPlayback:this.playbackParameters.retainLastMediaAfterPlayback,stats:s}),this.addDestroyHandler((e=>{this.adDisplayController.destroy({reason:e,details:void 0})})),this.addDestroyHandler(Q((()=>{this.destroy("unload")}),Ql)),tc.isDebugEnabled&&this.saveCurrentInstanceToRegistry()}createPlaybackMethod(e,t){return()=>{this.isPlayAdCalled.getDispatched()&&!this.isDestroyed?t():Re(new Ml({code:this.isDestroyed?"CALL_PLAYBACK_METHOD_AFTER_STOP":"CALL_PLAYBACK_METHOD_BEFORE_PLAY",details:{methodName:e}}))}}}const OS=sr({shouldUseNewSkin:!1,supportsFullscreen:!1});OS.Provider.displayName="NewSkinContext";const IS=()=>Ar(OS);var kS=e(5676),DS=e.n(kS);const NS=e=>{var t;Pr(DS());const{children:i,onSplitResult:o,fontStyle:n}=e,r=i,[a,s]=dr([]),l={"--stw-text-lines-count":a.length,"--stw-font":n},d=hr(null),{width:c}=null!=(t=sa(d))?t:{};return cr((()=>{if(void 0===c||void 0===i||0===i.length)return;const e=d.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const a=(e=>{const t=new Bc,{canvas:i,text:o,context:n,fontStyle:r}=e;t.addOne(Qo(i,{font:r}));const a=n.font;t.addOne((()=>{n.font=a})),n.font=r;const s=n.measureText(" ").width,l=i.offsetWidth,d=o.split(" "),c=[];let u=[],h="",p=0;for(let m=0;m<d.length;m++){const e=d[m],t=n.measureText(e).width;if(t>l){c.length=0;break}const i=h.length>0?" ":"",o=h+i+e,r=p+(i?s:0)+t;r>=l?(c.push(u),u=[],u.push(e),h=e,p=t,m===d.length-1&&c.push(u)):(u.push(e),h=o,p=r,m===d.length-1&&c.push(u))}return t.dispatch(void 0),c.length?c:void 0})({canvas:e,context:t,text:r,mode:"lines",fontStyle:n});a&&(null==o||o(a),s(a))}),[d,c,void 0,r,n]),Un("div",{style:l,className:kS.locals.SplitTextLinesWrapper__container},Un("div",{className:kS.locals.SplitTextLinesWrapper__lines},sc(a,((e,t)=>{const i=t===a.length-1,o=e.join("");let n=0;const r=o.length,s={"--stw-text-line-length":r,"--stw-text-line-words-count":e.length,"--stw-text-line-index":t};return Un(Hn,{key:o},Un("div",{className:kS.locals.SplitTextLinesWrapper__textLine,style:s},sc(e,((t,i)=>{const o=i===e.length-1?"":"\xa0";return Un("span",{key:""+t+i,className:kS.locals.SplitTextLinesWrapper__word,style:{"--stw-text-word-index":i}},sc(t.split(""),((e,t)=>{const i=e+"-"+t,o=Math.round(100*n/r),a=ko(Math.floor(o/30),0,2),s={"--stw-text-char-inside-word-index":t,"--stw-text-char-inside-line-index":n,"--stw-text-char-inside-line-percent":o,"--stw-text-char-inside-line-third":a};return n+=1,Un("span",{key:i,className:kS.locals.SplitTextLinesWrapper__char,style:s},e)})),o)}))),!i&&Un("br",null))}))),Un("canvas",{className:kS.locals.SplitTextLinesWrapper__canvas,ref:d}))},RS=e=>{const t=br(e.currentVastAd);return pr((()=>{var i,o;const{tgaOfferClickUrl:n,vastClickUrl:r,serializablePlaybackParametersClickUrl:a}=null!=(i=null==t?void 0:t.clickUrlData)?i:{},s=null!=(o=null!=n?n:r)?o:a;return void 0===s?void 0:R(s,{[eu]:ic,[nu]:e.getAdPlacementOptions().adPodId})}),[t])},VS=sr({isAbuseSupported:!1,abuseButtonClickHandler:d,abuseDisplayStatus:"hidden",abuseScreenCloseHandler:d,abuseVariantChooseHandler:d,pauseByOpenAbuseScreen:!1,abuseCustomReasonText:"",abuseCustomReasonTextHandler:d,abuseActiveDisplayType:"default",setAbuseActiveDisplayType:d,isAbuseSubmitted:!1,setAbuseSubmitted:d,abuseSubmitType:void 0,setAbuseSubmitType:d,previousDisplayType:"default",setPreviousDisplayType:d,destroyCurrentViewer:d,abuseScaleRate:void 0,setAbuseScaleRate:d,legalText:void 0,onAbuseCopyLinkToClipboardClick:d,resetAbuseVisualState:d,abusePlaceholderHint:"",abusePlaceholderText:""});VS.Provider.displayName="AbuseContext";const LS=e=>{let{adDisplayController:t}=e;const i=br(t.pauseByOpenAbuseScreen),o=br(t.abuseDisplayStatus),{abuseParameters:n,playingState:r}=t,{abuseUrl:a,legalText:s}=br(n),l=(e=>Sg+e.slice(e.lastIndexOf("/")))(a),[d,c]=dr(""),[u,h]=dr("default"),[p,m]=dr(!1),[A,g]=dr(void 0),[v,_]=dr("default"),[y,f]=dr(void 0);cr((()=>{"play"===r.getValue()&&"hidden"!==o&&t.handleAbuseScreenCloseByResumeError()}),[o,r]);const S=RS(t),T=S?()=>{t.onAbuseCopyLinkToClipboardClick(S)}:void 0,E=mr((()=>{m(!1),g(void 0),h("default")}),[m,g,h]),b=j_();let C="",P="";switch(A){case"complaint":C=b("ABUSE_PLACEHOLDER_TEXT_COMPLAINT"),P=b("ABUSE_PLACEHOLDER_HINT_COMPLAINT");break;case"hide":C=b("ABUSE_PLACEHOLDER_TEXT_HIDE"),P=b("ABUSE_PLACEHOLDER_HINT_HIDE")}return{isAbuseSupported:Boolean(a),abuseButtonClickHandler:t.abuseButtonClickHandler,abuseDisplayStatus:o,abuseScreenCloseHandler:t.abuseScreenCloseHandler,abuseVariantChooseHandler:t.abuseVariantChooseHandler,pauseByOpenAbuseScreen:i,destroyCurrentViewer:t.destroyCurrentViewer,onAbuseCopyLinkToClipboardClick:T,abuseCustomReasonText:d,abuseCustomReasonTextHandler:c,abuseActiveDisplayType:u,setAbuseActiveDisplayType:h,resetAbuseVisualState:E,abuseSubmitType:A,setAbuseSubmitType:g,isAbuseSubmitted:p,setAbuseSubmitted:m,previousDisplayType:v,setPreviousDisplayType:_,abuseScaleRate:y,setAbuseScaleRate:f,legalText:s,abusePlaceholderHint:P,abusePlaceholderText:C,advertiserInfoUrl:l}},xS=()=>Ar(VS),BS=sr(!0);BS.Provider.displayName="ShowTitleAndBodyContext";const MS=sr({isPackshotPlaying:!1});MS.Provider.displayName="SkinPackshotContext";const US=e=>{let{isPackshotPlaying:t}=e;return{isPackshotPlaying:br(t)}},FS=()=>Ar(MS);var HS=e(2935),zS=e.n(HS);const WS=sr(0);WS.Provider.displayName="AdAnimationProgressContext";const jS=e=>{let{skinAnimationProgress:t}=e;return br(t)},YS=()=>Ar(WS),GS=sr(NaN);GS.Provider.displayName="AdDurationContext";const XS=e=>{let{adDisplayController:t}=e;return br(t.adPodDuration)},KS=()=>Ar(GS),qS=sr({playingState:"idle",play:d,pause:d,isStarted:!1,isSlowStart:!1});qS.Provider.displayName="PlayingStateContext";const QS=e=>{let{adDisplayController:t}=e;const[i,o]=dr(!1),n=br(t.playingState),r=br(t.adSlowStart);return cr((()=>{const e=t.onAdStart.addOne((()=>{o(!0)}));return()=>{e()}}),[]),{playingState:n,play:()=>{t.resume()},pause:()=>{t.pause()},isStarted:i,isSlowStart:r}},JS=()=>Ar(qS),ZS=(e,t)=>{const{bodyAnimationEnlargementDelay:i,bodyAnimationEnlargementDuration:o,bodyAnimationShowDelay:n,bodyAnimationShowDuration:r,showLineDelay:a}=t,{titleAnimationHideDelay:s,titleAnimationHideDuration:l,titleAnimationEnlargementNextLineDelay:d,titleSinglePartDuration:c,titleAnimationEnlargementDelay:u,titleAnimationEnlargementDuration:h,titleAnimationShowDelay:p}=e;return{"--ctat-animation-body-animation-enlargement-delay":i+"ms","--ctat-animation-body-animation-enlargement-duration":o+"ms","--ctat-animation-body-animation-show-delay":n+"ms","--ctat-animation-body-animation-show-duration":r+"ms","--ctat-animation-body-animation-show-line-delay":a+"ms","--ctat-animation-title-animation-show-delay":p+"ms","--ctat-animation-title-animation-enlargement-delay":u+"ms","--ctat-animation-title-animation-enlargement-duration":h+"ms","--ctat-animation-title-animation-hide-delay":s+"ms","--ctat-animation-title-animation-hide-duration":l+"ms","--ctat-animation-title-enlargement-next-line-delay":d+"ms","--ctat-animation-title-part-duration":c+"ms"}},$S=A((()=>{Wc.log({name:"CSSVariablesAreNotSupported"})})),eT=e=>{let{onClickOutside:t}=e;Pr(zS());const{isAbuseSubmitted:i}=xS(),{isPackshotPlaying:o}=FS(),{themeEmptyParameters:n,clickThrough:a}=my(),s=Ar(BS),{title:l,body:d,clickUrl:c,targetUrl:u}=null!=n?n:{},h=ny(),p=!1!==h.title&&!1!==h.body,m=!1!==h.actionButton,[A,g]=dr(void 0),[v,_]=dr(void 0),y=hr(null),f=hr(null),S=()=>{a({url:c,playerHandles:!0,clickSource:"SkinCallToActionText"})},{isReadyToAnimate:T,containerStyle:E,titleFontStyle:b,bodyFontStyle:C}=function(e,t,i,o,n){const a=YS(),s=KS(),l=i_(),{playingState:d}=JS(),[c,u]=dr({largestSize:0,descriptionFontSize:0,descriptionLineHeight:0,horizontalMargin:0,verticalMargin:{top:0,bottom:0}});cr((()=>{const e=Qh(c),t=Math.max(l.width,l.height);e.largestSize=t;const{fontSize:i,lineHeight:o}=(e=>e<360?{fontSize:12,lineHeight:18}:e<400?{fontSize:14,lineHeight:20}:e<480?{fontSize:16,lineHeight:22}:e<560?{fontSize:18,lineHeight:24}:e<640?{fontSize:20,lineHeight:26}:e<720?{fontSize:22,lineHeight:28}:e<800?{fontSize:24,lineHeight:30}:e<960?{fontSize:26,lineHeight:32}:e<1024?{fontSize:28,lineHeight:34}:{fontSize:30,lineHeight:36})(t);e.descriptionFontSize=i,e.descriptionLineHeight=o,e.horizontalMargin=(e=>e<640?10:e<960?15:20)(t),e.verticalMargin=function(e,t){return void 0===t&&(t=!0),e<480?t?{top:40,bottom:98}:{top:40,bottom:64}:e<960?{top:40,bottom:116}:e<1280?{top:40,bottom:122}:{top:40,bottom:128}}(t,n),u(e)}),[l]);const[h,p]=dr(!1),[m,A]=dr({});cr((()=>{const e=Qh(m);c.largestSize&&(e["--ctat-largest-size"]=c.largestSize+"px",e["--ctat-description-font-size"]=c.descriptionFontSize+"px",e["--ctat-horizontal-margin"]=c.horizontalMargin+"%",e["--ctat-margin-top"]=c.verticalMargin.top+"px",e["--ctat-margin-bottom"]=c.verticalMargin.bottom+"px",A(e))}),[c]);const[g,v]=dr(""),[_,y]=dr("");cr((()=>{let e=g;if(i.current){const t=r(i.current,i.current.ownerDocument.defaultView);e=t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+(c.descriptionFontSize+2)+"px/"+c.descriptionLineHeight+"px "+t.fontFamily}v(e);let t=_;if(i.current){const e=r(i.current,i.current.ownerDocument.defaultView);t=e.fontStyle+" "+e.fontVariant+" "+e.fontWeight+" "+c.descriptionFontSize+"px/"+c.descriptionLineHeight+"px "+e.fontFamily}y(t)}),[c,i.current,o.current]);const[f,S]=dr({"--ctat-animation-animation-drift-coef":"1","--ctat-animation-progress":"0","--ctat-animation-playing-state":"paused"});return cr((()=>{const i=ts({},f);if(!e||!t||!s)return void p(!1);p(!0);const{cssVars:o,totalAnimationDuration:n}=(e=>{const{duration:t}=e,i=100*ko(t/10,1,1),o=es({},e,{atomic100MSDuration:i}),n=(e=>{let{atomic100MSDuration:t,titleSplitResult:i,baseDelay:o}=e;const n=o,r=1.66*t,a=i.length,s=3*r*a,l=t+o,d=s+l,c=d+t+t*a,u=27*t,h=c+u;return{calculatedTitleAnimationDuration:h+t*a,calculatedTitleRevealAnimationDuration:s,titleAnimationDelayAfterEnlargement:u,titleAnimationDelayAfterReveal:l,titleAnimationEnlargementDelay:d,titleAnimationEnlargementDuration:t,titleAnimationEnlargementNextLineDelay:t,titleAnimationHideDelay:h,titleAnimationHideDuration:t,titleAnimationSingleLinePartsCount:3,titleAnimationShowDelay:n,titleAnimationTotalEnlargementDuration:c,titleLinesCount:a,titleSinglePartDuration:r}})(es({},o,{baseDelay:25*i})),r=n.calculatedTitleAnimationDuration,a=(e=>{let{bodySplitResult:t,atomic100MSDuration:i,baseDelay:o}=e;const n=t.length,r=8.2*i,a=o+r,s=3*i,l=.75*i,d=4.5*i,c=a+l+s;return{bodyAnimationEnlargementDelay:c,bodyAnimationEnlargementDuration:d,bodyAnimationShowDelay:a,bodyAnimationShowDuration:s,bodyLinesCount:n,bodyTotalAnimationTime:c+d*n,delayBeforeShowBody:r,showLineDelay:l}})(es({},o,{baseDelay:r})),s=a.bodyTotalAnimationTime;return{cssVars:ZS(n,a),titleAnimationDuration:r,totalAnimationDuration:s,titleAnimationShowDelay:n.titleAnimationShowDelay,bodyAnimationShowDelay:a.bodyAnimationShowDelay}})({duration:s,bodySplitResult:t,titleSplitResult:e}),r=n*a;i["--ctat-animation-current-time"]=r+"ms","play"===d?i["--ctat-animation-playing-state"]="running":"pause"===d&&(i["--ctat-animation-progress"]=""+a,i["--ctat-animation-playing-state"]="paused"),S(ts({},o,i))}),[a,d,s,e,t]),{isReadyToAnimate:h,containerStyle:ts({},m,f),titleFontStyle:g,bodyFontStyle:_}}(A,v,y,f,m);return"undefined"!==typeof CSS&&CSS.supports("animation-delay","var(--time)")?p&&s?o||i?null:l||d?Un("div",{className:HS.locals.CallToActionTextContainer},Un("div",{className:Er(HS.locals.CallToActionText,{[HS.locals.CallToActionText__animated]:T}),style:E,onClick:t},Un("div",{className:HS.locals.CallToActionText__overlay},l&&Un("div",{className:HS.locals.CallToActionText__title,ref:y},Un(F_,{url:u,onClick:S,pointerEvents:"none"},Un(NS,{fontStyle:b,onSplitResult:e=>g(e)},l))),d&&Un("div",{className:HS.locals.CallToActionText__body,ref:f},Un(F_,{url:u,onClick:S,pointerEvents:"none"},Un(NS,{fontStyle:C,onSplitResult:e=>_(e)},d)))))):null:null:($S(),null)},tT=sr(void 0);tT.displayName="AdFoxTuneContext";const iT=e=>{let{adDisplayController:t}=e;const i=Ar(v_),o=br(t.adFoxAdTuneParameters);if(!o||void 0===o||!1===o.show)return;const{advertiserInfo:n,token:r}=o;return{token:r,copyToken:()=>{i({name:"AdFoxAdTuneCopiedToken",probability:1}),Da(r)},advertiserInfo:n}},oT=()=>Ar(tT),nT=sr({socialAdvertising:!1});nT.Provider.displayName="SocialAdvertisingContext";const rT=e=>{let{adDisplayController:t}=e;return{socialAdvertising:br(t.socialAdvertising)}},aT=()=>Ar(nT);var sT=e(8866),lT=e.n(sT);const dT=e=>{let{isActive:t}=e;return Pr(lT()),Un("svg",{className:Er(sT.locals.AbuseAnimationIcon,{[sT.locals.AbuseAnimationIcon_cross]:t}),width:"24",height:"24",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},Un("g",{className:sT.locals.AbuseAnimationIcon__lines},Un("path",{d:"M -4 -4 L 4 4","stroke-width":"2","stroke-linecap":"round",stroke:"#fff",class:Er(sT.locals.AbuseAnimationIcon__line,sT.locals.AbuseAnimationIcon__line_left)}),Un("path",{d:"M -4 -4 L 4 4","stroke-width":"2","stroke-linecap":"round",stroke:"#fff",class:Er(sT.locals.AbuseAnimationIcon__line,sT.locals.AbuseAnimationIcon__line_right)})),Un("g",null,Un("rect",{width:"24",height:"24",rx:"12","fill-opacity":"0.1"}),Un("g",null,Un("circle",{class:Er(sT.locals.AbuseAnimationIcon__dot,sT.locals.AbuseAnimationIcon__dot_top),fill:"#fff",cx:"12",cy:"6",r:"1.5"}),Un("circle",{class:sT.locals.AbuseAnimationIcon__dot,cx:"12",cy:"12",r:"1.5"}),Un("circle",{class:Er(sT.locals.AbuseAnimationIcon__dot,sT.locals.AbuseAnimationIcon__dot_bottom),fill:"#fff",cx:"12",cy:"18",r:"1.5"}))))},cT=e=>{let{width:t,height:i}=e;return t<=240||i<=280};var uT=e(8971),hT=e.n(uT);const pT=e=>{let{onClickHandler:t,isActive:i}=e;Pr(hT());const o=cT(i_());return Un("div",{onClick:t,className:Er(uT.locals.AbuseBurgerButton,{[uT.locals.AbuseBurgerButton_inFullSize]:o})},Un(dT,{isActive:i}))};var mT=e(2020),AT=e.n(mT);const gT=e=>{let{children:t,isActive:i=!0,url:o,onClick:n,className:r,buttonClassName:a,contentClassName:s}=e;Pr(AT());const l=Er(mT.locals.Button,r,{[mT.locals.Button_active]:i,[mT.locals.Button_link]:Boolean(o)}),d=Un("div",{className:mT.locals.Button__clickable},Un("div",{className:a},Un("div",{className:Er(mT.locals.Button__content,s)},t)));return o?Un("a",{className:l,href:o,target:"_blank",onClick:n},d):Un("div",{className:l,onClick:n},d)};var vT=e(2645),_T=e.n(vT);const yT=e=>{let{icon:t,className:i}=e;return t?Un("div",{className:i},t):null},fT=e=>{let{buttonText:t,leftIcon:i,rightIcon:o,onClick:n,url:r}=e;Pr(_T());const a=mr((()=>{n&&n()}),[n]);return Un(gT,{className:vT.locals.AbuseOptionButton,url:r,buttonClassName:vT.locals.AbuseOptionButton__clickable,contentClassName:vT.locals.AbuseOptionButton__content,onClick:a},Un(yT,{icon:i,className:vT.locals.AbuseOptionButton__leftIcon}),t,Un(yT,{icon:o,className:vT.locals.AbuseOptionButton__rightIcon}))},ST=e=>{let{className:t}=e;return Un(is,{className:t})},TT=e=>{let{className:t}=e;return Un(os,{className:t})},ET=e=>"anotherReasonAd"===e?Un(ST,null):"about"===e||"advertiserInfo"===e?Un(TT,null):void 0;var bT=e(7486),CT=e.n(bT);const PT=e=>{let{buttonTexts:t,onClickHandlers:i}=e;const o=j_();return Un("div",{className:bT.locals.AbuseDisplay__complaintDisplay},Un("div",{className:bT.locals.AbuseDisplay__text},o("ABUSE_IMPROVE_REASON_TEXT")),sc(v(t),(e=>Un(fT,{key:e,onClick:i[e],rightIcon:ET(e),buttonText:t[e]}))))},wT=e=>{let{className:t}=e;return Un(ns,{className:t})},OT=e=>{let{className:t}=e;return Un(rs,{className:t})},IT=e=>{let{className:t}=e;return Un(as,{className:t})},kT=e=>{let{className:t}=e;return Un(ss,{className:t})},DT=e=>{switch(e){case"hide":return Un(OT,null);case"complaint":return Un(wT,null);case"about":return Un(kT,null);case"advertiserInfo":return Un(IT,null);default:return}},NT=["slotParameters"],RT=e=>null!=e&&e.hasOwnProperty("vast")?null==e?void 0:e.vast:void 0,VT=sr({vast:void 0,blockId:"",bannerId:"",videoContentSize:void 0,clickUrl:void 0,slotParameters:{element:void 0,document:void 0,window:void 0,size:void 0,isHovered:void 0}});VT.Provider.displayName="ReportBugContext";const LT=e=>{var t,i,o,n,r;let{adDisplayController:a}=e;const s=br(a.currentVastAd),l=(null==(t=RT(s))?void 0:t.xmlString)||"",{partnerId:d,impId:c}=br(a.adBlockIdentification),u=br(a.videoContentSize),h=RS(a);return{vast:l,blockId:"R-A-"+d+"-"+c,bannerId:null==s||null==(i=s.adParametersObject)||null==(o=i.AUCTION_DC_PARAMS)||null==(n=o.data_params)||null==(r=n.misc)?void 0:r.object_id,videoContentSize:u,clickUrl:h,slotParameters:a.slotParameters}},xT=e=>{let{buttonTexts:t,onClickHandlers:i,legalInfoText:o,isVisibleAbuse:n}=e;const{onAbuseCopyLinkToClipboardClick:r,advertiserInfoUrl:a,isAbuseSupported:s}=xS(),l=oT(),d=j_(),{isStarted:c}=JS(),{vast:u,clickUrl:h,blockId:p,bannerId:m,videoContentSize:A,slotParameters:g}=Ar(VT),_=i_(),[y,f]=dr(!1),[S,T]=dr(!1);return cr((()=>{n||f(!1)}),[n]),Un("div",null,l&&""!==l.advertiserInfo&&Un("div",{className:bT.locals.AbuseDisplay__legal},l.advertiserInfo),o&&Un("div",{className:bT.locals.AbuseDisplay__legal},o),s&&sc(v(t),(e=>{let o;switch(e){case"advertiserInfo":o=a;break;case"about":o=fg;break;default:o=void 0}return Un(fT,{key:e,url:o,onClick:i[e],leftIcon:DT(e),rightIcon:ET(e),buttonText:t[e]})})),l&&""!==l.token&&Un(fT,{key:"copy_token",onClick:()=>{l&&(l.copyToken(),T(!0))},buttonText:d(S?"ABUSE_COPIED":"ADTUNE_COPY_TOKEN"),leftIcon:Un(ds,null)}),r&&Un(fT,{key:"copy_link",onClick:()=>{r&&(r(),f(!0))},buttonText:d(y?"ABUSE_COPIED":"ABUSE_COPY_TEXT"),leftIcon:Un(ds,null)}),tc.VAS_UAAS_CONFIG.isInternalNetwork&&Un(fT,{key:"report_bug",onClick:()=>{(e=>{const{slotParameters:t}=e,i=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,NT),{document:o,window:n}=t;if(Wc.log({name:"ReportBug",data:cs({},i,{VSID:ic}),values:{},sensors:{},probability:1}),!o||!n)return void oc("Couldn't retrieve document or window from adDisplayController");const r=o.createElement("div");Lr(r,{backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",height:"100vh",width:"100vw",zIndex:""+(Number.parseInt(mS,10)-1)});const a=JSON.stringify(i,null,2),s=new Blob([a],{type:"application/json"}),l=new FileReader;l.readAsDataURL(s);const d=o.createElement("div");Lr(d,{width:"500px",height:"500px",padding:"18px",borderRadius:"20px",backgroundColor:"white"}),r.appendChild(d);const c=o.createElement("iframe");Lr(c,{height:"100%",width:"100%",backgroundColor:"white",border:"none"}),c.setAttribute("src","https://forms.yandex.ru/u/62d1740f9ff9566c865e6a59/?iframe=1&media-type=mobile&theme=compact-long-text-input&lang=ru");const u=e=>{let t;try{t=JSON.parse(e.data)}catch(Bv){return void oc("Report bug form receive non-valid JSON string")}t["iframe-height"]&&(d.style.height=t["iframe-height"]+"px")};n.addEventListener("message",u),l.onload=()=>{const t=l.result;c.onload=()=>{setTimeout((()=>{var t,n,r,a,s,l;null==(t=c.contentWindow)||t.postMessage("pong","*"),null==(n=c.contentWindow)||n.postMessage(JSON.stringify({message:"set-question-value",slug:"data",value:JSON.stringify(i)}),"*"),null==(r=c.contentWindow)||r.postMessage(JSON.stringify({message:"set-question-value",slug:"block_id",value:e.blockId}),"*"),null==(a=c.contentWindow)||a.postMessage(JSON.stringify({message:"set-question-value",slug:"banner_id",value:e.bannerId}),"*"),null==(s=c.contentWindow)||s.postMessage(JSON.stringify({message:"set-question-value",slug:"VSID",value:ic}),"*"),null==(l=c.contentWindow)||l.postMessage(JSON.stringify({message:"set-question-value",slug:"url_page",value:$(o).location}),"*")}),0),setTimeout((()=>{var e;const i="meta_"+(new Date).toISOString()+".json";null==(e=c.contentWindow)||e.postMessage(JSON.stringify({message:"set-question-value",slug:"answer_files",value:{format:"dataUrl",dataUrl:t,name:i}}),"https://forms.yandex.ru")}),0)}},d.appendChild(c),o.body.appendChild(r);const h=()=>{r.remove(),n.removeEventListener("message",u),r.removeEventListener("click",h)};r.addEventListener("click",h)})({vast:u,clickUrl:h,blockId:p,bannerId:m,videoContentSize:A,slotSize:_,slotParameters:g,wasVideoStarted:c})},buttonText:d("ABUSE_REPORT_PROBLEM"),leftIcon:Un(ls,null)}))},BT=e=>{let{buttonTexts:t,onClickHandlers:i}=e;const o=j_();return Un("div",{className:bT.locals.AbuseDisplay__hideDisplay},Un("div",{className:bT.locals.AbuseDisplay__text},o("ABUSE_IMPROVE_REASON_TEXT")),sc(v(t),(e=>Un(fT,{key:e,onClick:i[e],rightIcon:ET(e),buttonText:t[e]}))))},MT=e=>{let{className:t}=e;return Un(us,{className:t})},UT=e=>{let{previousDisplayType:t,onClickHandler:i}=e;const{abuseCustomReasonText:o,abuseCustomReasonTextHandler:n,setAbuseActiveDisplayType:r}=xS(),a=j_(),s=mr((()=>{r(t)}),[t]);return Un("div",{className:bT.locals.AbuseDisplay__customReasonDisplay},Un("div",{className:bT.locals.AbuseDisplay__customReasonDisplayHeader},Un("div",{className:bT.locals.AbuseDisplay__arrowLeftIcon,onClick:s},Un(MT,null)),Un("div",{className:bT.locals.AbuseDisplay__hint},a("ABUSE_OPTION_ANOTHER_REASON"))),Un("div",{className:bT.locals.AbuseDisplay__messageBox},Un("textarea",{className:bT.locals.AbuseDisplay__customReasonDisplayTextarea,placeholder:a("ABUSE_CUSTOM_FIELD_PLACEHOLDER"),onInput:e=>{const t=e.currentTarget.value;t&&n(t)},value:o}),Un(gT,{className:bT.locals.AbuseDisplay__customReasonDisplayButton,contentClassName:bT.locals.AbuseDisplay__customReasonDisplayButtonContent,onClick:()=>i("anotherReasonAd",{UserResponse:o})},a("ABUSE_CUSTOM_FIELD_SUBMIT_BUTTON_TEXT"))))},FT=e=>{let{isVisibleAbuse:t,socialAdvertising:i}=e;Pr(CT());const{abuseVariantChooseHandler:o,abuseActiveDisplayType:n,setAbuseActiveDisplayType:r,isAbuseSubmitted:a,setAbuseSubmitted:s,setAbuseSubmitType:l,previousDisplayType:d,destroyCurrentViewer:c,setPreviousDisplayType:u,legalText:h,resetAbuseVisualState:p}=xS(),m=i_(),A=cT(m),[g,_]=dr(null),y={current:null};cr((()=>{!t&&a&&(p(),c())}),[a,t,p]),cr((()=>{if(A)return;const e=y.current;e&&_(e.offsetHeight+"px")}),[n,A]),cr((()=>{A&&_(null)}),[A]);const f=pr((()=>ve(_g,((e,t)=>()=>{if(u(n),"hide"===t){if(i)return void o(t);r("hide"),l("hide"),s(!0),o(t,{noDestroyOnClick:!0,needToHideCreativesContiner:!0})}else if("complaint"===t)r("complaint"),l("complaint"),s(!0),o(t,{noDestroyOnClick:!0,needToHideCreativesContiner:!0});else if("anotherReasonAd"===t)r("message");else{const e="about"===t||"advertiserInfo"===t;p(),o(t,{noDestroyOnClick:e})}}))),[o,n,i]),S={height:null!=g?g:""},T=j_(),E=(e=>({hide:e("ABUSE_OPTION_HIDE"),complaint:e("ABUSE_OPTION_COMPLAINT"),advertiserInfo:e("ABUSE_OPTION_ADVERTISER_INFO"),about:e("ABUSE_OPTION_ABOUT")}))(T),b=(e=>fd(v(Ag),((t,i)=>{switch(i){case"anotherReasonAd":t[i]=e("ABUSE_OPTION_ANOTHER_REASON");break;case"notInterestedAd":t[i]=e("ABUSE_OPTION_NOT_INTERESTED");break;case"alreadyPurchasedAd":t[i]=e("ABUSE_OPTION_ALREADY_PURCHASED");break;case"seenTooOftenAd":t[i]=e("ABUSE_OPTION_SEEN_TOO_OFTEN");break;case"overlapContentAd":t[i]=e("ABUSE_OPTION_OVERLAP_CONTENT")}return t}),{}))(T),C=((e,t)=>t?fd(v(vg),((t,i)=>{switch(i){case"politicalSocialAd":t[i]=e("ABUSE_OPTION_POLITICAL_SOCIAL");break;case"shockingContentSocialAd":t[i]=e("ABUSE_OPTION_SHOCKING_CONTENT_SOCIAL");break;case"falseInfoSocialAd":t[i]=e("ABUSE_OPTION_FALSE_INFO_SOCIAL")}return t}),{}):fd(v(gg),((t,i)=>{switch(i){case"unpleasantContentAd":t[i]=e("ABUSE_OPTION_UNPLEASANT_CONTENT");break;case"politicalAd":t[i]=e("ABUSE_OPTION_POLITICAL_SOCIAL");break;case"scammersAd":t[i]=e("ABUSE_OPTION_SCAMMERS");break;case"illegalGoodsOrServiceAd":t[i]=e("ABUSE_OPTION_ILLEGAL_GOODS_OR_SERVICE");break;case"anotherReasonAd":t[i]=e("ABUSE_OPTION_ANOTHER_REASON")}return t}),{}))(T,i);return Un("div",{className:Er(bT.locals.AbuseDisplay,{[bT.locals.AbuseDisplay_fullSize]:A,[bT.locals.AbuseDisplay_visible]:t}),style:S},Un("div",{className:bT.locals.AbuseDisplay__content,ref:y},"default"===n?Un(xT,{isVisibleAbuse:t,legalInfoText:h,buttonTexts:E,onClickHandlers:f}):null,"hide"===n?Un(BT,{buttonTexts:b,onClickHandlers:f}):null,"complaint"===n?Un(PT,{buttonTexts:C,onClickHandlers:f}):null,"message"===n?Un(UT,{onClickHandler:o,previousDisplayType:d}):null))};var HT=e(8561),zT=e.n(HT);const WT=()=>{Pr(zT());const{isAbuseSubmitted:e,abusePlaceholderText:t,abusePlaceholderHint:i}=xS(),{width:o}=i_();if(!e)return null;const n=o<=640;return Un("div",{className:Er(HT.locals.AbusePlaceholder,{[HT.locals.AbusePlaceholder_place_left]:n,[HT.locals.AbusePlaceholder_place_center]:!n})},Un("div",{className:HT.locals.AbusePlaceholder__container},Un("div",{className:HT.locals.AbusePlaceholder__text},t),Un("div",{className:HT.locals.AbusePlaceholder__hint},i)))};var jT=e(1155),YT=e.n(jT);const GT=()=>{Pr(YT());const{abuseDisplayStatus:e,isAbuseSupported:t}=xS(),i=oT(),o=ny(),n=oS(o),r="selection"===e,{abuseScreenCloseHandler:a,abuseButtonClickHandler:s}=xS(),{socialAdvertising:l}=aT();return n&&(t||i)?Un("div",{className:jT.locals.AbuseContainer},Un(WT,null),Un(pT,{onClickHandler:()=>(Dn({control:r?"AdTuneScreenClose":"AdTuneScreenKebab",purpose:"adTune"}),r?a():s()),isActive:r}),Un(FT,{isVisibleAbuse:r,socialAdvertising:l})):null},XT=sr({creativeType:void 0});XT.Provider.displayName="CreativeTypeContext";const KT=e=>{let{adDisplayController:t}=e;return{creativeType:br(t.creativeType)}},qT=()=>Ar(XT);var QT=e(4115),JT=e.n(QT);Kd({propertyName:"SPINNER_ICON_GLOBAL_CALLBACK"});const ZT=e=>{let{className:t}=e;return Pr(JT()),Un(hs,{className:Er(QT.locals.SpinnerIcon__css_animated,t)})};var $T=e(9130),eE=e.n($T);const tE=e=>{let{className:t}=e;return Pr(eE()),Un(ZT,{className:Er($T.locals.Spinner,t)})},iE=sr("middle");iE.Provider.displayName="SkinSizeNameContext";const oE=()=>Ar(iE),nE=e=>{let{className:t}=e;return Un(ps,{className:t})};var rE=e(7276),aE=e.n(rE);const sE=e=>{let{onClick:t,size:i}=e;Pr(aE());const o=Er(rE.locals.CirclePlayButton,{[rE.locals.CirclePlayButton_fullSize]:"small"!==i}),n=Er(rE.locals.CirclePlayButton__icon,{[rE.locals.CirclePlayButton__icon_fullSize]:"small"!==i});return Un(gT,{className:o,contentClassName:rE.locals.CirclePlayButton__basecontent,onClick:t},Un(nE,{className:n}))},lE=()=>{const e=oE(),{play:t}=JS();return Un(sE,{size:e,onClick:()=>{Dn({control:"CirclePlayButton",purpose:"changePlayingState"}),t()}})};var dE=e(7012),cE=e.n(dE);const uE=()=>{Pr(cE());const{playingState:e,isStarted:t,isSlowStart:i}=JS(),{play:o,loader:n}=ny(),{isAbuseSubmitted:r,abuseDisplayStatus:a}=xS(),{isPackshotPlaying:s}=FS(),l=cT(i_()),{creativeType:d}=qT();if(r)return null;const c="pause"===e,u=c&&!1!==o&&!("selection"===a&&l)&&!s&&!("survey"===d),h=!u&&!c&&!t&&i&&!1!==n;return Un("div",{className:dE.locals.CenterControls},u&&Un(lE,null),h&&Un(tE,null))};var hE=e(5050),pE=e.n(hE);const mE=e=>{let{hidden:t}=e;return Pr(pE()),Un("div",{className:Er(hE.locals.ControlsBottomShadow,t&&hE.locals.ControlsBottomShadow_hidden)})};var AE=e(5817),gE=e.n(AE);const vE=e=>{let{size:t,tooltipText:o,label:n,dspLabel:r,ageRestriction:a,surveyQuestionNumber:s,surveyQuestionCount:l,domain:d,onClick:c,theme:u}=e;Pr(gE());const h=j_();if(!i(n)&&!i(a))return null;const p=i(n),m=void 0!==s&&"number"===typeof l&&l>2;return Un("div",{className:Er(AE.locals.AdLabel,{[AE.locals.AdLabel_fullSize]:"small"!==t,[AE.locals.AdLabel_clickable]:p,[AE.locals.AdLabel_survey]:he(s)&&he(l),[AE.locals.AdLabel_light]:"light"===u,[AE.locals.AdLabel_dark]:"dark"===u}),title:i(o)?o:void 0,onClick:p?c:void 0,"data-testid":"adLabel"},n,r?Un(Hn,null,i(n)&&Un("span",{className:AE.locals.AdLabel__delimiter},"|"),Un("span",null,r)):null,a?Un(Hn,null,i(n)&&Un("span",{className:AE.locals.AdLabel__delimiter},"|"),Un("span",{className:AE.locals.AdLabel__ageLabel},a)):null,m?Un(Hn,null,i(n)&&Un("span",{className:AE.locals.AdLabel__delimiter},"|"),Un("span",null,s," ",h("OF")," ",l," ",h("SURVEY_AD_LABEL_OF_QUESTIONS"))):null,d?Un(Hn,null,i(n)&&Un("span",{className:AE.locals.AdLabel__delimiter},"|"),Un("span",{className:AE.locals.AdLabel__domain},d)):null)};var _E=e(3614),yE=e.n(_E);const fE=e=>{let{onClick:t}=e;Pr(yE());const i=ny(),o=j_()("SOCIAL_ADVERTISING_AD_LABEL");return!1===i.socialAdLabel?null:Un("a",{className:_E.locals.SocialAdvertisingAdLabel,onClick:t},o)},SE=sr({adSystemType:void 0,dspLabel:void 0,openAdSystemWebsite:d,isInBanner:!1});SE.Provider.displayName="AdSystemContext";const TE=e=>{let{adDisplayController:t}=e;const i=br(t.currentVastAd),o=br(t.adSystemType),n=t.openAdSystemWebsite,r="InBanner"===(null==i?void 0:i.adSystem);return{adSystemType:o,openAdSystemWebsite:n,dspLabel:null==i?void 0:i.dspLabel,isInBanner:r}},EE=()=>Ar(SE),bE=sr(void 0);bE.Provider.displayName="VideoSlotClickUrlContext";const CE=()=>Ar(bE),PE=sr({domain:void 0});PE.Provider.displayName="AdTitleContext";const wE=e=>{var t;let{adDisplayController:i}=e;return{domain:null==(t=br(i.adTitleParameters))?void 0:t.domain}},OE=()=>{const e=j_(),{socialAdvertising:t}=aT(),{openAdSystemWebsite:i,dspLabel:o}=EE(),{clickThrough:n,clickUrl:r}=Py(),a=CE(),{domain:s}=Ar(PE),{creativeType:l}=qT(),d="survey"===l;let c=e("AD_TITLE");return d?c=e("SURVEY_AD_LABEL"):t&&(c=e("SOCIAL_ADVERTISING_AD_LABEL")),{onClick:()=>t?i():n(d?{url:"https://surveys.yandex.ru/landing/?from=direct_adlabel&utm_source=direct_adlabel",playerHandles:!0,clickSource:"SurveyAdLabel"}:{url:null!=r?r:a,playerHandles:!0,clickSource:"SkinAdLabel"}),label:c,dspLabel:o,tooltipText:c,domain:s}};var IE=e(9843),kE=e.n(IE);const DE=sr({containerElement:void 0,setContainerElement:d});DE.Provider.displayName="TooltipContainerContext";const NE=e=>{let{containerElement:t,setContainerElement:i}=e;return{containerElement:br(t),setContainerElement:i}},RE=()=>Ar(DE),VE=sr({tooltipContent:void 0,setTooltipContent:d});VE.Provider.displayName="TooltipContentContext";const LE=e=>{let{tooltipContent:t,setTooltipContent:i}=e;return{tooltipContent:br(t),setTooltipContent:i}},xE=()=>Ar(VE),BE=sr(void 0),ME=e=>{let{bannerFlags:t}=e;return br(t)},UE=()=>Ar(BE),FE=e=>{var t,i;let{isSmall:o}=e;Pr(kE());const n=j_(),r=ny(),a=null!=(t=null==(i=UE())?void 0:i.businessUnit)&&t,s=hr(null);return function(e){let{targetElementRef:t,content:i,arrowPosition:o}=e;const n=Ar(o_).ownerDocument.defaultView,{containerElement:r}=RE(),{setTooltipContent:a}=xE();ur((()=>{const e=t.current;if(!e)return;const s=new fv,l=re(n),d=()=>{if(!r)return void Wc.error({error:new Ml({code:"NO_CONTAINER_ELEMENT_TO_DRAW_TOOLTIP",details:{content:i}})});const t=e.getBoundingClientRect(),n=r.getBoundingClientRect(),s={top:t.top-n.top,left:t.left-n.left,winWidth:n.width,winHeight:n.height,width:t.width,height:t.height};Wc.log({name:"ShowTooltip",sensors:{isTouch:l}});const d={content:i,targetElementCoordinates:s,onClickClose:l?()=>{a(void 0)}:void 0,arrowPosition:o};a(d)},c=()=>{a(void 0)};return s.subscribe(c),l?s.subscribe(q({element:e,eventName:"click",listener:d})):(s.subscribe(q({element:e,eventName:"mouseenter",listener:d})),s.subscribe(q({element:e,eventName:"mouseleave",listener:c}))),()=>{s.dispatch(void 0)}}),[t.current,i])}({targetElementRef:s,content:n("BU_LABEL_TOOLTIP_TEXT"),arrowPosition:"top"}),!1===r.businessUnitAdLabel?null:a?Un("div",{ref:s,className:Er(IE.locals.BusinessUnitAdLabel,{[IE.locals.BusinessUnitAdLabel_small]:o})},Un(ms,null)):null};var HE=e(7769),zE=e.n(HE);const WE=()=>{Pr(zE());const e=ny(),{playingState:t}=JS(),i=oE(),{socialAdvertising:o}=aT(),{themeEmptyParameters:n}=my(),{ageRestriction:r}=n||{},a=!1!==e.ageLabel,{tooltipText:s,label:l,domain:d,onClick:c,dspLabel:u}=OE(),h=Uc.getFlagValueAndActivateTestId("VAS_NEW_AD_LABEL_THEME");let p;return p=o?Un(fE,{onClick:c}):!1!==e.adLabel&&"idle"!==t&&Un(vE,{size:i,label:l,tooltipText:s,dspLabel:u,ageRestriction:a?r:void 0,domain:d,onClick:c,theme:"light"===h||"dark"===h?h:void 0}),Un("div",{class:HE.locals.AdLabelsPanel},p,Un(FE,{isSmall:"small"===i}))};var jE=e(4499),YE=e.n(jE);const GE=()=>(Pr(YE()),Un("div",{className:jE.locals.TopControls},Un(WE,null)));var XE=e(8183),KE=e.n(XE),qE=e(3030),QE=e.n(qE);const JE=sr({isTouchScreenDevice:!1});JE.Provider.displayName="IsTouchScreenDeviceContext";const ZE=e=>{let{adDisplayController:t}=e;return{isTouchScreenDevice:re(t.slotParameters.window)}},$E=()=>Ar(JE),eb=e=>{let{isHidden:t}=e;Pr(QE());const i=YS(),{isTouchScreenDevice:o}=$E();return Un("div",{className:Er(qE.locals.PlayerLikeTimeline,t&&qE.locals.PlayerLikeTimeline_hidden)},Un("div",{className:qE.locals.PlayerLikeTimeline__innerContainer},Un("div",{className:Er(qE.locals.PlayerLikeTimeline__backgroundTrack,o&&qE.locals.PlayerLikeTimeline__backgroundTrack_mobile)},Un("div",{className:qE.locals.PlayerLikeTimeline__background}),Un("div",{style:{transform:"scaleX("+i+") translateX(0%)"},className:qE.locals.PlayerLikeTimeline__timeLine}))))};var tb=e(8409),ib=e.n(tb);const ob=e=>{let{icon:t,onClick:i,className:o,disabled:n=!1}=e;return Pr(ib()),Un("div",{className:Er(tb.locals.ControlPanelButton,o,n&&tb.locals.ControlPanelButton_disabled),onClick:n?void 0:i},t)},nb=e=>{let{className:t}=e;const{playingState:i,play:o,pause:n}=JS();return Un(ob,{className:t,onClick:()=>{Dn({control:"pause"===i?"ControlPanelPlayButton":"ControlPanelPauseButton",purpose:"changePlayingState"}),"pause"===i?o():n()},icon:Un("pause"===i?gs:As,null)})},rb=sr({volumeStatus:"unknown",volume:0,setVolume:d,setMuted:d});rb.Provider.displayName="VolumeContext";const ab=e=>{let{adDisplayController:t}=e;return{volumeStatus:br(t.volumeStatus),volume:br(t.adVolume),setVolume:e=>t.setVolume(e),setMuted:e=>t.setMuted(e)}},sb=()=>Ar(rb);var lb=e(6535),db=e.n(lb);const cb=e=>{let{variant:t="slider",disabled:i=!1}=e;Pr(db());const{volumeStatus:o,setMuted:n,setVolume:r,volume:a}=sb(),s="unmuted"===o,[l,d]=dr(!1),[c,u]=dr(!1),h="slider"===t&&!i,p=h&&(c||l),m=hr(null);return Un("div",{onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},className:Er(lb.locals.ControlPanelSoundButton,p&&lb.locals.ControlPanelSoundButton_opened)},Un(ob,{onClick:()=>{Dn({control:s?"MuteButton":"UnmuteButton",purpose:"changeVolume"}),n(s)},disabled:i,icon:Un(ub,{volume:a})}),h?Un("div",{className:lb.locals.ControlPanelSoundButton__SliderContainer,onMouseDown:e=>{if(!m.current)return;u(!0);const{left:t,width:i}=m.current.getBoundingClientRect(),o=m.current.ownerDocument,n=e=>{const o=ko((e.clientX-t)/i,0,1);r(o)},a=()=>{u(!1),null==o||o.removeEventListener("mousemove",n),null==o||o.removeEventListener("mouseup",a)};o.addEventListener("mousemove",n),o.addEventListener("mouseup",a),n(e)},ref:m,onClick:()=>{Dn({control:"VolumeSlider",purpose:"changeVolume"})}},Un("div",{className:lb.locals.ControlPanelSoundButton__SliderContainerLiner}),Un("div",{className:lb.locals.ControlPanelSoundButton__SliderContainerThumbContainer},Un("div",{className:lb.locals.ControlPanelSoundButton__SliderContainerThumb,style:{left:Math.round(100*a)+"%"}}))):null)},ub=e=>{let{volume:t}=e;return Un(0===t?ys:t<.24?vs:t<.5?_s:fs,null)};var hb=e(9997),pb=e.n(hb);const mb=e=>{let{children:t,disabled:o,tag:n}=e;Pr(pb());const r=i(n)?()=>{Wc.log({name:"NbkButtonClicked",sensors:{tag:n},probability:1})}:void 0;return Un("button",{className:Er(hb.locals.PlayerButtonMimic,o&&hb.locals.PlayerButtonMimic_disabled),onClick:r,type:"button"},t)};var Ab=e(6515),gb=e.n(Ab);const vb=e=>{let{isHidden:t}=e;Pr(gb());const{width:i}=i_(),{isTouchScreenDevice:o}=$E(),n=ny(),{volumeStatus:r}=sb(),{playingState:a}=JS(),s=Cs({controlsVisibility:n,volumeStatus:r,playingState:a});return Un("div",{className:Er(Ab.locals.PlayerLikeControlLine,t&&Ab.locals.PlayerLikeControlLine_hidden)},Un("div",{className:Ab.locals.PlayerLikeControlLine__leftButtons},Un(nb,null),Un(cb,{variant:o?"toggle":"slider",disabled:!s})),Un("div",{className:Ab.locals.PlayerLikeControlLine__rightButtons},i>330?Un(mb,{tag:"externalPlayback",disabled:!0},Un(Ss,null)):null,i>440?Un(mb,{tag:"report"},Un(Ts,null)):null,Un(mb,{tag:"settings",disabled:!0},Un(Es,null)),Un(mb,{tag:"fullscreen"},Un(bs,null))))};var _b=e(6413),yb=e.n(_b);const fb=e=>{Pr(yb());const t=j_(),{themeEmptyParameters:i}=my(),o=i_(),{clickUrl:n,clickThrough:r}=Py(),{greenUrl:a,targetUrl:s}=i||{},l=mr((()=>{r({url:n,playerHandles:!0,clickSource:"SkinActionButton"})}),[r,n]),{showLabelOnButton:d,faviconSrc:c}=e,u=t("THEME_EMPTY_ACTION_BUTTON_LABEL"),h=t("THEME_EMPTY_ACTION_BUTTON_DEFAULT_SHORT_TITLE"),p=null!=a?a:h,m=o.width>=260;return Un(F_,{url:s,onClick:l},Un("div",{className:_b.locals.ActionPanelSmall__clickableContainer},Un("div",{className:_b.locals.ActionPanelSmall},c?Un("div",{className:_b.locals.ActionPanelSmall__favIconContainer},Un("img",{className:_b.locals.ActionPanelSmall__favIcon,src:c,alt:"favicon"})):void 0,m&&Un("span",{className:_b.locals.ActionPanelSmall__label},p),Un("div",{style:{paddingRight:4}},Un(q_,{size:"small"},d?u:void 0)))))},Sb=e=>{let{compactMode:t}=e;const{themeEmptyParameters:i}=my(),{clickThrough:o,clickUrl:n}=Py(),{greenUrl:r,label:a,targetUrl:s}=i||{},l=sy(),d=mr((()=>{o({url:n,playerHandles:!0,clickSource:"SkinActionButton"})}),[o,n]);return i?n?t?Un(fb,{showLabelOnButton:!0,faviconSrc:l}):Un(ty,{title:void 0,greenUrl:r,buttonLabel:a,targetUrl:s,onClickThrough:d,faviconSrc:l}):(Wc.log({name:"ThemeEmpty_noClickUrl"}),null):null},Tb=sr(op);Tb.Provider.displayName="ContentAfterAdPodContext";const Eb=e=>{let{className:t}=e;return Un(Ps,{className:t})};var bb=e(3765),Cb=e.n(bb);const Pb=e=>{let{className:t}=e;Pr(Cb());const{skipCallback:i,timeToSkip:o}=uy(),n=i_(),r=j_(),a=ny(),s=Ar(Tb),l=function(e){if(e<=0)return"";const t=Math.ceil(e)%100;return T(String(t),2,"0")}(o);if(!1===a.skip)return null;if(o===ly)return null;const d=r("SKIP"),c=0===o,u=Er(t,bb.locals.SkipButton__clickable,c&&bb.locals.SkipButton_active),h=n.width>320;let p;return p="startVideo"===s.type||"continueVideo"===s.type?s.poster:[],Un("div",{className:u,onClick:()=>{Dn({control:"SkipButton",purpose:"skip"}),i()}},Un("div",{className:bb.locals.SkipButton},h&&Un(Ob,{skipTitle:d,image:p}),Un("div",{className:bb.locals.SkipButton__contentRight},Un(wb,{countdownString:l}))))},wb=e=>{let{countdownString:t}=e;if(!t)return Un(Eb,{className:bb.locals.SkipButton__icon});const[i,o]=t;return Un("div",{className:bb.locals.SkipButton__timeToSkipString},Un("span",{className:bb.locals.SkipButton__timeToSkipString__leftDigit},i),Un("span",{className:bb.locals.SkipButton__timeToSkipString__rightDigit},o))},Ob=e=>{let{skipTitle:t,image:i}=e;return Un("div",{className:bb.locals.SkipButton__contentLeft},i.length>0?Un("img",{src:i[0].url,className:bb.locals.SkipButton__leftImage}):Un("div",{className:bb.locals.SkipButton__skipText},t))};var Ib=e(8237),kb=e.n(Ib);const Db=sr({ecomShopState:{ecomShop:void 0,isVisible:!1},setShopVisibility:d}),Nb=()=>Ar(Db),Rb=sr("default");Rb.Provider.displayName="SkinVariantContext";const Vb=()=>Ar(Rb),Lb=sr({shouldShowSkipButton:!0});Lb.Provider.displayName="SkipButtonContext";const xb=e=>{let{adDisplayController:t}=e;return br(t.shouldShowSkipButton)},Bb=()=>Ar(Lb),Mb=Math.max(.1,.05);var Ub=e(5655),Fb=e.n(Ub);const Hb=e=>{var t;Pr(Fb());const{setShopVisibility:i,ecomShopState:o}=Nb(),{isVisible:n}=o,{buttonText:r,type:a}=null!=(t=null==o?void 0:o.ecomShop)?t:{},s=j_(),l=1===a?Is:Ds,d=1===a?ks:Ns,c=s("ECOM_PRODUCTS_BUTTON_SHOW"),u=s("ECOM_PRODUCTS_BUTTON_HIDE"),h=pr((()=>[r,c,u].sort(((e,t)=>void 0===e||void 0===t?0:t.length-e.length))[0]),[r,c,u]);return void 0===o||void 0===o.ecomShop?null:Un("button",{type:"button",className:Ub.locals.EcomShopSkinButton,onClick:()=>{const e=!n;Wc.log({name:"EcomProductsVisibilityChangedWithSkinButton",data:{isVisible:e}}),i(e)}},Un(n?d:l,{className:Ub.locals.EcomShopSkinButton__ShowHideIcon}),!e.compactMode&&Un("div",{className:Ub.locals.EcomShopSkinButton__Text},Un("div",{className:Ub.locals.EcomShopSkinButton__TextMainLine},r),Un("div",{className:Ub.locals.EcomShopSkinButton__TextDetailsLine},Un("div",{className:Ub.locals.EcomShopSkinButton__Placeholder},h),Un("div",{className:Ub.locals.EcomShopSkinButton__TextDetailsContent},n?u:c))))},zb=e=>{let{showSkipButton:t}=e;Pr(kb());const{themeEmptyParameters:i}=my(),o=ny(),n=i_(),r=oE(),{isPackshotPlaying:a}=FS(),s=!1!==o.actionButton&&void 0!==i&&!a;let l;l=t&&!1!==o.skip?n.width<750:"small"===r;const d=Er(Ib.locals.CallToActionControls,l?Ib.locals.CallToActionControls_twoLines:Ib.locals.CallToActionControls_oneLine),c=n.width<Bf||n.height<300,{fontSize:u,skipButtonFontSize:h,isProductsButtonVisible:p}=Os(),m={"--ctalc-font-size":u,"--ctalc-skip-button-font-size":h},{shouldUseNewSkin:A}=IS();return Un("div",{className:d,style:A&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_LIFT_BUTTONS_UP_IN_NEW_SKIN")||"PLAYER_LIKE_SKIN"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_VARIANT")?Rs({},m,{position:"absolute",left:0,right:0,bottom:"small"===r?58:66}):m},s&&Un("div",{className:Ib.locals.CallToActionControls_SkinActionPanel},Un(Sb,{compactMode:c})),p&&Un("div",{className:Ib.locals.CallToActionControls_SkinProductsPackshotButton},Un(Hb,{compactMode:c})),t&&Un(Pb,{className:Ib.locals.CallToActionControls__SkipButton}))},Wb=e=>{let{hidden:t}=e;Pr(KE());const{shouldShowSkipButton:i}=Bb();return Un("div",{className:XE.locals.PlayerLikeBottomControls},Un(zb,{showSkipButton:i}),Un(eb,{isHidden:t}),Un(vb,{isHidden:t}))};var jb=e(7121),Yb=e.n(jb),Gb=e(6479),Xb=e.n(Gb);const Kb=()=>{Pr(Xb());const e=i_(),{tooltipContent:t}=xE();if(void 0===t)return null;const{content:i,arrowPosition:o,targetElementCoordinates:n,onClickClose:r}=t,a=n.top+n.height,s={};"top"===o?s.top=a+15:s.bottom=n.winHeight-a-15;const l=n.left+n.width/2;if(e.width<192)s.left=6,s.right=6;else{const t=6,i=e.width-180-6,o=l-90+6;s.left=ko(o,t,i),s.width=180}const d={};if("top"===o){d.top=-8;const e=6,t=150,i=l-s.left-12;d.left=ko(i,e,t)}return Un("div",{className:Gb.locals.Tooltip,style:s},Un("div",{className:Gb.locals.Tooltip__body},Un("div",{className:Gb.locals.Tooltip__text},i),r&&Un("div",{className:Gb.locals.Tooltip__closeContainer,onClick:r},Un(Ls,null))),Un("div",{className:Gb.locals.Tooltip__arrow,style:d},Un(Vs,null)))},qb=()=>{Pr(Yb());const{setContainerElement:e}=RE();return Un("div",{ref:t=>{t&&e(t)},className:jb.locals.TooltipContainer},Un(Kb,null))},Qb=sr({isHovered:!1,userHasInteracted:!1});Qb.Provider.displayName="SlotHoverContext";const Jb=e=>{const t=br(e),[i,o]=dr(t);return cr((()=>{t&&o(!0)}),[t]),{isHovered:t,userHasInteracted:i}},Zb=()=>Ar(Qb),$b=()=>{const{shouldHideControls:e}=(()=>{const{isHovered:e}=Zb(),{isTouchScreenDevice:t}=$E(),i=t,[o,n]=dr(i),r=hr(null),a=YS(),s=KS(),l=me(s)?a*s:0,d=!!t||3<l,{playingState:c}=JS(),u="pause"===c;return cr((()=>{if(d){if(!u)return e?(null!==r.current&&clearTimeout(r.current),void n(!1)):(r.current=setTimeout((()=>{n(!0)}),500),()=>{null!==r.current&&clearTimeout(r.current)});n(!1)}}),[e,d,u]),{shouldHideControls:o}})();return Un(Hn,null,Un(mE,{hidden:e}),Un(eT,null),Un(GE,null),Un(Wb,{hidden:e}),Un(GT,null),Un(qb,null))};var eC=e(8315),tC=e.n(eC);const iC=e=>{let{shouldPauseOnCreativeClick:t}=e;Pr(tC());const{play:i}=JS(),o=(()=>{const{playingState:e,isStarted:t,isSlowStart:i}=JS(),{play:o,loader:n}=ny(),{isAbuseSubmitted:r,abuseDisplayStatus:a}=xS(),{isPackshotPlaying:s}=FS(),l=cT(i_());if(r)return"none";const d="pause"===e,c=d&&!1!==o&&!("selection"===a&&l)&&!s;return c||d||t||!i||!1===n?c?"paused":"none":"loading"})();if("loading"===o)return Un("div",{className:eC.locals.OverlayLayer__spinnerContainer},Un(tE,null));return t&&"paused"===o?Un("div",{className:eC.locals.OverlayLayer__playButtonContainer,onClick:()=>{Dn({control:"OverlaysLayerPlayButton",purpose:"changePlayingState"}),i()}},Un(gs,null)):null};var oC=e(1796),nC=e.n(oC);const rC=e=>{let{className:t,fill:i}=e;return Pr(nC()),Un(xs,{className:Er(oC.locals.MuteIcon,{[oC.locals.MuteIcon_Fill]:i},t)})};var aC=e(1197),sC=e.n(aC);const lC=e=>{let{className:t,fill:i}=e;return Pr(sC()),Un(Bs,{className:Er(aC.locals.UnmuteIcon,{[aC.locals.UnmuteIcon_Fill]:i},t)})};var dC=e(8453),cC=e.n(dC);const uC=e=>{let{style:t}=e;const{playingState:i}=JS(),o=ny(),{width:n}=i_();Pr(cC());const{volumeStatus:r,setMuted:a}=sb(),s="videoInCombo"===Vb(),l="unmuted"===r;if(!Cs({playingState:i,volumeStatus:r,controlsVisibility:o}))return null;const d=(e=>{const t=e<=Bf?1:e/Bf;return{width:28*t,height:28*t}})(n);return Un("div",{style:Ms({},t,s?{"--mute-unmute-responsive-width":d.width+"px","--mute-unmute-responsive-height":d.height+"px"}:{}),className:Er(dC.locals.MuteUnmuteButtonWithoutBackground,{[dC.locals.MuteUnmuteButtonWithoutBackground_Size_Responsive]:s}),onClick:l?()=>{Dn({control:"MuteButtonWithoutBackground",purpose:"changeVolume"}),a(!0)}:()=>{Dn({control:"UnmuteButtonWithoutBackground",purpose:"changeVolume"}),a(!1)}},Un(l?rC:lC,{fill:s}))};var hC=e(9931),pC=e.n(hC);const mC=()=>{Pr(pC());const e=ny(),t="small"===oE(),{creativeType:i}=qT(),o=!1!==e.play&&t&&"themeEmpty"!==i&&"survey"!==i,n="RIGHT"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_TOP_BUTTONS_POSITION"),r="videoInCombo"===Vb(),{isPackshotPlaying:a}=FS();return Un(Hn,null,Un("div",{className:hC.locals.TopControlsLayer},(t||r)&&!a&&Un(uC,{style:{padding:4,marginLeft:n&&!r?"auto":""}}),o&&Un(nb,{className:hC.locals.TopControlsLayer__playButton})))};var AC=e(1209),gC=e.n(AC);const vC=e=>{let{onClick:t}=e;return Pr(gC()),t?Un("div",{className:AC.locals.UnderlyingLayer,onClick:t}):null};var _C=e(6719),yC=e.n(_C),fC=e(4659),SC=e.n(fC);const TC=e=>{let{text:t,textLength:i,viewBox:o}=e;return Pr(SC()),Un("svg",{className:Er(fC.locals.DisclaimerSvg),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:o},Un("text",{className:fC.locals.DisclaimerSvg_text,lengthAdjust:"spacing",textLength:i,y:"85%"},t))};var EC=e(550),bC=e.n(EC);const CC=((e,t,i,o)=>{const n=e=>.65*e-60,r=(5,330,e=>Math.max(5,Math.min(e,330)));return e=>{const t=n(e);return r(t)}})(),PC=e=>{let{text:t,heightPortion:i}=e;const o=i_();Pr(bC());const{textLength:n,viewBox:r,fontSize:a}=function(e,t){const{width:i,height:o}=e,n=o,r=Math.min(n,CC(i)),a=Math.max(i,t.length*r/1.2);return{fontSize:r,textLength:a,textPositionOffset:(n+r/2)/2,viewBox:"0 0 "+a+" "+n}}({width:o.width,height:o.height*i},t);return Un("div",{className:EC.locals.Disclaimer,style:{height:o.height*i,fontSize:a}},Un(TC,{text:t,textLength:n,viewBox:r}))};var wC=e(873),OC=e.n(wC),IC=e(4647),kC=e.n(IC);const DC=()=>{Pr(kC());const{label:e,dspLabel:t,tooltipText:i,onClick:o,domain:n}=OE(),r=ny(),{isInBanner:a}=EE(),s=a&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_SHOW_AD_LABEL_FOR_IN_BANNER");return!1!==r.adLabel||s?Un("div",{className:IC.locals.BackpackAdLabel,title:i,onClick:o},e,t&&" | "+t,n&&" | "+n):null},NC=sr(void 0);NC.Provider.displayName="AdSequenceContext";var RC=e(2392),VC=e.n(RC);const LC=()=>{Pr(VC());const e=Ar(NC),t=ny(),i=j_(),o="videoInCombo"===Vb();return e&&!1!==t.backpackAdSequence?o&&e.count<=1?null:Un("span",{className:RC.locals.BackpackAdSequence},e.index+1," ",i("OF")," ",e.count):null},xC=()=>{const{themeEmptyParameters:e}=my(),t=ny(),{ageRestriction:o}=e||{};return!1!==t.ageLabel&&i(o)?Un("span",null,o):null},BC=()=>{var e,t;const i=null!=(e=null==(t=UE())?void 0:t.businessUnit)&&e,o=j_()("BU_LABEL_TOOLTIP_TEXT");return!1===ny().businessUnitAdLabel?null:i?Un("span",null,o):null},MC=()=>{Pr(OC());const e=oE(),{supportsFullscreen:t}=IS(),{adLabel:i,businessUnitAdLabel:o,ageLabel:n,backpackAdSequence:r,timeline:a}=ny(),{isInBanner:s}=EE(),l="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_USE_OLD_AD_LABEL"),d=(s&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_SHOW_AD_LABEL_FOR_IN_BANNER")||!1!==i||!1!==o||!1!==n||!1!==r)&&!l;return d||t?Un("div",{className:Er(wC.locals.Backpack,{[wC.locals.Backpack_FloatedUp]:!1===a})},d&&Un("div",{className:wC.locals.Backpack_labels},Un(DC,null),Un(LC,null),Un(xC,null),Un(BC,null)),"small"===e&&t&&Un("div",{className:wC.locals.Backpack_buttons},Un(ob,{icon:Un(Us,null)}))):null};var UC=e(2219),FC=e.n(UC),HC=e(8265),zC=e.n(HC);const WC=e=>{let{className:t}=e;Pr(zC());const{playingState:i}=JS(),{volumeStatus:o}=sb(),{supportsFullscreen:n}=IS(),r=ny(),{isTouchScreenDevice:a}=$E(),s=Cs({controlsVisibility:r,volumeStatus:o,playingState:i}),l=!1!==r.play;return s||n||l?Un("div",{className:Er(HC.locals.ControlPanelControls,t)},l&&Un(nb,{className:HC.locals.ControlPanelControls__playButton}),s&&Un(cb,{variant:a?"toggle":"slider"}),n&&Un(ob,{icon:Un(Us,null),className:HC.locals.ControlPanelControls__fullscreenButton})):null};var jC=e(9740),YC=e.n(jC);const GC=e=>{let{className:t}=e;Pr(YC());const i=100*YS();return!1!==ny().timeline?Un("div",{className:Er(jC.locals.ControlPanelTimeLine,t)},Un("div",{className:Er(jC.locals.ControlPanelTimeLine__Bar,{[jC.locals.ControlPanelTimeLine__Bar_Full]:i>=100}),style:{width:i+"%"}})):null},XC=()=>{Pr(FC());const{creativeType:e}=qT(),t="survey"===e,i="small"===oE(),{height:o}=i_(),n=t?0:o*Mb,r=(()=>{const{creativeType:e}=qT(),t="survey"===e,i="videoInCombo"===Vb(),o="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_DELAY_INITIAL_PANEL_MINIMIZATION"),n=YS(),r=KS(),s=me(r)?n*r:0,{isHovered:l}=Zb(),{playingState:d}=JS(),c="small"===oE(),u="pause"===d,[h,p]=dr((()=>!o&&!c)),[m,A]=dr(!o),g=hr(null);return cr((()=>{m||s<3||A(!0)}),[m,s]),ur((()=>t||i?p(!0):m?(null!==g.current&&clearTimeout(g.current),c||l||u?p(!1):(g.current=setTimeout((()=>{p(!0)}),500),()=>{a(clearTimeout)&&null!==g.current&&clearTimeout(g.current)})):void 0),[l,c,u,m,t,i]),h})(),s=i||t,{controlPanel:l,timeline:d,play:c,adLabel:u,businessUnitAdLabel:h,ageLabel:p,backpackAdSequence:m}=ny(),A="videoInCombo"===Vb();if(!1===l&&!1===(!1!==u||!1!==h||!1!==p||!1!==m)&&!1===d&&!1===c)return null;const g=A||t,v=!s&&!A&&!t;return Un("div",{style:{minHeight:n},className:Er(UC.locals.ControlPanel,{[UC.locals.ControlPanel_small]:s,[UC.locals.ControlPanel_withoutShadow]:g,[UC.locals.ControlPanel_minimized]:r})},Un(MC,null),Un(GC,{className:UC.locals.ControlPanel__timeLine}),v&&Un(WC,{className:UC.locals.ControlPanel__controls}))},KC=()=>{Pr(yC());const{pause:e}=JS(),t="small"===oE(),{creativeType:i}=qT(),o="themeEmpty"===i,{isPackshotPlaying:n}=FS(),{isActionButtonVisible:r,isSkipButtonVisible:a,isProductsButtonVisible:s,shouldUseTwoLinesLayout:l,fontSize:d,skipButtonFontSize:c,disclaimerInfo:u,isEcomShopVisible:h,shouldUseSmallCta:p,isVerticalFormat:m,ecomShop:A,skinSize:g,isOutstream:v}=Os(),_="videoInCombo"===Vb(),y=t&&!n&&o&&!v,f={"--new-skin-font-size":d,"--new-skin-skip-button-font-size":c},S=Er(_C.locals.NewSkin,{[_C.locals.NewSkin_twoControlLines]:l,[_C.locals.NewSkin_vertical]:m,[_C.locals.NewSkin_smallControls]:p,[_C.locals.NewSkin_CtaAlwaysOnTenPercentOverBottom]:_}),T=Er(_C.locals.NewSkin__CtaContainer),E=Er(_C.locals.NewSkin__SkipButtonContainer),b=Er(_C.locals.NewSkin__ProductsPackshotContainer,{[_C.locals.NewSkin__ProductsPackshotContainer_visible]:h}),C="TRUE"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_USE_OLD_AD_LABEL"),{clickThrough:P}=Py(),w="small"===g||m?1:3;return Un("div",{className:S,style:f},Un("div",{className:_C.locals.NewSkin__DisclaimerContainer},u&&Un(PC,{heightPortion:u.mandatoryHeightPortion,text:u.text})),Un(vC,{onClick:y?e:void 0}),Un(eT,{onClickOutside:y?e:void 0}),Un(iC,{shouldPauseOnCreativeClick:y}),C&&Un("div",{className:_C.locals.NewSkin__AdLabelContainer},Un(WE,null)),Un("div",{className:_C.locals.NewSkin__TopControlsContainer},Un(mC,null)),a&&Un("div",{className:E},Un(Pb,null)),h&&A&&Un("div",{className:b},Un(vf,{products:A.products,autoScrollDelay:mf,maxItemsPerView:w,onProductClick:e=>{P({url:e.clickThruUrl,playerHandles:!0,clickSource:"EcomProduct"})}})),r&&Un("div",{className:T},Un(Sb,{compactMode:p})),s&&Un("div",{className:_C.locals.NewSkin__ProductsPackshotButton},Un(Hb,{compactMode:p})),Un("div",{className:_C.locals.NewSkin_BottomControlsContainer},Un(XC,null)),Un(GT,null),Un(qb,null))};var qC=e(4483),QC=e.n(qC);const JC=sr(void 0);JC.Provider.displayName="AdAnimationUnmuteButtonContext";const ZC=e=>{let{adDisplayController:t}=e;return br(t.volumeButtonCollapseProgress)},$C=()=>Ar(JC);var eP=e(5751),tP=e.n(eP);const iP=["isActive","className","size"],oP=e=>{let{isActive:t=!0,className:i,size:o}=e,n=function(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)i=r[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,iP);Pr(tP());const r=Er(eP.locals.SquareButton,i,{[eP.locals.SquareButton_active]:t,[eP.locals.SquareButton_fullSize]:"small"!==o});return Un(gT,Fs({},n,{isActive:t,className:r,buttonClassName:eP.locals.SquareButton__basebutton,contentClassName:eP.locals.SquareButton__basecontent}))};var nP=e(3683),rP=e.n(nP);const aP=()=>{const{playingState:e}=JS(),t=$C(),i=ny(),{isAbuseSubmitted:o}=xS();Pr(rP());const n=j_(),{volumeStatus:r,setMuted:a}=sb(),s=(e=>e*(2-e))($C()),l=1-s,d="unmuted"===r,c=mr((()=>{Dn({control:"OldMuteButton",purpose:"changeVolume"}),a(!0)}),[]),u=oE(),h="small"!==u,p=mr((()=>{Dn({control:"OldUnMuteButton",purpose:"changeVolume"}),a(!1)}),[]),m=!(Cs({playingState:e,volumeStatus:r,controlsVisibility:i})&&void 0!==t&&!o),A=n("UNMUTE");return Un(oP,{className:Er(nP.locals.VolumeButton,d?nP.locals.MuteButton:nP.locals.UnmuteButton,m&&nP.locals.MuteButton__hidden),onClick:d?c:p,size:u},Un("div",{className:nP.locals.VolumeButton__content},Un("div",{className:Er(nP.locals.VolumeButton__iconContainer,{[nP.locals.VolumeButton__iconContainer_fullSize]:h})},Un(d?rC:lC,{className:nP.locals.VolumeButton__icon})),1!==s&&Un("div",{className:Er(nP.locals.UnmuteButton__text,nP.locals.UnmuteButton__text_animation,{[nP.locals.UnmuteButton__text_fullSize]:h}),style:{maxWidth:140*l,transform:"scale("+l+")",opacity:l,marginRight:12*l}},A)))},sP=sr({cues:[]});sP.Provider.displayName="SubtitlesContext";const lP=e=>{let{adDisplayController:t}=e;return{cues:br(t.adPodCurrentSubtitles)}};var dP=e(4061),cP=e.n(dP);const uP=e=>{let{style:t={}}=e;Pr(cP());const{cues:i}=Ar(sP);return i.length>0?Un("div",{className:dP.locals.Subtitles__container,style:t},sc(i,(e=>{let{text:t}=e;return Un("div",{className:dP.locals.Subtitles__subtitle},t)}))):null},hP=e=>Math.floor(1e4*e)/1e4;var pP=e(1172),mP=e.n(pP);const AP="#F8CC46",gP=1,vP=e=>{let{currentNumber:t,count:i,color:o,adAnimationProgress:n,backgroundOpacity:r=gP}=e;Pr(mP());const{width:a,transform:s}=function(e){let{currentNumber:t,count:i}=e;const o=4*(i-1)/i,n=4*t;return{width:"calc("+hP(100/i)+"% - "+hP(o)+"px)",transform:"translateX(calc("+hP(100*t)+"% + "+hP(n)+"px))"}}({currentNumber:t,count:i});return Un("div",{className:pP.locals.TimelineBar__container,style:{width:a,transform:s}},Un("div",{className:Er(pP.locals.TimelineBar,pP.locals.TimelineBar__background),style:{opacity:""+r}}),Un("div",{className:Er(pP.locals.TimelineBar,pP.locals.TimelineBar__progress),style:{transform:"scaleX("+n+")",backgroundColor:o}}))},_P=sr({adPodsCount:0,playingAdPodIndex:0});_P.Provider.displayName="MediaFileContext";const yP=e=>{let{adPodsCount:t,playingAdPodIndex:i}=e;return{adPodsCount:br(t),playingAdPodIndex:br(i)}};var fP=e(7864),SP=e.n(fP);const TP=e=>{let{color:t}=e;Pr(SP());const{adPodsCount:i,playingAdPodIndex:o}=Ar(_P),n=YS();return!1!==ny().timeline?Un("div",{className:fP.locals.Timeline},sc(function(e){const t=[];for(let i=0;i<e;i++)t.push(i);return t}(i),(e=>Un(vP,e<o?{key:e,adAnimationProgress:1,currentNumber:e,count:i,backgroundOpacity:.3,color:t}:e===o?{key:e,adAnimationProgress:n,currentNumber:e,count:i,backgroundOpacity:.3,color:t}:{key:e,adAnimationProgress:0,currentNumber:e,count:i,backgroundOpacity:.3,color:t})))):null};var EP=e(1895),bP=e.n(EP);const CP=()=>{const{isAbuseSubmitted:e}=xS();Pr(bP());const{isTouchScreenDevice:t}=$E(),i=CE(),o=Boolean(i),n=!t||!o,{isHovered:r}=Zb(),a=KS(),{playingState:s}=JS(),l=YS(),d=ny(),{volumeStatus:c}=sb(),{height:u}=i_();if(e)return null;const h=r||a*l<2||"pause"===s,p=Cs({playingState:s,volumeStatus:c,controlsVisibility:d}),m=!1!==d.timeline;let A;return A=!(!p&&!m)&&(!!h||!n),Un("div",{className:EP.locals.VideoInComboControls,style:{height:u/8+"px"}},Un("div",{style:{position:"absolute",left:0,right:0,bottom:0,zIndex:-1}},Un("div",{className:A?EP.locals.ComboVideoControls__controlsBottomShadow_visible:EP.locals.ComboVideoControls__controlsBottomShadow_hidden},Un(mE,null)),Un(PP,null)),Un("div",null,n?Un(wP,{shouldShowHoverControls:h}):Un(OP,null)))},PP=()=>{const e=ny(),t=Y_(),i=ws(UE(),t);if(!i||!1===e.disclaimers)return Un("div",{style:{height:"6px"}});const{text:o,mandatoryHeightPortion:n}=i;return Un("div",{className:EP.locals.DisclaimerContainer},Un(PC,{heightPortion:n,text:o}))},wP=e=>{let{shouldShowHoverControls:t}=e;return Un("div",{className:Er(t?EP.locals.ComboVideoControlsMuteAndTimelineWithHoverEffects_visible:EP.locals.ComboVideoControlsMuteAndTimelineWithHoverEffects_hidden)},Un(uC,null),Un("div",{style:{position:"absolute",left:12,right:12,bottom:40}},Un(TP,{color:AP})))},OP=()=>Un(Hn,null,Un(uC,{style:{paddingBottom:10}}),Un(TP,{color:AP})),IP=()=>{Pr(QC());const{shouldUseNewSkin:e}=IS(),{isActionButtonVisible:t,isSkipButtonVisible:i,isProductsButtonVisible:o,shouldUseTwoLinesLayout:n,skinSize:r,fontSize:a,skipButtonFontSize:s,disclaimerInfo:l,isEcomShopVisible:d,shouldUseSmallCta:c,isOutstream:u,isVerticalFormat:h,ecomShop:p}=Os(),{clickThrough:m}=Py();if(e)return"PLAYER_LIKE_SKIN"===Uc.getFlagValueAndActivateTestId("VAS_NEW_SKIN_VARIANT")?Un($b,null):Un(KC,null);const A="small"===r||h?1:3,g="small"===r,v={"--skin-font-size":a,"--skin-skip-button-font-size":s},_=Er(qC.locals.Skin,{[qC.locals.Skin_twoControlLines]:n,[qC.locals.Skin_vertical]:h,[qC.locals.Skin_smallControls]:c}),y=Er(qC.locals.Skin__CtaContainer),f=Er(qC.locals.Skin__SkipButtonContainer),S=Er(qC.locals.Skin__SubtitlesContainer,{[qC.locals.Skin__SubtitlesContainer_bottom]:g}),T=Er(qC.locals.Skin__ProductsPackshotContainer,{[qC.locals.Skin__ProductsPackshotContainer_visible]:d});return Un("div",{className:_,style:v},Un(eT,null),Un("div",{className:qC.locals.Skin__AdLabelContainer},Un(WE,null)),i&&Un("div",{className:f},Un(Pb,null)),d&&p&&Un("div",{className:T},Un(vf,{products:null==p?void 0:p.products,autoScrollDelay:mf,maxItemsPerView:A,onProductClick:e=>{m({url:e.clickThruUrl,playerHandles:!0,clickSource:"EcomProduct"})}})),t&&Un("div",{className:y},Un(Sb,{compactMode:c})),o&&Un("div",{className:qC.locals.Skin__ProductsPackshotButton},Un(Hb,{compactMode:c})),u&&Un("div",{className:qC.locals.Skin__VideoInComboControlsContainer},Un(CP,null)),!u&&Un(Hn,null,Un("div",{className:qC.locals.Skin__MuteButtonAndSubtitlesContainer},Un("div",{className:S},Un(uP,null)),Un(aP,null)),Un("div",{className:qC.locals.Skin__DisclaimerContainer},l&&Un(PC,{heightPortion:l.mandatoryHeightPortion,text:l.text})),Un(TP,{color:AP})),!d&&Un(uE,null),Un(GT,null),Un(qb,null))},kP=sr(void 0);kP.Provider.displayName="VideoContentSizeContext";const DP=[e=>{return Un(iE.Provider,{value:(t=e.adDisplayController,wa(br(t.slotParameters.size))),children:e.children});var t},e=>{return Un(OS.Provider,{value:(t=e.adDisplayController,{supportsFullscreen:!1,shouldUseNewSkin:t.isNewSkinEnabled().isEnabled}),children:e.children});var t},e=>Un(o_.Provider,{value:e.slotElement,children:e.children}),e=>Un(qS.Provider,{value:QS(e),children:e.children}),e=>Un(_P.Provider,{value:yP(e.adDisplayController),children:e.children}),e=>Un(WS.Provider,{value:jS(e.adDisplayController),children:e.children}),e=>Un(GS.Provider,{value:XS(e),children:e.children}),e=>Un(e_.Provider,{value:t_(e.adDisplayController.slotParameters.size),children:e.children}),e=>Un(v_.Provider,{value:e.adDisplayController.stats.log,children:e.children}),e=>{return Un(kP.Provider,{value:(t=e.adDisplayController.videoContentSize,br(t))},e.children);var t},e=>Un(dy.Provider,{value:cy({timeToSkipSignal:e.adDisplayController.timeToSkip,skipCallback:e.adDisplayController.onSkinSkipButtonClick}),children:e.children}),e=>Un(Lb.Provider,{value:xb(e),children:e.children}),e=>Un(Rb.Provider,{value:e.adDisplayController.skinVariant,children:e.children}),e=>Un(DE.Provider,{value:NE(e.adDisplayController.tooltipParameters.container),children:e.children}),e=>Un(VE.Provider,{value:LE(e.adDisplayController.tooltipParameters.content),children:e.children}),e=>{return Un(bE.Provider,{value:(t=e.adDisplayController,br(t.videoSlotClickUrl)),children:e.children});var t},e=>Un(JE.Provider,{value:ZE(e),children:e.children}),e=>Un(Qb.Provider,{value:Jb(e.adDisplayController.slotParameters.isHovered),children:e.children}),e=>Un(z_.Provider,{value:W_(e.adDisplayController.playbackParameters),children:e.children}),e=>Un(iy.Provider,{value:oy(e.adDisplayController.combinedSkinControlsVisibility),children:e.children}),e=>Un(rb.Provider,{value:ab(e),children:e.children}),e=>Un(JC.Provider,{value:ZC(e),children:e.children}),e=>Un(VS.Provider,{value:LS(e),children:e.children}),e=>Un(VT.Provider,{value:LT(e),children:e.children}),e=>Un(SE.Provider,{value:TE(e),children:e.children}),e=>Un(tT.Provider,{value:iT(e),children:e.children}),e=>Un(PE.Provider,{value:wE(e),children:e.children}),e=>{return Un(Tb.Provider,{value:(t=e.adDisplayController,br(t.contentAfterAdPod)),children:e.children});var t},e=>Un(ry.Provider,{value:ay(e.adDisplayController.faviconSrc),children:e.children}),e=>Un(nT.Provider,{value:rT(e),children:e.children}),e=>Un(hy.Provider,{value:py(e.adDisplayController),children:e.children}),e=>Un(BE.Provider,{value:ME(e.adDisplayController),children:e.children}),e=>Un(MS.Provider,{value:US(e.adDisplayController),children:e.children}),e=>Un(sP.Provider,{value:lP(e)},e.children),e=>{return Un(BS.Provider,{value:(t=e.adDisplayController.showTitleAndBody,void 0===(i=br(t))?"FALSE"!==Uc.getFlagValueAndActivateTestId("VAS_SHOW_TITLE_AND_BODY_AD_PARAMETER_DEFAULT"):i)},e.children);var t,i},e=>Un(XT.Provider,{value:KT(e),children:e.children}),e=>{return Un(NC.Provider,{value:(t=e.adDisplayController,br(t.displayAdSequence)),children:e.children});var t},e=>Un(by.Provider,{value:Cy(e.adDisplayController),children:e.children}),e=>{return Un(Db.Provider,{value:(t=e.adDisplayController,{ecomShopState:br(t.ecomShopState),setShopVisibility:e=>{t.setEcomShopState({isVisible:e},!0)}}),children:e.children});var t}],NP=(RP=()=>Un(IP,null),(e,t)=>{const i=new Bc,o=new Bc,n=new Bc,r=new Promise(((e,t)=>{i.addOne((()=>{i.removeAll(),o.removeAll(),e()})),o.addOne((e=>{i.removeAll(),o.removeAll(),t(e)}))})),a=new Promise(((e,t)=>{n.addOne((e=>{t(e)}))})),s=Un(Zv,{onFirstRender:e=>{"success"===e.status?i.dispatch(void 0):o.dispatch(e.error)},onRuntimeError:e=>{n.dispatch(e)}},Un($v,{components:DP,componentsProps:{id:"skin",adDisplayController:t,slotElement:e}},RP()));return oc("Skin: render skin"),ar(s,e),{firstRenderPromise:r,runtimeErrorPromise:a,clear:()=>{i.removeAll(),o.removeAll(),oc("Skin: destroy skin"),ar(null,e)}}});var RP;class VP extends Hc{constructor(e){var t;super(),t=this,this.showAdPlaybackControllers=[],this.subscriptions=[],this.oldDestroyHandlers=[],this.isUsingOldDestroy="TRUE"!==Uc.getFlagValueAndActivateTestId("VAS_USE_DESTROYABLE_AD_STORE"),this.getPublicInstance=()=>({createPlaybackController:this.createPlaybackController,destroy:this.destroy,filterAdPodsIndependentOnHtmlControls:this.filterAdPodsIndependentOnHtmlControls,getAdBreakType:this.getAdBreakType,getAdDuration:this.getAdDuration,getAdPodsCount:this.getAdPodsCount,getAdSourceTypes:this.getAdSourceTypes,getNonYandexVastXmlTree:this.getNonYandexVastXmlTree,getYandexBidReqIdArray:this.getYandexBidReqIdArray,hasNotReplacedBroadcastAd:this.hasNotReplacedBroadcastAd,hasYandexCreative:this.hasYandexCreative,preload:this.preload,preventPlaying:this.preventPlaying,separateAdPods:this.separateAdPods,setStatsRootFields:this.setStatsRootFields,showAd:this.showAd,subscribe:this.subscribe}),this.createPlaybackController=this.ignoreAfterDestroy((function(e,i,o){void 0===o&&(o={});const{config:n,errors:r}=Pa(o);Xt(r),o.renderSkin;const a=new wS({videoSlot:e,layoutSlot:i,mediaAds:t.params.mediaAds,playbackParameters:n,skinParameters:{renderSkinFunction:NP,skinVariant:"default"},stats:t.params.stats}).getPublicInstance();a.subscribe("AdStartRequest",(()=>{t.cancelPreloading("PublicControllerPlayAd")}));const s=Vc(t.subscriptions,(e=>{let{event:t}=e;return"CreateAdPlaybackController"===t}));return Jl(s,(e=>{let{handler:t}=e;return t({playbackController:a})})),a}),"AdStore.createPlaybackController",Fc.CALL_NORMALLY),this.showAd=this.ignoreAfterDestroy((function(e,i,o){void 0===o&&(o={}),t.cancelPreloading("AdStoreShowAd");const n=t.createPlaybackController(e,i,o);t.showAdPlaybackControllers.push(n);const r=new Promise((e=>{n.subscribe("AdStopped",(()=>{t.showAdPlaybackControllers=Vc(t.showAdPlaybackControllers,(e=>e!==n)),e()}))}));return n.playAd(),r}),"AdStore.showAd",Fc.CALL_NORMALLY),this.getAdDuration=this.ignoreAfterDestroy((()=>qa(this.params.mediaAds)),"AdStore.getAdDuration",Fc.CALL_NORMALLY),this.separateAdPods=this.ignoreAfterDestroy((()=>sc(this.params.mediaAds,(e=>{const t=new VP({mediaAds:[e],vast:RT(this.params),stats:this.params.stats});return Jl(this.subscriptions,(e=>{let{event:i,handler:o}=e;t.subscribe(i,o)})),this.addDestroyHandler((()=>{t.destroy()})),"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ALLOW_ONLY_PUBLIC_API_FOR_AD_STORE")?t.getPublicInstance():t}))),"AdStore.separateAdPods",Fc.CALL_NORMALLY),this.getAdSourceTypes=this.ignoreAfterDestroy((()=>Vc(sc(this.params.mediaAds,(e=>{let{contentType:t}=e;return t})),((e,t,i)=>i.indexOf(e)===t))),"AdStore.getAdSourceType",Fc.CALL_NORMALLY),this.getAdBreakType=this.ignoreAfterDestroy((()=>{return"midroll"===(e=this.params.mediaAds[0].adBreak).adType?null!=(t=e.originalAdType)?t:"midroll":e.adType;var e,t}),"AdStore.getAdBreakType",Fc.CALL_NORMALLY),this.setStatsRootFields=this.ignoreAfterDestroy((e=>{this.params.stats.setRootFields(e),Wc.setRootFields(e)}),"AdStore.setStatsRootFields",Fc.CALL_NORMALLY),this.hasNotReplacedBroadcastAd=this.ignoreAfterDestroy((()=>(this.params.stats.error({error:new Ml({code:"USING_HAS_NOT_REPLACED_BROADCAST_AD_METHOD_FROM_AD_STORE",details:void 0})}),!1)),"AdStore.hasNotReplacedBroadcastAd",Fc.CALL_NORMALLY),this.hasYandexCreative=this.ignoreAfterDestroy((()=>Gc(this.params.mediaAds,(e=>e.getIsYandexCreative()))),"AdStore.hasYandexCreative",Fc.CALL_NORMALLY),this.getNonYandexVastXmlTree=this.ignoreAfterDestroy((()=>this.hasYandexCreative()?void 0:Hs(RT(this.params))),"AdStore.getNonYandexVastXmlTree",Fc.CALL_NORMALLY),this.preload=this.ignoreAfterDestroy((e=>{if(a(kc(window)))return Promise.resolve();if(void 0===this.preloadPromise){const t=sc(this.params.mediaAds,(t=>t.preload(e)));this.preloadPromise=Promise.all(t).then(d)}return this.preloadPromise}),"AdStore.preload",Fc.CALL_NORMALLY),this.filterAdPodsIndependentOnHtmlControls=this.ignoreAfterDestroy((e=>{const[t,i]=Qi(this.params.mediaAds,(e=>e.getIfIsRequiredHtmlControls()));this.params.mediaAds=Mo(i),Jl(t,(t=>{t.trackError(new Ml({code:"CANNOT_SHOW_CPC_CONTROLS",details:{mediaFile:t.getJSMediaFile(),reason:e}}))}))}),"AdStore.filterAdPodsIndependentOnHtmlControls",Fc.CALL_NORMALLY),this.getYandexBidReqIdArray=this.ignoreAfterDestroy((()=>sc(this.params.mediaAds,(e=>{let{vastAd:t}=e;return t.bidreqid}))),"AdStore.getYandexBidReqIdArray",Fc.CALL_NORMALLY),this.preventPlaying=this.ignoreAfterDestroy(((e,t)=>{Jl(this.params.mediaAds,(i=>{i.trackError(new Ml({code:"AD_STORE_PLAYING_PREVENTED",details:{mediaFiles:i.vastAd.mediaFiles,reason:e,details:t}}))})),this.params.mediaAds=[]}),"AdStore.preventPlaying",Fc.CALL_NORMALLY),this.getAdPodsCount=this.ignoreAfterDestroy((()=>this.params.mediaAds.length),"AdStore.getAdPodsCount",Fc.CALL_NORMALLY),this.subscribe=this.ignoreAfterDestroy(((e,t)=>(this.subscriptions.push({event:e,handler:t}),()=>{this.subscriptions=Vc(this.subscriptions,(i=>!(i.event===e&&i.handler===t)))})),"AdStore.subscribe",Fc.CALL_NORMALLY),this.addOldDestroyHandler=e=>{this.oldDestroyHandlers.push(e)},this.cancelPreloading=this.ignoreAfterDestroy((e=>{Jl(this.params.mediaAds,(t=>{t.cancelPreloading(e)}))}),"AdStore.cancelPreloading",Fc.CALL_NORMALLY),this.destroyPreloading=this.ignoreAfterDestroy((()=>{Jl(this.params.mediaAds,(e=>{e.cancelPreloading("Destroy")}))}),"AdStore.destroyPreloading",Fc.CALL_NORMALLY),this.params=e,(this.isUsingOldDestroy?this.addOldDestroyHandler:super.addDestroyHandler)((()=>{Jl(this.showAdPlaybackControllers,(e=>{e.stopAd()})),this.showAdPlaybackControllers.length=0,this.destroyPreloading(),this.preloadPromise=void 0,this.subscriptions.length=0}))}destroy(){this.isUsingOldDestroy?j(this.oldDestroyHandlers):super.destroy()}}class LP extends Hc{constructor(e){let{adConfig:t,vmap:i,adBreak:o,adPlacementOptions:n,stats:r,adLoaderConfigType:a}=e;if(super(),this.getPublicInstance=()=>({loadAd:this.loadAd,destroy:()=>this.destroy()}),this.load=async e=>{const{mediaAds:t}=await this.startLoadAd({adBreak:e});return t},this.loadAd=async()=>{try{const e=this.adBreak?this.adBreak:this.getDefaultAdBreakToPlayAd();if(!e)throw new Ml({code:"AD_BREAK_IS_NOT_FOUND",details:{adConfig:this.adConfig,adBreaks:this.getAdBreaks()}});const{mediaAds:t,vast:i}=await this.startLoadAd({adBreak:e}),o=new VP({mediaAds:t,vast:i,stats:this.stats});return"TRUE"!==Uc.getFlagValueAndActivateTestId("VAS_USE_DESTROYABLE_AD_STORE")||this.addDestroyHandler((()=>{o.destroy()})),"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_ALLOW_ONLY_PUBLIC_API_FOR_AD_STORE")?o.getPublicInstance():o}catch(Mw){throw Ki(Mw),this.stats.errorToStats(Mw),Mw}},this.getInPageBlock=()=>qo(this.getAdBreaks(),"inpage")[0],this.getPrerollBlock=()=>qo(this.getAdBreaks(),"preroll")[0],this.getDefaultAdBreakToPlayAd=()=>{const{impId:e,adBreakType:t}=this.adConfig;return Ko(t)&&this.stats.log({name:"UseAdBreakTypeFromConfigToFindAdBreak",probability:Cc}),function(e,t){let{impId:i,adBreakType:o}=t;return he(i)?Nl(e,(e=>e.impId===i)):Ko(o)?Nl(e,(e=>e.adType===o)):void 0}(this.getAdBreaks(),{impId:e,adBreakType:null!=t?t:"preroll"})},this.adConfig=t,this.adBreak=o,this.vmap=i,this.adPlacementOptions=n,this.stats=r,oc("AdLoader: create"),r.log({name:"CreateAdLoader",data:{adConfig:t,adBreak:o},dailySensors:{adLoaderConfigType:a}}),qu({secureMode:t.secureMode,url:void 0})){const e=jh();e.addUser(),this.addDestroyHandler((()=>{e.removeUser()})),"idle"===e.state.getValue().name&&e.init({container:document.body,initTimeout:5e3})}}getAdBreaks(){return this.adBreak?[this.adBreak]:this.vmap.adBreaks}async startLoadAd(e){let{adBreak:t}=e;const{adConfig:i,adPlacementOptions:o}=this;return zo({adConfig:i,adBreak:t,adPlacementOptions:o,win:window})}}class xP{constructor(){this.adBreaks=[],this.isSingleVideoSession=!1,this.isUniformat=!1}}const BP={start:"preroll",end:"postroll"},MP=v({inpage:0,preroll:0,midroll:0,pauseroll:0,postroll:0,postPauseroll:0,replaced:0,notReplaced:0,inroll:0}),UP={dark:"dark",light:"light"},FP={top:"top",bottom:"bottom",auto:"auto","bottom-right":"bottom-right","bottom-left":"bottom-left","top-left":"top-left","top-right":"top-right"},HP=e=>{const t=Gs("Collapse",e);return!0===Gs("Repeat",e)?"auto":!1===t?"manual":null},zP=e=>{const t=rt(e),{vmap:i,events:o,valuesEvents:n,errors:r}=Js({vmapXmlObject:{responseText:e,xml:t},vmapLoadParams:void 0,vmapAdBreaksConfig:void 0});return Xt(r),Jl(o,(e=>{Wc.log(Zs({},e,{probability:1}))})),Jl(n,(e=>{Wc.log(e)})),i},WP=e=>{if(!o(e))return;const{preferableAdSize:t}=e;if(!o(t))return;const{width:i,height:n}=t;return he(i)&&he(n)?{width:i,height:n}:void 0},jP=v(Ld),YP="Unsafe",GP=e=>{if(!o(e))return YP;const{secureMode:t}=e;return t&&-1!==jP.indexOf(t)?t:YP},XP=["vastBase64"],KP=["videoContentId"],qP=()=>{if(!tc.isDebugEnabled)return;const e=ZA();if(null==e||!e.getVmap)return;const t=e.getVmap();return Wc.log({name:"LoadInlineTestUtilsVmap",data:{vmap:t},probability:1}),t},QP=e=>{const t=e.match(/<!-- Page (\d+) disabled -->/i);if(!Array.isArray(t))return;const[,i]=t;return void 0!==i?parseInt(i,10):void 0},JP=()=>ad()/1e3,ZP="adsdksessionwatchedtimesinceadmap";class $P{constructor(){void 0!==localStorage&&(this.storage=localStorage)}update(e){let{category:t}=e;!function(e){let{category:t,storage:i,now:o=JP}=e;if(!i)return;const n=sl(i);n[t]=o();try{((e,t,i)=>{try{e.localStorage.setItem(t,i)}catch(o){return}})({localStorage:i},ZP,JSON.stringify(n))}catch(r){}}({category:t,storage:this.storage})}getWatchedTimeSinceAd(e){let{category:t}=e;return function(e){let{category:t,storage:i,now:o=JP}=e;if(!i)return 0;const n=sl(i)[t];if(!he(n))return 0;const r=o();if(!he(r))return 0;const a=r-n;return he(a)?a:0}({category:t,storage:this.storage})}}const ew=tc.loaderLoadedFromAnYandexRu?"https://"+Qd+"/vmap/":"https://"+Jd+"/ads/vmap/";let tw=0;const iw=e=>!1===e?"0":!0===e?"1":void 0,ow={width:16,height:9},nw=(rw=Hf,aw=Ff,e=>{let t,i;const o=()=>{rw(i),i=NaN},n=function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o(),i=aw((o=>{i=NaN,t=e.call(this,o,...r)})),t};return n.cancel=o,n});var rw,aw;const sw=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent;return-1!==t.indexOf("Opera Mini")||-1!==t.indexOf("; wv)")&&-1!==t.indexOf(" OPR/")||-1!==t.indexOf(" OPiOS/")}();class lw extends Hc{constructor(e){super(),this.overlapVisibility=new hh(!1),this.recalculateElementOverlap=nw((()=>{if(this.isDestroyed)return;const e=!gl(this.params.element,this.params.points);this.overlapVisibility.dispatch(e)})),this.params=e,this.startObservingElementOverlap()}startObservingElementOverlap(){this.addDestroyHandler(_o(this.recalculateElementOverlap));const{promise:e,clear:t}=Qu(0,window);e.then(this.recalculateElementOverlap).catch(J),this.addDestroyHandler(t)}}const dw=[0,0];class cw extends Hc{constructor(e,t){super(),this.placeholderSlot=e,this.containerElement=t}waitTillContainerVisibleWithOffset(e){const t=this.containerElement.ownerDocument.defaultView.IntersectionObserver;let i=d;const o=new Promise((o=>{const n=new t((e=>{let[{isIntersecting:t,intersectionRatio:n}]=e;(t||n>0)&&(i(),o())}),{threshold:0,rootMargin:e+" 0px"});n.observe(this.containerElement),i=()=>{n.disconnect()}}));return this.addDestroyHandler(i),o}whenCanShow(){const e=this.placeholderSlot;if(oc("whenCanShow: start logic with threshold=[0.5]"),function(e,t){return de(e.ownerDocument)&&$a(e)>=.5}(e))return oc("whenCanShow: element is already visible"),Promise.resolve(void 0);if(Al(e)&&hl(e))return oc("whenCanShow: element is at the end of the <body>"),Promise.resolve(void 0);const t=[],i=()=>{oc("whenCanShow: stop logic"),j(sc(t,(e=>()=>y(e))))};let o=d;if(Ou&&!function(e){return e.top!==e.self}(window)){oc("whenCanShow: use intersection observer");const t=.5*e.getBoundingClientRect().height;this.waitTillContainerVisibleWithOffset("-"+t+"px").then((()=>{oc("whenCanShow: waitTillVisibleWithOffset complete with thresholdBoundary=["+t+"]"),o()})).catch(J)}return t.push(_o((()=>{const t=de(document),n=$a(e),r=t&&n>=.5,a=Al(e)&&hl(e);r||a?(oc("whenCanShow: visibility detected by interval isVisible=["+r+"] isAtTheEndOfTheBody=["+a+"]"),o(),i()):oc("whenCanShow: element visibility is NOT detected by interval documentVisibility=["+t+"}] elementVisibilityRatio=["+n+"] threshold=[0.5]")}))),this.addDestroyHandler(i),new Promise((e=>{o=e}))}getVisualVisibilitySensor(){const e=new PS(this.placeholderSlot,{considerDocumentVisibility:!1}),t=new hh(!1);e.totalVisibilityValueSignal.add((e=>t.dispatch(e)));const i=new hh(!0),o=new lw({element:this.placeholderSlot,points:[dw]});i.dispatch(o.overlapVisibility.getValue()),this.addDestroyHandler(o.overlapVisibility.add(i)),this.addDestroyHandler((()=>{o.destroy()}));const n=new hh(e.totalVisibilityValueSignal.getValue()&&i.getValue());return on([t,i],((e,t)=>e&&t),(e=>n.dispatch(e))),this.addDestroyHandler((()=>{i.removeAll(),e.destroy()})),n}waitForWarmingUpPosition(){return Ou?this.waitTillContainerVisibleWithOffset("200%"):Promise.resolve()}}const uw="_displayController_"+Math.floor(1e3*Math.random());class hw extends class{constructor(e,t){var i;this.adStarted=!1,this.paused=!0,this.stats=t,i=e,this[uw]=i,yl(this).onBeforeAdStart.add((e=>{let{adType:t}=e;if("function"===typeof this.onBeforeAdStart)try{this.onBeforeAdStart(t)}catch(Bv){console.error(Bv)}})),yl(this).onAdStartRejected.add((()=>{if("function"===typeof this.onAdStartRejected)try{this.onAdStartRejected()}catch(Bv){console.error(Bv)}})),yl(this).onAdStart.add((e=>{let{adType:t}=e;if("function"===typeof this.onAdStart)try{this.onAdStart(t)}catch(Bv){console.error(Bv)}})),yl(this).onAdMediaStart.add((e=>{let{adType:t}=e;if(this.adStarted=!0,!this.paused&&"function"===typeof this.onPlayStateChanged)try{oc("PublicController: call onPlayStateChanged(true) within onAdMediaStart"),this.onPlayStateChanged(!0)}catch(Bv){console.error(Bv)}if("function"===typeof this.onAdMediaStart)try{this.onAdMediaStart(t)}catch(Bv){console.error(Bv)}})),yl(this).onAdMediaEnd.add((e=>{let{adType:t}=e;if("function"===typeof this.onComplete)try{this.onComplete()}catch(Bv){console.error(Bv)}if("function"===typeof this.onAdMediaEnd)try{this.onAdMediaEnd(t)}catch(Bv){console.error(Bv)}if("function"===typeof this.onPlayStateChanged)try{oc("PublicController: call onPlayStateChanged(false) within onAdMediaEnd"),this.onPlayStateChanged(!1)}catch(Bv){console.error(Bv)}})),yl(this).onAdEnd.add((e=>{let{adType:t}=e;if("function"===typeof this.onAdEnd)try{this.onAdEnd(t)}catch(Bv){console.error(Bv)}})),yl(this).onClickThrough.add((()=>{if("function"===typeof this.onClickThrough)try{this.onClickThrough()}catch(Bv){console.error(Bv)}})),yl(this).onAdSkipped.add((e=>{let{adType:t}=e;if("function"===typeof this.onAdSkipped)try{this.onAdSkipped(t)}catch(Bv){console.error(Bv)}})),yl(this).onAdPodClose.add((()=>{if("function"===typeof this.onAdSkipped)try{this.onAdSkipped(void 0)}catch(Bv){console.error(Bv)}}));const o=()=>{if(this.paused=!1,this.adStarted&&"function"===typeof this.onPlayStateChanged)try{oc("PublicController: call onPlayStateChanged(true) within start or resume"),this.onPlayStateChanged(!0)}catch(Bv){console.error(Bv)}};yl(this).onAdPodResume.add(o),yl(this).onAdPodStart.add(o),yl(this).onAdPodPause.add((()=>{if(this.paused=!0,"function"===typeof this.onPlayStateChanged)try{oc("PublicController: call onPlayStateChanged(false) within onAdPodPause"),this.onPlayStateChanged(!1)}catch(Bv){console.error(Bv)}})),yl(this).adSkippableState.add((e=>{if("function"===typeof this.onAdSkippableStateChange)try{this.onAdSkippableStateChange(e)}catch(Bv){console.error(Bv)}})),yl(this).onAdPodImpression.add((()=>{if("function"===typeof this.onAdImpression)try{this.onAdImpression()}catch(Bv){console.error(Bv)}})),yl(this).adContentSize.add((()=>{if("function"===typeof this.onAdContentSizeChange)try{this.onAdContentSizeChange()}catch(Bv){console.error(Bv)}})),yl(this).adPodRemainingTime.add((()=>{if("function"===typeof this.onAdRemainingTimeChange)try{this.onAdRemainingTimeChange()}catch(Bv){console.error(Bv)}}))}getCurrentContentType(){const e=yl(this);if(void 0!==e&&null!==e)return e.getCurrentContentType()}usesVideoNode(){const e=yl(this);if(void 0!==e&&null!==e)return e.usesVideoNode()}play(e){void 0===e&&(e=0===yl(this).getVolume());const t=async()=>{yl(this).setMuted("restricted"!==yl(this).autoplayAbilityResult.getValue().autoplayAbility||e);try{await yl(this).play()}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"PUBLIC_CONTROLLER_PLAY_ERROR"})})}};void 0===yl(this).getCurrentContentType()?yl(this).onAdPodPlayAdMedia.addOne(t):t()}resume(){this.play()}pause(){yl(this).pause()}skip(){this.stats.log({name:"PublicControllerSkip"}),yl(this).skipAllViewers()}clickThrough(){yl(this).clickThrough({playerHandles:!0,clickSource:"PublicControllerMethodCall",url:void 0})}getPaused(){return yl(this).getPaused()}getMuted(){return 0===yl(this).getVolume()}getVolume(){return yl(this).getVolume()}setVolume(e){yl(this).setVolume(e)}getDuration(){return yl(this).getDuration()}getAdWidth(){return yl(this).getAdWidth()}getAdHeight(){return yl(this).getAdHeight()}getCurrentTime(){return yl(this).getCurrentTime()}getAdSkippableState(){return yl(this).adSkippableState.getValue()}getAdContentSize(){return yl(this).adContentSize.getValue()}getCurrentViewerAssets(){return yl(this).getCurrentViewerAssets()}setStatsRootFields(e){this.stats.log({name:"UsingSetStatsRootFieldsInPublicController",probability:Cc}),this.stats.setRootFields(e),Wc.setRootFields(e)}destroy(){yl(this).destroy({reason:"stopAd",details:void 0})}setControlsVisibility(e){yl(this).setPublicApiControlsSettings(e)}}{constructor(e){super(e.displayController,e.stats),this.play=e=>(this.params.pauseByPublicMethodSignal.dispatch(!1),super.play(e)),this.resume=()=>(this.params.pauseByPublicMethodSignal.dispatch(!1),super.resume()),this.pause=()=>(this.params.pauseByPublicMethodSignal.dispatch(!0),super.pause()),this.params=e}}let pw=!1;const mw={stickTo:"auto",stickyColorScheme:"dark"},Aw=e=>"bottom-right"===e||"top-right"===e||"bottom-left"===e||"top-left"===e;class gw extends Hc{constructor(){super(),this.initialState="Inline",this.currentState=this.initialState,this.transitionWays={Inline:"Detached",Detached:"Sticky",Sticky:"Attached",Attached:"Inline"},this.onStateChange=[],this.subscribeForStateTransition=(e,t)=>this.subscribeForStateChange((i=>{if(e.previousState===i.previousState&&e.nextState===i.nextState)return t(i)})),this.addDestroyHandler((()=>{this.onStateChange.length=0}))}getCurrentState(){return this.currentState}isWithinTransition(){return void 0!==this.nextState}getNextState(){return this.nextState}subscribeForStateChange(e){return this.onStateChange.push(e),()=>{this.onStateChange=Vc(this.onStateChange,(t=>t!==e))}}isValidTransition(e){return e===this.transitionWays[this.currentState]}async setState(e){if(!this.isValidTransition(e))throw new ReferenceError("StickyFSA: invalid transition from ["+this.currentState+"] to ["+e+"]");const t=this.currentState;this.nextState=e;for(const i of this.onStateChange)await i({previousState:t,nextState:e});this.currentState=e,this.nextState=void 0}}var vw=e(9881),_w=e.n(vw);const{locals:yw}=_w(),fw=e(4738);class Sw extends Hc{constructor(e){super(),this.setDescription=d,this.description="",this.withDisabledAnimation=e=>{this.setAnimationEnabled(!1),e(),this.params.layout.stickyWrapperElement.offsetLeft,this.setAnimationEnabled(!0)},this.waitForAnimationEnd=()=>{const e=Qu(400,window),t=e=>e.target===this.params.layout.stickyWrapperElement&&("width"===e.propertyName||"transform"===e.propertyName);let i=d;const o=new Promise((e=>i=q({element:this.params.layout.stickyWrapperElement,eventName:"transitionend",listener:i=>{t(i)&&e()}}))),n=()=>{e.clear(),i()};return this.addDestroyHandler(n),Promise.race([e.promise,o]).then(n)},this.params=e,this.render(),this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper,!0),Aw(this.params.stickyConfig.stickTo)?this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__variant__flyroll,!0):this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__variant__covering,!0)}updateAdditionalContentVisibility(){const e=this.params.adContentSize.getValue(),t=Aw(this.params.stickyConfig.stickTo)||(e=>{let{adWidth:t,adHeight:i,windowWidth:o,description:n,isAdaptiveCreative:r}=e;if(!n)return!1;if(r)return!0;const a=t/i*180;return!!he(a)&&a/o<.55})({adWidth:(null==e?void 0:e.width)||0,adHeight:(null==e?void 0:e.height)||0,windowWidth:this.params.win.innerWidth,description:this.description,isAdaptiveCreative:!e||void 0===e.width||void 0===e.height});this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__additionalContent_enabled,t)}setAnimatingStateClassName(e){this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__isAnimating,e)}handleClassNames(){let e=!1,t=!1;switch(this.params.stickyFSA.getNextState()||this.params.stickyFSA.getCurrentState()){case"Inline":case"Attached":e=!0,t=!1;break;case"Detached":e=!1,t=!1;break;case"Sticky":e=!1,t=!0;break;default:throw new Error("unhandled state, should never be executed")}this.setAttachStateClassNames(e),this.setStickyStateClassNames(t)}setAnimationEnabled(e){e?this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__unAnimated,!1):this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__unAnimated,!0)}render(){const e=this.params.layout.stickyWrapperElement,t=e.appendChild(this.renderAdditionalContent()),i=e.appendChild(this.renderCross());this.addDestroyHandler((()=>{l(t),l(i)}))}renderAdditionalContent(){const e=document.createElement("div");if(this.toggleClassName(e,yw.yaInpageAdditionalContent,!0),Aw(this.params.stickyConfig.stickTo)){const t=document.createElement("div");this.toggleClassName(t,yw.yaInpageAdditionalContent__adTitle,!0),t.innerHTML="\u0440\u0435\u043a\u043b\u0430\u043c\u0430",e.appendChild(t)}else"dark"===this.params.stickyConfig.stickyColorScheme?this.toggleClassName(e,yw.yaInpageAdditionalContent_dark,!0):d(),e.appendChild(this.renderDescription()),e.appendChild(this.renderActionButton());const t=document.createElement("div");return this.toggleClassName(t,yw.yaInpageAdditionalContentContainer,!0),t.appendChild(e),t}renderDescription(){var e=this;const t=document.createElement("div");return this.toggleClassName(t,yw.yaInpageAdditionalContent__description,!0),this.addDestroyHandler(q({element:t,eventName:"click",listener:this.params.onActionClick})),this.setDescription=function(i){void 0===i&&(i=""),e.description=i,t.innerText=i,e.updateAdditionalContentVisibility()},t}renderActionButton(){const e=document.createElement("div");this.toggleClassName(e,yw.yaInpageAdditionalContent__buttonClickableArea,!0);const t=document.createElement("div");return this.toggleClassName(t,yw.yaInpageAdditionalContent__button,!0),t.appendChild(e),t.innerText="\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",this.addDestroyHandler(q({element:t,eventName:"click",listener:this.params.onActionClick})),t}renderCross(){const e=document.createElement("div");return this.toggleClassName(e,yw.yaInpageCross,!0),e.innerHTML=fw,this.addDestroyHandler(q({element:e,eventName:"click",listener:this.params.onCrossClick})),e}toggleClassName(e,t,i){const{classList:o}=e;return i?o.add(t):o.remove(t)}toggleStickyWrapperClassName(e,t){return this.toggleClassName(this.params.layout.stickyWrapperElement,e,t)}setStickyStateClassNames(e){if(this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__inline,!e),this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__sticky,e),Aw(this.params.stickyConfig.stickTo)?this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__sticky__flyroll,e):this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__sticky__covering,e),!Aw(this.params.stickyConfig.stickTo))switch(this.params.stickyConfig.stickyColorScheme){case"dark":this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__sticky__covering_color_scheme_dark,e);break;case"light":this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__sticky__covering_color_scheme_light,e);break;default:d()}}setAttachStateClassNames(e){this.toggleStickyWrapperClassName(yw.yaInPageStickyWrapper__detached,!e)}}const Tw={covering:{x:0,y:0},flyroll:{x:32,y:24}};class Ew{constructor(e){this.intrinsicStickPosition={horizontal:"right",vertical:"bottom"},this.params=e,this.actualizeStickPosition(),"auto"===this.params.stickyConfig.stickTo&&this.params.stickyFSA.subscribeForStateTransition({previousState:"Inline",nextState:"Detached"},(()=>this.actualizeStickPosition()))}getViewDimensions(){const{clientHeight:e,clientWidth:t}=this.params.win.document.documentElement;return{height:e,width:t}}getStickyDimensions(){const e=this.getViewDimensions().width;return Aw(this.params.stickyConfig.stickTo)&&e>=1600?{width:360,height:202}:{width:320,height:180}}getPlaceholderDimensions(){const{width:e,height:t}=this.params.getPlaceholderDOMRect();return{width:e,height:t}}fromDOMDimensionsToCSSDimensions(e){return{width:e.width+"px",height:e.height+"px"}}getTransformStyles(){const{intrinsicStickPosition:e}=this,t=Aw(this.params.stickyConfig.stickTo)?Tw.flyroll:Tw.covering,i={x:Aw(this.params.stickyConfig.stickTo)?"right"===e.horizontal?1:-1:0,y:"bottom"===e.vertical?1:-1},{origin:o,scale:n,translation:r}=(e=>{let{direction:t,offsets:i,getInpageCurrentRect:o,getViewDimensions:n,getStickyDimensions:r,getPlaceholderDimensions:a}=e;const s=i.x*-t.x,l=i.y*-t.y,d=o(),c=d.left,u=d.top,h=n(),p={x:(-1===t.x?0:h.width-d.width)-c+s,y:(-1===t.y?0:h.height-d.height)-u+l},m=r(),A=a(),g={x:m.width/A.width,y:m.height/A.height};return{origin:(1===t.y?"bottom":0===t.y?"center":"top")+" "+(1===t.x?"right":0===t.y?"center":"left"),translation:p,scale:g}})({direction:i,offsets:t,getInpageCurrentRect:()=>this.params.getStickyWrapperDOMRect(),getViewDimensions:()=>this.getViewDimensions(),getStickyDimensions:()=>this.getStickyDimensions(),getPlaceholderDimensions:()=>this.getPlaceholderDimensions()});return{transformOrigin:o,transform:"translate("+r.x+"px, "+r.y+"px) scale("+n.x+", "+n.y+")"}}getInlineStateRect(){const e="top"===this.intrinsicStickPosition.vertical?"0":"",t="bottom"===this.intrinsicStickPosition.vertical?"0":"",i="left"===this.intrinsicStickPosition.horizontal?"0":"";return fl({top:e,right:"right"===this.intrinsicStickPosition.horizontal?"0":"",bottom:t,left:i},this.fromDOMDimensionsToCSSDimensions(this.getPlaceholderDimensions()))}getDetachedStateRect(){const{intrinsicStickPosition:e}=this,{left:t,right:i,top:o,bottom:n}=this.params.getStickyWrapperDOMRect(),{width:r,height:a}=this.getViewDimensions(),s="bottom"===e.vertical?a-n+"px":"";return fl({top:"top"===e.vertical?o+"px":"",bottom:s,left:"left"===e.horizontal?t+"px":"",right:"right"===e.horizontal?r-i+"px":""},this.fromDOMDimensionsToCSSDimensions(this.getPlaceholderDimensions()))}getStickyStateRect(){const{intrinsicStickPosition:e}=this,t=Aw(this.params.stickyConfig.stickTo)?Tw.flyroll:Tw.covering,i="top"===e.vertical?t.y+"px":"",o="bottom"===e.vertical?t.y+"px":"",n="left"===e.horizontal?t.x+"px":"",r="right"===e.horizontal?t.x+"px":"",a=this.getStickyDimensions();return{top:i,right:r,bottom:o,left:n,width:Aw(this.params.stickyConfig.stickTo)?a.width+"px":"100%",height:a.height+"px"}}getAttachedStateRect(){const{intrinsicStickPosition:e}=this,{left:t,right:i,top:o,bottom:n}=this.params.getPlaceholderDOMRect(),{left:r,right:a,top:s,bottom:l,width:d,height:c}=this.params.getStickyWrapperDOMRect();return{top:"top"===e.vertical?s-o+"px":"",bottom:"bottom"===e.vertical?n-l+"px":"",left:"left"===e.horizontal?r-t+"px":"",right:"right"===e.horizontal?i-a+"px":"",width:d+"px",height:c+"px"}}actualizeStickPosition(){const{stickTo:e}=this.params.stickyConfig;if(this.intrinsicStickPosition={vertical:"top-right"===e||"top-left"===e||"top"===e?"top":"bottom",horizontal:"bottom-right"===e||"top-right"===e?"right":"left"},"auto"!==e)return;const t=this.params.getInlineContainerTopCornerPosition()<=0;this.intrinsicStickPosition.vertical=t?"top":"bottom"}}const bw=["position","left","top","bottom","width","height","background","display","zIndex","transform"];class Cw{constructor(e){this.storedStyles=[],this.elements=e}save(){Jl(this.elements,(e=>{this.storedStyles.push(this.extract(e))}))}restore(){Jl(this.elements,((e,t)=>{Lr(e,this.storedStyles[t])})),this.storedStyles.length=0}extract(e){return fd(bw,((t,i)=>(t[i]=e.style[i],t)),{})}}class Pw extends Hc{constructor(e){super(),this.handleWindowResize=nw((()=>{this.stickyInpageLayout.updateAdditionalContentVisibility()})),this.setDescription=e=>this.stickyInpageLayout.setDescription(e),this.handleFromInlineToDetachTransition=()=>{this.stylesStore.save(),this.stickyInpageLayout.updateAdditionalContentVisibility(),this.stickyInpageLayout.withDisabledAnimation((()=>{Lr(this.params.layout.stickyWrapperElement,Sl({position:"fixed"},this.stickyPositioning.getDetachedStateRect()))})),Aw(this.stickyConfig.stickTo)||Lr(this.params.layout.wrapperElement,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getPlaceholderDimensions())),this.stickyInpageLayout.handleClassNames()},this.handleFromDetachToStickyTransition=async()=>{Aw(this.stickyConfig.stickTo)?Lr(this.params.layout.stickyWrapperElement,this.stickyPositioning.getTransformStyles()):(Lr(this.params.layout.stickyWrapperElement,this.stickyPositioning.getStickyStateRect()),Lr(this.params.layout.wrapperElement,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getStickyDimensions()))),this.stickyInpageLayout.setAnimatingStateClassName(!0),await this.stickyInpageLayout.waitForAnimationEnd(),this.stickyInpageLayout.setAnimatingStateClassName(!1),this.stickyInpageLayout.withDisabledAnimation((()=>{Lr(this.params.layout.stickyWrapperElement,Sl({transform:"",transformOrigin:""},this.stickyPositioning.getStickyStateRect()))})),this.stickyInpageLayout.handleClassNames()},this.handleFromStickyToAttachTransition=async()=>{this.stickyInpageLayout.withDisabledAnimation((()=>{Lr(this.params.layout.stickyWrapperElement,Sl({position:"absolute"},this.stickyPositioning.getAttachedStateRect()))})),this.stickyInpageLayout.handleClassNames()},this.handleFromAttachToInlineTransition=async()=>{this.stickyInpageLayout.handleClassNames(),Aw(this.stickyConfig.stickTo)?(this.stickyInpageLayout.withDisabledAnimation((()=>{Lr(this.params.layout.stickyWrapperElement,this.stickyPositioning.getInlineStateRect())})),this.stickyInpageLayout.withDisabledAnimation((()=>{Lr(this.params.layout.stickyWrapperElement,this.stickyPositioning.getTransformStyles())})),Lr(this.params.layout.stickyWrapperElement,{transform:""},!0)):(Lr(this.params.layout.stickyWrapperElement,this.stickyPositioning.getInlineStateRect()),Lr(this.params.layout.wrapperElement,this.stickyPositioning.fromDOMDimensionsToCSSDimensions(this.stickyPositioning.getPlaceholderDimensions()))),this.stickyInpageLayout.setAnimatingStateClassName(!0),await this.stickyInpageLayout.waitForAnimationEnd(),this.stickyInpageLayout.setAnimatingStateClassName(!1),this.stickyInpageLayout.withDisabledAnimation((()=>this.stylesStore.restore()))},this.params=e,this.win=this.params.layout.containerWindow,this.stickyFSA=new gw,this.addDestroyHandler((()=>this.stickyFSA.destroy())),this.stickyConfig=Sl({},mw,zs(this.params.stickyConfig)),this.stickyInpageLayout=new Sw({stickyFSA:this.stickyFSA,layout:this.params.layout,win:this.win,stickyConfig:this.stickyConfig,adContentSize:this.params.adContentSize,onActionClick:this.params.onActionClick,onCrossClick:this.params.onCrossClick}),this.addDestroyHandler((()=>this.stickyInpageLayout.destroy())),this.stickyPositioning=new Ew({stickyFSA:this.stickyFSA,getInlineContainerTopCornerPosition:()=>this.params.layout.stickyWrapperElement.getBoundingClientRect().top,stickyConfig:this.stickyConfig,win:this.win,getPlaceholderDOMRect:()=>this.params.layout.placeholderElement.getBoundingClientRect(),getStickyWrapperDOMRect:()=>this.params.layout.stickyWrapperElement.getBoundingClientRect()}),this.stylesStore=new Cw([this.params.layout.stickyWrapperElement,this.params.layout.wrapperElement]),this.addDestroyHandler(q({element:this.win,eventName:"resize",listener:this.handleWindowResize})),this.stickyFSA.subscribeForStateTransition({previousState:"Inline",nextState:"Detached"},this.handleFromInlineToDetachTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Detached",nextState:"Sticky"},this.handleFromDetachToStickyTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Sticky",nextState:"Attached"},this.handleFromStickyToAttachTransition),this.stickyFSA.subscribeForStateTransition({previousState:"Attached",nextState:"Inline"},this.handleFromAttachToInlineTransition)}async goSticky(){await this.stickyFSA.setState("Detached"),await this.stickyFSA.setState("Sticky")}async unSticky(){await this.stickyFSA.setState("Attached"),await this.stickyFSA.setState("Inline")}}class ww extends Hc{constructor(e){var t,i;super(),this.replayMode=null,this.pausedByContainerVisibility=!1,this.pausedByDocumentVisibility=!1,this.isSticky=new hh(!1),this.documentVisibility=new hh(!1),this.pauseByPublicMethodSignal=new hh(!1),this.packshotPlayingState=new hh(!1),this.showAds=async e=>{var t;const{layout:i}=this.params,[o]=e.slice(-1),{vastAd:n}=o,r=null!=(t=n.clickUrlData.vastClickUrl)?t:"",a=ea(n,this.params.layout.placeholderSize.getValue());a&&this.enableCustomPackshot&&(oc("InPage: packshot image found for manual mode ["+a+"]"),this.displayController.onAdPodThirdQuartile.addOne((()=>{Se(a)})));try{let t;if(this.displayControllerOnAdEndPromise||await this.initAdForPlaying(e),this.displayController.onAdMediaStart.addOne((e=>{let{viewer:i}=e;t=i})),"restricted"===this.displayController.autoplayAbilityResult.getValue().autoplayAbility?(this.displayController.setSkinControlHideReason("play",!0,"INPAGE_RETAINS_CONTROL"),this.displayController.onAdMediaStart.add((()=>{(this.displayController.getViewersWithVideoCountBeforeCurrent()>0||"restricted"!==this.displayController.autoplayAbilityResult.getValue().autoplayAbility)&&this.displayController.setSkinControlHideReason("play",!1,"INPAGE_RETAINS_CONTROL")})),oc("inPage: wait for media activation event to play ad"),this.displayController.setMuted(!1),this.stats.log({name:"InPageWaitingForUserGesture",data:{autoplayAbility:this.displayController.autoplayAbilityResult.getValue()}})):(oc("inPage: start to play ad"),this.displayController.play().catch((e=>{this.stats.error({error:new Ml(e,{code:"InPageOnReadyPlayError"})})})),this.stats.log({name:"InPageAutoplay",data:{autoplayAbility:this.displayController.autoplayAbilityResult.getValue()}})),await this.displayControllerOnAdEndPromise,this.displayControllerOnAdEndPromise=void 0,"auto"===this.replayMode)return;if(this.enableCustomPackshot){const e=i.packshotContainer;i.setPackshotContainerVisibility(!0),i.setSlotVisibility(!1),oc("inPage: ad played. show packshot");const{disableObjectFit:o,disableOverlay:s,disableButton:l,disableTitle:d,isEnabled:c}=this.params.adConfig.packshotSettings||{};a?this.stats.log({name:"InPagePackshotBackgroundImage"}):this.displayController.isLastAdPodRetainedMedia()?(o||(i.videoSlot.style.objectFit="cover"),this.stats.log({name:"InPagePackshotBackgroundLoopedVideo"})):this.stats.log({name:"InPagePackshotBackgroundEmpty",data:{adParametersObject:n.adParametersObject},probability:1});const u=!0===l?void 0:this.getThemeEmptyParameters(r,n),{title:h,hasTitle:p}=Fe(n.adParametersObject),m=this.displayController.isLastAdPodRetainedMedia()?this.displayController.videoNodeController:void 0;if(!1!==c){const o=new wy({parent:e,parentSize:i.videoSlotContainerSize,packshotNewDesignMode:"OFF",videoNodeController:m,imageUrl:a,win:i.containerWindow,clickUrl:r,disableOverlay:s,disableTitle:d,descriptionText:n.description,duration:1/0,title:!1===p?void 0:h,themeEmptyParameters:u,lang:this.displayController.playbackParameters.lang,openClickThroughUrl:()=>{var e;null==(e=t)||e.clickThrough({url:r,clickSource:"InPagePackshot",playerHandles:!0})},timeToSkip:this.displayController.timeToSkip,controlsVisibility:this.displayController.combinedSkinControlsVisibility,logStatsEvent:this.stats.log,faviconSrc:this.displayController.faviconSrc});o.show(),this.packshotPlayingState.add((e=>{o.setPlaying(e)})),this.addDestroyHandler((e=>{let{reason:t}=e;"unload"!==t?o.destroy({reason:"stopAd",details:void 0}):o.destroy({reason:"unload",details:void 0})}))}}else oc("inPage: finish playing ad"),this.isSticky.getValue()&&await this.turnOffStickyMode({animated:!0}),this.destroy({reason:"adComplete",details:void 0})}catch(Mw){this.destroy(Mw)}},this.handleDocumentVisibilityChange=e=>{this.displayController.getPaused()||e?e&&this.pausedByDocumentVisibility&&(oc("inPage: resume by document visibility"),this.displayController.resume(),this.pausedByDocumentVisibility=!1,this.stats.log({name:"InPageDocumentVisibilityResume"})):(oc("inPage: pause since document is hidden"),this.displayController.pause(),this.pausedByDocumentVisibility=!0,this.stats.log({name:"InPageDocumentVisibilityPause"}))},this.handleVisibilityChange=e=>{this.documentVisibility.getValue()&&(this.packshotPlayingState.dispatch(e),e?this.stickyInPageController&&this.canChangeStickyState({willBeSticky:!1})?(oc("inPage: go into inline since container is visible"),this.changeStickyState({willBeSticky:!1})):!this.isSticky.getValue()&&this.pausedByContainerVisibility&&this.displayController.getPaused()&&(oc("inPage: pause playback since container is visible"),this.pausedByContainerVisibility=!1,this.displayController.resume(),this.stats.log({name:"InPageElementVisibilityResume"})):this.stickyInPageController&&this.canChangeStickyState({willBeSticky:!0})?(oc("inPage: go into sticky since container is hidden"),this.changeStickyState({willBeSticky:!0})):this.isSticky.getValue()||this.pausedByContainerVisibility||this.displayController.getPaused()||(oc("inPage: pause since container is hidden"),this.pausedByContainerVisibility=!0,this.displayController.pause(),this.stats.log({name:"InPageElementVisibilityPause"})))},this.onceWhenCanShowInpage=()=>{if("function"===typeof this.publicController.onSlotVisible)try{this.publicController.onSlotVisible()}catch(Bv){console.error(Bv)}},this.handleStickyInpageCrossClick=()=>{this.stickyInPageController&&(oc("inPage: handle cross click"),this.stats.log({name:"InPageStickyCrossClick"}),this.turnOffStickyMode({animated:!0}),this.placeholderVisibility.getValue()||this.displayController.getPaused()||(this.pausedByContainerVisibility=!0,this.displayController.pause()))},this.makeStickAction=async e=>{try{this.displayController.disableResizeHandling(),await e(),this.displayController.enableResizeHandling()}catch(Mw){this.stats.error({error:new Ml(Mw,{code:"InPageOnStickError"})})}},this.handlePauseByMethodCall=e=>{e&&this.isSticky.getValue()&&(oc("inPage: set to inline mode because of pause"),this.changeStickyState({willBeSticky:!1}))},this.params=e,oc("inPage: run constructor"),this.addDestroyHandler((e=>{oc("inPage: destroy error=["+JSON.stringify(e)+"]")}));const{layout:o,adConfig:n,initialContainerRect:r,stats:a}=e;this.stats=a;const{containerElement:s,placeholderElement:l,placeholderSize:d,videoSlotContainerSize:c,wrapperElement:u}=o;this.replayMode="replayMode"in n?n.replayMode:null,this.isContainerSizeFixed=r.height>0,oc("inPage: isContainerSizeFixed=["+this.isContainerSizeFixed+"] initialContainerRect=["+JSON.stringify(r)+"]"),this.isContainerSizeFixed?(Lr(l,{height:"100%"}),Lr(s,{height:"100%"})):(oc("inPage: adjust to default ad size"),Tl({placeholderElement:l,placeholderWidth:d.getValue().width,adContentSize:ow})),this.placeholderVisibilitySlot=null!=(t=n.visibilitySlot)?t:l;const h=new af(u),p=new PS(u,{numberOfMeasurementSteps:10,enableTrackVisibility:vS(window)&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_IMPRESSIONS_CONSIDER_TRACK_VISIBILITY")}),m=new PS(this.placeholderVisibilitySlot,{numberOfMeasurementSteps:10,enableTrackVisibility:vS(window)&&"TRUE"===Uc.getFlagValueAndActivateTestId("VAS_IMPRESSIONS_CONSIDER_TRACK_VISIBILITY")}),A=Cn([this.isSticky,m.totalVisibilityRatioValueSignal,p.totalVisibilityRatioValueSignal],((e,t,i)=>e?i:t)),g=Cn([this.isSticky,d,h.onResize],((e,t,i)=>e?i:t));this.addDestroyHandler((()=>{h.destroy(),p.destroy(),m.destroy(void 0),A.teardown(),g.teardown()}));const v=null!=(i=n.visibilitySlot)?i:this.placeholderVisibilitySlot;let _;if(n.visibilitySlot){const e=new af(n.visibilitySlot);_=e.onResize,this.addDestroyHandler((()=>{e.destroy()}))}else _=g.valueSignal;const y={element:v,size:_,visibilityRatio:A.valueSignal};this.enableCustomPackshot="manual"===this.replayMode&&!n.enableInfinityPackshot;let f={};if(this.enableCustomPackshot)f={isEnabled:!1};else if(n.enableInfinityPackshot){var S;f=null!=(S=n.packshotSettings)?S:{}}const T=El({},n,{backgroundBlur:!1,packshotSettings:f}),E=new ES({config:T,videoNode:o.videoSlot,layoutSlot:o.layoutSlot,backgroundSlot:o.backgroundContainer,visibilitySlotParameters:y,skinParameters:{renderSkinFunction:NP,skinVariant:"videoInCombo"},retainLastMediaAfterPlayback:this.enableCustomPackshot,stats:a});this.displayController=E,this.subscribeDisplayControllerEvents(E);const b=new cw(this.placeholderVisibilitySlot,this.params.layout.containerElement);this.addDestroyHandler((()=>b.destroy()));const C=Cn([b.getVisualVisibilitySensor(),m.totalVisibilityRatioValueSignal],((e,t)=>e&&t>=Jg));this.addDestroyHandler((()=>{C.teardown()})),this.placeholderVisibility=C.valueSignal;const P=new hh(dn(o.videoSlot),zr);if(this.addDestroyHandler(Fa(o.videoSlot,(e=>P.dispatch(e)))),this.addDestroyHandler((()=>{P.removeAll()})),!this.isContainerSizeFixed){const e=e=>{Tl({placeholderElement:l,placeholderWidth:d.getValue().width,adContentSize:e})};e(E.adContentSize.getValue()),this.addDestroyHandler(E.adContentSize.add(e))}this.displayController.abuseDisplayStatus.add((e=>{"hidden"===e&&this.displayController.pauseByOpenAbuseScreen.getValue()&&this.placeholderVisibility.getValue()&&this.displayController.resume()})),this.documentVisibility.add(this.handleDocumentVisibilityChange),this.documentVisibility.dispatch(de(o.containerDocument)),this.addDestroyHandler(Xr(o.containerDocument,(e=>this.documentVisibility.dispatch(e)))),this.displayController.setSkinControlHideReason("play",!1,"INPAGE_RETAINS_CONTROL"),this.pauseByPublicMethodSignal.add(this.handlePauseByMethodCall),this.addDestroyHandler((()=>{this.pauseByPublicMethodSignal.removeAll(),this.isSticky.removeAll(),this.packshotPlayingState.removeAll()})),this.publicController=new hw({pauseByPublicMethodSignal:this.pauseByPublicMethodSignal,displayController:this.displayController,stats:a});let{backgroundSlot:w}=n;w||(w=o.backgroundContainer);const O=new Wf({container:w,videoNode:o.videoSlot,input:"InPage",statsLogFunction:this.stats.log});a.log({name:"InitBackgroundBlurInPage"}),n.backgroundSlot?O.setPlaying(!0):this.addDestroyHandler(on([P,c],((e,t)=>{if(void 0===e)return!1;const i=t.width/t.height,o=e.width/e.height-i;return Math.abs(o)>.1}),(e=>{O.setPlaying(e)}))),this.addDestroyHandler((()=>{O.destroy()})),o.makeVisible(),oc("inPage: call constructor callback"),this.processInPage(b).catch((e=>this.destroy({reason:"error",details:e})))}async processInPage(e){const{adConfig:t,layout:o}=this.params,n=e.whenCanShow();oc("inPage: create adLoader");const r=function(e){let{rawAdConfig:t,useDefaultAdPlaybackParameters:o=!1,syntheticVMAPType:n="preroll",adPlacementOptions:r,stats:a}=e;const{adConfig:s,adBreak:l}=function(e){let{adLoaderConfig:t,useDefaultAdPlaybackParameters:i,syntheticVMAPType:o,logStatsEvent:n}=e;const{vastBase64:r}=t,a=al(t,XP),s=il(a),{videoContentId:l}=s,d=rl({},al(s,KP),{videoContentId:ol(l)}),{adBreakType:c}=d;let u,h;if(r&&(d.vast=He(r),n({name:"UsingVastBase64InAdLoaderConfig",probability:Cc})),Ko(c)?h=c:i&&"TRUE"!==Uc.getFlagValueAndActivateTestId("IGNORE_SYNTHETIC_VMAP_TYPE_PARAMETER")&&(n({name:"UsingSyntheticVmapTypeParameter",data:{adLoaderConfig:t,useDefaultAdPlaybackParameters:i,syntheticVMAPType:o}}),Ko(o)&&(h=o)),h){const e=nl(a);u=rl({},ag[h],e)}return{adConfig:d,adBreak:u}}({adLoaderConfig:t,useDefaultAdPlaybackParameters:o,syntheticVMAPType:n,logStatsEvent:a.log}),d=tc.isDebugEnabled?qP():void 0,c=i(s.vmap)?s.vmap:void 0,u=null!=d?d:c;if(i(u)){const e=zP(u);if(0===e.adBreaks.length)throw new Ml({code:"AD_LOADER_AD_CONFIG_VMAP_NO_AD_BREAKS",details:t});return new LP({adConfig:s,vmap:e,adPlacementOptions:r,stats:a,adLoaderConfigType:"vmapString"})}if(s.adFoxParameters){const e=l||rg,t=new xP;return t.adBreaks=[e],new LP({adConfig:s,vmap:t,adBreak:e,adPlacementOptions:r,stats:a,adLoaderConfigType:"adFoxParameters"})}if(s.partnerId){const e=ul(s,r).then((e=>{if(0===e.adBreaks.length)throw new Ml({code:"AD_LOADER_AD_CONFIG_VMAP_NO_AD_BREAKS",details:s});const t=new LP({adConfig:s,vmap:e,adPlacementOptions:r,stats:a,adLoaderConfigType:"vmapLoaded"});return t.addDestroyHandler(Q((()=>{t.destroy()}),Ql)),t}));return e.catch((e=>{a.errorToStats(e)})),e}if(l){const e=new xP;return e.adBreaks=[l],new LP({adConfig:s,vmap:e,adBreak:e.adBreaks[0],adPlacementOptions:r,stats:a,adLoaderConfigType:"syntheticAdBreak"})}throw new Ml({code:"NOT_ENOUGH_PARAMETERS_TO_CREATE_AD_LOADER",details:s})}({rawAdConfig:El({},t,{adBreakType:"inpage"}),adPlacementOptions:this.displayController.getAdPlacementOptions(),stats:this.stats});if(!Boolean(r))throw new Ml({code:"FAILED_TO_CREATE_INPAGE_AD_LOADER",details:void 0});this.addDestroyHandler((()=>{r.destroy()}));const a=r.getInPageBlock();if(!a)throw new Ml({code:"NO_INPAGE_AD_BREAK_IN_VMAP",details:{config:t}});oc("inPage: wait for loadAd");const s=await this.loadAd(r,a);oc("inPage: determine sticky status");const l=(e=>{let{win:t,inPageConfig:i,adBreak:o,isAdFoxStraightforwardSell:n}=e;return"EXP"===Uc.getFlagValueAndActivateTestId("VAS_INPAGE_STICKY_DISABLED_ALL")?{isEnabled:!1,reason:"all ft"}:n&&"EXP"===Uc.getFlagValueAndActivateTestId("VAS_INPAGE_STICKY_DISABLED_ADFOX_STRAIGHTFORWARD_SELL")?{isEnabled:!1,reason:"adfox ft"}:Kg(t)?{isEnabled:!1,reason:"mobile device"}:"boolean"===typeof i.stick?{isEnabled:i.stick,reason:"insertion code"}:{isEnabled:o.stick,reason:"adBreak"}})({win:window,inPageConfig:t,adBreak:a,isAdFoxStraightforwardSell:Gc(s,(e=>e.getIsAdFoxStraightforwardSell()))});l.isEnabled?(oc("inPage: initialize sticky"),this.stickyConfig=El({stickTo:a.stickTo,stickyColorScheme:a.stickyColorScheme},zs(Ws(t))),this.stickyInPageController=new Pw({layout:o,stickyConfig:this.stickyConfig,adContentSize:this.displayController.adContentSize,onActionClick:()=>this.displayController.clickThrough({clickSource:"StickyInPageActionButton",playerHandles:!0,url:void 0}),onCrossClick:this.handleStickyInpageCrossClick}),this.addDestroyHandler((()=>{this.turnOffStickyMode({animated:!1})}))):oc("inPage: sticky turned off"),this.stats.log({name:l.isEnabled?"InPageStickyTurnedOn":"InPageStickyTurnedOff",dailySensors:{reason:l.reason}}),Ou&&(oc("inPage: wait for warming up"),await Promise.race([e.waitForWarmingUpPosition(),n])),oc("inPage: warm up ad"),await this.warmAdUp(s),oc("inPage: wait till visible"),await n,oc("inPage: visibility reached"),this.onceWhenCanShowInpage();let d=this.showAds(s);"auto"===this.replayMode&&this.displayController.onAdEnd.add((async()=>{if(!this.displayController.areAllAdPodsCompleted())return oc("inPage: not all AdPods has been completed, stop auto replay"),void this.destroy({reason:"stopAd",details:void 0});oc("inPage: all AdPods has been completed"),await d,this.isDestroyed||(oc("inPage: play ad again"),this.stats.log({name:"InPageReplayAdAutomatically"}),d=this.showAds(s))}))}subscribeDisplayControllerEvents(e){e.addDestroyHandler((e=>this.destroy(e))),e.onAdPodStart.addOne((async()=>{this.placeholderVisibility.add(Ve((e=>{oc("handle visual state change ["+e+"]"),this.handleVisibilityChange(e)}),400));const e=this.placeholderVisibility.getValue();oc("handle AdPodStart with visualVisibilityValue=["+e+"] visibility=["+this.displayController.visibilitySlotParameters.visibilityRatio.getValue()+"]"),this.handleVisibilityChange(e)})),e.onAdStop.add((()=>{this.displayController.destroy({reason:"stopAd",details:void 0})})),e.onAdMediaStart.add((e=>{var t;let{viewer:i}=e;null==(t=this.stickyInPageController)||t.setDescription(i.mediaAd.vastAd.description)}))}async loadAd(e,t){const i=await e.load(t);return i.length>1&&this.stats.log({name:"InPageHasMultipleMediaAds",data:{mediaAdsCount:i.length}}),i}async initAdForPlaying(e){this.displayControllerOnAdEndPromise=this.displayController.onAdEnd.promise().then(d),await this.displayController.prepareToPlayAd(e)}async warmAdUp(e){const{layout:t}=this.params;this.stats.log({name:"InPageWarmUpStart",data:{relativeCoordinates:Qa(t.videoSlot),verticalScroll:y((()=>t.videoSlot.ownerDocument.scrollingElement.scrollTop))}}),await this.initAdForPlaying(e)}turnOffStickyMode(e){let{animated:t=!0}=e;const i=()=>{this.stickyInPageController&&(this.stickyInPageController.destroy(),this.stickyInPageController=void 0,this.stickyConfig=void 0)},o=this.changeStickyState({willBeSticky:!1,animated:t});return Du(o)?o.then(i):i()}canChangeStickyState(e){let{willBeSticky:t}=e;return!!this.stickyInPageController&&this.isSticky.getValue()!==t&&(t&&pw?(oc("InPage: cannot transition INTO sticky because of lock"),!1):t&&this.displayController.getPaused()?(oc("InPage: cannot transition INTO sticky because of paused state"),!1):(oc("InPage: can change sticky state: return willBeSticky="+t),!0))}changeStickyState(e){let{willBeSticky:t,animated:i=!0}=e;const{stickyInPageController:o}=this;if(!o)return;const n=()=>{const e=this.stickyConfig.stickTo;this.stats.log({name:"InPageChangeStickyState",data:{willBeSticky:t,stickTo:e}});const n=!t;if(this.displayController.setSkinControlHideReason("timeline",n,"INPAGE_STICKY_RETAINS_CONTROL"),this.displayController.setSkinControlHideReason("abuse",n,"INPAGE_STICKY_RETAINS_CONTROL"),this.displayController.setSkinControlHideReason("adLabel",n,"INPAGE_STICKY_RETAINS_CONTROL"),oc("inPage: change sticky state, willBeSticky=>"+t),t)return pw=!0,this.isSticky.dispatch(!0),this.displayController.setBlurDisplay(!1),i?o.goSticky():void 0;{const e=()=>{this.displayController.setBlurDisplay(!0)};pw=!1,this.isSticky.dispatch(!1);const t=i?o.unSticky():void 0;return t?t.then(e).catch(J):e(),t}};return i?this.makeStickAction(n):n()}getThemeEmptyParameters(e,t){const i=this.displayController.themeEmptyParameters.getValue();return void 0!==i?i:{ageRestriction:void 0,body:void 0,clickUrl:e,greenUrl:void 0,label:t.adParametersObject&&Ft(t.adParametersObject)||Wu("LEARN_MORE",this.params.adConfig.lang),title:void 0}}}const{locals:Ow}=_w();class Iw extends Hc{constructor(e){super(),this.containerElement=e,this.containerWindow=y((()=>e.ownerDocument.defaultView),(e=>{Wc.error({error:new Ml(e,{code:"CANNOT_GET_INPAGE_LAYOUT_PLACEHOLDER_ELEMENT_WINDOW",details:void 0})})}))||window,this.containerDocument=this.containerWindow.document;const t=this.containerDocument.createElement("div");t.classList.add(Ow.yaInPagePlaceholderElement),this.placeholderElement=t;const i=this.containerDocument.createElement("div");Lr(i,{width:"100%",height:"100%"}),this.stickyWrapperElement=i,this.placeholderElement.appendChild(this.stickyWrapperElement);const o=this.containerDocument.createElement("div");o.classList.add(Ow.yaInPageWrapper),this.wrapperElement=o,this.stickyWrapperElement.appendChild(this.wrapperElement),this.backgroundContainer=document.createElement("div"),Lr(this.backgroundContainer,{position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",margin:"0px",padding:"0px",overflow:"hidden"}),this.wrapperElement.appendChild(this.backgroundContainer),this.videoSlotContainer=this.containerDocument.createElement("div"),this.videoSlotContainer.classList.add(Ow.InPageLayout__videoSlotContainer),this.wrapperElement.appendChild(this.videoSlotContainer),this.layoutSlot=this.containerDocument.createElement("div"),this.layoutSlot.classList.add(Ow.InPageLayout__slot),this.wrapperElement.appendChild(this.layoutSlot),this.packshotContainer=this.containerDocument.createElement("div"),this.packshotContainer.classList.add(Ow.InPageLayout__packshotContainer),this.wrapperElement.appendChild(this.packshotContainer),this.videoSlot=(e=>{const t=function(e){return e.createElement("video")}(this.containerDocument);var i;return t.setAttribute("x-webkit-airplay","allow"),t.autoplay=!1,t.volume=.5,t.muted=!0,t.preload="auto",t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.classList.add(Ow.InPageLayout__videoSlot),(i=t).setAttribute("playsinline","playsinline"),i.setAttribute("webkit-playsinline","webkit-playsinline"),t})(),this.videoSlotContainer.appendChild(this.videoSlot),this.containerElement.appendChild(this.placeholderElement);const n=Cr(this.containerElement,_w().toString());this.addDestroyHandler((()=>{l(n)}));const r=new af(t);this.placeholderSize=r.onResize,this.addDestroyHandler((()=>r.destroy()));const a=new af(this.videoSlotContainer);this.videoSlotContainerSize=a.onResize,this.addDestroyHandler((()=>a.destroy()))}makeVisible(){Lr(this.placeholderElement,{visibility:"visible"})}setPackshotContainerVisibility(e){Lr(this.packshotContainer,{display:e?"block":"none"})}setSlotVisibility(e){Lr(this.layoutSlot,{display:e?"block":"none"})}}const kw=n(window.WeakSet)?new window.WeakSet:[],Dw={place(e){const t=e;return $l(kw)?kw.push(t):kw.add(t)},free(e){const t=e;return $l(kw)?kw.splice(kw.indexOf(t),1):kw.delete(t)},isFree(e){const t=e;return $l(kw)?-1===kw.indexOf(t):!kw.has(t)}},Nw=e=>{if(!o(e))throw new Ml({code:"NO_AD_CONFIG_IN_INPAGE",details:void 0});const t=_a(kt(e),{controlsVisibility:{skip:!1}});let i,n=e.vastUrl;if(e.vastUrl&&ye(e.vastUrl)&&(n=R(e.vastUrl,{tags:"inpage"})),Rl(e.visibilitySlot))i=e.visibilitySlot,Wc.log({name:"UsingVisibilitySlot",data:{config:e}});else if(void 0!==e.visibilitySlot)throw new Ml({code:"VISIBILITY_SLOT_IS_NOT_ELEMENT_OR_UNDEFINED",details:{config:e}});return bl({},e,{visibilitySlot:i,controlsSettings:t,vastUrl:n,backgroundBlur:!0,videoTimeout:bf,vpaidTimeout:Cf})},Rw=(tc.hardcodedParams.adsdkgrforced?100:1)/100,Vw="https://"+Zd+"/pcode-static/resources/74/gr/gr.js",Lw=(e=>"requestIdleCallback"in e?{requestIdleCallback:e.requestIdleCallback.bind(e),cancelIdleCallback:e.cancelIdleCallback.bind(e)}:(e=>({requestIdleCallback:function(t,i){var o;void 0===i&&(i={});const n=null!=(o=i.timeout)?o:1,r=e.performance,a=r.now();return e.setTimeout((function(){t({get didTimeout(){return!Boolean(i.timeout)&&r.now()-a-1>n},timeRemaining:function(){return Math.max(0,r.now()-a+1)}})}),1)},cancelIdleCallback:function(t){e.clearTimeout(t)}}))(e))(window),{requestIdleCallback:xw,cancelIdleCallback:Bw}=Lw;!function(e,t){const i=window;Dm(i)?Wc.log({name:"InitModuleBrokeInIE",probability:1}):(Uc.getFlagValueAndActivateTestId("VAS_TURN_OFF_ES5"),Wc.log({name:"ModuleInited",dailySensors:{moduleName:e,es2017:!0}}),Va(i,{videoAd:{loadedModules:{[e]:t}}},"ya"),!0===(!tc.grWasSent&&!(tc.VAS_USER_SESSION_RANDOM>=bc)&&!(tc.VAS_USER_SESSION_RANDOM>=Rw)&&"TRUE"!==Uc.getFlagValueAndActivateTestId("VAS_DO_NOT_LOAD_GR")&&(tc.grWasSent=!0,!0))&&xw((()=>{(e=>{const t=$m.createHidden({parentElement:e,scope:"GREEDJS_IFRAME"});if(!Boolean(t))return void Wc.log({name:"GrCannotCreateIframe",probability:1});const i=()=>{t.destroy(void 0)};(async e=>{var t;const i=Date.now(),o=kc(e),n=Vw,r=o?o(n):n;try{await lo({src:r,win:e}).promise}catch(Mw){return void Wc.log({name:"GrCannotLoadScript",data:{error:Mw},probability:1})}const a=Date.now(),s=a-i,l=e,d=null!=(t=l.PGreed)?t:l.Greed;if(d)try{const e=await d.safeGet(2e3),t=Date.now()-a;Wc.log({name:"GrData",data:{data:e,spentOnGet:t,spentOnScriptLoad:s},probability:1})}catch(Mw){Wc.log({name:"GrGetError",data:{error:Mw},probability:1})}else Wc.log({name:"GrNoVariable",probability:1})})(t.iframe.contentWindow).then(i).catch(i)})(window.document.body)})))}("InPage",{addInPageVideo:(e,t,i)=>{oc("inPage: add inpage video");const o="function"===typeof i?_e(i,"INPAGE_CALLBACK_ERROR"):d;let n;try{n=((e,t)=>{const i=new Lc(zc);oc("inPage: normalizeInPageConfig");const o=Nw(t);oc("inPage: get container element");const n="string"===typeof e?window.document.getElementById(e):e;if(!n)throw new Ml({code:"CANNOT_FIND_INPAGE_CONTAINER_ELEMENT",details:{containerElementOrId:String(e)}});if(!Dw.isFree(n))throw new Ml({code:"INPAGE_CONTAINER_USED_TWICE",details:{containerElementOrId:String(e)}});Dw.place(n);const r=n.getBoundingClientRect();if(0===r.width)throw new Ml({code:"INPAGE_CONTAINER_ZERO_WIDTH",details:{containerElementOrId:String(e),containerRect:r}});const a=n.ownerDocument.defaultView,s=Hr(n);let l;(function(e){void 0===e&&(e=window);try{const t=e.document;return!!Boolean(t.body.attachShadow)&&Zo(function(e,t){try{if(f(e.attachShadow))return e.attachShadow({mode:"open"});if(f(e.createShadowRoot))return e.createShadowRoot();if(f(e.webkitCreateShadowRoot))return e.webkitCreateShadowRoot()}catch(Bv){}return null}(t.createElement("div")))}catch(t){return!1}})(a)&&!s&&i.error({error:new Ml({code:"INPAGE_CONTAINER_ELEMENT_NOT_SUPPORTS_SHADOW",details:{containerElementOrId:String(e),containerHTML:y((()=>n.outerHTML))}})}),oc("inPage: create InPageLayout"),s?l=s:(l=document.createElement("div"),n.appendChild(l));const d=new Iw(l);return d.addDestroyHandler((()=>{Dw.free(n)})),{layout:d,adConfig:o,initialContainerRect:r,containerElementByParams:n,stats:i}})(e,t)}catch(Mw){const t=Ul(Mw);return oc("inPage: prepareInPageParameters error=["+Mw+"]"),Re(t),void o(t)}const{stats:r}=n;r.log({name:"AddInPageVideo",data:{adConfig:t,containerElementOrId:String(e),containerRect:n.initialContainerRect}});try{const e=new ww(n);oc("inPage: call public callback"),o(e.publicController),e.addDestroyHandler((e=>{l(n.containerElementByParams),n.layout.destroy(),"error"===e.reason&&e.details&&(Re(e.details),o(e.details))})),e.addDestroyHandler(Q((()=>{e.destroy({reason:"unload",details:void 0})}),Ql))}catch(Mw){const t=Mw;oc("inPage: create InPage error=["+t+"]"),r.error({error:new Ml(Mw,{code:"CREATE_INTERNAL_INPAGE_INSTANCE_ERROR",details:void 0})}),o(t)}},activateTestIds:Uc.activateExternalTestIds,subscribeOnTestIdActivated:e=>a(e)?Uc.onTestIdActivated.add(e):d})}()}();